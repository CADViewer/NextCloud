{"version":3,"file":"cadviewer-src_components_SelectVersionModal_vue.js?v=a78b213ee4f77c4931ad","mappings":"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","sources":["webpack:///cadviewer/src/components/FileVersion.vue?vue&type=style&index=0&id=15737242&prod&scoped=true&lang=scss","webpack:///cadviewer/src/components/SelectVersionModal.vue?vue&type=style&index=0&id=527ae786&prod&lang=scss&scoped=true","webpack://cadviewer/./src/components/SelectVersionModal.vue?0e4f","webpack://cadviewer/./src/components/FileVersion.vue?e0bd","webpack:///cadviewer/src/components/FileVersion.vue","webpack:///cadviewer/src/components/FileVersion.vue?vue&type=script&lang=js","webpack://cadviewer/./src/components/FileVersion.vue?2d77","webpack://cadviewer/./src/components/FileVersion.vue?9f6f","webpack:///cadviewer/src/utils/fetchFileVersions.js","webpack:///cadviewer/src/components/SelectVersionModal.vue","webpack:///cadviewer/src/components/SelectVersionModal.vue?vue&type=script&lang=ts","webpack://cadviewer/./src/components/SelectVersionModal.vue?db7a","webpack://cadviewer/./src/components/SelectVersionModal.vue?ef53"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.version[data-v-15737242]{display:flex;flex-direction:row;cursor:pointer;padding:8px;border-radius:8px;margin:4px 8px}.version.disabled[data-v-15737242]{cursor:not-allowed}.version.disabled *[data-v-15737242]{cursor:not-allowed !important}.version.disabled[data-v-15737242]:hover{background-color:rgba(0,0,0,0) !important}.version[data-v-15737242]:hover{background-color:var(--color-background-hover)}.version__content[data-v-15737242]{flex:1 1 auto;width:0;margin:auto 0;padding-left:8px;cursor:pointer}.version__title[data-v-15737242]{font-weight:bold;text-overflow:ellipsis;color:var(--color-main-text);cursor:pointer}.version__info[data-v-15737242]{display:flex;flex-direction:row;align-items:center;gap:.5rem;text-overflow:ellipsis;color:var(--color-text-maxcontrast);cursor:pointer}.version__info__size[data-v-15737242]{color:var(--color-text-lighter);cursor:pointer}.version__image[data-v-15737242]{width:3rem;height:3rem;border:1px solid var(--color-border);border-radius:var(--border-radius-large);display:flex;justify-content:center;color:var(--color-text-light);cursor:pointer}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/FileVersion.vue\"],\"names\":[],\"mappings\":\"AACA,0BACC,YAAA,CACA,kBAAA,CACG,cAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CAEA,mCACI,kBAAA,CACA,qCACI,6BAAA,CAGR,yCACI,yCAAA,CAGJ,gCACI,8CAAA,CAGJ,mCACI,aAAA,CACA,OAAA,CACA,aAAA,CACA,gBAAA,CACA,cAAA,CAEJ,iCACI,gBAAA,CACA,sBAAA,CACA,4BAAA,CACA,cAAA,CAGP,gCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,SAAA,CACM,sBAAA,CACA,mCAAA,CAEA,cAAA,CACN,sCACC,+BAAA,CACS,cAAA,CAIX,iCACC,UAAA,CACA,WAAA,CACA,oCAAA,CACA,wCAAA,CAGA,YAAA,CACA,sBAAA,CACA,6BAAA,CACM,cAAA\",\"sourcesContent\":[\"\\n.version {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n    cursor: pointer;\\n    padding: 8px;\\n    border-radius: 8px;\\n    margin: 4px 8px;\\n\\n    &.disabled {\\n        cursor: not-allowed;   \\n        *  {\\n            cursor: not-allowed  !important; \\n        }\\n    }\\n    &.disabled:hover {\\n        background-color: transparent !important;\\n    }\\n\\n    &:hover {\\n        background-color: var(--color-background-hover);\\n    }\\n\\n    &__content {\\n        flex: 1 1 auto;\\n        width: 0;\\n        margin: auto 0;\\n        padding-left: 8px;\\n        cursor: pointer;\\n    }\\n    &__title {\\n        font-weight: bold;\\n        text-overflow: ellipsis;\\n        color: var(--color-main-text);\\n        cursor: pointer;\\n    }\\n\\n\\t&__info {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: row;\\n\\t\\talign-items: center;\\n\\t\\tgap: 0.5rem;\\n        text-overflow: ellipsis;\\n        color: var(--color-text-maxcontrast);\\n\\n        cursor: pointer;\\n\\t\\t&__size {\\n\\t\\t\\tcolor: var(--color-text-lighter);\\n            cursor: pointer;\\n\\t\\t}\\n\\t}\\n\\n\\t&__image {\\n\\t\\twidth: 3rem;\\n\\t\\theight: 3rem;\\n\\t\\tborder: 1px solid var(--color-border);\\n\\t\\tborder-radius: var(--border-radius-large);\\n\\n\\t\\t// Useful to display no preview icon.\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t\\tcolor: var(--color-text-light); \\n        cursor: pointer;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.modal__title[data-v-527ae786]{text-overflow:ellipsis;color:var(--color-main-text);font-size:20px;font-weight:bold;margin:8px 20px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/SelectVersionModal.vue\"],\"names\":[],\"mappings\":\"AACA,+BACI,sBAAA,CACA,4BAAA,CACA,cAAA,CACA,gBAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n.modal__title {\\n    text-overflow: ellipsis;\\n    color: var(--color-main-text);\\n    font-size: 20px;\\n    font-weight: bold;\\n    margin: 8px 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c,\n    _setup = _vm._self._setupProxy\n  return _c(\n    \"NcModal\",\n    { attrs: { size: \"small\", show: _vm.opened }, on: { close: _vm.onCancel } },\n    [\n      _c(\"div\", [\n        _c(\"div\", { staticClass: \"modal__header\" }, [\n          _c(\"div\", { staticClass: \"modal__title\" }, [\n            _vm._v(\n              \"\\n                    Select version to compare with\\n                \"\n            ),\n          ]),\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"ul\",\n          { attrs: { \"data-files-versions-versions-list\": \"\" } },\n          _vm._l(_vm.orderedVersions, function (version) {\n            return _c(\"FileVersion\", {\n              key: version.mtime,\n              attrs: {\n                \"load-preview\": _vm.isActive,\n                version: version,\n                \"file-info\": _vm.file,\n                \"is-first-version\": version.mtime == _vm.initialVersionMtime,\n              },\n              on: { compare: _vm.compareVersion },\n            })\n          }),\n          1\n        ),\n      ]),\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\"div\", [\n    _c(\n      \"div\",\n      {\n        class: [\"version\", _vm.isCurrent ? \"disabled\" : \"\"],\n        on: { click: _vm.compareVersion },\n      },\n      [\n        _c(\"div\", [\n          !(_vm.loadPreview || _vm.previewLoaded)\n            ? _c(\"div\", { staticClass: \"version__image\" })\n            : (_vm.isCurrent || _vm.version.hasPreview) && !_vm.previewErrored\n            ? _c(\"img\", {\n                staticClass: \"version__image\",\n                attrs: {\n                  src: _vm.version.previewUrl,\n                  alt: \"\",\n                  decoding: \"async\",\n                  fetchpriority: \"low\",\n                  loading: \"lazy\",\n                },\n                on: {\n                  load: function ($event) {\n                    _vm.previewLoaded = true\n                  },\n                  error: function ($event) {\n                    _vm.previewErrored = true\n                  },\n                },\n              })\n            : _c(\n                \"div\",\n                { staticClass: \"version__image\" },\n                [_c(\"ImageOffOutline\", { attrs: { size: 20 } })],\n                1\n              ),\n        ]),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"version__content\" }, [\n          _c(\"div\", { staticClass: \"version__title\" }, [\n            _vm._v(\n              \"\\n                    \" +\n                _vm._s(_vm.versionLabel) +\n                \"\\n                \"\n            ),\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"version__info\" }, [\n            _c(\"span\", { attrs: { title: _vm.formattedDate } }, [\n              _vm._v(_vm._s(_vm._f(\"humanDateFromNow\")(_vm.version.mtime))),\n            ]),\n            _vm._v(\" \"),\n            _c(\"span\", { staticClass: \"version__info__size\" }, [_vm._v(\"•\")]),\n            _vm._v(\" \"),\n            _c(\"span\", { staticClass: \"version__info__size\" }, [\n              _vm._v(_vm._s(_vm._f(\"humanReadableSize\")(_vm.version.size))),\n            ]),\n          ]),\n        ]),\n      ]\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div @click=\"compareVersion\" :class=\"['version',  isCurrent  ?  'disabled' :  '' ]\">\n            <div>\n                <div v-if=\"!(loadPreview || previewLoaded)\" class=\"version__image\"></div>\n\t\t\t\t<img v-else-if=\"(isCurrent || version.hasPreview) && !previewErrored\"\n\t\t\t\t\t:src=\"version.previewUrl\"\n\t\t\t\t\talt=\"\"\n\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\tfetchpriority=\"low\"\n\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\tclass=\"version__image\"\n\t\t\t\t\t@load=\"previewLoaded = true\"\n\t\t\t\t\t@error=\"previewErrored = true\">\n\t\t\t\t<div v-else\n\t\t\t\t\tclass=\"version__image\">\n\t\t\t\t\t<ImageOffOutline :size=\"20\" />\n\t\t\t\t</div>\n            </div>\n            <div class=\"version__content\">\n                <div class=\"version__title\">\n                    {{ versionLabel }}\n                </div>\n                <div class=\"version__info\">\n                    <span :title=\"formattedDate\">{{ version.mtime | humanDateFromNow }}</span>\n                    <!-- Separate dot to improve alignement -->\n                    <span class=\"version__info__size\">•</span>\n                    <span class=\"version__info__size\">{{ version.size | humanReadableSize }}</span>\n                </div>\n            </div>\n        </div>\n\t</div>\n</template>\n\n<script>\nimport ImageOffOutline from 'vue-material-design-icons/ImageOffOutline.vue'\nimport moment from '@nextcloud/moment'\nimport { translate as t } from '@nextcloud/l10n'\nimport { loadState } from '@nextcloud/initial-state'\n\nexport default {\n\tname: 'Version',\n\tcomponents: {\n\t\tImageOffOutline,\n\t},\n\tfilters: {\n\t\thumanReadableSize(bytes) {\n\t\t\treturn OC.Util.humanFileSize(bytes)\n\t\t},\n\t\thumanDateFromNow(timestamp) {\n\t\t\treturn moment(timestamp).fromNow()\n\t\t},\n\t},\n\tprops: {\n\t\tversion: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfileInfo: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisFirstVersion: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tloadPreview: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tdata() {\n        return {\n\t\t\tpreviewLoaded: false,\n\t\t\tpreviewErrored: false,\n\t\t\tformVersionLabelValue: this.version.label,\n\t\t\tcapabilities: loadState('core', 'capabilities', { files: { version_labeling: false, version_deletion: false } }),\n\t\t}\n\t},\n    mounted() {\n        console.log({version: this.version, fileInfo: this.fileInfo, isCurrent: this.isCurrent, isFirstVersion: this.isFirstVersion, versionLabel: this.versionLabel})\n    },\n\tcomputed: {\n        isCurrent() {\n            return this.version.mtime == (this.fileInfo.mtime.getTime ? this.fileInfo.mtime.getTime() : this.fileInfo.mtime)\n        },\n\t\tversionLabel() {\n\t\t\tconst label = this.version.label ?? ''\n\n\t\t\tif (this.isCurrent) {\n\t\t\t\tif (label === '') {\n\t\t\t\t\treturn 'Current version'\n\t\t\t\t} else {\n\t\t\t\t\treturn `${label} (Current version)`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isFirstVersion && label === '') {\n\t\t\t\treturn 'Initial version'\n\t\t\t}\n\n\t\t\treturn label\n\t\t},\n\n\t\tformattedDate() {\n\t\t\treturn moment(this.version.mtime).format('LLL')\n\t\t},\n\n\t},\n\tmethods: {\n\t\tcompareVersion() {\n            if (this.isCurrent) {\n                return\n            }\n\t\t\tthis.$emit('compare', { version: this.version })\n\t\t},\n\t\tt,\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.version {\n\tdisplay: flex;\n\tflex-direction: row;\n    cursor: pointer;\n    padding: 8px;\n    border-radius: 8px;\n    margin: 4px 8px;\n\n    &.disabled {\n        cursor: not-allowed;   \n        *  {\n            cursor: not-allowed  !important; \n        }\n    }\n    &.disabled:hover {\n        background-color: transparent !important;\n    }\n\n    &:hover {\n        background-color: var(--color-background-hover);\n    }\n\n    &__content {\n        flex: 1 1 auto;\n        width: 0;\n        margin: auto 0;\n        padding-left: 8px;\n        cursor: pointer;\n    }\n    &__title {\n        font-weight: bold;\n        text-overflow: ellipsis;\n        color: var(--color-main-text);\n        cursor: pointer;\n    }\n\n\t&__info {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n        text-overflow: ellipsis;\n        color: var(--color-text-maxcontrast);\n\n        cursor: pointer;\n\t\t&__size {\n\t\t\tcolor: var(--color-text-lighter);\n            cursor: pointer;\n\t\t}\n\t}\n\n\t&__image {\n\t\twidth: 3rem;\n\t\theight: 3rem;\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: var(--border-radius-large);\n\n\t\t// Useful to display no preview icon.\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tcolor: var(--color-text-light); \n        cursor: pointer;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileVersion.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileVersion.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileVersion.vue?vue&type=style&index=0&id=15737242&prod&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileVersion.vue?vue&type=style&index=0&id=15737242&prod&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./FileVersion.vue?vue&type=template&id=15737242&scoped=true\"\nimport script from \"./FileVersion.vue?vue&type=script&lang=js\"\nexport * from \"./FileVersion.vue?vue&type=script&lang=js\"\nimport style0 from \"./FileVersion.vue?vue&type=style&index=0&id=15737242&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15737242\",\n  null\n  \n)\n\nexport default component.exports","import path from 'path'\nimport { createClient } from 'webdav'\n\nimport { getCurrentUser, getRequestToken } from '@nextcloud/auth'\nimport { generateRemoteUrl, generateUrl } from '@nextcloud/router'\nimport moment from '@nextcloud/moment'\nimport { joinPaths } from '@nextcloud/paths'\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nconst logger = getLoggerBuilder()\n\t.setApp('demo')\n\t.detectUser()\n\t.build()\n\n// init webdav client on default dav endpoint\nconst client = createClient(\n\tgenerateRemoteUrl('dav'),\n\t{\n\t\theaders: {\n\t\t\t// Add this so the server knows it is an request from the browser\n\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t// Inject user auth\n\t\t\trequesttoken: getRequestToken() ?? '',\n\t\t},\n\t},\n)\n\nfunction encodeFilePath(path) {\n\tconst pathSections = (path.startsWith('/') ? path : `/${path}`).split('/')\n\tlet relativePath = ''\n\tpathSections.forEach((section) => {\n\t\tif (section !== '') {\n\t\t\trelativePath += '/' + encodeURIComponent(section)\n\t\t}\n\t})\n\treturn relativePath\n}\n\nfunction formatVersion(version, fileInfo) {\n\tconst mtime = moment(version.lastmod).unix() * 1000\n\tlet previewUrl = ''\n\tlet filename = ''\n\n\tif (mtime === fileInfo.mtime) { // Version is the current one\n\t\tfilename = path.join('files', getCurrentUser()?.uid ?? '', fileInfo.path)\n\t\tpreviewUrl = generateUrl('/core/preview?fileId={fileId}&c={fileEtag}&x=250&y=250&forceIcon=0&a=0', {\n\t\t\tfileId: fileInfo.fileid,\n\t\t\tfileEtag: (fileInfo.attributes || fileInfo._attributes).etag,\n\t\t})\n\t} else {\n\t\tfilename = version.filename\n\t\tpreviewUrl = generateUrl('/apps/files_versions/preview?file={file}&version={fileVersion}', {\n\t\t\tfile: fileInfo.path,\n\t\t\tfileVersion: version.basename,\n\t\t})\n\t}\n\n\treturn {\n\t\tfileId: fileInfo.fileid || fileInfo.id,\n\t\tlabel: version.props['version-label'],\n\t\tfilename,\n\t\tbasename: moment(mtime).format('LLL'),\n\t\tmime: version.mime,\n\t\tetag: `${version.props.getetag}`,\n\t\tsize: version.size,\n\t\ttype: version.type,\n\t\tmtime,\n\t\tpermissions: 'R',\n\t\thasPreview: version.props['has-preview'] === 1,\n\t\tpreviewUrl,\n\t\turl: joinPaths('/remote.php/dav', filename),\n\t\tsource: generateRemoteUrl('dav') + encodeFilePath(filename),\n\t\tfileVersion: version.basename,\n\t}\n}\n\nexport async function fetchVersions(fileInfo) {\n\tconst path = `/versions/${getCurrentUser()?.uid}/versions/${fileInfo.fileid || fileInfo.id}`\n\n\ttry {\n\t\t/** @type {import('webdav').ResponseDataDetailed<import('webdav').FileStat[]>} */\n\t\tconst response = await client.getDirectoryContents(path, {\n\t\t\tdata: `<?xml version=\"1.0\"?>\n                <d:propfind xmlns:d=\"DAV:\"\n                    xmlns:oc=\"http://owncloud.org/ns\"\n                    xmlns:nc=\"http://nextcloud.org/ns\"\n                    xmlns:ocs=\"http://open-collaboration-services.org/ns\">\n                    <d:prop>\n                        <d:getcontentlength />\n                        <d:getcontenttype />\n                        <d:getlastmodified />\n                        <d:getetag />\n                        <nc:version-label />\n                        <nc:has-preview />\n                    </d:prop>\n                </d:propfind>`,\n\t\t\tdetails: true,\n\t\t})\n\t\treturn response.data\n\t\t\t// Filter out root\n\t\t\t.filter(({ mime }) => mime !== '')\n\t\t\t.map(version => formatVersion(version, fileInfo))\n\t} catch (exception) {\n\t\tlogger.error('Could not fetch version', { exception })\n\t\tthrow exception\n\t}\n}\n","<template>\n\t<NcModal\n        size=\"small\"\n\t\t:show=\"opened\"\n\t\t@close=\"onCancel\">\n        <div>\n            <div class=\"modal__header\">\n                <div class=\"modal__title\">\n                    Select version to compare with\n                </div>\n            </div>\n            <ul data-files-versions-versions-list>\n                <FileVersion v-for=\"version in orderedVersions\"\n                    :key=\"version.mtime\"\n                    :load-preview=\"isActive\"\n                    :version=\"version\"\n                    :file-info=\"file\"\n                    :is-first-version=\"version.mtime == initialVersionMtime\"\n                    @compare=\"compareVersion\" />\n            </ul>\n        </div>\n\t</NcModal>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport NcModal from '@nextcloud/vue/dist/Components/NcModal.js'\nimport { getRootUrl } from '@nextcloud/router'\nimport FileVersion from './FileVersion.vue'\nimport { fetchVersions } from \"../utils/fetchFileVersions.js\";\n\nexport default Vue.extend({\n\tname: 'SelectVersionModal',\n\n\tcomponents: {\n\t\tNcModal,\n        FileVersion\n\t},\n\tprops: {\n\t\tfile: {\n\t\t\trequired: true,\n\t\t},\n\t},\n    data() {\n\t\treturn {\n\t\t\tisActive: false,\n\t\t\tversions: [],\n\t\t\topened: true,\n\t\t\tloading: false,\n\t\t}\n\t},\n\tcomputed: {\n         orderedVersions() {\n\t\t\treturn [...this.versions].sort((a, b) => {\n\t\t\t\tif (a.mtime === (this.file.mtime.getTime ? this.file.mtime.getTime() : this.file.mtime)) {\n\t\t\t\t\treturn -1\n\t\t\t\t} else if (b.mtime ===(this.file.mtime.getTime ? this.file.mtime.getTime() : this.file.mtime)) {\n\t\t\t\t\treturn 1\n\t\t\t\t} else {\n\t\t\t\t\treturn b.mtime - a.mtime\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tinitialVersionMtime() {\n\t\t\treturn this.versions\n\t\t\t\t.map(version => version.mtime)\n\t\t\t\t.reduce((a, b) => Math.min(a, b))\n\t\t},\n\t},\n\n\tasync beforeMount() {\n\t\tthis.versions = await fetchVersions(this.file)\n\t},\n\n\tmethods: {\n\t\tonCancel() {\n\t\t\tthis.opened = false\n\t\t\tthis.$emit('cancel')\n\t\t},\n\n\t\tversionLabel(version) {\n\t\t\tconst label = version.label ?? ''\n\n\t\t\tif (version.mtime == (this.file.mtime.getTime ? this.file.mtime.getTime() : this.file.mtime)) {\n\t\t\t\tif (label === '') {\n\t\t\t\t\treturn 'Current version'\n\t\t\t\t} else {\n\t\t\t\t\treturn `${label} (Current version)`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (version.mtime == this.initialVersionMtime && label === '') {\n\t\t\t\treturn 'Initial version'\n\t\t\t}\n\n\t\t\treturn label\n\t\t},\n\n        compareVersion({ version }) {\n\t\t\tconst lastVersion = this.versions.findLast((v) => v.mtime == (this.file.mtime.getTime ? this.file.mtime.getTime() : this.file.mtime))\n\t\t\tthis.$emit('select', { version, firstLabel: this.versionLabel(version), currentVersion: this.versionLabel(lastVersion) })\n        },\n\n\t\tasync fetchVersions() {\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.versions = await fetchVersions(this.file)\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n    .modal__title {\n        text-overflow: ellipsis;\n        color: var(--color-main-text);\n        font-size: 20px;\n        font-weight: bold;\n        margin: 8px 20px;\n    }\n</style>\n","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectVersionModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectVersionModal.vue?vue&type=script&lang=ts\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectVersionModal.vue?vue&type=style&index=0&id=527ae786&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectVersionModal.vue?vue&type=style&index=0&id=527ae786&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SelectVersionModal.vue?vue&type=template&id=527ae786&scoped=true\"\nimport script from \"./SelectVersionModal.vue?vue&type=script&lang=ts\"\nexport * from \"./SelectVersionModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./SelectVersionModal.vue?vue&type=style&index=0&id=527ae786&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"527ae786\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","render","_vm","this","_c","_self","_setupProxy","attrs","size","show","opened","on","close","onCancel","staticClass","_v","_l","orderedVersions","version","key","mtime","isActive","file","initialVersionMtime","compare","compareVersion","_withStripped","class","isCurrent","click","loadPreview","previewLoaded","hasPreview","previewErrored","src","previewUrl","alt","decoding","fetchpriority","loading","load","$event","error","_s","versionLabel","title","formattedDate","_f","name","components","ImageOffOutline","filters","humanReadableSize","bytes","OC","Util","humanFileSize","humanDateFromNow","timestamp","moment","fromNow","props","type","Object","required","fileInfo","isFirstVersion","Boolean","default","data","formVersionLabelValue","label","capabilities","loadState","files","version_labeling","version_deletion","mounted","console","log","computed","getTime","_this$version$label","concat","format","methods","$emit","t","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","logger","getLoggerBuilder","setApp","detectUser","build","client","createClient","generateRemoteUrl","headers","requesttoken","_getRequestToken","getRequestToken","encodeFilePath","path","pathSections","startsWith","split","relativePath","forEach","section","encodeURIComponent","async","fetchVersions","_getCurrentUser2","getCurrentUser","uid","fileid","getDirectoryContents","details","filter","_ref","mime","map","lastmod","unix","filename","_getCurrentUser$uid","_getCurrentUser","generateUrl","fileId","fileEtag","attributes","_attributes","etag","fileVersion","basename","getetag","permissions","url","joinPaths","source","formatVersion","exception","extend","NcModal","FileVersion","versions","sort","a","b","reduce","Math","min","beforeMount","lastVersion","findLast","v","firstLabel","currentVersion"],"sourceRoot":""}