var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");
$jscomp.polyfill("Number.isNaN",function(a){return a?a:function(a){return"number"===typeof a&&isNaN(a)}},"es6","es3");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6","es3");
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var cvjs_versionNumber="CADViewer - v6.5.04",cvjs_AXversionNumber="",cvjs_Community_Version=!0,cvjs_firstLoadViewBoxX=0,cvjs_firstLoadViewBoxY=0,cvjs_firstLoadViewBoxW=0,cvjs_firstLoadViewBoxH=0,cvjs_interactiveZoomWidthAdjustment=!0,cvjs_tmsMinLineWidth_init=0,cvjs_tmsMinFixedLineWidth_init=0,cvjs_jsonLocation="",cvjs_isAngular=!1,cvjs_firstCloneHandle="",cvjs_firstCloneHandleFlag=!1,cvjs_setProcessHandleObjects=!1,cvjs_layerlist_layeritemsmax=120,pt1="htt",lt1="log",lt2="oJS",lt3=".p",lt4="ng",
cvjs_OnLoadEnd,cvjs_graphicalObjectOnChange,cvjs_OnLoadEndRedlines,cvjs_ObjectSelected,cvjs_measurementCallback,cvjs_CalibrateMeasurementCallback,cvjs_Url_callback,cvjs_loadSpaceImage_UserConfiguration,cvjs_NoObjectSelected,cvjs_SVGfileObjectClicked,cvjs_SVGfileObjectMouseEnter,cvjs_SVGfileObjectMouseLeave,cvjs_SVGfileObjectMouseMove,cvjs_ParseDisplayDataMaps,cvjs_QuickCountCallback,cvjs_OnHyperlinkClick,cvjs_setUpStickyNotesRedlines,custom_host_parser_PopUpMenu,cvjs_customHostParser,drawPathsGeneric,
cvjs_callbackForModalDisplay,cvjs_populateMyCustomPopUpBody,cvjs_customModalPopUpBody,cvjs_NoObjectSelectedStickyNotes,cvjs_NoObjectSelectedHyperlinks,cvjs_ObjectSelectedHyperlink,cvjs_ObjectSelectedStickyNotes,cvjs_saveStickyNotesRedlinesUser,cvjs_loadStickyNotesRedlinesUser,my_own_clickmenu1,my_own_clickmenu2,cvjs_popupTitleClick,cvjs_mousedown,cvjs_click,cvjs_dblclick,cvjs_mouseout,cvjs_mouseover,cvjs_mouseleave,cvjs_mouseenter,cvjs_graphicalObjectCreated,printWindow,tms_rest_api_url,api_data,
vBHo,vBWo,spc,bRoom,spaceLayer,tipText,brd,cvjs_svgWidth,rebuild_drop_spaces,cvjs_active_floorplan_div_nr=0,layer_thumb,fileName,unlink_flag,unlink_file,worldUnits,api_proxy_url,usr,pwd,building_name,company,address,city,zipcode,state,country,FacMgr_name,FacMgr_title,FacMgr_email,FacMgr_phone,refresh_rate,id_data_connector,id_data_parser,id_publish_location,id_main_data_layer,id_datafield1_name,id_datafield1_value,id_datafield2_name,id_datafield2_value,id_datalayer1_name,id_datalayer1_value,id_datalayer2_name,
id_datalayer2_value,FileName,layer_hyperlinks,user_name,user_id,current_selected_filename,current_selected_shortname,delete_filename,delete_floor,hidefield_name1,hidefield_name2,pt2="ps://",qrcode,use_as_QR_code_bitmap_filname,handleUpdates,dataHandleString,myLocation,printDebugFlag=!1,cvjs_3Ddrawings=!1,cvjs_NodeJSserver=!1,cvjs_AngularFlag=!1,cvjs_layerList_checkbox=!1,cvjs_CompareFiles_CustomFileModalContent_flag=!1,cvjs_CompareFiles_CustomFileModalContent=[],cvjs_directFileLoad=!1,cvjs_directFileLoadPath=
"",cvjs_mergeDXFDWG_downloadMode=!1,demoonly_customHandleChange=!1,cvjs_PrintIconDisabled=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],rest_serviceCall=!1,rest_applicationPlatform="",rest_applicationPlatformUsername="",rest_applicationPlatformUserID="",rest_ServiceToken="",rest_leaveStreamOnServer=0,cvjs_preConversionFileExtension=[],cvjs_preConversionFileName=[],cvjs_interactiveMethod_Active=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,
!1,!1,!1],cvjs_devMode=!1,fileExtensionLower="",cvjs_custom_print_to_pdf=!1,cvjs_encodeURIcall_server=!0,cvjs_currentFileFromJSTreeFolder="",cvjs_PrintModal_PrintPDF=!1,cvjs_PrintModal_PrintResolution=!1,cvjs_PrintModal_PrintToScale=!1,cvjs_print_to_pdf_windowRelativeSize=.4,cvjs_addedObjectsToExtents=!1,cvjs_multipagePDFtoSVG_PhpLoadFlag=!1,cvjs_bitmapFileNameIsServerPath_flag=!1,cvjs_bitmapLoadFlag=!1,cvjs_last_FileName_PDF="",cvjs_rPaper=[],cvjs_masterBackground=[];
cvjs_active_floorplan_div_nr=0;
var floorplans_divs_Initialized="                                             ".split(" "),cvjs_loaddrawing_FileNamePath="                                             ".split(" "),cvjs_loadDrawing_conversionMode=!1,cvjs_conversion_originatingFile="                                             ".split(" "),cvjs_conversion_originatingFileNameNoExtension="                                             ".split(" "),cvjs_conversion_originatingUsername="                                             ".split(" "),cvjs_conversion_originatingPassword=
"                                             ".split(" "),pt3="ca",cvjs_loadInProgress=!1,layers_all,multiPages=[{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},
{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]}],actualURX=[-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],actualURY=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],actualLLX=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],actualLLY=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],rpWidth=[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],rpHeight=[100,100,100,100,100,100,100,100,
100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],viewBox=[{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,
height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100},{X:0,Y:0,width:100,height:100}],viewBoxWidth=[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],viewBoxHeight=[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],viewBox_initX=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],viewBox_initY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],viewBoxWidth_init=[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],viewBoxHeight_init=[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],cvjs_fileLoadingFromSharePointServer=!1,cvjs_debug_stickynotes=!1,cvjs_drawingCoordinates=[],layerTable="                                                  ".split(" "),
tip=[],tip_leafletBase=[],pt4="dvie",cvjs_SVG_outputFormatInAXConversions=!0,cvjs_collab_mode=!1,cvjs_collabPresenter=!1,cvjs_loadMultipleRedlinesStickyNotes=!1,cvjs_stickyNotesRedlines=[],cvjs_ajaxPostStatus_thumbNails=!1,cvjs_initMasterBackground=!0,cvjs_printModal_content,cvjs_textSearchModal_content,cvjs_infoMessageModal_content,cvjs_redlineThicknessModal_content,cvjs_redlineColorModal_content,cvjs_publishPDFModal_content,cvjs_backgroundColorModal_content,cvjs_redlinetextModal_content,cvjs_lineThicknessModal_content,
cvjs_calibrateModal_content,cvjs_birdseyeModal_content,cvjs_layerlistModal_content,cvjs_layerlistspaceModal_content,cvjs_measurementModal_content,cvjs_spaceobjectsChangeSettingsModal_content,cvjs_spaceobjectsInitSettingsModal_content,cvjs_customSearchModal_content,cvjs_documentPageChangeModal_content,cvjs_settingsModal_content,cvjs_redlineEllipseModal_content,cvjs_creationModeModal_content,cvjs_mergeDXFModal_content,cvjs_disableClickDrag=!1,cvjs_pagechangeListModal_content,pt5="wer.c",cvjs_collabStartModal_content,
cvjs_PDFloadFlag=!1,cvjs_currentLanguage=0,languageTable,winHeight=0,winWidth=0,fpWidth=0,fpHeight=0,isSmartPhoneOrTablet=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Touch/i.test(navigator.userAgent),isWindowsNT=/Windows NT/i.test(navigator.userAgent),lastElem=null,lastStroke=null,lastStrokeWidth=null,mousex=100,mousey=100,lastLink="",flip=0,spaceId=-1,deltaX=0,deltaY=0,deltaXinit=0,deltaYinit=0,deltaBase=1,deltaDynamic=1,deltaDynamicPre=1,zoomScale=1,panWithThumb=!1,dragMoveControl=!0,cvjs_Url_click_control=
1,cvjs_Url_encapsulate_callback=!1,VqSetup=!1,fileLoad_contentFormat="JS",defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round",opacity:.1},highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3,opacity:.5},selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3,opacity:.5},defaultColor_Hyperlinks={fill:"#FFF","fill-opacity":"0.1",stroke:"#FFF","stroke-width":3,"stroke-opacity":.01,"stroke-linejoin":"round",
opacity:.1},highlight_Hyperlinks={fill:"#a4d7f4","fill-opacity":"0.6",stroke:"#FFd7f4","stroke-width":3,"stroke-opacity":.6,"stroke-linejoin":"round",opacity:.6},selectColor_Hyperlinks={fill:"#FFBEF6","fill-opacity":"0.6",stroke:"#FFd7f4","stroke-width":3,"stroke-opacity":.6,"stroke-linejoin":"round",opacity:.6},defaultColor_Hyperlinks_blank={fill:"#FFF","fill-opacity":"0.1",stroke:"#FFF","stroke-width":3,"stroke-opacity":.01,"stroke-linejoin":"round",opacity:.1},defaultColor_StickyNotes={fill:"#E7E7E7"},
highlight_StickyNotes={fill:"#a4d7f4"},selectColor_StickyNotes={fill:"#5BBEF6"},defaultColor_unlinked={fill:"#ffff99","fill-opacity":"0.3",stroke:"#ffff99","stroke-width":1,"stroke-opacity":"0.1","stroke-linejoin":"round",opacity:.3},highlight_unlinked={fill:"#ffff99","fill-opacity":"0.5",stroke:"#ffff99","stroke-width":3,"stroke-opacity":"1",opacity:.5},selectColor_unlinked={fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-width":3,"stroke-opacity":"1",opacity:.5},defaultColor_linked=
{fill:"#a4d7f4","fill-opacity":"0.3",stroke:"#a4d7f4","stroke-width":1,"stroke-opacity":"0.1","stroke-linejoin":"round",opacity:.5},highlight_linked={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3,"stroke-opacity":"1",opacity:.5},selectColor_linked={fill:"#41A458","fill-opacity":"0.5",stroke:"#41A458","stroke-width":3,"stroke-opacity":"1",opacity:.5};isWindowsNT&&(isSmartPhoneOrTablet=!1);
var cvjs_FileNameNoExtension="",cvjs_convertSpaceObject=!1,cvjs_convertRoomLayer="RM$",cvjs_convertTextLayer="RM$TXT",cvjs_layerOptions={valueNames:["selected","layer",{data:["id"]},{attr:"href",name:"link"}],item:'<li><h3_selected><a class="link selected">"+languageTable.languages[cvjs_currentLanguage].LayerListModal.Off+"</a><h3_selected><h3_selected><h3_list class="layer">Dummy Layer</h3_list></li>'},cvjs_layerOptionsSpace={valueNames:["selected","text_room_layer","layer",{data:["id"]},{attr:"href",
name:"link"},{attr:"href",name:"link_text_room_l"}],item:'<li><h3_selected><a class="link selected">"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.+"</a><canvas width="10" height="10"></canvas><a class="link_text_room_l text_room_layer">None</a><h3_selected><h3_selected><h3_list class="layer">Dummy Layer</h3_list></li>'},pt6="om",cvjs_printGrayscale=!1,cvjs_printPdf=!1,cvjs_measureArea=!1,cvjs_measurementInteractiveType=1,cvjs_layerValuesSpace,cvjs_layerList,cvjs_pagechangeList,
cvjs_layerListSpace,cvjs_FourFilesInOne=!0,cvjs_version_3_2_modal=!0,cvjs_backEndHandlerType="",cvjs_frontEndHandlerType="javascript";function cvjs_setInteractiveZoomWidthAdjustment(a){cvjs_interactiveZoomWidthAdjustment=a}function cvjs_setDisableClickDrag(a){cvjs_disableClickDrag=a}function cvjs_setHandleObjectProcessing(a){cvjs_setProcessHandleObjects=a}
function cvjs_setHandlers_FrontEnd(a,b,c){a=a.toLowerCase();b=b.toLowerCase();switch(a){case "dotnet":cvjs_setPureHandlerSettingsDotNet(c);break;case "nodejs":cvjs_setPureHandlerSettingsNodeJS(c);break;case "servlets":cvjs_setPureHandlerSettingsServlets(c);break;default:cvjs_setPureHandlerSettingsPHP(c)}switch(b){case "reactjs":cvjs_setFrontEndHandlerSettingsReactJS(c);break;case "angular":cvjs_setFrontEndHandlerSettingsAngular(c);break;case "vuejs":cvjs_setFrontEndHandlerSettingsVueJS(c);break;default:cvjs_setFrontEndHandlerSettingsJavaScript(c)}}
function cvjs_setFrontEndHandlerSettingsVueJS(a){cvjs_frontEndHandlerType="vuejs";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location=
"/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml")}
function cvjs_setFrontEndHandlerSettingsReactJS(a){cvjs_frontEndHandlerType="reactjs";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation=window.location.href+"/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation=window.location.href+"/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&
void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml")}
function cvjs_setFrontEndHandlerSettingsAngular(a){cvjs_frontEndHandlerType="angular";cvjs_setAngular(!0);if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/assets/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/assets/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&
void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/assets//cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/assets//cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml")}
function cvjs_setFrontEndHandlerSettingsJavaScript(a){cvjs_frontEndHandlerType="javascript";cvjs_debug&&console.log("javascript php "+cvjs_ServerUrl+" "+cvjs_ServerLocation);if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?
null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml")}
function cvjs_setPureHandlerSettingsDotNet(a){cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl);cvjs_setRestApiController("callApiConversionHandler.ashx");cvjs_setServerAccessToServlet(!0);cvjs_restApiConverter("AutoXchange AX2020");cvjs_restApiConverter("V1.00");cvjs_backEndHandlerType="dotnet";cvjs_frontEndHandlerType="javascript";cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl);cvjs_setPrintObjectPathAbsolute(cvjs_ServerBackEndUrl+"/temp_print/",cvjs_ServerLocation+"/temp_print/");cvjs_setServerSaveFileHandlerPrint("SaveFileHandler.ashx");
cvjs_setServerAppendFileHandlerPrint("AppendFileHandler.ashx");cvjs_setServerDeleteFileHandlerPrint("DeleteFileHandler.ashx");cvjs_setServerListDirectoryHandler("ListDirectoryContent.ashx");cvjs_setServerLoadHandler("LoadHandler.ashx");cvjs_setCustomMergedEmailHandler("MergeEmailHandler.ashx");cvjs_setServerCopyFileHandler("CopyHandler.ashx");cvjs_setServerMergeDWGHandler("MergeDwgHandler.ashx");cvjs_setServerScreenToPDFHandler("MakeSinglepagePDF.ashx");cvjs_setServerListDirectoryHandler("ListDirectoryContent.ashx");
cvjs_setReturnPDFparamsController("ReturnPDFParamsHandler.ashx");cvjs_setServerPDFConverterController("ConvertPDFServlet");cvjs_setGetFileController("getFileHandler.ashx");cvjs_setServerSaveHandlerRedlines("SaveRedlinesHandler.ashx");cvjs_setServerLoadHandlerRedlines("LoadRedlinesHandler.ashx");cvjs_setServerRedlinesListDirectoryHandler("ListDirectoryContentRedlines.ashx");cvjs_setServerCreateThumb_StickyNote_Controller("MakeThumbnailsHandler.ashx");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);
cvjs_setUploadController("UploadfileHandler.ashx")}
function cvjs_setPureHandlerSettingsNodeJS(a){cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl);cvjs_setRestApiController("callapiconversion");cvjs_setServerAccessToServlet(!0);cvjs_setConverter("AutoXchange AX2020","V1.00");cvjs_backEndHandlerType="nodejs";cvjs_debug&&console.log("cvjs_setPureHandlerSettingsNodeJS "+cvjs_backEndHandlerType);cvjs_setNodeJSserver(!0);cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl);cvjs_setPrintObjectPathAbsolute(cvjs_ServerBackEndUrl+"temp_print",cvjs_ServerBackEndUrl+
"temp_print/");cvjs_setServerSaveFileHandlerPrint("savefile");cvjs_setServerAppendFileHandlerPrint("appendfile");cvjs_setServerDeleteFileHandlerPrint("deletefile");cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setServerLoadHandler("loadfile");cvjs_setCustomMergedEmailHandler("mergeemail");cvjs_setServerCopyFileHandler("copyfile");cvjs_setServerMergeDWGHandler("mergedwg");cvjs_setServerScreenToPDFHandler("makesinglepagepdf");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");
cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setReturnPDFparamsController("returnpdfparams");cvjs_setServerPDFConverterController("convertpdf");cvjs_setGetFileController("getfile");cvjs_setServerSaveHandlerRedlines("saveredline");cvjs_setServerLoadHandlerRedlines("loadredline");cvjs_setServerRedlinesListDirectoryHandler("listdirectoryredlines");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);cvjs_setUploadController("uploadfile")}
function cvjs_setPureHandlerSettingsServlets(a){cvjs_backEndHandlerType="servlets";cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl+"/servlets/servlet/");cvjs_setRestApiController("callApiConversionServlet");cvjs_setServerAccessToServlet(!0);cvjs_restApiConverter("AutoXchange AX2020");cvjs_restApiConverter("V1.00");cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl+"/servlets/servlet");cvjs_setPrintObjectPathAbsolute(cvjs_ServerBackEndUrl+"/temp_print/",cvjs_ServerLocation+"/temp_print/");cvjs_setServerSaveFileHandlerPrint("SaveServlet");
cvjs_setServerAppendFileHandlerPrint("AppendServlet");cvjs_setServerDeleteFileHandlerPrint("DeleteServlet");cvjs_setServerListDirectoryHandler("ListDirectoryContent");cvjs_setServerLoadHandler("LoadServlet");cvjs_setCustomMergedEmailHandler("MergeEmailServlet");cvjs_setServerCopyFileHandler("CopyServlet");cvjs_setServerMergeDWGHandler("MergeDwgServlet");cvjs_setServerScreenToPDFHandler("MakeSinglepagePDFServlet");cvjs_setServerListDirectoryHandler("ListDirectoryContent");cvjs_setReturnPDFparamsController("ReturnPDFParamsServlet");
cvjs_setGetFileController("getFileServlet");cvjs_setServerSaveHandlerRedlines("SaveRedlinesServlet");cvjs_setServerLoadHandlerRedlines("LoadRedlinesServlet");cvjs_setServerRedlinesListDirectoryHandler("ListDirectoryContent")}
function cvjs_setPureHandlerSettingsPHP(a){cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl+"php/");cvjs_setRestApiController("call-Api_Conversion.php");cvjs_setConverter("AutoXchange AX2020","V1.00");cvjs_backEndHandlerType="php";cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl+"php/")}
function cvjs_setHandlerSettings(a,b,c){switch(a.toLowerCase()){case "reactjs":cvjs_setHandlerSettingsReactJS(b);break;case "angular":cvjs_setHandlerSettingsAngular(b);break;case "dotnet":cvjs_setHandlerSettingsDotNet(b);break;case "dotnetcore":cvjs_setHandlerSettingsDotNetCore(b,c);break;case "nodejs":cvjs_setHandlerSettingsNodeJS(b);break;case "servlets":cvjs_setHandlerSettingsServlets(b);break;default:cvjs_setHandlerSettingsPHP(b)}}
function cvjs_setHandlerSettingsPHP(a){cvjs_debug&&console.log("php "+cvjs_ServerUrl+" "+cvjs_ServerLocation);cvjs_ServerBackEndUrl=cvjs_ServerUrl;if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&
void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml");cvjs_setRestApiControllerLocation(cvjs_ServerUrl+"php/");
cvjs_setRestApiController("call-Api_Conversion.php");cvjs_setConverter("AutoXchange AX2020","V1.00");cvjs_backEndHandlerType="php";cvjs_setServerHandlersPath(cvjs_ServerUrl+"php/")}
function cvjs_setHandlerSettingsNodeJS(a){cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl);cvjs_setRestApiController("callapiconversion");cvjs_setServerAccessToServlet(!0);cvjs_setConverter("AutoXchange AX2020","V1.00");cvjs_backEndHandlerType="nodejs";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation=
"/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]=
"cadviewer_full_commands_01.xml");cvjs_setNodeJSserver(!0);cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl);cvjs_setPrintObjectPathAbsolute(cvjs_ServerUrl+"temp_print",cvjs_ServerLocation+"temp_print/");cvjs_setServerSaveFileHandlerPrint("savefile");cvjs_setServerAppendFileHandlerPrint("appendfile");cvjs_setServerDeleteFileHandlerPrint("deletefile");cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setServerLoadHandler("loadfile");cvjs_setCustomMergedEmailHandler("mergeemail");cvjs_setServerCopyFileHandler("copyfile");
cvjs_setServerMergeDWGHandler("mergedwg");cvjs_setServerScreenToPDFHandler("makesinglepagepdf");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setReturnPDFparamsController("returnpdfparams");cvjs_setServerPDFConverterController("convertpdf");cvjs_setGetFileController("getfile");cvjs_setServerSaveHandlerRedlines("saveredline");cvjs_setServerLoadHandlerRedlines("loadredline");cvjs_setServerRedlinesListDirectoryHandler("listdirectoryredlines");
cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);cvjs_setUploadController("uploadfile")}
function cvjs_setHandlerSettingsDotNet(a){cvjs_ServerBackEndUrl=cvjs_ServerUrl;cvjs_setRestApiControllerLocation(cvjs_ServerUrl);cvjs_setRestApiController("callApiConversionHandler.ashx");cvjs_setServerAccessToServlet(!0);cvjs_restApiConverter("AutoXchange AX2020");cvjs_restApiConverter("V1.00");cvjs_backEndHandlerType="dotnet";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||
void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=
!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml");cvjs_setServerHandlersPath(cvjs_ServerUrl);cvjs_setPrintObjectPathAbsolute(cvjs_ServerUrl+"/temp_print/",cvjs_ServerLocation+"/temp_print/");cvjs_setServerSaveFileHandlerPrint("SaveFileHandler.ashx");cvjs_setServerAppendFileHandlerPrint("AppendFileHandler.ashx");cvjs_setServerDeleteFileHandlerPrint("DeleteFileHandler.ashx");cvjs_setServerListDirectoryHandler("ListDirectoryContent.ashx");cvjs_setServerLoadHandler("LoadHandler.ashx");
cvjs_setCustomMergedEmailHandler("MergeEmailHandler.ashx");cvjs_setServerCopyFileHandler("CopyHandler.ashx");cvjs_setServerMergeDWGHandler("MergeDwgHandler.ashx");cvjs_setServerScreenToPDFHandler("MakeSinglepagePDF.ashx");cvjs_setServerListDirectoryHandler("ListDirectoryContent.ashx");cvjs_setReturnPDFparamsController("ReturnPDFParamsHandler.ashx");cvjs_setServerPDFConverterController("ConvertPDFServlet");cvjs_setGetFileController("getFileHandler.ashx");cvjs_setServerSaveHandlerRedlines("SaveRedlinesHandler.ashx");
cvjs_setServerLoadHandlerRedlines("LoadRedlinesHandler.ashx");cvjs_setServerRedlinesListDirectoryHandler("ListDirectoryContentRedlines.ashx");cvjs_setServerCreateThumb_StickyNote_Controller("MakeThumbnailsHandler.ashx");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);cvjs_setUploadController("UploadfileHandler.ashx")}
function cvjs_setHandlerSettingsDotNetCore(a,b){cvjs_ServerBackEndUrl=cvjs_ServerUrl;b=void 0==b||""==b?"/CADViewer/":b.lastIndexOf("/")!=b.length?b+"/CADViewer":b+"CADViewer";cvjs_setRestApiControllerLocation(cvjs_ServerUrl);cvjs_setRestApiController(b+"callApiConversion");cvjs_setServerAccessToServlet(!0);cvjs_restApiConverter("AutoXchange AX2020");cvjs_restApiConverter("V1.00");cvjs_backEndHandlerType="dotnetcore";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";
else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location=
"/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml");cvjs_applicationFolder="/app/";cvjs_setServerHandlersPath(cvjs_ServerUrl);cvjs_setPrintObjectPathAbsolute(cvjs_ServerUrl+"/temp_print/",cvjs_ServerLocation+"/temp_print/");cvjs_setServerSaveFileHandlerPrint(b+"SaveFile");cvjs_setServerAppendFileHandlerPrint(b+"AppendFile");cvjs_setServerDeleteFileHandlerPrint(b+"DeleteFile");cvjs_setServerListDirectoryHandler(b+
"ListDirectoryContent");cvjs_setServerLoadHandler(b+"LoadFile");cvjs_setCustomMergedEmailHandler(b+"MergeEmail");cvjs_setServerCopyFileHandler(b+"CopyFile");cvjs_setServerMergeDWGHandler(b+"MergeDwg");cvjs_setServerScreenToPDFHandler(b+"MakeSinglepagePDF");cvjs_setReturnPDFparamsController(b+"ReturnPDFParams");cvjs_setServerPDFConverterController(b+"ConvertPDF");cvjs_setGetFileController(b+"getFile");cvjs_setServerSaveHandlerRedlines(b+"SaveRedline");cvjs_setServerLoadHandlerRedlines(b+"LoadRedline");
cvjs_setServerRedlinesListDirectoryHandler(b+"ListDirectoryContent");cvjs_setServerCreateThumb_StickyNote_Controller(b+"MakeThumbnails");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);cvjs_setUploadController(b+"Uploadfile")}
function cvjs_setHandlerSettingsServlets(a){cvjs_backEndHandlerType="servlets";cvjs_ServerBackEndUrl=cvjs_ServerUrl;cvjs_frontEndHandlerType="javascript";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&
void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location="/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml");cvjs_setRestApiControllerLocation(cvjs_ServerUrl+"/servlets/servlet/");
cvjs_setRestApiController("callApiConversionServlet");cvjs_setServerAccessToServlet(!0);cvjs_restApiConverter("AutoXchange AX2020");cvjs_restApiConverter("V1.00");cvjs_setServerHandlersPath(cvjs_ServerUrl+"/servlets/servlet");cvjs_setPrintObjectPathAbsolute(cvjs_ServerUrl+"/temp_print/",cvjs_ServerLocation+"/temp_print/");cvjs_setServerSaveFileHandlerPrint("SaveServlet");cvjs_setServerAppendFileHandlerPrint("AppendServlet");cvjs_setServerDeleteFileHandlerPrint("DeleteServlet");cvjs_setServerListDirectoryHandler("ListDirectoryContent");
cvjs_setServerLoadHandler("LoadServlet");cvjs_setCustomMergedEmailHandler("MergeEmailServlet");cvjs_setServerCopyFileHandler("CopyServlet");cvjs_setServerMergeDWGHandler("MergeDwgServlet");cvjs_setServerScreenToPDFHandler("MakeSinglepagePDFServlet");cvjs_setServerListDirectoryHandler("ListDirectoryContent");cvjs_setReturnPDFparamsController("ReturnPDFParamsServlet");cvjs_setGetFileController("getFileServlet");cvjs_setServerSaveHandlerRedlines("SaveRedlinesServlet");cvjs_setServerLoadHandlerRedlines("LoadRedlinesServlet");
cvjs_setServerRedlinesListDirectoryHandler("ListDirectoryContent")}
function cvjs_setHandlerSettingsAngular(a){cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl);cvjs_setRestApiController("callapiconversion");cvjs_setServerAccessToServlet(!0);cvjs_setConverter("AutoXchange AX2020","V1.00");cvjs_frontEndHandlerType="angular";cvjs_backEndHandlerType="nodejs";cvjs_setAngular(!0);if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation="/assets/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";else if(null==cvjs_loadCADViewerLanguageLocation||
void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation="/assets/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/assets//cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):(cvjs_topIconMenuXML_location=
"/assets//cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml");cvjs_setNodeJSserver(!0);cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl);cvjs_setPrintObjectPathAbsolute(cvjs_ServerUrl+"temp_print",cvjs_ServerLocation+"temp_print/");cvjs_setServerSaveFileHandlerPrint("savefile");cvjs_setServerAppendFileHandlerPrint("appendfile");cvjs_setServerDeleteFileHandlerPrint("deletefile");
cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setServerLoadHandler("loadfile");cvjs_setCustomMergedEmailHandler("mergeemail");cvjs_setServerCopyFileHandler("copyfile");cvjs_setServerMergeDWGHandler("mergedwg");cvjs_setServerScreenToPDFHandler("makesinglepagepdf");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setReturnPDFparamsController("returnpdfparams");cvjs_setServerPDFConverterController("convertpdf");cvjs_setGetFileController("getfile");
cvjs_setServerSaveHandlerRedlines("saveredline");cvjs_setServerLoadHandlerRedlines("loadredline");cvjs_setServerRedlinesListDirectoryHandler("listdirectoryredlines");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);cvjs_setUploadController("uploadfile")}
function cvjs_setHandlerSettingsReactJS(a){cvjs_setRestApiControllerLocation(cvjs_ServerBackEndUrl);cvjs_setRestApiController("callapiconversion");cvjs_setServerAccessToServlet(!0);cvjs_setConverter("AutoXchange AX2020","V1.00");cvjs_setNodeJSserver(!0);cvjs_setServerHandlersPath(cvjs_ServerBackEndUrl);cvjs_frontEndHandlerType="reactjs";cvjs_backEndHandlerType="nodejs";if(!cvjs_apiLoadCADViewerLanguage)cvjs_loadCADViewerLanguageLocation=window.location.href+"/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";
else if(null==cvjs_loadCADViewerLanguageLocation||void 0==cvjs_loadCADViewerLanguageLocation)cvjs_loadCADViewerLanguageLocation=window.location.href+"/cadviewer/app/cv/cv-pro/language_table/cadviewerProLanguage.xml";cvjs_apiLoadIconMenuXML?null!=cvjs_topIconMenuXML_location&&void 0!=cvjs_topIconMenuXML_location&&(cvjs_topIconMenuXML_location="/cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml"):
(cvjs_topIconMenuXML_location="/cadviewer/app/cv/cv-pro/menu_config/",cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0,cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]="cadviewer_full_commands_01.xml");cvjs_setPrintObjectPathAbsolute(cvjs_ServerUrl+"temp_print",cvjs_ServerLocation+"temp_print/");cvjs_setServerSaveFileHandlerPrint("savefile");cvjs_setServerAppendFileHandlerPrint("appendfile");cvjs_setServerDeleteFileHandlerPrint("deletefile");cvjs_setServerListDirectoryHandler("listdirectory");
cvjs_setServerLoadHandler("loadfile");cvjs_setCustomMergedEmailHandler("mergeemail");cvjs_setServerCopyFileHandler("copyfile");cvjs_setServerMergeDWGHandler("mergedwg");cvjs_setServerScreenToPDFHandler("makesinglepagepdf");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setServerListDirectoryHandler("listdirectory");cvjs_setReturnPDFparamsController("returnpdfparams");cvjs_setServerPDFConverterController("convertpdf");cvjs_setGetFileController("getfile");cvjs_setServerSaveHandlerRedlines("saveredline");
cvjs_setServerLoadHandlerRedlines("loadredline");cvjs_setServerRedlinesListDirectoryHandler("listdirectoryredlines");cvjs_setServerCreateThumb_StickyNote_Controller("makethumbnails");cvjs_setUploadControllerPath(cvjs_ServerBackEndUrl);cvjs_setUploadController("uploadfile")}function cvjs_setAngular(a){cvjs_isAngular=a}function cvjs_setNodeJSserver(a){cvjs_NodeJSserver=a}function cvjs_multipagePDFtoSVG_PhpLoad(a){cvjs_multipagePDFtoSVG_PhpLoadFlag=a}
function cvjs_printToPdf_windowRelativeSize(a){cvjs_print_to_pdf_windowRelativeSize=a}function cvjs_fileLoadFromSharePointServer(a){cvjs_fileLoadingFromSharePointServer=a}function cvjs_setInitMasterBackgroundMode(a){cvjs_initMasterBackground=a}function cvjs_setJSFileOldType(a){cvjs_FourFilesInOne=!a}
var cvjs_convertHandleLayer=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,
!1,!1],cvjs_floodfillSpaceIDLayerTable=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,
!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],layerlistspaceobject_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_phpPath="../php/",cvjs_serverHandlersPath="../php/",cvjs_printObjectPath="./temp_print/",cvjs_printObjectPathRelativeFlag=!0,cvjs_printObjectPathAbsoluteUrl="",cvjs_printObjectPathAbsoluteServer="",cvjs_printObjectPathAbsolute="",cvjs_serverSaveFileController="save-file.php",cvjs_serverMergePHPFileController=
"merge-pdfs.php",cvjs_serverAppendFileController="append-file.php",cvjs_serverDeleteFileController="delete-file.php",cvjs_serverCopyFileController="copy-file.php",cvjs_serverListDirectoryController="list-directory.php",cvjs_serverListDirectoryControllerRedlines="list-directory-redlines.php",cvjs_serverLoadFileController="load-file.php",cvjs_serverSaveFileControllerRedlines="save-file.php",cvjs_serverLoadFileControllerRedlines="load-file.php",cvjs_loadRedlinesFileControllerFlag=!1,cvjs_loadFileControllerFlag=
!1,cvjs_convertPDFConfigFile="convert-pdf-files_config.php",cvjs_serverPDFConverterController="convert-pdf-files.php",cvjs_getFileController="getFile_09.php",cvjs_serverPDFSplitController="split-pdf-file.php",cvjs_returnPDFparamsController="return-pdf-convert-params.php",cvjs_customPDFprintController="custom_print_to_pdf.php",cvjs_serverMergeDWGController="merge-dwg-file.php",cvjs_serverDownloadSharepointController="download-sharepoint.php",cvjs_serverGetQRCodeController="load-qr-code.php",cvjs_serverUploadController=
"upload_2.php";function cvjs_EnablePrintIcon(a){try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a)}catch(b){console.log("recover floorplan_div undefined in method call:"+b),cvjs_active_floorplan_div_nr=0}cvjs_PrintIconDisabled[cvjs_active_floorplan_div_nr]=!1}
function cvjs_DisablePrintIcon(a){try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a)}catch(b){console.log("recover floorplan_div undefined in method call:"+b),cvjs_active_floorplan_div_nr=0}cvjs_PrintIconDisabled[cvjs_active_floorplan_div_nr]=!0}function cvjs_encodeURIcallToserver(a){cvjs_encodeURIcall_server=a}function cvjs_setCustomPDFprintControllerFlag(a){cvjs_custom_print_to_pdf=a}
function cvjs_setCustomPDFprintController(a){cvjs_customPDFprintController=a}var cvjs_setServerHandersPath_called=!1;function cvjs_setServerHandlersPath(a){cvjs_setServerHandersPath_called=!0;cvjs_serverHandlersPath=a;"/"!=cvjs_serverHandlersPath.charAt(cvjs_serverHandlersPath.length-1)&&(cvjs_serverHandlersPath+="/")}
function cvjs_setPrintObjectPath(a){cvjs_printObjectPath=a;"/"!=cvjs_printObjectPath.charAt(cvjs_printObjectPath.length-1)&&(cvjs_printObjectPath+="/");cvjs_printObjectPathRelativeFlag=!0}var cvjs_printObjectPathAbsolute_called=!1;
function cvjs_setPrintObjectPathAbsolute(a,b){cvjs_printObjectPathAbsolute_called=!0;cvjs_printObjectPathAbsolute=a;"/"!=cvjs_printObjectPathAbsolute.charAt(cvjs_printObjectPathAbsolute.length-1)&&(cvjs_printObjectPathAbsolute+="/");cvjs_printObjectPathAbsoluteServer=b;"/"!=cvjs_printObjectPathAbsoluteServer.charAt(cvjs_printObjectPathAbsoluteServer.length-1)&&(cvjs_printObjectPathAbsoluteServer+="/");cvjs_printObjectPathRelativeFlag=!1}function cvjs_setMultiSelect(a){cvjs_multiSelect=a}
function cvjs_getMultiSelect(){return cvjs_multiSelect}function cvjs_setServerPDFConverterController(a){cvjs_serverPDFConverterController=a}function cvjs_setGetFileController(a){cvjs_getFileController=a}function cvjs_setReturnPDFparamsController(a){cvjs_returnPDFparamsController=a}function cvjs_setPrintModal_PrintPDF(a,b){cvjs_PrintModal_PrintPDF=a;cvjs_printPdf=b}var cvjs_PrintModal_printGreyScaleflag=!0;function cvjs_setPrintModal_printGreyScaleflag(a){cvjs_PrintModal_printGreyScaleflag=a}
function cvjs_setPrintModal_PrintToScale(a){cvjs_PrintModal_PrintToScale=a}function cvjs_setServerSaveFileHandler(a){cvjs_serverSaveFileController=a}function cvjs_setServerCopyFileHandler(a){cvjs_serverCopyFileController=a}function cvjs_setServerListDirectoryHandler(a){cvjs_serverListDirectoryController=a}function cvjs_setServerRedlinesListDirectoryHandler(a){cvjs_serverListDirectoryControllerRedlines=a}function cvjs_setServerAppendFileHandler(a){cvjs_serverAppendFileController=a}
function cvjs_setServerDeleteFileHandler(a){cvjs_serverDeleteFileController=a}function cvjs_setServerSaveFileHandlerPrint(a){cvjs_serverSaveFileController=a}function cvjs_setServerAppendFileHandlerPrint(a){cvjs_serverAppendFileController=a}function cvjs_setServerDeleteFileHandlerPrint(a){cvjs_serverDeleteFileController=a}function cvjs_setCustomMergedEmailHandler(a){cvjs_serverSendPDFEmailController=a}function cvjs_setServerMergeDWGHandler(a){cvjs_serverMergeDWGController=a}
function cvjs_setServerGetQRCodeController(a){cvjs_serverGetQRCodeController=a}function cvjs_setServerSaveHandlerRedlines(a){cvjs_serverSaveFileControllerRedlines=a}function cvjs_setServerLoadHandlerRedlines(a){cvjs_serverLoadFileControllerRedlines=a;cvjs_loadRedlinesFileControllerFlag=!0}function cvjs_setServerLoadHandler(a){cvjs_serverLoadFileController=a;cvjs_loadFileControllerFlag=!0}var cvjs_phpUploadPath="",externalServerPhpUpload=!1;
function cvjs_setPhpUploadPath(a){cvjs_phpUploadPath=a;externalServerPhpUpload=!0}function cvjs_setUploadControllerPath(a){cvjs_phpUploadPath=a;externalServerPhpUpload=!0}function cvjs_setUploadHandler(a){cvjs_serverUploadController=a}function cvjs_setUploadController(a){cvjs_serverUploadController=a}function cvjs_setPhpPath(a){cvjs_phpPath=a;"/"!=cvjs_phpPath.charAt(cvjs_phpPath.length-1)&&(cvjs_phpPath+="/");cvjs_debug&&console.log("NOTE cvjs_setPhpPath="+cvjs_phpPath)}
var pagechange_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_PageChangeList(a){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_pagechangeList=new List("pagechangeList_"+a,cvjs_layerOptions,cvjs_layerValues);for(var b=0;b<multiPages[cvjs_active_floorplan_div_nr].multiPages;b++){var c="javascript:cvjs_PageChangeListClick("+b+")";c="#"+a+"_pagechangelist_menuitem_"+
b;var d="";d=-1<multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName.indexOf("com.autodesk")?"Layout":multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName;multiPages[cvjs_active_floorplan_div_nr].currentPage==b+1?cvjs_pagechangeList.add({selected:languageTable.languages[cvjs_currentLanguage].PageChangeListModal.On,link:c,id:b,layer:d}):cvjs_pagechangeList.add({selected:languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Off,link:c,id:b,layer:d})}pagechange_offset_flag[cvjs_active_floorplan_div_nr]&&
(pagechange_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#pagechangeList_"+a).css({position:"fixed"}),jQuery("#pagechangeList_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}));jQuery("#pagechangeList_"+a).show();jQuery('a[href^="'+("#"+a+"_pagechangelist_menuitem")+'"]').on("click",function(){var a=jQuery(this).attr("href");a=a.substring(a.lastIndexOf("_")+1);a=parseInt(a);cvjs_PageChangeListClick(a)})}}
function cvjs_PageChangeListClick(a){for(var b=0;b<multiPages[cvjs_active_floorplan_div_nr].multiPages;b++){var c=cvjs_pagechangeList.get("id",b)[0];a==b?c.values({selected:languageTable.languages[cvjs_currentLanguage].PageChangeListModal.On}):c.values({selected:languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Off})}cvjs_changePageByNumber(floorplan_div_Array[cvjs_active_floorplan_div_nr],a+1)}
var layerlist_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_LayerList(a){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_layerList=new List("layerList_"+a,cvjs_layerOptions,cvjs_layerValues);for(var b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++){var c="javascript:cvjs_LayerListClick("+b+","+b+")";c="#"+a+"_layerlist_menuitem_"+b+
"_"+b;"OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[b].status&&cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,link:c,id:b,layer:layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName});"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[b].status&&cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:c,id:b,layer:layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName})}layerlist_offset_flag[cvjs_active_floorplan_div_nr]&&
(layerlist_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#layerList_"+a).css({position:"fixed"}),jQuery("#layerList_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}));jQuery("#layerList_"+a).show();jQuery('a[href^="'+("#"+a+"_layerlist_menuitem_")+'"]').on("click",function(){var a=jQuery(this).attr("href"),b=a.substring(a.lastIndexOf("_")+1),c=a.lastIndexOf("_"),g=a.lastIndexOf("_",c-1);a=a.substring(g+1,c);a=parseInt(a);b=parseInt(b);cvjs_LayerListClick(a,
b)})}}var cvjs_layerValues;
function cvjs_LayerListClick(a,b){"OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[a].status?(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),cvjs_spaceObjectLayerOnOff(floorplan_div_Array[cvjs_active_floorplan_div_nr],layerTable[cvjs_active_floorplan_div_nr].layers[a].layerName,"on"),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON",a=cvjs_layerList.get("id",b)[0],a.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On})):(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),
cvjs_spaceObjectLayerOnOff(floorplan_div_Array[cvjs_active_floorplan_div_nr],layerTable[cvjs_active_floorplan_div_nr].layers[a].layerName,"off"),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF",a=cvjs_layerList.get("id",b)[0],a.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off}))}
function modal_all_layer_off(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++){var b=cvjs_layerList.get("id",a)[0];void 0!=b&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off}))}cvjs_allSpaceObjectsOff(floorplan_div_Array[cvjs_active_floorplan_div_nr])}
function modal_all_layer_on(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++){var b=cvjs_layerList.get("id",a)[0];void 0!=b&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On}))}cvjs_allSpaceObjectsOn(floorplan_div_Array[cvjs_active_floorplan_div_nr])}
function modal_swap_layers_on_off(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)if("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[a].status){var b=cvjs_layerList.get("id",a)[0];void 0!=b&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On}))}else b=cvjs_layerList.get("id",a)[0],void 0!=b&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),
layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off}));for(var c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])0==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("displaySpaceObject").indexOf("on")?(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].attr(hide),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("displaySpaceObject","off"),a="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")+
"_image",jQuery(a).hide()):(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].attr(show),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("displaySpaceObject","on"),a="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")+"_image",jQuery(a).show())}
function cvjs_swapLayersInDrawing(a){cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));for(a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)"OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[a].status?(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON"):(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),
layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF")}
function cvjs_allLayersInDrawingOn(a){cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));for(a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)"OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[a].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON")}
function cvjs_layerNamefromObjectID(a){-1==a.indexOf("#")&&(a="#"+a);a=jQuery(a).parents("[id^=layer_]").attr("id");for(var b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)if(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer==a)return layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName}var cvjs_turnDrawingLayerOffFlag=!1;
function cvjs_interactiveLayerOff(a){cvjs_turnDrawingLayerOffFlag=!0;cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")}function cvjs_getCurrentMultiPage_FileName(){return multiPages[cvjs_active_floorplan_div_nr].pages[multiPages[cvjs_active_floorplan_div_nr].currentPage-1].fileName}function cvjs_currentURL(){return window.location.href}function cvjs_currentHost(){return window.location.hostname}var cvjs_defaultJSPath="../app/js/";
function cvjs_setDefaultJSPath(a){cvjs_defaultJSPath=a}function cvjs_setInformationModalType(a){message_modal_type_bootstrap=!0;1==a&&(message_modal_type_bootstrap=!0);2==a&&(message_modal_type_bootstrap=!1)}var message_modal_type_bootstrap=!1,message_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_currentInformationModal_x=0,cvjs_currentInformationModal_y=0;
function cvjs_displayInformationModal(a,b,c,d,e){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");message_modal_type_bootstrap?(jQuery("#cvjs_informationModalText_"+a).html(b),jQuery("#info_messageModal_"+a).modal("show")):(void 0!=c?(jQuery(".info_messageModal_2").css("height",c+"px"),void 0!=d&&void 0!=e&&(jQuery("#info_messageModal_2_"+a).css({position:"fixed"}),cvjs_currentInformationModal_x=jQuery("#"+a).position().left+150,cvjs_currentInformationModal_y=jQuery("#"+a).position().top+50,jQuery("#info_messageModal_2_"+
a).css("top",e),jQuery("#info_messageModal_2_"+a).css("left",d))):message_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(message_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#info_messageModal_2_"+a).css({position:"fixed"}),jQuery("#info_messageModal_2_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#cvjs_informationModalText_2_"+a).html(b),jQuery("#info_messageModal_2_"+a).show())}
function cvjs_hideInformationModal(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");if(1==message_modal_type_bootstrap)jQuery("#info_messageModal_"+a).modal("hide");else{jQuery(".info_messageModal_2").css("height","110px");if(0!=cvjs_currentInformationModal_x||0!=cvjs_currentInformationModal_y)jQuery("#info_messageModal_2_"+a).css("top",cvjs_currentInformationModal_y),jQuery("#info_messageModal_2_"+a).css("left",cvjs_currentInformationModal_x),cvjs_currentInformationModal_y=cvjs_currentInformationModal_x=
0;jQuery("#info_messageModal_2_"+a).hide()}}
function cvjs_displayInformationModal_Mode(a){var b="";if(0==a){b=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.Version+" "+cvjs_versionNumber;try{var c=cvjs_rPaper[cvjs_active_floorplan_div_nr].toString();cvjs_AXversionNumber=c.substring(c.indexOf("Generated by AutoXChange ")+25,c.indexOf("Generated by AutoXChange ")+35);-1==c.indexOf("Generated by AutoXChange ")&&(cvjs_AXversionNumber="V20.0x.yy")}catch(d){console.log("displayInformationModal"+d),cvjs_AXversionNumber=""}b+="<br>"+
languageTable.languages[cvjs_currentLanguage].InfoMessageModal.AXVersion+" "+cvjs_AXversionNumber;c=cvjs_preConversionFileName[cvjs_active_floorplan_div_nr];void 0==c&&(c="Loaded From Server");-1==currentLoadedDrawingFullName.indexOf("Type=svg")&&(c=currentLoadedDrawingFullName);-1<c.indexOf(".svg.js")&&(c=c.substring(0,c.indexOf(".svg.js")));-1<c.indexOf(".js")&&(c=c.substring(0,c.indexOf(".js")));""!=cvjs_SVG_load_svg_fileName&&(c=cvjs_SVG_load_svg_fileName);try{-1<c.lastIndexOf("/")?c=c.substring(c.lastIndexOf("/")+
1):-1<c.lastIndexOf("\\")&&(c=c.substring(c.lastIndexOf("\\")+1)),45<c.length&&(c=c.substring(0,45)+"..")}catch(d){}b+="<br>"+languageTable.languages[cvjs_currentLanguage].InfoMessageModal.DrawingName+" <strong>"+c+"</strong>"}1==a&&(b=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ComingSoon);cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],b)}function cvjs_version(){return cvjs_versionNumber}
var backgroundcolor_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_setBackgroundColor(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4)),a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a),backgroundcolor_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(backgroundcolor_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#backgroundModal_"+a).css({position:"fixed"}),
jQuery("#backgroundModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#backgroundModal_"+a).show())}function cvjs_exit_backgroundColor(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#backgroundModal_"+a).hide()}function cvjs_setBackgroundColorViaButton(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#backgroundModal_"+a).hide()}
function cvjs_setBackgroundColorFromPicker(a){cvjs_setCurrentRedlineValues_Color("#"+a)}var cvjs_genericPickedColor="#AA0000";function cvjs_setGenericColorFromPicker(a){cvjs_genericPickedColor="#"+a}var cvjs_blackBackground=!1,cvjs_currentBackgroundColor="#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" ");
function componentToHex(a){a=a.toString(16);return 1==a.length?"0"+a:a}function rgbToHex(a,b,c){return"#"+componentToHex(a)+componentToHex(b)+componentToHex(c)}function cvjs_setBackgroundColorHexPicker(a,b){jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1);cvjs_setBackgroundColorHex(a,b)}
function cvjs_setBackgroundColorHex(a,b){"undefined"===typeof b&&(b=floorplan_div_Array[cvjs_active_floorplan_div_nr]);1>b.indexOf("_svg")&&(b+="_svg");cvjs_blackBackground=!1;a=a.toString();cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);var c="";0!=a.indexOf("none")&&(c=0==a.indexOf("#")?a:"#"+a);cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr]=c;jQuery("#"+b).css("background-color",c);var d={};jQuery("*[id]").each(function(){try{var a=jQuery(this).attr("id"),c="[id^="+b+"]";jQuery("#"+
a).parents(c).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(d[a]||(d[a]=!0))}catch(m){}});if(-1<a.indexOf("000000")){cvjs_blackBackground=!0;for(var e in d)try{var f="#"+e;if(0==jQuery(f).attr("id").indexOf("cv_")){var g=jQuery(f).css("stroke"),h=jQuery(f).css("fill");"none"!=g&&("#000000"==g||"#000"==g?jQuery(f).css("stroke","#FFFFFF"):("rgb(0, 0, 0)"==g||"rgb( 0, 0, 0)"==g||"rgb(0,0,0)"==g)&&jQuery(f).css("stroke","#FFFFFF"));"none"!=h&&("#000000"==h||"#000"==h?jQuery(f).css("fill",
"#FFFFFF"):("rgb(0, 0, 0)"==h||"rgb( 0, 0, 0)"==h||"rgb(0,0,0)"==h)&&jQuery(f).css("fill","#FFFFFF"))}}catch(k){}}if(-1<a.indexOf("FFFFFF"))for(e in d)try{f="#"+e,0==jQuery(f).attr("id").indexOf("cv_")&&(g=jQuery(f).css("stroke"),h=jQuery(f).css("fill"),"none"!=g&&("#FFFFFF"==g||"#FFF"==g?jQuery(f).css("stroke","#000000"):("rgb(255, 255, 255)"==g||"rgb( 255, 255, 255)"==g||"rgb(255,255,255)"==g)&&jQuery(f).css("stroke","#000000")),"none"!=h&&("#FFFFFF"==h||"#FFF"==h?jQuery(f).css("fill","#000000"):
("rgb(255, 255, 255)"==h||"rgb( 255, 255, 255)"==h||"rgb(255,255,255)"==h)&&jQuery(f).css("fill","#000000")))}catch(k){}}function cvjs_changePageByNumberViaButton(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var b=jQuery("#cvjs_inputDocumentPageChange_"+a).val();b=parseInt(b);cvjs_changePageByNumber(a,b);jQuery("#documentPageChangeModal_"+a).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}
function cvjs_enterPageChangeNumber(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4)),a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),page_change_in_document_offset_flag[cvjs_active_floorplan_div_nr]&&(page_change_in_document_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#documentPageChangeModal_"+a).css({position:"fixed"}),jQuery("#documentPageChangeModal_"+
a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}).appendTo("body")),jQuery("#documentPageChangeModal_"+a).show())}function cvjs_searchTextNext(a,b){textSearchPre!=a?(cvjs_searchText(a,b),textInstanceCounter=1,textSearchPre=a):(textInstanceCounter++,cvjs_searchTextInstance(a,b,textInstanceCounter)||(textInstanceCounter=1,cvjs_searchTextInstance(a,b,textInstanceCounter)))}var textSearchPre="",textInstanceCounter=1;
function cvjs_startSearchText(){var a=jQuery("#cvjs_searchTextFromModal").val(),b=jQuery("#cvjs_percentageLevelFromModal").val();textSearchPre!=a?(cvjs_searchText(a,b),textInstanceCounter=1,textSearchPre=a):(textInstanceCounter++,cvjs_searchTextInstance(a,b,textInstanceCounter)||(textInstanceCounter=1,cvjs_searchTextInstance(a,b,textInstanceCounter)))}
var cvjs_globalOrigin_x=0,cvjs_globalOrigin_y=0,cvjs_units="mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm mm".split(" "),cvjs_svgToWorldUnits=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],cvjs_currentMeasurementLength=0,cvjs_callbackMeasurement=!1,cvjs_calibratedMeasurement=!1,calibrate_x1,calibrate_y1,calibrate_x2,calibrate_y2,cvjs_calibrate_end=!1,cvjs_measurement_end=!1,measurement_x1,measurement_y1,measurement_x2,
measurement_y2,cvjs_calibrateSelectObject=!1,calibrate_text_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_calibrateScale=!1;
function cvjs_calibrateMeasurement(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_calibrate_end=!0,calibrate_text_offset_flag[cvjs_active_floorplan_div_nr]&&(calibrate_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#calibrateModal_"+a).css({position:"fixed"}),jQuery("#calibrateModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),
jQuery("#calibrateModal_"+a).show(),jQuery("#cvjs_calibrate_checkbox").is(":checked")&&(alloff=!1,cvjs_calibrateSelectObject=!0,draw_poly_redline1=!1,cvjs_calibrate_end=first_point_poly_redline1=!0,cvjs_clearAllHighlightHandleObjectStyles(),jQuery("#cvjs_calibrate_modal_text").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.TextObject),jQuery("#cvjs_calibrate_modal_text2").html(""),tRubberBand_poly_redline1.attr({path:"M0,0"}),calibrate_Triangle.attr({fill:measurement_color,transform:"S0.0"}),
calibrate_Triangle2.attr({fill:measurement_color,transform:"S0.0"}),cvjs_removeHandleFunc_CalibrateMeasurementPolyline()),jQuery("#cvjs_calibrate_checkbox3").is(":checked")&&(alloff=!1,cvjs_clearAllHighlightHandleObjectStyles(),cvjs_calibrateMeasurement_RedlinePolyline(),jQuery("#cvjs_calibrate_modal_text").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Text),jQuery("#cvjs_calibrate_modal_text2").html("")),jQuery("#cvjs_calibrate_checkbox2").is(":checked")&&(jQuery("#cvjs_calibrate_modal_text2").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.TextScale),
jQuery("#cvjs_calibrate_modal_text").html("")))}var mLength_calibrateSelectObject=0;
function cvjs_exitCalibrateModal(a,b){if(3==b){b=jQuery("#cvjs_unitForScale").val();1==b?cvjs_units[cvjs_rPaperIndex(a)]="m":2==b?cvjs_units[cvjs_rPaperIndex(a)]="cm":3==b?cvjs_units[cvjs_rPaperIndex(a)]="mm":4==b?cvjs_units[cvjs_rPaperIndex(a)]="km":5==b?cvjs_units[cvjs_rPaperIndex(a)]="feet":6==b?cvjs_units[cvjs_rPaperIndex(a)]="inches":7==b&&(cvjs_units[cvjs_rPaperIndex(a)]="miles");b=parseFloat(jQuery("#cvjs_calibrateScaleFactor").val());if(0>=b||void 0==b)b=1;cvjs_svgToWorldUnits[cvjs_rPaperIndex(a)]=
cvjs_svgToWorldUnits[cvjs_rPaperIndex(a)]*b;cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#calibrateModal_"+a).hide();tRubberBand_poly_redline1.attr({path:"M0,0"});a="S0.0";calibrate_Triangle.attr({fill:measurement_color,transform:a});calibrate_Triangle2.attr({fill:measurement_color,transform:a});cvjs_removeHandleFunc_CalibrateMeasurementPolyline()}else if(cvjs_calibrate_end){alloff=cvjs_measurement_end=!1;cvjs_clearAllHighlightHandleObjectStyles();if(2==b){b=jQuery("#cvjs_unitForScale").val();
1==b?cvjs_units[cvjs_rPaperIndex(a)]="m":2==b?cvjs_units[cvjs_rPaperIndex(a)]="cm":3==b?cvjs_units[cvjs_rPaperIndex(a)]="mm":4==b?cvjs_units[cvjs_rPaperIndex(a)]="km":5==b?cvjs_units[cvjs_rPaperIndex(a)]="feet":6==b?cvjs_units[cvjs_rPaperIndex(a)]="inches":7==b&&(cvjs_units[cvjs_rPaperIndex(a)]="miles");b=jQuery("#cvjs_calibrateReferenceDistance").val();var c=0;try{c=Math.sqrt(Math.pow(calibrate_x2-calibrate_x1,2)+Math.pow(calibrate_y2-calibrate_y1,2)),cvjs_calibrateSelectObject&&(c=mLength_calibrateSelectObject,
cvjs_calibrateSelectObject=!1)}catch(d){}if(isNaN(c)||0==c){a=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.SelectTwoPoints;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a);return}-1<b.indexOf(",")&&(b=b.substring(0,b.indexOf(","))+"."+b.substring(b.indexOf(",")+1));if(isNaN(b)||""==b){a=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ReferenceDistance;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a);
return}cvjs_svgToWorldUnits[cvjs_rPaperIndex(a)]=b/c;cvjs_calibratedMeasurement=!0;try{cvjs_CalibrateMeasurementCallback()}catch(d){console.log(d)}}cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#calibrateModal_"+a).hide();tRubberBand_poly_redline1.attr({path:"M0,0"});a="S0.0";calibrate_Triangle.attr({fill:measurement_color,transform:a});calibrate_Triangle2.attr({fill:measurement_color,transform:a});cvjs_removeHandleFunc_CalibrateMeasurementPolyline()}}
var measurement_text_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_Measurement(a){cvjs_setProcessHandleObjects||(cvjs_debug&&console.log("cvjs_Measurement:  handle processing measurement"),cvjs_processHandleObjects());a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0);cvjs_measurement_end=!0;if("none"==cvjs_units[cvjs_rPaperIndex(a)])a=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.UnitLess,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
a);else if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;measurement_text_offset_flag[cvjs_active_floorplan_div_nr]&&(measurement_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#measurementModal_"+a).css({position:"fixed"}),jQuery("#measurementModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}));if(0==cvjs_units[cvjs_active_floorplan_div_nr].indexOf("feet")){a=Math.floor(cvjs_currentMeasurementLength);
var b=cvjs_currentMeasurementLength-Math.floor(cvjs_currentMeasurementLength);b=Math.round(16*b);16==b&&console.log("do something.....");jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance);jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(a+"' "+b+'/16"')}else jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance),
jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(cvjs_currentMeasurementLength+" "+cvjs_units[cvjs_active_floorplan_div_nr]);jQuery("#measurementModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();1!=cvjs_measurementInteractiveType&&3!=cvjs_measurementInteractiveType&&4!=cvjs_measurementInteractiveType&&5!=cvjs_measurementInteractiveType&&6!=cvjs_measurementInteractiveType&&7!=cvjs_measurementInteractiveType||cvjs_Measurement_RedlinePolyline();2==
cvjs_measurementInteractiveType&&cvjs_addHandleFunc_MeasurementFilledPolygon();8==cvjs_measurementInteractiveType&&(cvjs_measurement_active=!0,cvjs_clearAllHighlightHandleObjectStyles(),cvjs_measurementInteractiveType8ClickFlag=!1)}}
function cvjs_exitMeasurementModal(a){cvjs_setProcessHandleObjects||(cvjs_debug&&console.log("exit measurement - remove handles"),cvjs_removeHandleObjects());alloff=!1;cvjs_clearAllHighlightHandleObjectStyles();cvjs_measurement_end=!0;cvjs_debug&&console.log("EXIT measurement  cvjs_measurement_end "+cvjs_measurement_end);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;if(cvjs_measurement_end)if(cvjs_measurement_end=!1,jQuery("#measurementModal_"+a).hide(),cvjs_debug&&console.log("loop 1"),
2==cvjs_measurementInteractiveType)cvjs_debug&&console.log("branch 1"),tPolygon_redline1.attr({transform:"S0"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),tRubberBand_poly_redline1.remove(),tPolygon_redline1.remove(),cvjs_removeHandleFunc_MeasurementFilledPolygon(),cvjs_debug&&console.log("end branch 1");else{cvjs_debug&&console.log("branch 2");tRubberBand_poly_redline1.attr({path:"M0,0"});var b="S0";measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:b});measurement_Triangle2.attr({fill:cvjs_currentRedline_color,
transform:b});tRubberBand_poly_redline1.remove();measurement_Triangle.remove();measurement_Triangle2.remove();cvjs_removeHandleFunc_MeasurementPolyline()}else{try{if(cvjs_debug&&console.log("we want to clean before drawing..."),2==cvjs_measurementInteractiveType&&(tPolygon_redline1.attr({transform:"T0,0S0.01"}),cvjs_debug&&console.log("here "),tPolygon_redline1.remove(),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon()),1==cvjs_measurementInteractiveType||
3==cvjs_measurementInteractiveType||4==cvjs_measurementInteractiveType||5==cvjs_measurementInteractiveType||6==cvjs_measurementInteractiveType||7==cvjs_measurementInteractiveType)tRubberBand_poly_redline1.attr({path:"M0,0"}),b="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:b}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:b}),tRubberBand_poly_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_removeHandleFunc_MeasurementPolyline()}catch(c){cvjs_debug&&
console.log(c)}jQuery("#measurementModal_"+a).hide()}}
function cvjs_repeatMeasurementModal(){cvjs_measurement_end=alloff=!1;if(2==cvjs_measurementInteractiveType){cvjs_currentMeasurementLength=0;jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area);jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("0 "+cvjs_units[cvjs_active_floorplan_div_nr]+"\u00b2");tPolygon_redline1.attr({transform:"T0,0S0.01"});tRubberBand_poly_redline1.attr({path:"M0,0"});
var a="S0";measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a});measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a});tPolygon_redline1.remove();measurement_Triangle.remove();measurement_Triangle2.remove();cvjs_addHandleFunc_MeasurementFilledPolygon()}if(1==cvjs_measurementInteractiveType||3==cvjs_measurementInteractiveType||4==cvjs_measurementInteractiveType||5==cvjs_measurementInteractiveType||6==cvjs_measurementInteractiveType||7==cvjs_measurementInteractiveType){cvjs_currentMeasurementLength=
0;1==cvjs_measurementInteractiveType&&(jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(cvjs_currentMeasurementLength+" "+cvjs_units[cvjs_active_floorplan_div_nr]));if(3==cvjs_measurementInteractiveType||4==cvjs_measurementInteractiveType)jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Point),
jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("(0,0)");if(5==cvjs_measurementInteractiveType||6==cvjs_measurementInteractiveType)jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Points),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("(0,0)");7==cvjs_measurementInteractiveType&&(jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Points),
jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("M0,0"));tPolygon_redline1.attr({transform:"T0,0S0.01"});tRubberBand_poly_redline1.attr({path:"M0,0"});a="S0";measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a});measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a});tPolygon_redline1.remove();measurement_Triangle.remove();measurement_Triangle2.remove();cvjs_Measurement_RedlinePolyline()}8==cvjs_measurementInteractiveType&&
(jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(cvjs_currentMeasurementLength+" "+cvjs_units[cvjs_active_floorplan_div_nr]),cvjs_measurement_active=!0,cvjs_measurementInteractiveType8ClickFlag=!1,cvjs_clearAllHighlightHandleObjectStyles())}var cvjs_measurementInteractiveType8ClickFlag=!1;
function cvjs_getAutoCADColor(a){0==a.indexOf("#")&&(a=a.substring(1));a=a.toUpperCase();switch(a){case "000000":a=0;break;case "FF0000":a=1;break;case "FFF200":case "FFFF00":a=2;break;case "22B14C":case "00FF00":a=3;break;case "00FFFF":a=4;break;case "0000FF":a=5;break;case "FF00FF":case "800080":a=6;break;case "FFFFFF":a=7;break;case "414141":a=8;break;case "808080":a=9;break;case "FF0000":a=10;break;case "FFAAAA":a=11;break;case "BD0000":a=12;break;case "BD7E7E":a=13;break;case "810000":a=14;break;
case "815656":a=15;break;case "FF7500":case "FFA500":a=30;break;case "808080":case "828282":a=253;break;case "B97A57":case "814000":a=34;break;default:a=1}return a}function cvjs_get_dwg_scaled_value(a,b){return(cvjs_drawingCoordinates[b].DWG.upperRight.x-cvjs_drawingCoordinates[b].DWG.lowerLeft.x)/(cvjs_drawingCoordinates[b].SVG.upperRight.x-cvjs_drawingCoordinates[b].SVG.lowerLeft.x)*a}
function cvjs_get_dwg_x_coord(a,b){return cvjs_drawingCoordinates[b].DWG.lowerLeft.x+(a-cvjs_drawingCoordinates[b].SVG.lowerLeft.x)/(cvjs_drawingCoordinates[b].SVG.upperRight.x-cvjs_drawingCoordinates[b].SVG.lowerLeft.x)*(cvjs_drawingCoordinates[b].DWG.upperRight.x-cvjs_drawingCoordinates[b].DWG.lowerLeft.x)}
function cvjs_get_dwg_y_coord(a,b){return cvjs_drawingCoordinates[b].DWG.lowerLeft.y+(a-cvjs_drawingCoordinates[b].SVG.lowerLeft.y)/(cvjs_drawingCoordinates[b].SVG.upperRight.y-cvjs_drawingCoordinates[b].SVG.lowerLeft.y)*(cvjs_drawingCoordinates[b].DWG.upperRight.y-cvjs_drawingCoordinates[b].DWG.lowerLeft.y)}
var cvjs_printPaperSize="A4",cvjs_printPaperWidth_mm=297,cvjs_printPaperHeight_mm=210,cvjs_printOrientation="portrait",cvjs_printResolutionDpi=300,cvjs_printPixelWidth=3508,cvjs_printPixelHeight=2480,cvjs_objectIsZoomedExtents=!0,cvjs_serverSavePrintModeController=0,cvjs_serverSave_php_controllerArray={},cvjs_serverCreateThumb_StickyNote_Controller="make_thumbnails.php",cvjs_batchFilesToPDF_Controller="make_batch_pdf.php",cvjs_phpImagesUrlController="",cvjs_screenToPDF_Controller="make_singlepage_pdf.php";
function cvjs_setServerCreateThumb_StickyNote_Controller(a){cvjs_serverCreateThumb_StickyNote_Controller=a}function cvjs_setServerSavePrintModeController(a){cvjs_serverSavePrintModeController=a}function cvjs_setServerSavePrintModeHandler(a){cvjs_serverSavePrintModeController=a}function cvjs_setServerScreenToPDFController(a){cvjs_screenToPDF_Controller=a}function cvjs_setServerScreenToPDFHandler(a){cvjs_screenToPDF_Controller=a}
function cvjs_saveScreenAsImage_makeTumbnails(a,b,c,d,e,f){cvjs_saveScreenAsImage_stickyNoteInfo_makeTumbnails(a,b,c,d,e,f)}
function cvjs_saveScreenAsImage_stickyNoteInfo_makeTumbnails(a,b,c,d,e,f){for(var g="",h=0;h<vqStickyNotes.length;h++)0<h&&(g+="\n"),g=g+vqStickyNotes[h].data("id")+","+vqStickyNotes[h].data("name")+","+vqStickyNotes[h].data("userid")+","+vqStickyNotes[h].data("date")+","+vqStickyNotes[h].data("text");cvjs_phpImagesUrlController=cvjs_serverHandlersPath+cvjs_serverCreateThumb_StickyNote_Controller;cvjs_serverSave_php_controllerArray={};cvjs_serverSave_php_controllerArray.serverPath=a;cvjs_serverSave_php_controllerArray.fileName=
b.substring(0,b.indexOf(".png"));cvjs_serverSave_php_controllerArray.thumbFile1=d;cvjs_serverSave_php_controllerArray.thumbFile1_size=c;cvjs_serverSave_php_controllerArray.thumbFile2=f;cvjs_serverSave_php_controllerArray.thumbFile2_size=e;cvjs_serverSave_php_controllerArray.stickyNoteContent=g;cvjs_serverSavePrintModeController=1;cvjs_saveScreenAsImage(a,b)}var cvjs_serverSavePrintMode_serverPath="",cvjs_serverSavePrintMode_image_fileName="";
function cvjs_saveScreenAsImage(a,b){cvjs_serverSavePrintMode_serverPath=a;cvjs_serverSavePrintMode_image_fileName=b.substring(0,b.lastIndexOf("."))+"_base64.png";0==cvjs_serverSavePrintModeController?cvjs_debug&&console.log("cvjs_saveScreenAsImage: cvjs_serverSavePrintModeController == 0 therefore returns"):cvjs_printCanvasPaperSize()}
var cvjs_batchDrawingsArrLength=0,cvjs_batchDrawingsArrLength_globalCounter=0,cvjs_drawingFilesArray=[],cvjs_pageOrientationArray=[],cvjs_pageSizeArray=[],cvjs_pageResolutionArray=[],cvjs_singleDrawingFile="",cvjs_singlePageOrientation="",cvjs_singlePageSize="",cvjs_singlePageResolution="";
function cvjs_saveScreenAsPDF(a,b,c){cvjs_setPrintPaperSize(b);cvjs_setPrintOrientation(a);cvjs_setPrintResolutionDpi(c);var d=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1);d=d.substring(0,d.lastIndexOf("."));var e=new Date;e.getFullYear();e.getMonth();e.getDate();e.getHours();e.getMinutes();e.getSeconds();var f=e.getHours();10>f&&(f="0"+f);switch(e.getMonth()){case 0:var g="Jan";break;case 1:g=
"Feb";break;case 2:g="Mar";break;case 3:g="Apr";break;case 4:g="May";break;case 5:g="Jun";break;case 6:g="Jul";break;case 7:g="Aug";break;case 8:g="Sep";break;case 9:g="Oct";break;case 10:g="Nov";break;case 11:g="Dec";break;default:g="Jan"}e=g+"_"+e.getDate()+"_H"+f+"_"+e.getMinutes();d=d+"_"+e;e=d+".png";cvjs_singleDrawingFile=d;cvjs_singlePageOrientation=a;cvjs_singlePageSize=b;cvjs_singlePageResolution=c;cvjs_serverSavePrintModeController=3;3==cvjs_serverSavePrintModeController&&(jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Printing+"</div></td></tr></table>"),cvjs_setLooperPosition(),jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1500));cvjs_saveScreenAsImage(cvjs_ServerLocation+"/converters/files/",e)}
function cvjs_printSavedBitmapToPDF(){cvjs_serverSave_php_controllerArray={numberOfFiles:1};cvjs_phpImagesUrlController=cvjs_serverHandlersPath+cvjs_screenToPDF_Controller;cvjs_serverSave_php_controllerArray.serverPath=cvjs_ServerLocation+"/converters/files/";cvjs_serverSave_php_controllerArray.fileName_0=cvjs_singleDrawingFile;cvjs_serverSave_php_controllerArray.rotation_0=cvjs_singlePageOrientation;cvjs_serverSave_php_controllerArray.page_format_0=jQuery("#cvjs_paperSize").val();cvjs_serverSave_php_controllerArray.page_resolution_0=
jQuery("#cvjs_paperOrientation").val();cvjs_serverSave_php_controllerArray.org_fileName_0=cvjs_FileNameNoExtension;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_5" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+
'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.BatchPDF+"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1E3);jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_serverSavePrintModeController=0;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();printWindow=window.open(cvjs_ServerUrl+"/converters/files/"+
a,"CADViewer - Print","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize);printWindow.focus()},error:function(a){console.log("Error "+a)}})}
function cvjs_batchConvertDrawingsToPDF_CustomReport(a,b,c,d,e,f,g){cvjs_batchFilesToPDF_Controller=f;cvjs_batchDrawingsArrLength=b.length;cvjs_batchDrawingsArrLength_globalCounter=0;cvjs_drawingFilesArray=b;cvjs_pageOrientationArray=c;cvjs_pageSizeArray=d;cvjs_pageResolutionArray=e;cvjs_setCustomCallbackMethodOnLoadEnd(!0,g);cvjs_serverSavePrintModeController=2;cvjs_LoadDrawing(floorplan_div_Array[cvjs_rPaperIndex(a)],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}
function cvjs_setPrintPaperSize(a){a=a.toLowerCase();0==a.indexOf("a4")&&(cvjs_printPaperSize="A4",cvjs_printPaperWidth_mm=297,cvjs_printPaperHeight_mm=210);0==a.indexOf("a3")&&(cvjs_printPaperSize="A3",cvjs_printPaperWidth_mm=420,cvjs_printPaperHeight_mm=297);0==a.indexOf("a2")&&(cvjs_printPaperSize="A2",cvjs_printPaperWidth_mm=594,cvjs_printPaperHeight_mm=420);0==a.indexOf("a1")&&(cvjs_printPaperSize="A1",cvjs_printPaperWidth_mm=841,cvjs_printPaperHeight_mm=594);0==a.indexOf("a0")&&(cvjs_printPaperSize=
"A0",cvjs_printPaperWidth_mm=1183,cvjs_printPaperHeight_mm=841);0==a.indexOf("a5")&&(cvjs_printPaperSize="A5",cvjs_printPaperWidth_mm=210,cvjs_printPaperHeight_mm=148);0==a.indexOf("usa")&&(cvjs_printPaperSize="USA",cvjs_printPaperWidth_mm=279.4,cvjs_printPaperHeight_mm=215.9);0==a.indexOf("usb")&&(cvjs_printPaperSize="USB",cvjs_printPaperWidth_mm=431.8,cvjs_printPaperHeight_mm=279.4);0==a.indexOf("usc")&&(cvjs_printPaperSize="USC",cvjs_printPaperWidth_mm=555.8,cvjs_printPaperHeight_mm=431.8);0==
a.indexOf("usd")&&(cvjs_printPaperSize="USD",cvjs_printPaperWidth_mm=863.6,cvjs_printPaperHeight_mm=555.8);0==a.indexOf("use")&&(cvjs_printPaperSize="USE",cvjs_printPaperWidth_mm=1117.6,cvjs_printPaperHeight_mm=836.6);0==a.indexOf("letter")&&(cvjs_printPaperSize="letter",cvjs_printPaperWidth_mm=279.4,cvjs_printPaperHeight_mm=215.9);0==a.indexOf("legal")&&(cvjs_printPaperSize="legal",cvjs_printPaperWidth_mm=356,cvjs_printPaperHeight_mm=216);0==a.indexOf("ledger")&&(cvjs_printPaperSize="ledger",cvjs_printPaperWidth_mm=
431.8,cvjs_printPaperHeight_mm=279.4);0==a.indexOf("tabloid")&&(cvjs_printPaperSize="tabloid",cvjs_printPaperWidth_mm=431.8,cvjs_printPaperHeight_mm=279.4);0==a.indexOf("archa")&&(cvjs_printPaperSize="ARCHA",cvjs_printPaperWidth_mm=304.8,cvjs_printPaperHeight_mm=228.6);0==a.indexOf("archb")&&(cvjs_printPaperSize="ARCHB",cvjs_printPaperWidth_mm=457.2,cvjs_printPaperHeight_mm=304.8);0==a.indexOf("archc")&&(cvjs_printPaperSize="ARCHC",cvjs_printPaperWidth_mm=609.6,cvjs_printPaperHeight_mm=457.2);0==
a.indexOf("archd")&&(cvjs_printPaperSize="ARCHD",cvjs_printPaperWidth_mm=914.4,cvjs_printPaperHeight_mm=609.6);0==a.indexOf("arche")&&(cvjs_printPaperSize="ARCHE",cvjs_printPaperWidth_mm=1219.2,cvjs_printPaperHeight_mm=914.4);0==a.indexOf("alcoaa")&&(cvjs_printPaperSize="ALCOAA",cvjs_printPaperWidth_mm=914.4,cvjs_printPaperHeight_mm=762);cvjs_printPixelWidth=Math.round(cvjs_printPaperWidth_mm*cvjs_printResolutionDpi/25.4);cvjs_printPixelHeight=Math.round(cvjs_printPaperHeight_mm*cvjs_printResolutionDpi/
25.4)}function cvjs_setPrintResolutionDpi(a){75<=a&&(cvjs_printResolutionDpi=a,cvjs_printPixelWidth=Math.round(cvjs_printPaperWidth_mm*cvjs_printResolutionDpi/25.4),cvjs_printPixelHeight=Math.round(cvjs_printPaperHeight_mm*cvjs_printResolutionDpi/25.4))}function cvjs_setPrintOrientation(a){a=a.toLowerCase();0==a.indexOf("landscape")&&(cvjs_printOrientation="landscape");0==a.indexOf("portrait")&&(cvjs_printOrientation="portrait")}
var print_text_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_Print(a){if(cvjs_customPrintTextboxMode){jQuery("#cvjs_SelectVariablesTextBox").empty();for(var b=0;b<cvjs_printModalCustomTextBoxVariablesList.length;b++)jQuery("#cvjs_SelectVariablesTextBox").append('<option value="'+(b+1)+'">'+cvjs_printModalCustomTextBoxVariablesList[b]+"</option>")}"undefined"===typeof a?(cvjs_active_floorplan_div_nr=0,a=floorplan_div_Array[0]):(a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));jQuery("#floorPlanCanvasObject_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();jQuery("#floorPlanCanvasObject_table_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();if(cvjs_PrintIconDisabled[cvjs_active_floorplan_div_nr])cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.PrintDisabled);else if(cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4)),a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]&&
(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,print_text_offset_flag[cvjs_active_floorplan_div_nr]&&(print_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#printModal_"+a).css({position:"fixed"}),jQuery("#printModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#printModal_"+a).show(),cvjs_customPrintCheckboxMode&&!cvjs_initCustomPrintCheckboxMode)){cvjs_initCustomPrintCheckboxMode=!0;if(jQuery("#cvjs_custom_checkbox").is(":checked")){cvjs_customPrintCheckbox=
!0;jQuery("#cvjs_printModalTextboxLocation").show();jQuery("#cvjs_printModalTextboxLocation_text").show();cvjs_customPrintDualTextboxMode&&(jQuery("#cvjs_printModalDualTextboxLocation").show(),jQuery("#cvjs_printModalDualTextboxLocation_text").show());a="printModal";if(cvjs_customPrintCheckboxMode||cvjs_customPrintTextboxMode)a="printModalTextbox";b=jQuery("."+a).css("height");b=b.substring(0,b.indexOf("px"));b=parseInt(b)+70}else{cvjs_customPrintCheckbox=!1;jQuery("#cvjs_printModalTextboxLocation").hide();
jQuery("#cvjs_printModalTextboxLocation_text").hide();cvjs_customPrintDualTextboxMode&&(jQuery("#cvjs_printModalDualTextboxLocation").hide(),jQuery("#cvjs_printModalDualTextboxLocation_text").hide());a="printModal";if(cvjs_customPrintCheckboxMode||cvjs_customPrintTextboxMode)a="printModalTextbox";b=jQuery("."+a).css("height");b=b.substring(0,b.indexOf("px"));b=parseInt(b)-70}jQuery("."+a).css("height",b+"px")}}
function cvjs_exitPrintModal(a,b){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;1==b?jQuery("#printModal_"+a).fadeOut(500):(b=jQuery("#cvjs_printResolution").val(),cvjs_setPrintResolutionDpi(b),cvjs_setPrintPaperSize(jQuery("#cvjs_paperSize").val()),jQuery.when(jQuery("#printModal_"+a).fadeOut(100)).done(function(b){cvjs_debug&&console.log("we have faded out! parem "+b);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+
floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Printing+"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(100);cvjs_debug&&console.log("after waitlooper, printmodal Fade Out WaitLooper Fade IN");b=jQuery("#cvjs_paperOrientation").val();
1==b&&cvjs_setPrintOrientation("landscape");2==b&&cvjs_setPrintOrientation("portrait");if(cvjs_printPdf)if(cvjs_custom_print_to_pdf){for(var c=b="",e=0;e<rest_nname[cvjs_active_floorplan_div_nr].length;e++)"basic"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length),"layout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],
c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length),"model"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length),"layoutsonly"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length),
"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length),"last"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(b=rest_nname[cvjs_active_floorplan_div_nr][e],
c=rest_vvalue[cvjs_active_floorplan_div_nr][e],e=rest_nname[cvjs_active_floorplan_div_nr].length);""==b&&(-1<multiPages[cvjs_active_floorplan_div_nr].pages[multiPages[cvjs_active_floorplan_div_nr].currentPage-1].pageName.toLowerCase().indexOf("model")?(b="model",c=""):(b="layout",c=multiPages[cvjs_active_floorplan_div_nr].pages[multiPages[cvjs_active_floorplan_div_nr].currentPage-1].pageName));jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+
floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_5" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.BatchPDF+"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#printModal_"+a).hide();e=cvjs_serverHandlersPath+cvjs_customPDFprintController;var f={},g="";g=-1<currentLoadedDrawingFullName.indexOf(".js")||-1<currentLoadedDrawingFullName.indexOf(".svg")?
currentLoadedDrawingFullName:cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr];f.file=g;f.param1_name=b;f.param1_value=c;f.paper_size=cvjs_printPaperSize;f.paper_orientation=cvjs_printOrientation;cvjs_printGrayscale?2==jQuery("#cvjs_grayScaleType").val()?f.param2_name="bw":f.param2_name="greyscale":f.param2_name="";f.param2_value="";jQuery.ajax({url:e,type:"post",data:f,success:function(a){console.log("Response custom php: "+a);parseServerResponsePDFPrintCustom(a);jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()}})}else cvjs_printConvertedPDF();else cvjs_printPaperSizeasSVGObjectFlag?(cvjs_printPaperSizeasSVGObject(a),jQuery("#printModal").hide()):cvjs_printCanvasPaperSize()}))}
function cvjs_Conversion_forPrint(a,b,c,d,e){var f="";if(cvjs_customPrintCheckboxMode&&cvjs_customPrintTextboxMode){cvjs_customPrintDualTextboxMode?(cvjs_printModalCustomTextBoxVariablesContent[0]=jQuery("#printmodal_text").val(),cvjs_printModalCustomTextBoxVariablesContent[1]=jQuery("#printmodal_dual_text").val()):(f=jQuery("#cvjs_SelectVariablesTextBox").val(),cvjs_printModalCustomTextBoxVariablesContent[cvjs_customPrintTextboxOnChange_pre-1]=jQuery("#printmodal_text").val(),jQuery("#printmodal_text").val(cvjs_printModalCustomTextBoxVariablesContent[f-
1]),cvjs_customPrintTextboxOnChange_pre=f);f="[";for(var g=0;g<cvjs_printModalCustomTextBoxVariablesList.length;g++)0<g&&(f+=" , "),f=cvjs_customPrintDualTextboxMode?f+('{ "Variables": { "'+cvjs_printModalCustomTextBoxVariablesList[g]+'": { "Value": "'+cvjs_printModalCustomTextBoxVariablesContent[g].replace(/(\r\n|\n|\r)/gm,"/P")+'", "FontSize": "10"'):f+('{ "Variables": { "'+cvjs_printModalCustomTextBoxVariablesList[g]+'": { "Value": "'+cvjs_printModalCustomTextBoxVariablesContent[g].replace(/(\r\n|\n|\r)/gm,
"/P")+'", "FontSize": "'+jQuery("#cvjs_printTextboxFontSizeInput_"+a).val()+'"'),0!=cvjs_printModalCustomTextBoxVariablesPrepend[g].indexOf("none")&&(f+=', "Prefix": "'+cvjs_printModalCustomTextBoxVariablesPrepend[g]+'"'),f+=" } } }";var h=cvjs_serverHandlersPath+cvjs_serverSaveFileController,k=cvjs_ServerLocation+"/converters/files/variables"+Math.floor(1E6*Math.random())+".json";g={};g.file=k;g.file_content=f+"]";jQuery.ajax({url:h,type:"post",async:!1,data:g,success:function(a){}});f=k}cvjs_debug&&
console.log(a+" 2 "+b+" 3none  4 "+c+" 5 "+d);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_5" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.BatchPDF+
"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();a={};g={};for(h=0;h<rest_nname[cvjs_active_floorplan_div_nr].length;h++)"f"==rest_nname[cvjs_active_floorplan_div_nr][h]?(a[h]="f",0==e.indexOf("pdf")?g[h]="pdf":0==
e.indexOf("svg")&&(g[h]="svg")):(a[h]=rest_nname[cvjs_active_floorplan_div_nr][h],g[h]=rest_vvalue[cvjs_active_floorplan_div_nr][h]);if(void 0==a.length||0==a.length)a[0]="f",0==e.indexOf("pdf")?g[0]="pdf":0==e.indexOf("svg")&&(g[0]="svg");k=!0;for(h=0;h<a.length;h++)"basic"==a[h]&&(k=!1),"layout"==a[h]&&(k=!1),"model"==a[h]&&(k=!1),"layoutsonly"==a[h]&&(k=!1),"lastsavedview"==a[h]&&(k=!1),"last"==a[h]&&(k=!1),"firstlayout"==a[h]&&(k=!1);k&&(h=a.length,0==rest_contentFormat.toLowerCase().indexOf("dwf")?
(a[h]="lastsavedview",0==rest_converter.indexOf("AutoXchange AX2017")&&(a[h]="firstlayout"),0==rest_converter.indexOf("AutoXchange AX2019")&&(a[h]="firstlayout"),0==rest_converter.indexOf("AutoXchange AX2020")&&(a[h]="firstlayout")):a[h]="model",g[h]="",h=a.length,a[h]="extents",g[h]="");0==rest_contentFormat.toLowerCase().indexOf("pcf")&&(h=a.length,a[h]="treatas",g[h]="DGN");var l=a.length;for(h=0;h<l;h++)"RL"==a[h]&&(a.splice(h,1),g.splice(h,1));l=a.length;for(h=0;h<l;h++)"TL"==a[h]&&(a.splice(h,
1),g.splice(h,1));if(0<rest_nname_custom[cvjs_active_floorplan_div_nr].length){l=a.length;var m=rest_nname_custom[cvjs_active_floorplan_div_nr].length;for(h=0;h<m;h++){var p=!1;for(k=0;k<l;k++)a[k]==rest_nname_custom[cvjs_active_floorplan_div_nr][h]&&(p=!0);p||(a[l]=rest_nname_custom[cvjs_active_floorplan_div_nr][h],g[l]=rest_vvalue_custom[cvjs_active_floorplan_div_nr][h],l++)}}k=!1;l=rest_nname[cvjs_active_floorplan_div_nr].length;for(h=0;h<l;h++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][h]&&
(k=!0);for(h=0;h<l;h++)k&&"last"==rest_nname[cvjs_active_floorplan_div_nr][h]&&(rest_nname[cvjs_active_floorplan_div_nr][h]=""),k&&"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][h]&&(rest_nname[cvjs_active_floorplan_div_nr][h]=""),k&&"model"==rest_nname[cvjs_active_floorplan_div_nr][h]&&(rest_nname[cvjs_active_floorplan_div_nr][h]=""),k&&"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][h]&&(rest_nname[cvjs_active_floorplan_div_nr][h]="");l={};0==e.indexOf("pdf")&&(l.action="pdf_creation");
0==e.indexOf("svg")&&(l.action="svg_creation");l.converter=rest_converter;l.version=rest_version;l.contentType=rest_contentType;b=b.replace(/\\/g,"/");"file"==l.contentType&&(0<b.indexOf("%")?l.contentLocation=b:l.contentLocation=encodeURIComponent(b));"stream"==l.contentType&&(0<b.indexOf("%")?l.contentStream=b:l.contentStream=encodeURIComponent(b));"embedded"==l.contentType&&(0<b.indexOf("%")?l.embeddedContent=b:l.embeddedContent=encodeURIComponent(b));l.contentFormat=rest_contentFormat;l.contentUsername=
c;l.contentPassword=d;l.userLabel=rest_userLabel;rest_serviceCall&&(l.userLabel=rest_ServiceToken,l.applicationPlatform=rest_applicationPlatform,l.applicationPlatformUsername=rest_applicationPlatformUsername,l.applicationPlatformUserID=rest_applicationPlatformUserID,"stream"==l.contentResponse&&(l.leaveStreamOnServer=rest_leaveStreamOnServer));l.contentResponse="file";l.parameters=[];cvjs_debug&&console.log("conv_extr_request.contentPassword x"+l.contentPassword+"x");for(h=0;h<rest_nname[cvjs_active_floorplan_div_nr].length;h++)b=
{},b.paramName=a[h],b.paramValue=g[h],l.parameters[h]=b;cvjs_printGrayscale&&(k=rest_nname[cvjs_active_floorplan_div_nr].length,b={},2==jQuery("#cvjs_grayScaleType").val()?b.paramName="bw":b.paramName="greyscale",b.paramValue="",l.parameters[k]=b);cvjs_customPrintCheckbox&&(0==cvjs_printModalCustomCheckBox.indexOf("add_json")&&cvjs_customPrintTextboxMode?(k=rest_nname[cvjs_active_floorplan_div_nr].length,b={paramName:"json"},b.paramValue=f,l.parameters[k]=b):0==cvjs_printModalCustomCheckBox.indexOf("add_json")&&
(k=rest_nname[cvjs_active_floorplan_div_nr].length,b={paramName:"json"},b.paramValue=cvjs_jsonLocation,l.parameters[k]=b));0==e.indexOf("pdf")&&(k=l.parameters.length,b={},b.paramName=cvjs_printPaperSize,b.paramValue="",l.parameters[k]=b,k=l.parameters.length,b={},b.paramName=cvjs_printOrientation,b.paramValue="",l.parameters[k]=b);api_data=JSON.stringify(l);tms_rest_api_url=tms_rest_api_url1+rest_php_version;cvjs_debug&&console.log(" index of"+tms_rest_api_url1.indexOf("tms-restful-api"));-1<tms_rest_api_url1.indexOf("tms-restful-api")&&
(cvjs_passwordProtected=!0,cvjs_isLicensed&&(cvjs_usr="tms",cvjs_pwd="restful"),cvjs_Community_Version&&(cvjs_usr="tms",cvjs_pwd="restful"),cvjs_debug&&console.log(cvjs_isLicensed+" "+cvjs_usr+" "+cvjs_pwd));cvjs_passwordProtected?(c=tms_rest_api_url.indexOf("//"),b=tms_rest_api_url.substring(0,c+2),c=tms_rest_api_url.substring(c+2),b=b+cvjs_usr+":"+cvjs_pwd+"@"+c):b=tms_rest_api_url;c="";c=cvjs_encodeURIcall_server?b+"?json="+encodeURIComponent(api_data):b+"?json="+api_data;cvjs_debug&&console.log(b+
" in makeConversion  request="+encodeURIComponent(api_data)+"  non encoded request: "+api_data);cvjs_jsonp_handshake&&(cvjs_debug&&console.log("before ajax call to php "),jQuery.ajax({url:c,jsonp:"tms_restful_api",dataType:"jsonp",async:!1,success:function(a){cvjs_debug&&console.log("jsonP Conversion success: "+a);0==e.indexOf("pdf")&&parseServerResponsePDFPrint(a);0==e.indexOf("svg")&&parseServerResponseSVGPrint(a)},error:function(a,b,c){console.log("1 jsonp getEngines error="+a.responseText+" status="+
b+" error="+c)}}));cvjs_servlet_handshake&&(cvjs_debug&&console.log("1 before ajax call to Servlet"),c={},c.request=api_data,cvjs_debug&&console.log("1 before ajax call to Servlet filelist_data['request'] "+c.request),jQuery.ajax({url:b,type:"post",async:!1,data:c,success:function(a){cvjs_debug&&console.log("json Conversion success parseSErverResponsePDFPrint: "+a);0==e.indexOf("pdf")&&parseServerResponsePDFPrint(a);0==e.indexOf("svg")&&parseServerResponseSVGPrint(a)},error:function(a){console.log("2 json getEngines error="+
a)}}));cvjs_post_handshake&&(cvjs_debug&&console.log("before ajax post call"),g={},g.json_data=api_data,jQuery.ajax({url:b,type:"POST",async:!1,data:g,success:function(a){cvjs_debug&&console.log("post Conversion: "+a);0==e.indexOf("pdf")&&parseServerResponsePDFPrint(a);0==e.indexOf("svg")&&parseServerResponseSVGPrint(a)},error:function(a){console.log("2 json getEngines error="+a)}}))}
String.prototype.replaceAll=function(a,b,c){return this.replace(new RegExp(a.replace(/([\/,!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-&])/g,"\\$&"),c?"gi":"g"),"string"==typeof b?b.replace(/\$/g,"$$$$"):b)};
function parseServerResponsePDFPrint(a){a=jQuery.parseJSON(a);if("E0"==a.errorCode){if(jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),"pdf_creation"==a.completedAction){var b="";"stream"==rest_contentResponse&&(b=a.contentStreamData);"file"==rest_contentResponse&&(b=a.contentStreamData);cvjs_debug&&console.log("filelocation "+b);a=cvjs_serverHandlersPath+cvjs_returnPDFparamsController;cvjs_debug&&console.log("fUrl "+a);jQuery.ajax({url:a,
type:"post",data:{file:""},success:function(a){cvjs_debug&&console.log("success "+a);var c=a.substring(0,a.indexOf("|"));a=a.substring(a.indexOf("|")+1);a.substring(0,a.indexOf("|"));-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");0==cvjs_frontEndHandlerType.indexOf("javascript")&&0==cvjs_backEndHandlerType.indexOf("nodejs")&&(cvjs_javaScriptsAbsoluteFolder=ServerUrl+"/app/js/",cvjs_defaultJSPath=ServerUrl+"/app/js/");printWindow=window.open("","CADViewer - Print","width="+
window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize);printWindow.document.write('<!DOCTYPE html><html><title>CADViewer - Print</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script><script src="'+cvjs_defaultJSPath+'/popper.js" type="text/javascript">\x3c/script><script src="'+cvjs_defaultJSPath+'/bootstrap.min.js" type="text/javascript">\x3c/script><link href="'+cvjs_defaultJSPath+
'../css/bootstrap.min.css" rel="stylesheet">\x3c/script>');printWindow.document.write('<link href="'+cvjs_defaultJSPath+'../css/font-awesome.min.css" rel="stylesheet">\x3c/script>');printWindow.document.write("<style>.btn {  background-color: DodgerBlue;  border: none;  color: white;  padding: 12px 30px;  cursor: pointer;  font-size: 20px;} /* Darker background on mouse-over */ .btn:hover {  background-color: RoyalBlue;} </style>");printWindow.document.write('<script type="text/javascript">');(c+
b.substring(b.lastIndexOf("/")+1)).replaceAll("\\","/");a=b.substring(b.lastIndexOf("/")+1);printWindow.document.write("jQuery(document).ready(function(){\tjQuery('#downloadbutton').click(function (e) { \t\tvar element = document.createElement('a'); \t\telement.setAttribute('href', '"+b+"'); \t\telement.setAttribute('download', '"+a+"'); \t\tdocument.body.appendChild(element); \t\telement.click(); \t\tdocument.body.removeChild(element); \t\t\t});});\x3c/script>");printWindow.document.write("</head><body>");
printWindow.document.write('<button id="downloadbutton" class="btn" style="width:100%"><i class="fa fa-download"></i> Download: '+a+"</button> <br>");printWindow.document.write('<div id="pdf"><object width="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+'" height="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize*2339/1654+'" type="application/pdf" data="'+b+'" id="pdf_content"><p>Please install a PDF viewer, the CADViewer batch file PDF cannot be displayed.</p></object></div></body></html>');
printWindow.document.close();printWindow.focus()}})}}else{jQuery("#looper").hide();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();var c="";c="E1"==a.errorCode?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ServerSideFormatForPDFPrint:"Server side conversion error, AutoXchange responded with errorcode: "+a.errorCode;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],c)}}
function parseServerResponsePDFPrintCustom(a){a=a.replace(/\\/g,"/");cvjs_debug&&console.log("Api_response "+a);a=jQuery.parseJSON(a);if("E0"==a.errorCode){if(jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),"pdf_creation"==a.completedAction){var b="";"stream"==rest_contentResponse&&(b=a.contentStreamData);"file"==rest_contentResponse&&(b=a.contentStreamData);cvjs_debug&&console.log("filelocation "+b);jQuery.ajax({url:cvjs_serverHandlersPath+
cvjs_returnPDFparamsController,type:"post",data:{file:""},success:function(a){var c=a.substring(0,a.indexOf("|"));a=a.substring(a.indexOf("|")+1);a.substring(0,a.indexOf("|"));-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");printWindow=window.open("","CADViewer - Print","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize);printWindow.document.write('<!DOCTYPE html><html><title>CADViewer - Print</title><head><script src="'+
cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');printWindow.document.write('<script type="text/javascript">');a=c+b.substring(b.lastIndexOf("/")+1);a=a.replaceAll("\\","/");printWindow.document.write("jQuery(window).on('beforeunload', function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+a+"', cache: false, success: function(html){}});  }); jQuery(window).on('unload', function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+
"/"+cvjs_serverDeleteFileController+"?file="+a+"', cache: false, success: function(html){}})  }); window.onbeforeunload = function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+a+"', cache: false, success: function(html){}}) }; \x3c/script>");printWindow.document.write('</head><body><div id="pdf">');printWindow.document.write('<object width="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+'" height="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize*
2339/1654+'" type="application/pdf" data="'+b+'" id="pdf_content"><p>Please install a PDF viewer, the CADViewer batch file PDF cannot be displayed.</p></object></div></body></html>');printWindow.document.close();printWindow.focus()}})}}else{jQuery("#looper").hide();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();var c="";c="E1"==a.errorCode?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ServerSideFormatForPDFPrint:"Server side conversion error, AutoXchange responded with errorcode: "+
a.errorCode;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],c)}}function cvjs_printConvertedPDF(){cvjs_Conversion_forPrint(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr],"pdf")}var cvjs_PrintToScale=!1,cvjs_ctx;
function cvjs_printCanvasPaperSize(){var a;-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");navigator.userAgent.indexOf("Firefox");var b=a=cvjs_rPaper[cvjs_active_floorplan_div_nr].toString();printDebugFlag&&console.log("1A ");var c=viewBoxWidth[cvjs_active_floorplan_div_nr],d=viewBoxHeight[cvjs_active_floorplan_div_nr],e=a.substring(0,a.indexOf("width:")+6),f=a.substring(a.indexOf("height:")+6);f=f.substring(f.indexOf(";"));a=(e+c+"; height:"+d+f).replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,
"");printDebugFlag&&console.log("1B ");window.location.href.indexOf("file:");var g=c/d;c=cvjs_printPixelWidth/cvjs_printPixelHeight;var h=!0;1<=g&&(h=!1);cvjs_ctx=jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr])[0].getContext("2d");if(-1<fileLoad_contentFormat.toLowerCase().indexOf("png")||-1<fileLoad_contentFormat.toLowerCase().indexOf("gif")||-1<fileLoad_contentFormat.toLowerCase().indexOf("jpg"))e=a.substring(0,a.indexOf("<image")),f=a.substring(a.indexOf("<image")+
6),f=f.substring(f.indexOf("</image>")+8),a=e+f,cvjs_objectIsZoomedExtents?(printDebugFlag&&console.log("1D "),cvjs_customLayerContentAdded?(b=cvjs_customLayerContent.getBBox(),console.log(b.x+" "+b.y+"  "+b.height+"  "+b.width),cvjs_ctx.canvas.height=Math.round(cvjs_rasterImageLoaded.height),cvjs_ctx.canvas.width=b.width+b.x>cvjs_rasterImageLoaded.width?Math.round(b.x+1.5*b.width):Math.round(cvjs_rasterImageLoaded.width),cvjs_ctx.canvas.height=b.height+b.y>cvjs_rasterImageLoaded.height?Math.round(b.y+
1.5*b.height):Math.round(cvjs_rasterImageLoaded.height)):(b=layers_all.getBBox(),cvjs_ctx.canvas.height=b.height,cvjs_ctx.canvas.width=1.2*b.width),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(Math.round(cvjs_rasterImageLoaded.height)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(Math.round(cvjs_rasterImageLoaded.width)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("width",
Math.round(cvjs_rasterImageLoaded.width)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("height",Math.round(cvjs_rasterImageLoaded.height)),printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show(),cvjs_ctx.drawImage(cvjs_rasterImageLoaded,0,0,cvjs_rasterImageLoaded.width,cvjs_rasterImageLoaded.height),cvjs_ctx.drawSvg(a,0,0,viewBoxWidth[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr])):
(g=c,h=!1,printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show(),e=a.substring(a.indexOf("width=")+7),e=e.substring(0,e.indexOf('"')),cvjs_debug&&console.log("print bitmap1 "+e),b=Number(e),f=a.substring(a.indexOf("height=")+8),f=f.substring(0,f.indexOf('"')),cvjs_debug&&console.log("print bitmap2 "+e),c=Number(f),printDebugFlag&&console.log("1C "),cvjs_ctx.canvas.height=Math.round(c),cvjs_ctx.canvas.width=Math.round(b),jQuery("#floorPlanCanvasObject_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(Math.round(c)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(Math.round(b)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("width",Math.round(b)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("height",Math.round(c)),printDebugFlag&&console.log("viewBox[cvjs_active_floorplan_div_nr].X "+viewBox[cvjs_active_floorplan_div_nr].X+
" viewBox[cvjs_active_floorplan_div_nr].Y "+viewBox[cvjs_active_floorplan_div_nr].Y+" viewBoxWidth[cvjs_active_floorplan_div_nr] "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" viewBoxHeight[cvjs_active_floorplan_div_nr]"+viewBoxHeight[cvjs_active_floorplan_div_nr]+" boxWidth "+b+" boxHeight "+c),cvjs_ctx.drawImage(cvjs_rasterImageLoaded,viewBox[cvjs_active_floorplan_div_nr].X,viewBox[cvjs_active_floorplan_div_nr].Y,viewBoxWidth[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr],
0,0,b,c),cvjs_ctx.drawSvg(a,0,0,b,c)),cvjs_callPrintAfter_canvg(h,g);else{0==cvjs_printOrientation.indexOf("landscape")?(cvjs_ctx.canvas.height=Math.round(cvjs_printPixelHeight),cvjs_ctx.canvas.width=Math.round(cvjs_printPixelWidth),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(Math.round(cvjs_printPixelHeight)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(Math.round(cvjs_printPixelWidth)),jQuery("#floorPlanCanvasObject_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("width",Math.round(cvjs_printPixelWidth)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("height",Math.round(cvjs_printPixelHeight))):(cvjs_ctx.canvas.height=Math.round(cvjs_printPixelWidth),cvjs_ctx.canvas.width=Math.round(cvjs_printPixelHeight),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(Math.round(cvjs_printPixelWidth)),jQuery("#floorPlanCanvasObject_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(Math.round(cvjs_printPixelHeight)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("width",Math.round(cvjs_printPixelHeight)),jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("height",Math.round(cvjs_printPixelWidth)));for(;-1<b.indexOf("xmlns:cvjs");)a=b.indexOf("xmlns:cvjs"),f=b.indexOf('"',a),f=b.indexOf('"',f+1),b=b.substring(0,a-1)+b.substring(f+1);for(;-1<b.indexOf("cvjs:");)a=
b.indexOf("cvjs:"),f=b.indexOf('"',a),f=b.indexOf('"',f+1),b=b.substring(0,a-1)+b.substring(f+1);for(;-1<b.indexOf("xmlns:NS");)a=b.indexOf("xmlns:NS"),f=b.indexOf("NS",a+8),e=b.indexOf(" ",f+2),f=b.indexOf(">",f+2),f<e&&(e=f),b=b.substring(0,a-1)+b.substring(e);printDebugFlag&&console.log(b);b=a=b.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"");a=b.indexOf("<svg");b=b.substring(0,a+4)+' xmlns="http://www.w3.org/2000/svg" '+b.substring(a+4);e=b.substring(0,b.indexOf("width:")+6);f=b.substring(b.indexOf("height:")+
6);f=f.substring(f.indexOf(";"));b=0==cvjs_printOrientation.indexOf("landscape")?e+cvjs_printPixelWidth+"; height:"+cvjs_printPixelHeight+f:e+cvjs_printPixelHeight+"; height:"+cvjs_printPixelWidth+f;g=c;h=!1;printDebugFlag&&console.log("1C ");a=b;printDebugFlag&&console.log("\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\u00c5\n\r"+a);if(cvjs_PrintToScale){c=jQuery("#cvjs_printToScaleValue").val();printDebugFlag&&window.alert("printScale "+c);a=c.split(":");c=1;if(2==
a.length)c=a[0]/a[1],printDebugFlag&&window.alert("OK Scale:"+c);else{printDebugFlag&&window.alert("not valid scale");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();return}a=b.indexOf("viewBox=");e=b.substring(0,a+9);f=b.substring(a+9);a=f.indexOf('"');b=f.substring(a);a=f.substring(0,a).split(" ");f=cvjs_drawingCoordinates[multiPages[cvjs_active_floorplan_div_nr].currentPage].DWG.upperRight.x-cvjs_drawingCoordinates[multiPages[cvjs_active_floorplan_div_nr].currentPage].DWG.lowerLeft.x;
"cm"==cvjs_units[cvjs_active_floorplan_div_nr]&&(f*=10);"m"==cvjs_units[cvjs_active_floorplan_div_nr]&&(f*=1E3);"in"==cvjs_units[cvjs_active_floorplan_div_nr]&&(f*=25.4);"feet"==cvjs_units[cvjs_active_floorplan_div_nr]&&(f*=304.8);d=1;0==cvjs_printOrientation.indexOf("landscape")&&(d=(cvjs_printPaperHeight_mm-40)/f);0==cvjs_printOrientation.indexOf("portrait")&&(d=(cvjs_printPaperHeight_mm-40)/f);d/=c;printDebugFlag&&window.alert(cvjs_printOrientation+"  "+f+" cvjs_printPaperHeight_mm="+cvjs_printPaperHeight_mm+
"  "+d);a[2]*=d;a[3]*=d;a=e+(a[0]+" "+a[1]+" "+a[2]+" "+a[3])+b;printDebugFlag&&console.log("\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\r\n");printDebugFlag&&console.log("\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\r\n");printDebugFlag&&console.log("\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\u00d6\r\n");printDebugFlag&&console.log(a)}printDebugFlag&&
jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();cvjs_debug&&console.log("floorPlanCanvasObject "+floorplan_div_Array[cvjs_active_floorplan_div_nr]+" "+a);canvg("floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr],a,{renderCallback:function(){cvjs_callPrintAfter_canvg(h,g)}})}}
function cvjs_callPrintAfter_canvg(a,b){printDebugFlag&&console.log("before canvg");new Image;printDebugFlag&&console.log("no return from cvjs_callPrintAfter_canvg");var c=document.getElementById("floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);var d=jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr])[0].getContext("2d");var e=c.width,f=c.height;if(cvjs_spaceFloodFill)cvjs_floodfill(d,e,f,b,a),d=c.toDataURL("image/png"),cvjs_serverSavePrintModeController=
6,c=Math.random().toString().substring(2,5),sendServerStringToServer(d,"floodFill_"+c+".png");else{printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();if(cvjs_printGrayscale){a=d.getImageData(0,0,c.width,c.height);b=a.data;for(e=0;e<b.length;e+=4)f=.34*b[e]+.5*b[e+1]+.16*b[e+2],b[e]=f,b[e+1]=f,b[e+2]=f;d.putImageData(a,0,0)}d=c.toDataURL("image/png");printDebugFlag&&console.log("Image canvas element width "+c.width+" height "+c.height);b=c.width/
c.height;a=1>b?!0:!1;0==cvjs_printOrientation.indexOf("landscape")?cvjs_printImagePaperSizeRotated(d,.5*window.screen.width,.75*window.screen.height,a,b):cvjs_printImagePaperSize(d,.5*window.screen.width,.75*window.screen.height,a,b)}}
function cvjs_printImagePaperSizeRotated(a,b,c,d,e){-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");var f=!1;-1<window.location.href.indexOf("file:")&&(f=!0);f?(printWindow=window.open("","CADViewer - Print","height="+c+",width="+b),printOnLoadedDocumentRotated(printWindow,a,d,e,!0)):printOnLoadedDocumentRotated_Server(a,d,e)}
function cvjs_printImagePaperSize(a,b,c,d,e){-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");var f=!1;-1<window.location.href.indexOf("file:")&&(f=!0);f?(b=window.open("","CADViewer - Print","height="+c+",width="+b),printOnLoadedDocument(b,a,d,e,!0)):printOnLoadedDocument_Server(a,d,e)}
function printOnLoadedDocument(a,b,c,d,e){printDebugFlag&&window.alert("printOnLoadedDocument");d=-1<navigator.userAgent.indexOf("MSIE")||-1<navigator.userAgent.indexOf("Trident");a.document.write("<!DOCTYPE html><html><head><title>CADViewer - Print</title>");a.document.write("<style>");a.document.write(" body {");var f=cvjs_printPaperHeight_mm-10;a.document.write("     height: "+(cvjs_printPaperWidth_mm-10)+"mm;");a.document.write("     width: "+f+"mm;");a.document.write("     /* to centre page on screen*/");
a.document.write("     margin-left: auto;");a.document.write("     margin-right: auto;");c?(a.document.write("     transform: translate(0mm ,0mm);"),printDebugFlag&&console.log("less1 no rot    transform: translate(0mm ,0mm);")):(a.document.write("     transform: translate(0mm ,0mm);"),printDebugFlag&&console.log("over1 no rot    transform: translate(0mm ,0mm);"));a.document.write(" }");a.document.write(" </style> ");a.document.write("</head><body><img src='");a.document.write(b);c?(printDebugFlag&&
console.log("b1 a '  style=\"height: auto; width:"+(f-40)+'mm;" /></body></html>'),a.document.write("'  style=\"height: auto; width:"+(f-40)+'mm;" /></body></html>')):(printDebugFlag&&console.log("b1 b   '  style=\"height: : auto; width: "+(f-10)+'mm;" /></body></html>'),a.document.write("'  style=\"height: auto; width: "+(f-10)+'mm;" /></body></html>'));a.document.close();a.focus();a.print();e&&a.close();!e&&d&&a.close()}
function printOnLoadedDocumentRotated(a,b,c,d,e){printDebugFlag&&window.alert("printOnLoadedDocumentRotated");-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");a.document.write("<!DOCTYPE html><html><head><title>CADViewer - Print</title>");a.document.write("<style>");a.document.write(" body {");var f=(cvjs_printPaperWidth_mm-cvjs_printPaperHeight_mm)/2,g=cvjs_printPaperWidth_mm-10,h=cvjs_printPaperHeight_mm-10;a.document.write("     height: "+g+"mm;");a.document.write("     width: "+
h+"mm;");a.document.write("     /* to centre page on screen*/");a.document.write("     margin-left: auto;");a.document.write("     margin-right: auto;");a.document.write("     -webkit-transform: rotate(90deg);");a.document.write("     -moz-transform: rotate(90deg);");c?(a.document.write("     transform: rotate(90deg) translate("+-f/2+"mm, "+f+"mm);"),printDebugFlag&&console.log("less1  rot          transform: rotate(90deg) translate("+-f/2+"mm, "+f+"mm);")):(a.document.write("     transform: rotate(90deg) translate("+
-f/2+"mm, "+f+"mm);"),printDebugFlag&&console.log("over1  rot          transform: rotate(90deg) translate("+-f/2+"mm, "+f+"mm);"));a.document.write(" };");a.document.write(" </style> ");a.document.write('</head><body ><div id="imagetag"><img src=\'');a.document.write(b);c?(printDebugFlag&&console.log("b2 a '  style=\"height: auto; width:"+(h-40)+'mm;" /></body></html>'),a.document.write("'  style=\"height: auto; width:"+(h-40)+'mm;" /></body></html>')):(d>cvjs_printPixelWidth/cvjs_printPixelHeight?
printDebugFlag&&console.log("b2 b 1 '  style=\"height: auto; width:"+(g-40)+'mm;" /></body></html>'):printDebugFlag&&console.log("b2 b 2 '  style=\"height: auto; width:"+(g-40)+'mm;" /></body></html>'),a.document.write("'  style=\"height: auto; width:"+(g-40)+'mm;" /></body></html>'));a.document.close();a.focus();a.print();e&&a.close()}var cvjs_removePrintObject=!0,cvjs_javaScriptsAbsoluteFolder="../app/js";function cvjs_removePrintObjectAfterPrint(a){cvjs_removePrintObject=a}
var JQ_absoluteFolder=!1;function cvjs_setJavaScriptsAbsoluteFolder(a){cvjs_javaScriptsAbsoluteFolder=a;JQ_absoluteFolder=!1}function cvjs_setJavaScriptsJQ_AbsoluteFolder(a){cvjs_javaScriptsAbsoluteFolder=a;JQ_absoluteFolder=!0}
function printOnLoadedDocumentRotated_Server(a,b,c){if(cvjs_PrintToScale)printOnLoadedDocumentRotated_Server_PrintToScale(a,b,c);else if(0!=cvjs_serverSavePrintModeController)sendServerStringToServer(a,cvjs_serverSavePrintMode_serverPath+cvjs_serverSavePrintMode_image_fileName);else{printDebugFlag&&window.alert("printOnLoadedDocumentRotated_Server");var d=Math.floor(1E3*Math.random()+1);var e="<!DOCTYPE html><html><head><title>CADViewer - Print</title>";if(cvjs_removePrintObject){d=Math.floor(1E5*
Math.random()+1);var f=cvjs_serverHandlersPath+cvjs_serverDeleteFileController+"?file="+encodeURIComponent(cvjs_printObjectPathRelativeFlag?cvjs_printObjectPath+d+".html":cvjs_printObjectPathAbsoluteServer+d+".html");0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("angular")||0!=cvjs_backEndHandlerType.indexOf("nodejs")||(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");0==cvjs_frontEndHandlerType.indexOf("javascript")&&
0==cvjs_backEndHandlerType.indexOf("nodejs")&&(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");e=JQ_absoluteFolder?e+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'" type="text/javascript">\x3c/script>'):e+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');e=e+"<script type=\"text/javascript\">jQuery(window).on('beforeunload', function (){jQuery.ajax({"+("url:'"+f+"',")+"cache: false,success: function(html){";e+="}";e+="});";e+=
"});";e+="jQuery(window).on('unload', function ()";e+="{";e+="jQuery.ajax({";e=e+("url:'"+f+"',")+"cache: false,success: function(html){";e+="}";e+="});";e+="});";e+="window.onbeforeunload = function () {";e+="jQuery.ajax({";e=e+("url:'"+f+"',")+"cache: false,success: function(html){";e+="}";e+="});";e+="return undefined; }; ";e+="\x3c/script>"}var g=-1<navigator.userAgent.indexOf("Chrome");navigator.userAgent.indexOf("Firefox");-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");
navigator.userAgent.indexOf("Safari");navigator.userAgent.indexOf("Presto");-1<navigator.userAgent.indexOf("Edge")&&(g=!1);f=cvjs_printPaperWidth_mm;var h=cvjs_printPaperHeight_mm;g?(e+='<style type="text/css" media="print">',e+="@page { ",e+="    size: landscape",e+="}",e+="body {",e+="writing-mode: horizontal-tb",e+="}",e+="</style>"):(e+="<style>",e+=" body {",g=(cvjs_printPaperWidth_mm-cvjs_printPaperHeight_mm)/2,e+="     height: "+f+"mm;",e+="     width: "+h+"mm;",e+="     /* to centre page on screen*/",
e+="     margin-left: 10mm;",e+="     margin-right: 10mm;",e+="     margin-top: 10mm;",e+="     margin-bottom: 10mm;",b?(e+="     transform: rotate(90deg) translate("+-g/2+"mm, "+g+"mm);",printDebugFlag&&console.log("less1  rot          transform: rotate(90deg) translate("+-g/2+"mm, "+g+"mm);")):(e+="     transform: translate("+1.5*-g+"mm, "+1.2*-g+"mm) rotate(90deg); translate("+ +g+"mm, "+ +g+"mm) ",printDebugFlag&&console.log("over1  rot          transform: rotate(90deg) translate("+-g/2+"mm, "+
g+"mm);")),e+=" };",e+=" </style> ");e+='</head><body onload="window.print();"><div id="imagetag"><img src=\'';e+=a;b?(printDebugFlag&&console.log("b2 svg less 1 a  (pw1-40)    '  style=\"height: auto; width:"+(h-40)+'mm;" /></body></html>'),e+="'  style=\"height: auto; width:"+(h-40)+'mm;" /></body></html>'):c>cvjs_printPixelWidth/cvjs_printPixelHeight?(printDebugFlag&&console.log("b2 b 1 (ph1-40) 40 removed  '  style=\"height: auto; width:"+f+'mm;" /></body></html>'),e+="'  style=\"height: auto; width:"+
f+'mm;" /></body></html>'):(printDebugFlag&&console.log("b2 b 2 (ph1-40) '  style=\"height: auto; width:"+(f-40)+'mm;" /></body></html>'),e+="'  style=\"height: auto; width:"+(f-40)+'mm;" /></body></html>');sendServerStringToServer(e,d)}}
function printOnLoadedDocumentRotated_Server_PrintToScale(a,b,c){printDebugFlag&&window.alert("printOnLoadedDocumentRotated_Server_ printToScale");if(0!=cvjs_serverSavePrintModeController)sendServerStringToServer(a,cvjs_serverSavePrintMode_serverPath+cvjs_serverSavePrintMode_image_fileName);else{var d=Math.floor(1E3*Math.random()+1);var e="<!DOCTYPE html><html><head><title>CADViewer - Print</title>";if(cvjs_removePrintObject){d=Math.floor(1E5*Math.random()+1);var f=cvjs_serverHandlersPath+cvjs_serverDeleteFileController+
"?file="+encodeURIComponent(cvjs_printObjectPathRelativeFlag?cvjs_printObjectPath+d+".html":cvjs_printObjectPathAbsoluteServer+d+".html");0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("angular")||0!=cvjs_backEndHandlerType.indexOf("nodejs")||(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");0==cvjs_frontEndHandlerType.indexOf("javascript")&&0==cvjs_backEndHandlerType.indexOf("nodejs")&&(cvjs_defaultJSPath=
cvjs_javaScriptsAbsoluteFolder="/app/js/");e=JQ_absoluteFolder?e+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'" type="text/javascript">\x3c/script>'):e+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');e=e+"<script type=\"text/javascript\">jQuery(window).on('beforeunload', function (){jQuery.ajax({"+("url:'"+f+"',")+"cache: false,success: function(html){";e+="}";e+="});";e+="});";e+="jQuery(window).on('unload', function ()";e+="{";e+="jQuery.ajax({";
e=e+("url:'"+f+"',")+"cache: false,success: function(html){";e+="}";e+="});";e+="});";e+="window.onbeforeunload = function () {";e+="jQuery.ajax({";e=e+("url:'"+f+"',")+"cache: false,success: function(html){";e+="}";e+="});";e+="return undefined; }; ";e+="\x3c/script>"}var g=-1<navigator.userAgent.indexOf("Chrome"),h=-1<navigator.userAgent.indexOf("Firefox");-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");navigator.userAgent.indexOf("Safari");navigator.userAgent.indexOf("Presto");
(f=-1<navigator.userAgent.indexOf("Edge"))&&(g=!1);var k=cvjs_printPaperWidth_mm,l=cvjs_printPaperHeight_mm,m=k,p=l;printDebugFlag&&window.alert(navigator.userAgent+" 3.3.02f g "+g+" ph1="+m+"  pw1="+p);var n=cvjs_printPaperWidth_mm/cvjs_printPaperHeight_mm,q=40;g?(e+='<style type="text/css" media="print">',e+="@page { ",e+="    size: landscape",e+="}",e+="body {",e+="writing-mode: horizontal-tb",e+="}",e+="</style>"):(h&&(n=1,q=0),e+="<style>",e+=" body {",g=(cvjs_printPaperWidth_mm-cvjs_printPaperHeight_mm)/
2,e+="     height: "+m+"mm;",e+="     width: "+p+"mm;",e+="     /* to centre page on screen*/",e+="     margin-left: 10mm;",e+="     margin-right: 10mm;",e+="     margin-top: 10mm;",e+="     margin-bottom: 10mm;",b?(e+="     transform: rotate(90deg) translate("+-g/2+"mm, "+g+"mm);",printDebugFlag&&console.log("less1  rot          transform: rotate(90deg) translate("+-g/2+"mm, "+g+"mm);")):(e+="     transform: translate("+1.5*-g+"mm, "+1.2*-g+"mm) rotate(90deg); translate("+ +g+"mm, "+ +g+"mm) ",printDebugFlag&&
console.log("over1  rot          transform: rotate(90deg) translate("+-g/2+"mm, "+g+"mm);")),e+=" };",e+=" </style> ");e+='</head><body onload="window.print();"><div id="imagetag"><img src=\'';e+=a;f&&(p=k,m=l);b?(printDebugFlag&&window.alert("print scale b2 svg less 1 a  (pw1-40)    '  style=\"height: "+(p-q)+"mm ; width:"+(m-q*n)+'mm;" /></body></html>'),e+="'  style=\"height: "+(p-q)+"mm ; width:"+(m-q*n)+'mm;" /></body></html>'):c>cvjs_printPixelWidth/cvjs_printPixelHeight?(printDebugFlag&&window.alert("print scale b2 b 1 (ph1-40) 40 removed  '  style=\"height: "+
(p-q)+"mm ; width:"+(m-q*n)+'mm;" /></body></html>'),e+="'  style=\"height: "+(p-40)+"mm ; width:"+(m-40*n)+'mm;" /></body></html>'):(printDebugFlag&&window.alert("print scale b2 b 2 (ph1-40) '  style=\"height: "+(p-q)+"mm ; width:"+(m-q*n)+'mm;" /></body></html>'),e+="'  style=\"height: "+(p-q)+"mm ; width:"+(m-q*n)+'mm;" /></body></html>');sendServerStringToServer(e,d)}}
function printOnLoadedDocument_Server(a,b,c){printDebugFlag&&window.alert("printOnLoadedDocument_Server");if(0!=cvjs_serverSavePrintModeController)sendServerStringToServer(a,cvjs_serverSavePrintMode_serverPath+cvjs_serverSavePrintMode_image_fileName);else{c=Math.floor(1E3*Math.random()+1);var d="<!DOCTYPE html><html><head><title>CADViewer - Print</title>";if(cvjs_removePrintObject){c=Math.floor(1E5*Math.random()+1);var e=cvjs_serverHandlersPath+cvjs_serverDeleteFileController+"?file="+encodeURIComponent(cvjs_printObjectPathRelativeFlag?
cvjs_printObjectPath+c+".html":cvjs_printObjectPathAbsoluteServer+c+".html");0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("angular")||0!=cvjs_backEndHandlerType.indexOf("nodejs")||(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");0==cvjs_frontEndHandlerType.indexOf("javascript")&&0==cvjs_backEndHandlerType.indexOf("nodejs")&&(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");d=JQ_absoluteFolder?
d+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'" type="text/javascript">\x3c/script>'):d+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');d=d+"<script type=\"text/javascript\">jQuery(window).on('beforeunload', function (){jQuery.ajax({"+("url:'"+e+"',")+"type: 'GET',async: false,";d+="success: function(html){";d+="}";d+="});";d+="});";d+="jQuery(window).on('unload', function ()";d+="{";d+="jQuery.ajax({";d=d+("url:'"+e+"',")+"type: 'GET',async: false,";
d+="success: function(html){";d+="}";d+="});";d+="});";d+="window.onbeforeunload = function () {";d+="jQuery.ajax({";d=d+("url:'"+e+"',")+"type: 'GET',async: false,";d+="success: function(html){";d+="}";d+="});";d+="return undefined; }; ";d+="\x3c/script>"}e=-1<navigator.userAgent.indexOf("Chrome");navigator.userAgent.indexOf("Firefox");-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");navigator.userAgent.indexOf("Safari");navigator.userAgent.indexOf("Presto");-1<navigator.userAgent.indexOf("Edge")&&
(e=!1);d+='<style type="text/css" media="print">';d+="@media print { ";d+="    size: portrait";d+="}";d+="body {";d+="writing-mode: horizontal-tb";d+="}";d+="</style>";var f=cvjs_printPaperHeight_mm;d+='</head><body onload="window.print()"><img src=\'';d+=a;b?(printDebugFlag&&console.log("b1 a (pw1-10)  '  style=\"height: auto; width:"+(f-10)+'mm;" /></body></html>'),d=e?d+("'  style=\"height: auto; width:"+(f-40)+'mm;" /></body></html>'):d+("'  style=\"height: auto; width:"+(f-0)+'mm;" /></body></html>')):
(printDebugFlag&&console.log("b1 b (pw1-20)    '  style=\"height: auto; width: "+(f-20)+'mm;" /></body></html>'),d=e?d+("'  style=\"height: auto; width: "+(f-40)+'mm;" /></body></html>'):d+("'  style=\"height: auto; width: "+(f-0)+'mm;" /></body></html>'));sendServerStringToServer(d,c)}}
function sendServerStringToServer(a,b){if(0==cvjs_serverSavePrintModeController||6==cvjs_serverSavePrintModeController||3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController)jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+
floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Printing+"</div></td></tr></table>"),cvjs_setLooperPosition(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();var c=cvjs_serverHandlersPath+cvjs_serverSaveFileController,d={},e=a.length;printDebugFlag&&console.log("print object size! "+a.length);var f="",g="",h="",k="",l="",m="",p="",n="",q="",r=0;855E4<e?(r=9,q=a.substring(855E4),n=a.substring(76E5,
855E4),p=a.substring(665E4,76E5),m=a.substring(57E5,665E4),l=a.substring(475E4,57E5),k=a.substring(38E5,475E4),h=a.substring(285E4,38E5),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):76E5<e?(r=8,n=a.substring(76E5),p=a.substring(665E4,76E5),m=a.substring(57E5,665E4),l=a.substring(475E4,57E5),k=a.substring(38E5,475E4),h=a.substring(285E4,38E5),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):665E4<e?(r=7,p=a.substring(665E4),m=a.substring(57E5,665E4),
l=a.substring(475E4,57E5),k=a.substring(38E5,475E4),h=a.substring(285E4,38E5),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):57E5<e?(r=6,m=a.substring(57E5),l=a.substring(475E4,57E5),k=a.substring(38E5,475E4),h=a.substring(285E4,38E5),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):475E4<e?(r=5,l=a.substring(475E4),k=a.substring(38E5,475E4),h=a.substring(285E4,38E5),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):38E5<
e?(r=4,k=a.substring(38E5),h=a.substring(285E4,38E5),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):285E4<e?(r=3,h=a.substring(285E4),g=a.substring(19E5,285E4),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):19E5<e?(r=2,g=a.substring(19E5),f=a.substring(95E4,19E5),a=a.substring(0,95E4)):95E4<e&&(r=1,f=a.substring(95E4),a=a.substring(0,95E4));cvjs_debug&&console.log("xSPLITFILE "+r+" length "+e);d.file_content=a;var t="";cvjs_printObjectPathRelativeFlag?(cvjs_debug&&console.log("BRANCH 1"),
d.file=cvjs_printObjectPath+b+".html",t=cvjs_serverHandlersPath+cvjs_printObjectPath+b+".html",cvjs_NodeJSserver&&(t=cvjs_serverHandlersPath+cvjs_printObjectPath+"?file="+b+".html")):(cvjs_debug&&console.log("BRANCH 2"),d.file=cvjs_printObjectPathAbsoluteServer+b+".html",t=cvjs_printObjectPathAbsolute+b+".html",cvjs_NodeJSserver&&(t=cvjs_printObjectPathAbsolute+"?file="+b+".html"));0!=cvjs_serverSavePrintModeController&&6!=cvjs_serverSavePrintModeController&&(1==cvjs_serverSavePrintModeController||
2==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?(d.file=b,2==cvjs_serverSavePrintModeController&&(d.file=cvjs_ServerLocation+"/converters/files/"+b.substring(b.lastIndexOf("/")))):cvjs_printObjectPathRelativeFlag?(cvjs_debug&&console.log("xxBRANCH 1"),d.file=cvjs_printObjectPath+b+".html",t=cvjs_serverHandlersPath+cvjs_printObjectPath+b+".html"):(cvjs_debug&&console.log("xxBRANCH 2"),e=b.substring(b.lastIndexOf("/")+1),d.file=cvjs_ServerLocation+"/converters/files/"+e,
e=b.substring(0,b.lastIndexOf(".")),t=e+".html"));cvjs_debug&&console.log("Final URL:"+c+" filelist_data['file']="+d.file+" htmlPrintFile="+t+" serverString.length()  "+a.length);cvjs_debug&&console.log("Mode: "+cvjs_serverSavePrintModeController+"  2:  filelist_data['file'] "+d.file+" htmlPrintFile="+t);if(1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController)jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+
floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Thumbnails+"</div></td></tr></table>"),cvjs_setLooperPosition(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(100);jQuery.ajax({url:c,type:"post",data:d,success:function(a){cvjs_debug&&console.log("final URL="+c+
"return server "+a+" cvjs_serverSavePrintModeController="+cvjs_serverSavePrintModeController+"  "+d.file+" splitfile "+r);0==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,
success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_batchDrawingsArrLength_globalCounter++;
cvjs_batchDrawingsArrLength_globalCounter==cvjs_batchDrawingsArrLength?cvjs_batchConvertOnLoadEndCustomMethod():cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),
5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(d.file_content=f,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",
data:d,success:function(a){1==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");
jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_batchDrawingsArrLength_globalCounter++;cvjs_batchDrawingsArrLength_globalCounter==cvjs_batchDrawingsArrLength?
cvjs_batchConvertOnLoadEndCustomMethod():cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):
(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(d.file_content=g,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",data:d,success:function(a){2==r?1==cvjs_serverSavePrintModeController||7==
cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();
cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_batchDrawingsArrLength_globalCounter++;cvjs_batchDrawingsArrLength_globalCounter==cvjs_batchDrawingsArrLength?cvjs_batchConvertOnLoadEndCustomMethod():cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],
cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==
cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(d.file_content=h,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,console.log("saving serverString 4"),jQuery.ajax({url:c,type:"post",data:d,success:function(a){3==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,
type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_batchDrawingsArrLength_globalCounter++;cvjs_batchDrawingsArrLength_globalCounter==cvjs_batchDrawingsArrLength?cvjs_batchConvertOnLoadEndCustomMethod():cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}}):
3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print",
"height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(console.log(r+" saving serverString 5"),d.file_content=k,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",data:d,success:function(a){4==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,
success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),
cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_batchDrawingsArrLength_globalCounter++;cvjs_batchDrawingsArrLength_globalCounter==cvjs_batchDrawingsArrLength?cvjs_batchConvertOnLoadEndCustomMethod():cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}}):3==cvjs_serverSavePrintModeController||
4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+
",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(cvjs_debug&&console.log(r+" saving serverString 6"),d.file_content=l,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",data:d,success:function(a){5==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=
!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"uploadlistitem_sharepoint.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?
jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter++])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),
5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(cvjs_debug&&console.log(r+" saving serverString 7"),d.file_content=m,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,
jQuery.ajax({url:c,type:"post",data:d,success:function(a){6==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_debug&&console.log(cvjs_phpImagesUrlController+" "+a+"  we have now created the thumbnails");cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",
type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,
success:function(a){cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter++])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(cvjs_debug&&console.log(r+" saving serverString 8"),d.file_content=p,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",data:d,success:function(a){7==r?1==cvjs_serverSavePrintModeController||
7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();
cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter++])}}):3==cvjs_serverSavePrintModeController||
4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+
",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(cvjs_debug&&console.log(r+" saving serverString 9"),d.file_content=n,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",data:d,success:function(a){8==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=
!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):
2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter++])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&
cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):(cvjs_debug&&console.log(r+" saving serverString 10"),d.file_content=
q,c=cvjs_serverHandlersPath+cvjs_serverAppendFileController,jQuery.ajax({url:c,type:"post",data:d,success:function(a){9==r?1==cvjs_serverSavePrintModeController||7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_ajaxPostStatus_thumbNails=!0;7==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadlistattachment.php",type:"post",data:cvjs_serverSave_php_controllerArray,
success:function(a){console.log(a+"  sharepoint list item call back");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_serverSavePrintModeController=0}}):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_serverSavePrintModeController=0)}}):2==cvjs_serverSavePrintModeController?jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],
cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter++])}}):3==cvjs_serverSavePrintModeController||4==cvjs_serverSavePrintModeController||5==cvjs_serverSavePrintModeController?(3==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF(),4==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_email(),5==cvjs_serverSavePrintModeController&&cvjs_printSavedBitmapToPDF_uploadServer()):(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),0==
cvjs_serverSavePrintModeController&&(printWindow=window.open(t,"CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow.focus()),6==cvjs_serverSavePrintModeController&&cvjs_pngForSVG(t)):cvjs_debug&&console.log(r+" saving serverString 11 not implemented")}}))}}))}}))}}))}}))}}))}}))}}))}}))}})}
var cvjs_displayMagnifyingGlassFlag=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_firstDisplayMagnifying=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_displayMagnifyingGlass(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr]=!cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr];if(cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr]){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;viewBoxWidth_magn=viewBoxHeight_magn=viewBox_Y_magn=
viewBox_X_magn=0;if(cvjs_firstDisplayMagnifying[cvjs_active_floorplan_div_nr]){cvjs_firstDisplayMagnifying[cvjs_active_floorplan_div_nr]=!1;var b=jQuery("#"+a).position(),c=b.top+40;b=b.left+jQuery("#"+a).width()-648;400>b&&(b=400);console.log(c+"  "+b);jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+a).offset({left:150+jQuery("#"+a).position().left,top:150+jQuery("#"+a).position().top})}jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+a).show();cvjs_addHandleFunc_ZoomMagnifyingGlass()}}else jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+
a).hide(),cvjs_removeHandleFunc_ZoomMagnifyingGlass(),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1,tPath_r="M0,0",tRubberBand_r.attr({path:tPath_r})}function cvjs_exitBirdsEye(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr]=!1;jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+a).hide();cvjs_removeHandleFunc_ZoomMagnifyingGlass();tPath_r="M0,0";tRubberBand_r.attr({path:tPath_r})}
function cvjs_addHandleFunc_ZoomMagnifyingGlass(){tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];
global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.mousemove(move_cvjs_create_zoommagnify_rectangle)}function cvjs_removeHandleFunc_ZoomMagnifyingGlass(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_zoommagnify_rectangle=function(){flag_rectangle=!1;var a=viewBoxWidth[cvjs_active_floorplan_div_nr]/400,b="#0b0b0b";cvjs_blackBackground&&(b="#FbFbFb");console.log(cvjs_blackBackground+"  "+b);a=jQuery.parseJSON('{"stroke": "'+b+'", "fill" : "none", "stroke-opacity": "0.5", "stroke-width": "'+a+'"}');tRubberBand_r.attr(a)},zoomwindow_counter=0,cvjs_magnifyingGlassWidth=648,cvjs_magnifyingGlassHeight=450,cvjs_magnifyCanvasDrawn=!0,magnify_startflag=!0,startTime,deltaDist_pre,
delta_dist,idleTime;jQuery(document).ready(function(){idleTime=0;setInterval(function(){idleTime++;2<idleTime&&cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr]&&magnify_startflag&&(magnify_startflag=!1,cvjs_magnifyCanvasDrawn&&0==!viewBox_X_magn&&0==!viewBox_Y_magn&&(cvjs_magnifyCanvasDrawn=!1,cvjs_renderMagnifyingGlass(viewBox_X_magn,viewBox_Y_magn,viewBoxWidth_magn,viewBoxHeight_magn)))},100);jQuery(this).mousemove(function(a){idleTime=0;magnify_startflag=!0})});
var viewBox_X_magn,viewBox_Y_magn,viewBoxHeight_magn,viewBoxWidth_magn;
function cvjs_move_birdseye(a,b){var c=(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/20;a+=document.body.scrollLeft;b+=document.body.scrollTop;firstX_r=a;firstY_r=b;tPath_r="M"+((firstX_r-delta_x)/global_scale-1.44*c)+","+((firstY_r-delta_y)/global_scale-c);tPath_r+="h"+2.88*c+"v"+2*c+"h"+-2.88*c+"v"+-2*c+" Z";tRubberBand_r.attr({path:tPath_r});viewBox_X_magn=(firstX_r-delta_x)/global_scale-.98*c;viewBox_Y_magn=(firstY_r-delta_y)/global_scale-.98*c;viewBoxHeight_magn=
1.92*c;viewBoxWidth_magn=1.92*c;delta_dist=Math.sqrt(Math.pow(a-lastX_r,2)+Math.pow(b-lastY_r,2))}var move_cvjs_create_zoommagnify_rectangle=function(a,b,c){cvjs_move_birdseye(b,c)};
function cvjs_renderMagnifyingGlass(a,b,c,d){-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");navigator.userAgent.indexOf("Firefox");var e=cvjs_rPaper[cvjs_active_floorplan_div_nr].toString();var f=e.substring(0,e.indexOf("width:")+6);e=e.substring(e.indexOf("height:")+6);e=e.substring(e.indexOf(";"));e=f+cvjs_magnifyingGlassWidth+"; height:"+cvjs_magnifyingGlassHeight+e;f=e.substring(0,e.indexOf("viewBox=")+9);e=e.substring(e.indexOf("viewBox=")+10);e=e.substring(e.indexOf('"'));
e=a=(f+a+" "+b+" "+c+" "+d+e).replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"");cvjs_ctx=jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr])[0].getContext("2d");cvjs_ctx.canvas.height=Math.round(cvjs_magnifyingGlassHeight);cvjs_ctx.canvas.width=Math.round(cvjs_magnifyingGlassWidth);jQuery("#cvjs_floorPlanMagnifyingGlass_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(cvjs_magnifyingGlassHeight);jQuery("#cvjs_floorPlanMagnifyingGlass_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(cvjs_magnifyingGlassWidth);
printDebugFlag&&jQuery("#cvjs_floorPlanMagnifyingGlass_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();try{console.log("cvjs_floorPlanMagnifyingGlass_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]),canvg("cvjs_floorPlanMagnifyingGlass_"+floorplan_div_Array[cvjs_active_floorplan_div_nr],e,{renderCallback:function(){cvjs_canvg_renderedMagnifyingGlass(!1)}})}catch(g){console.log("magnifying glass: "+g)}}function cvjs_canvg_renderedMagnifyingGlass(a){cvjs_magnifyCanvasDrawn=!0}
function cvjs_firstPage(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);try{if(a="",0==multiPages[cvjs_active_floorplan_div_nr].currentPage-1)a=1==multiPages[cvjs_active_floorplan_div_nr].multiPages?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.SinglePage:languageTable.languages[cvjs_currentLanguage].InfoMessageModal.FirstPage,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a);else{var b=multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName;
if(cvjs_loadDrawing_conversionMode){if("file"==cvjs_conversion_getContentResponse()&&cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],b),"stream"==cvjs_conversion_getContentResponse()){if("ModelSpace"==multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName){for(var c=!0,d=0;d<rest_nname[cvjs_active_floorplan_div_nr].length;d++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]=
"model",rest_vvalue[cvjs_active_floorplan_div_nr][d]=""),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="model",rest_vvalue[cvjs_active_floorplan_div_nr][d]="");c&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="model",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="")}else{c=!0;for(d=0;d<rest_nname[cvjs_active_floorplan_div_nr].length;d++)"basic"==
rest_nname[cvjs_active_floorplan_div_nr][d]&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)),"layout"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)),"model"==rest_nname[cvjs_active_floorplan_div_nr][d]&&
c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)),"last"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]=
"layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)),"paper"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][d]&&c&&(c=!1,rest_nname[cvjs_active_floorplan_div_nr][d]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][d]=
escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName));c&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=multiPages[cvjs_active_floorplan_div_nr].pages[0].pageName)}0==rest_contentFormat.toLowerCase().indexOf("pdf")&&handle_pdf_page_change_internal(0);cvjs_LoadDrawing_Conversion(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],
b,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr])}}else if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr])cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage=1,cvjs_rPaper[cvjs_active_floorplan_div_nr]=null,cvjs_checkSVGOnServerBeforeLoad(b);else if(-1<currentLoadedDrawingFullName.toLowerCase().indexOf(".svg")){var e=currentLoadedDrawingFullName.substring(currentLoadedDrawingFullName.toLowerCase().lastIndexOf(".svg")+
1);c="";c=-1<currentLoadedDrawingFullName.indexOf("fileName=")?currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("fileName=")+9):currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("/")+1);cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],c+b+"."+e)}else cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],b)}}catch(f){}}
function cvjs_lastPage(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);try{var b=multiPages[cvjs_active_floorplan_div_nr].multiPages-1;a="";if(b==multiPages[cvjs_active_floorplan_div_nr].currentPage-1)a=1==multiPages[cvjs_active_floorplan_div_nr].multiPages?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.SinglePage:languageTable.languages[cvjs_currentLanguage].InfoMessageModal.LastPage,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a);else{var c=
multiPages[cvjs_active_floorplan_div_nr].pages[b].fileName;if(cvjs_loadDrawing_conversionMode){if("file"==cvjs_conversion_getContentResponse()&&cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],c),"stream"==cvjs_conversion_getContentResponse()){var d=!0;if("ModelSpace"==multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName){d=!0;for(var e=0;e<rest_nname[cvjs_active_floorplan_div_nr].length;e++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&
d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="model",rest_vvalue[cvjs_active_floorplan_div_nr][e]="");d&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="model",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="")}else{d=!0;for(e=0;e<rest_nname[cvjs_active_floorplan_div_nr].length;e++)"basic"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=
escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"layout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"model"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),
"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"last"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"paper"==rest_nname[cvjs_active_floorplan_div_nr][e]&&
d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName));d&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=
"layout",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)}0==rest_contentFormat.toLowerCase().indexOf("pdf")&&handle_pdf_page_change_internal(b);cvjs_LoadDrawing_Conversion(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr])}}else cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]?
(cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage=cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].multiPages,cvjs_rPaper[cvjs_active_floorplan_div_nr]=null,cvjs_checkSVGOnServerBeforeLoad(c)):-1<currentLoadedDrawingFullName.toLowerCase().indexOf(".svg")?(d=currentLoadedDrawingFullName.substring(currentLoadedDrawingFullName.toLowerCase().lastIndexOf(".svg")+1),b="",b=-1<currentLoadedDrawingFullName.indexOf("fileName=")?currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("fileName=")+
9):currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("/")+1),cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],b+c+"."+d)):cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],c)}}catch(f){}}
function cvjs_nextPage(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);try{var b=multiPages[cvjs_active_floorplan_div_nr].multiPages,c=multiPages[cvjs_active_floorplan_div_nr].currentPage;a=c+1;--a;var d="";if(a>b-1)d=1==multiPages[cvjs_active_floorplan_div_nr].multiPages?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.SinglePage:languageTable.languages[cvjs_currentLanguage].InfoMessageModal.LastPage,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
d);else{var e=multiPages[cvjs_active_floorplan_div_nr].pages[a].fileName;cvjs_debug&&console.log(b+"  "+c+" newpage="+a+"  newfile="+e+" cvjs_loadDrawing_conversionMode "+cvjs_loadDrawing_conversionMode+" cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr ]="+cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]+" currentLoadedDrawingFullName="+currentLoadedDrawingFullName);if(cvjs_loadDrawing_conversionMode){if("file"==cvjs_conversion_getContentResponse()&&cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],e),"stream"==cvjs_conversion_getContentResponse()){if("ModelSpace"==multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName){for(var f=!0,g=0;g<rest_nname[cvjs_active_floorplan_div_nr].length;g++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="model",rest_vvalue[cvjs_active_floorplan_div_nr][g]="");f&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=
"model",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="")}else{f=!0;for(g=0;g<rest_nname[cvjs_active_floorplan_div_nr].length;g++)"basic"==rest_nname[cvjs_active_floorplan_div_nr][g]&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"layout"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]=
"layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"model"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=
escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"last"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"paper"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),
"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][g]&&f&&(f=!1,rest_nname[cvjs_active_floorplan_div_nr][g]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][g]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName));f&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)}0==rest_contentFormat.toLowerCase().indexOf("pdf")&&
handle_pdf_page_change_internal(a);cvjs_LoadDrawing_Conversion(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],e,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr])}}else if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr])cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage+=1,cvjs_rPaper[cvjs_active_floorplan_div_nr]=null,cvjs_checkSVGOnServerBeforeLoad(e);
else if(-1<currentLoadedDrawingFullName.toLowerCase().indexOf(".svg")){var h=currentLoadedDrawingFullName.substring(currentLoadedDrawingFullName.toLowerCase().lastIndexOf(".svg")+1);b="";b=-1<currentLoadedDrawingFullName.indexOf("fileName=")?currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("fileName=")+9):currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("/")+1);cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],b+e+
"."+h)}else cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],e)}}catch(k){}}
function handle_pdf_page_change_internal(a){for(var b=rest_nname[cvjs_active_floorplan_div_nr].length,c=-1,d=-1,e=0;e<b;e++)"pg"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(rest_vvalue[cvjs_active_floorplan_div_nr][e]=(a+1).toString(),d=e);-1<d&&(rest_vvalue[cvjs_active_floorplan_div_nr].splice(d,1),rest_nname[cvjs_active_floorplan_div_nr].splice(d,1));for(e=0;e<b;e++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&(c=e,rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName));
-1==c&&(b=rest_nname[cvjs_active_floorplan_div_nr].length,rest_nname[cvjs_active_floorplan_div_nr][b]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][b]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName))}
function cvjs_changePageByNumber(a,b){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);try{var c=multiPages[cvjs_active_floorplan_div_nr].multiPages,d=multiPages[cvjs_active_floorplan_div_nr].currentPage;a=b-1;cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]&&(c=cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].multiPages,a=b-1);if(!(0<=a&&a<c))return e=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.OutOfRange,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
e),!1;var e="";if(a>c-1){e=1==multiPages[cvjs_active_floorplan_div_nr].multiPages?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.SinglePage:languageTable.languages[cvjs_currentLanguage].InfoMessageModal.LastPage;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],e);return}var f=multiPages[cvjs_active_floorplan_div_nr].pages[a].fileName;cvjs_debug&&console.log(c+"  "+d+" newpage="+a+"  newfile="+f+" cvjs_loadDrawing_conversionMode "+cvjs_loadDrawing_conversionMode+
" cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr ]="+cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]+" currentLoadedDrawingFullName="+currentLoadedDrawingFullName);if(cvjs_loadDrawing_conversionMode){if("file"==cvjs_conversion_getContentResponse()&&cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],f),"stream"==cvjs_conversion_getContentResponse()){if("ModelSpace"==multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName){for(var g=
!0,h=0;h<rest_nname[cvjs_active_floorplan_div_nr].length;h++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][h]&&g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="model",rest_vvalue[cvjs_active_floorplan_div_nr][h]="");g&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="model",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="")}else{g=!0;for(h=0;h<rest_nname[cvjs_active_floorplan_div_nr].length;h++)"basic"==
rest_nname[cvjs_active_floorplan_div_nr][h]&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"layout"==rest_nname[cvjs_active_floorplan_div_nr][h]&&g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"model"==rest_nname[cvjs_active_floorplan_div_nr][h]&&
g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][h]&&g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"last"==rest_nname[cvjs_active_floorplan_div_nr][h]&&g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]=
"layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"paper"==rest_nname[cvjs_active_floorplan_div_nr][h]&&g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][h]&&g&&(g=!1,rest_nname[cvjs_active_floorplan_div_nr][h]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][h]=
escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName));g&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=multiPages[cvjs_active_floorplan_div_nr].pages[a].pageName)}0==rest_contentFormat.toLowerCase().indexOf("pdf")&&handle_pdf_page_change_internal(a);cvjs_LoadDrawing_Conversion(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],
f,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr])}}else if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr])cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage=a+1,cvjs_rPaper[cvjs_active_floorplan_div_nr]=null,cvjs_checkSVGOnServerBeforeLoad(f);else if(-1<currentLoadedDrawingFullName.toLowerCase().indexOf(".svg")){var k=currentLoadedDrawingFullName.substring(currentLoadedDrawingFullName.toLowerCase().lastIndexOf(".svg")+
1);b="";b=-1<currentLoadedDrawingFullName.indexOf("fileName=")?currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("fileName=")+9):currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("/")+1);cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],b+f+"."+k)}else cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],f)}catch(l){return console.log("cvjs_changePageByNumber err="+
l),!1}return!0}function escapeUnicode(a){return a.replace(/[^\0-~]/g,function(a){return"\\u"+("0000"+a.charCodeAt().toString(16)).slice(-4)})}
function cvjs_previousPage(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);try{var b=multiPages[cvjs_active_floorplan_div_nr].currentPage-1;--b;a="";if(0>b)a=1==multiPages[cvjs_active_floorplan_div_nr].multiPages?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.SinglePage:languageTable.languages[cvjs_currentLanguage].InfoMessageModal.FirstPage,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a);else{var c=multiPages[cvjs_active_floorplan_div_nr].pages[b].fileName;
if(cvjs_loadDrawing_conversionMode){if("file"==cvjs_conversion_getContentResponse()&&cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],c),"stream"==cvjs_conversion_getContentResponse()){if("ModelSpace"==multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName){for(var d=!0,e=0;e<rest_nname[cvjs_active_floorplan_div_nr].length;e++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]=
"model",rest_vvalue[cvjs_active_floorplan_div_nr][e]=""),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="model",rest_vvalue[cvjs_active_floorplan_div_nr][e]="");d&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="model",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="")}else{d=!0;for(e=0;e<rest_nname[cvjs_active_floorplan_div_nr].length;e++)"basic"==
rest_nname[cvjs_active_floorplan_div_nr][e]&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"layout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"model"==rest_nname[cvjs_active_floorplan_div_nr][e]&&
d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"last"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]=
"layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"paper"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][e]&&d&&(d=!1,rest_nname[cvjs_active_floorplan_div_nr][e]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][e]=
escapeUnicode(multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName));d&&(rest_nname[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]="layout",rest_vvalue[cvjs_active_floorplan_div_nr][rest_nname[cvjs_active_floorplan_div_nr].length]=multiPages[cvjs_active_floorplan_div_nr].pages[b].pageName)}0==rest_contentFormat.toLowerCase().indexOf("pdf")&&handle_pdf_page_change_internal(b);cvjs_LoadDrawing_Conversion(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],
c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr])}}else if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr])--cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage,cvjs_rPaper[cvjs_active_floorplan_div_nr]=null,cvjs_checkSVGOnServerBeforeLoad(c);else if(-1<currentLoadedDrawingFullName.toLowerCase().indexOf(".svg")){var f=currentLoadedDrawingFullName.substring(currentLoadedDrawingFullName.toLowerCase().lastIndexOf(".svg")+
1);b="";b=-1<currentLoadedDrawingFullName.indexOf("fileName=")?currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("fileName=")+9):currentLoadedDrawingFullName.substring(0,currentLoadedDrawingFullName.lastIndexOf("/")+1);cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],b+c+"."+f)}else cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],c)}}catch(g){}}
function cvjs_setSupressHyperlinkColors(a){cvjs_supressHyperlinkColors=a}function cvjs_setUrl_singleDoubleClick(a){cvjs_Url_click_control=1;1==a&&(cvjs_Url_click_control=1);2==a&&(cvjs_Url_click_control=2)}cvjs_Url_encapsulate_callback=!1;function cvjs_encapsulateUrl_callback(a){cvjs_Url_encapsulate_callback=a}
function cvjs_AllLayersOff(){for(var a in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])"Undefined"!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("layer")&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(hide)}
function cvjs_LayerOn(a){var b=!1;try{if(!b)for(var c=0;c<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;c++)if(layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName==a||layerTable[cvjs_active_floorplan_div_nr].layers[c].layer==a){jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[c].layer).attr(show);layerTable[cvjs_active_floorplan_div_nr].layers[c].status="ON";b=!0;return}}catch(e){console.log(e+" layer list layer on")}if(!b){try{for(var d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("layer")==
a&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].attr(show),b=!0);for(d in vqText)vqText[d].data("layer")==a&&(vqText[d].attr(show),b=!0);b||a.attr(show)}catch(e){}b||jQuery("#"+a).attr(show)}}
function cvjs_LayerOn_OthersOff(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("layer")==a?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(show):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(hide)}
function cvjs_LayerOn_AllOff(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("layer")==a?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(show):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(hide)}
function cvjs_LayerOff(a){var b=!1;try{if(!b)for(var c=0;c<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;c++)if(layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName==a||layerTable[cvjs_active_floorplan_div_nr].layers[c].layer==a){jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[c].layer).attr(hide);layerTable[cvjs_active_floorplan_div_nr].layers[c].status="OFF";b=!0;return}}catch(e){console.log(e+" layer list layer on")}if(!b){try{for(var d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("layer")==
a&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].attr(hide),b=!0);for(d in vqText)vqText[d].data("layer")==a&&(vqText[d].attr(hide),b=!0);b||(a.attr(hide),b=!0)}catch(e){}if(!b)try{jQuery("#"+a).attr(hide)}catch(e){}}}function cvjs_setPanState(a){panWithThumb=a}
function cvjs_windowResize_position(a,b){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);cvjs_windowResize_position_WidthHeight(a,0,0,b);cvjs_topDownloadButtonPane?jQuery("#topIconMenu_"+b+"_svg").css({left:jQuery("#"+b).position().left+1,top:jQuery("#"+b).position().top+1+cvjs_topDownloadButtonPane_adjustment}):jQuery("#topIconMenu_"+b+"_svg").css({left:jQuery("#"+b).position().left+1,top:jQuery("#"+b).position().top+1})}
function cvjs_resizeWindow_position(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_windowResize_position_WidthHeight(!0,0,0,a);0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("javascript")?cvjs_topDownloadButtonPane?(jQuery("#topIconMenu_"+a+"_svg").css({left:jQuery("#"+a).position().left+1,top:jQuery("#"+a).position().top+1+cvjs_topDownloadButtonPane_adjustment}),jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({left:jQuery("#"+a).position().left+1+
cvjs_iconmenu_pos_x,top:jQuery("#"+a).position().top+1+cvjs_topDownloadButtonPane_adjustment+cvjs_iconmenu_pos_y})):(jQuery("#topIconMenu_"+a+"_svg").css({left:jQuery("#"+a).position().left+1,top:jQuery("#"+a).position().top+1}),jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({left:jQuery("#"+a).position().left+1+cvjs_iconmenu_pos_x,top:jQuery("#"+a).position().top+1+cvjs_iconmenu_pos_y})):cvjs_topDownloadButtonPane?(jQuery("#topIconMenu_"+a+"_svg").css({left:jQuery("#"+a+"_svg").position().left+
1,top:jQuery("#"+a+"_svg").position().top+1+cvjs_topDownloadButtonPane_adjustment}),jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({left:jQuery("#"+a+"_svg").position().left+1+cvjs_iconmenu_pos_x,top:jQuery("#"+a+"_svg").position().top+1+cvjs_topDownloadButtonPane_adjustment+cvjs_iconmenu_pos_y})):(jQuery("#topIconMenu_"+a+"_svg").css({left:jQuery("#"+a+"_svg").position().left+1,top:jQuery("#"+a+"_svg").position().top+1}),jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({left:jQuery("#"+a+"_svg").position().left+
1+cvjs_iconmenu_pos_x,top:jQuery("#"+a+"_svg").position().top+1+cvjs_iconmenu_pos_y}));var b=jQuery("#"+a+"_svg").position();jQuery("#gMenu_"+a+"_svg").offset({top:b.top+cvjs_gMenu_pos_y,left:b.left+cvjs_gMenu_pos_x});var c=jQuery("#"+a).position();b=c.top+jQuery("#"+a+"_svg").height()-75;c=c.left+jQuery("#"+a+"_svg").width()-325;jQuery("#floatCompareDrawingMenu_"+a+"_svg").offset({top:b,left:c})}
function cvjs_resizeWindow_fixedSize(a,b,c){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c);cvjs_windowResize_position_WidthHeight(!0,a,b,c);jQuery("#topIconMenu_"+c+"_svg").css({left:jQuery("#"+c).position().left+1,top:jQuery("#"+c).position().top+1});cvjs_debug&&console.log("here insertion "+cvjs_iconmenu_pos_x);jQuery("#topIconMenu_placeholder_1_"+c+"_svg").css({left:jQuery("#"+c+"_svg").position().left+1+cvjs_iconmenu_pos_x,top:jQuery("#"+c+"_svg").position().top+1+cvjs_iconmenu_pos_y});a=jQuery("#"+
c+"_svg").position();jQuery("#gMenu_"+c+"_svg").offset({top:a.top+cvjs_gMenu_pos_y,left:a.left+cvjs_gMenu_pos_x});b=jQuery("#"+c).position();a=b.top+jQuery("#"+c+"_svg").height()-75;b=b.left+jQuery("#"+c+"_svg").width()-325;jQuery("#floatCompareDrawingMenu_"+c+"_svg").offset({top:a,left:b})}
function cvjs_resizeWindow_fixedSize_location(a,b,c,d,e){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c);jQuery("#"+c).css("position","relative");jQuery("#"+c).position(d,e);jQuery("#"+c+"_svg").position(d,e);cvjs_windowResize_position_WidthHeight(!0,a,b,c);jQuery("#topIconMenu_"+c+"_svg").css({left:jQuery("#"+c).position().left+1,top:jQuery("#"+c).position().top+1});cvjs_debug&&console.log("here insertion "+cvjs_iconmenu_pos_x);jQuery("#topIconMenu_placeholder_1_"+c+"_svg").css({left:jQuery("#"+
c+"_svg").position().left+1+cvjs_iconmenu_pos_x,top:jQuery("#"+c+"_svg").position().top+1+cvjs_iconmenu_pos_y});a=jQuery("#"+c+"_svg").position();jQuery("#gMenu_"+c+"_svg").offset({top:a.top+cvjs_gMenu_pos_y,left:a.left+cvjs_gMenu_pos_x});b=jQuery("#"+c).position();a=b.top+jQuery("#"+c+"_svg").height()-75;b=b.left+jQuery("#"+c+"_svg").width()-325;jQuery("#floatCompareDrawingMenu_"+c+"_svg").offset({top:a,left:b})}
function cvjs_windowResize_position_WidthHeight(a,b,c,d){cvjs_debug&&console.log(d+" top resize ");var e=d+="_svg";d="#"+d;if(jQuery(d).length){navigator.userAgent.indexOf("Chrome");navigator.userAgent.indexOf("Firefox");-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");navigator.userAgent.indexOf("Safari");navigator.userAgent.indexOf("Presto");var f=jQuery(d).position();jQuery(d).css("position","absolute");jQuery(d).css("display","block");jQuery(d).css("overflow","hidden");
0==b?(jQuery(d).width(jQuery(window).width()-f.left),jQuery(d).height(jQuery(window).height()-f.top)):(jQuery(d).width(b),jQuery(d).height(c));fpWidth=jQuery(d).width();fpHeight=jQuery(d).height();rpWidth[cvjs_active_floorplan_div_nr]=fpWidth;rpHeight[cvjs_active_floorplan_div_nr]=fpHeight;floorplan_width=.9*jQuery(d).width();floorplan_height=.9*jQuery(d).height();a&&ResizeVq(fpWidth,fpHeight);b=jQuery(d).position();c=b.top+5;a=b.left+jQuery(d).width()-475;40>a&&(a=40);jQuery("#floatNavigationMenu_"+
e).offset({top:c,left:a});jQuery("#gMenu_"+e).offset({top:b.top+30,left:b.left+20});jQuery("#gMenu_"+e).offset({top:b.top+cvjs_gMenu_pos_x,left:b.left+cvjs_gMenu_pos_y});b=jQuery("#topIconMenu_placeholder_1_"+e).width();jQuery("#topIconMenu_"+e).position();cvjs_debug&&console.log("6.4.32 inside cvjs_windowResize_position_WidthHeight "+jQuery(d).position().left+" "+jQuery(d).position().top);392<jQuery(d).width()-b?(jQuery("#topIconMenu_"+e).css({height:"32px"}),jQuery("#topIconMenu_placeholder_2_"+
e).offset({top:jQuery(d).position().top+1,left:a+78})):(jQuery("#topIconMenu_placeholder_2_"+e).offset({top:jQuery(d).position().top+33,left:a+78}),jQuery("#topIconMenu_"+e).css({height:"64px"}))}else console.log("Div not generated")}function cvjs_windowResize_fixedSize(a,b,c,d){cvjs_windowResize_position_WidthHeight(a,b,c,d);jQuery("#topIconMenu_"+d+"_svg").css({left:jQuery("#"+d).position().left+1,top:jQuery("#"+d).position().top+1})}
window.console&&console.log||(console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}});var touchCount=0,x1=0,y1=0,x2=0,y2=0,pdx=0,pdy=0,vbx=0,vby=0,basex,basey,lastDx=0,lastDy=0,initFlagPolygons=!0,DefaultZoomFactor=1.075,DefaultZoomFactor_mouseWheel=1.075;
function CheckPt(a,b){return a<viewBox[cvjs_active_floorplan_div_nr].X||a>viewBox[cvjs_active_floorplan_div_nr].X+viewBox._viewBox[2]||b<viewBox[cvjs_active_floorplan_div_nr].Y||b>viewBox[cvjs_active_floorplan_div_nr].Y+viewBox._viewBox[3]?!1:!0}
function CheckRoomOnScreen(a){a=a.getBBox();var b=CheckPt(a.x,a.y);b=b&&CheckPt(a.x2,a.y2);b||(a.width>viewBoxWidth[cvjs_active_floorplan_div_nr]||a.height>viewBoxHeight[cvjs_active_floorplan_div_nr]?zoomHere():(viewBox[cvjs_active_floorplan_div_nr].X=a.x+(a.width-viewBoxWidth[cvjs_active_floorplan_div_nr])/2,viewBox[cvjs_active_floorplan_div_nr].Y=a.y+(a.height-viewBoxHeight[cvjs_active_floorplan_div_nr])/2,setView(cvjs_rPaper[cvjs_active_floorplan_div_nr],viewBox[cvjs_active_floorplan_div_nr].X,
viewBox[cvjs_active_floorplan_div_nr].Y,viewBoxWidth[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr])))}var cvjs_menu_firing=!1,cvjs_initDataMapsDisplay=!0,cvjs_modalsInitialized=!1,cvjs_modalsInitialized_FileLoadModal=!1,cvjs_containmentModalLeft=150,cvjs_containmentModalTop=150,cvjs_containmentModalRight=150,cvjs_containmentModalBottom=150,cvjs_measurementModalOptionsSize=8,cvjs_topDownloadButtonPane=!1,cvjs_topDownloadButtonPane_adjustment=50;
function cvjs_InitializeModals(a){for(var b=0;b<floorplans_divs_Initialized.length;b++)if(floorplans_divs_Initialized[b]==a){console.log(cvjs_versionNumber+" floorplan "+a+" is already initialized, returning");return}b=!0;for(var c=0;b;)""==floorplans_divs_Initialized[c]&&(floorplans_divs_Initialized[c]=a,b=!1),c++;cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a+"_svg");jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("");var d=floorPlan_div=a+"_svg";jQuery("#"+a).append('<div class="topDownloadButtonPane" id="topDownloadButtonPane_'+
d+'" ><table id="CVTable"  width="1000" height="'+cvjs_topDownloadButtonPane_adjustment+'" ><tr id="downloadrow" ><td style="vertical-align: middle" width="200" height="'+cvjs_topDownloadButtonPane_adjustment+'"><div id="downloadbutton">Hello this is the download button! <div></td></tr></table></div>');jQuery("#topDownloadButtonPane_"+d).hide();jQuery("#"+a).append('<svg id="'+floorPlan_div+'"></svg>');jQuery("#"+a).append('<div id="gMenu_'+d+'"></div><div id="tip_'+d+'" ></div><div class="cvjs_wait_looper" id="cvjs_wait_looper_'+
d+'"></div><div id="cvjs_modals_'+d+'" ></div>');jQuery("#"+a).append('<div class="topIconMenu_placeholder_1" id="topIconMenu_placeholder_1_'+d+'"  ></div>');jQuery("#"+a).append('<div class="topIconMenu_placeholder_2" id="topIconMenu_placeholder_2_'+d+'"  ></div>');jQuery("#topIconMenu_"+d).css({left:jQuery("#"+a).position().left+1,top:jQuery("#"+a).position().top+1});jQuery("#topIconMenu_"+d).css({width:"100%"});jQuery("#topIconMenu_"+d).css({height:"32px"});jQuery("#topIconMenu_"+d).css({position:"absolute"});
jQuery("#topIconMenu_"+d).css({"z-index":2});jQuery("#topIconMenu_"+d).css({display:"block"});jQuery("#topIconMenu_placeholder_2_"+d).css({"z-index":2});jQuery("#topIconMenu_placeholder_2_"+d).css({display:"block"});jQuery("#topIconMenu_placeholder_2_"+d).css({position:"absolute"});jQuery("#topIconMenu_placeholder_2_"+d).css({overflow:"visible"});jQuery("#topIconMenu_placeholder_1_"+d).css({"z-index":2});jQuery("#topIconMenu_placeholder_1_"+d).css({display:"block"});jQuery("#topIconMenu_placeholder_1_"+
d).css({position:"absolute"});jQuery("#topIconMenu_placeholder_1_"+d).css({overflow:"visible"});jQuery("#topIconMenu_placeholder_2_"+d).draggable();jQuery("#topIconMenu_"+d).draggable();cvjs_setIconInterfaceControls_MimimumDisk_internal(!0,a);b=cvjs_serverHandlersPath+cvjs_serverLoadFileController;c={};c.file=cvjs_ServerLocation+cvjs_loadCADViewerLanguageLocation;var e="post";cvjs_isAngular&&(e="get",c=null,b=cvjs_loadCADViewerLanguageLocation);0==cvjs_frontEndHandlerType.indexOf("reactjs")&&(e="get",
c=null,b=cvjs_loadCADViewerLanguageLocation);cvjs_debug&&console.log("6.4.15 cvjs_LanguageLoad: "+b+" mytype "+e+" cvjs_isAngular:"+cvjs_isAngular);0==cvjs_backEndHandlerType.indexOf("dotnetcore")&&(b=cvjs_serverLoadFileController,cvjs_debug&&console.log("2x js_data:"+c+"    "+b));jQuery.ajax({url:b,type:e,async:!1,data:c,success:function(b){-1<cvjs_backEndHandlerType.indexOf("dotnetcore")||-1<cvjs_frontEndHandlerType.indexOf("angular")||-1<cvjs_frontEndHandlerType.indexOf("reactjs")?cvjs_debug&&
console.log("xmlLanguages: "+b):cvjs_debug&&console.log("xmlLanguages 200first char: "+b.substring(0,200));if(-1<cvjs_frontEndHandlerType.indexOf("angular")||-1<cvjs_frontEndHandlerType.indexOf("reactjs"))b=(new XMLSerializer).serializeToString(b);var c=new X2JS;JSON.stringify(c.xml_str2json(b));languageTable=c.xml_str2json(b);languageTable=languageTable.cvjs;cvjs_debug&&console.log(languageTable);cvjs_debug&&console.log(languageTable.numberOfLanguages);try{cvjs_currentLanguage=1;for(var e=0;e<languageTable.numberOfLanguages;e++)0==
cvjs_loadCADViewerLanguageName.toLowerCase().indexOf(languageTable.languages[e].thisLanguage.toLowerCase())&&cvjs_loadCADViewerLanguageName.length==languageTable.languages[e].thisLanguage.length&&(cvjs_currentLanguage=e);cvjs_debug&&console.log(languageTable.languages[cvjs_currentLanguage].thisLanguage)}catch(p){console.log("Error:"+p)}try{for(e=0;e<languageTable.numberOfLanguages;e++)0==cvjs_loadCADViewerLanguageName.indexOf(languageTable.languages[e].languageCode)&&(cvjs_currentLanguage=e)}catch(p){console.log(p)}cvjs_debug&&
console.log(languageTable.languages[cvjs_currentLanguage].thisLanguage);cvjs_LoadTopNavigationMenu(a);cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(d)]?(e=cvjs_serverHandlersPath+cvjs_serverLoadFileController,b={},b.file=cvjs_ServerLocation+cvjs_topIconMenuXML_location+cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(d)],cvjs_debug&&console.log("opening menu config "+b.file+"  cvjs_XMLloadLocation "+e),c="post",cvjs_isAngular&&(c="get",b=null,e=cvjs_topIconMenuXML_location+cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(d)]),
0==cvjs_frontEndHandlerType.indexOf("reactjs")&&(c="get",b=null,e=window.location.href+cvjs_topIconMenuXML_location+cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(d)]),0==cvjs_backEndHandlerType.indexOf("dotnetcore")&&(e=cvjs_serverLoadFileController,b={},b.file=cvjs_ServerLocation+cvjs_topIconMenuXML_location+cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(d)]),cvjs_debug&&console.log("6.4.41: "+e),jQuery.ajax({url:e,type:c,data:b,async:!1,success:function(a){0==!cvjs_frontEndHandlerType.indexOf("angular")&&
0==!cvjs_frontEndHandlerType.indexOf("reactjs")&&(cvjs_debug?console.log("Icon Menu 200 first chars: "+a.substring(0,200)):cvjs_debug&&console.log("Icon Menu: "+a));if(0==cvjs_frontEndHandlerType.indexOf("angular")||0==cvjs_frontEndHandlerType.indexOf("reactjs"))a=(new XMLSerializer).serializeToString(a);var b=new X2JS;JSON.stringify(b.xml_str2json(a));a=b.xml_str2json(a);cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(d)]=a.cvjs.iconmenu.startpage-1;cvjs_topIconMenu[cvjs_interfaceCounterIndex(d)]=
a;cvjs_LoadTopIconMenuXML(d,a)},error:function(a){console.log("Error "+a)}})):(console.log("cvjs_loadTopIconMenuXML="+cvjs_loadTopIconMenuXML),cvjs_LoadTopIconMenuViewing(d));cvjs_debug&&console.log("before cvjs_initCADViewerPro_FileLoadModal(floorplan_div)");cvjs_Community_Version||cvjs_initCADViewerPro_FileLoadModal(d);jQuery("#tip_"+d).css({position:"absolute"});jQuery("#tip_"+d).css({border:"1px solid gray"});jQuery("#tip_"+d).css({"z-index":2E3});jQuery("#tip_"+d).css({color:"#333"});jQuery("#tip_"+
d).css({"background-color":"#efefef"});jQuery("#tip_"+d).css({padding:"3px"});jQuery("#tip_"+d).css({"max-width":"300px"});jQuery("#tip_"+d).css({"white-space":"nowrap"});jQuery("#tip_"+d).css({"font-family":"arial, verdana, sans-serif"});jQuery("#tip_"+d).css({"font-size":"0.75em"});tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+d);jQuery("#tip_"+d).hide();tip_leafletBase[cvjs_active_floorplan_div_nr]=tip[cvjs_active_floorplan_div_nr];jQuery("#gMenu_"+d).css({width:"30px"});jQuery("#gMenu_"+d).css({height:"123px"});
jQuery("#gMenu_"+d).css({position:"absolute"});jQuery("#gMenu_"+d).css({"z-index":1E3});jQuery("#gMenu_"+d).css({display:"block"});cvjs_Community_Version||cvjs_initCADViewerPro_Section02(d);jQuery("#cvjs_modals_"+d).append('<table id="floorPlanCanvasObject_table_'+d+'"><tr><td><canvas id="floorPlanCanvasObject_'+d+'" width="10" height="10"></canvas></td></tr></table>');jQuery("#floorPlanCanvasObject_"+d).hide();jQuery("#floorPlanCanvasObject_table_"+d).hide();printDebugFlag&&jQuery("#floorPlanCanvasObject_table_"+
d).show();jQuery("#cvjs_modals_"+d).append('<map name="PanZoomMap" ><area shape="rect" alt="" title="Zoom Extents" coords="16,6,69,58" href="javascript:cvjs_resetZoomPan();"/><area shape="rect" alt="" title="Zoom In" coords="16,66,69,115" href="javascript:cvjs_zoomIn("'+d+'");"/><area shape="rect" alt="" title="Zoom Out" coords="16,116,69,161" href="javascript:cvjs_zoomOut();"/><area shape="rect" alt="" title="Zoom Window" coords="16,162,69,210" href="javascript:cvjs_zoomWindow();"/><area shape="rect" alt="" title="Load Last Page" coords="16,220,69,255" href="javascript:cvjs_lastPage("'+
d+'");"/><area shape="rect" alt="" title="Load Next Page" coords="16,256,69,289" href="javascript:cvjs_nextPage("'+d+'");"/><area shape="rect" alt="" title="Load Previous Page" coords="16,290,69,324" href="javascript:cvjs_previousPage("'+d+'");"/><area shape="rect" alt="" title="Load First Page" coords="16,325,69,360" href="javascript:cvjs_firstPage("'+d+'");"/></map>');jQuery("#cvjs_modals_"+d).append('<map name="PanZoomMapClassic_'+d+'" ><area shape="rect" alt="" title="Zoom In" coords="16,164,69,211" href="javascript:cvjs_zoomIn("'+
d+'");"/><area shape="rect" alt="" title="Zoom Out" coords="16,211,69,258" href="javascript:cvjs_zoomOut();"/><area shape="rect" alt="" title="Zoom Extents" coords="16,94,69,141" href="javascript:cvjs_resetZoomPan();"/><area shape="polygon" alt="" title="Pan Left"  coords="13,29,32,23,29,44,9,56,5,39,6,21,9,13,13,11" href="javascript:cvjs_panLeft();"/><area shape="polygon" alt="" title="Pan Right" coords="50,22,70,8,76,20,78,39,74,53,66,60,50,39,50,21" href="javascript:cvjs_panRight();"/><area shape="polygon" alt="" title="Pan Down"  coords="13,57,31,43,50,42,65,61,55,69,42,69,25,68,19,63" href="javascript:cvjs_panDown();"/><area shape="polygon" alt="" title="Pan Up"    coords="13,17,32,22,52,22,69,29,60,0,51,0,36,0,22,0,13,8" href="javascript:cvjs_panUp();"/><area shape="rect" alt="" title="Zoom Extents" coords="30,22,50,43" href="javascript:cvjs_resetZoomPan();"/></map>');
jQuery("#cvjs_modals_"+d).append('<map name="ZoomExtentsDeviceMapClassic_'+d+'" ><area shape="rect" alt="" title="Zoom In" coords="16,75,69,124" href="javascript:cvjs_zoomIn("'+d+'");"/><area shape="rect" alt="" title="Zoom Out" coords="16,127,69,173" href="javascript:cvjs_zoomOut();"/><area shape="rect" alt="" title="Zoom Extents" coords="16,6,69,54" href="javascript:cvjs_resetZoomPan();"/></map>');jQuery("#cvjs_modals_"+d).append('<div id="floatNavigationMenu_'+d+'" class="changePagebox1"><a class="cvjs_zoomextents" id="cvjs_zoomextents_'+
d+'" href="javascript:cvjs_zoomExtents(\''+d+'\');"></a><a class="cvjs_zoomwindow" id="cvjs_zoomwindow_'+d+'" href="javascript:cvjs_zoomWindow(\''+d+'\');"></a><a class="cvjs_rotateforward" id="cvjs_rotateforward_'+d+'" href="javascript:cvjs_rotateForward(\''+d+'\');"></a><a class="cvjs_rotateback" id="cvjs_rotateback_'+d+'" href="javascript:cvjs_rotateBackward(\''+d+'\');"></a><a class="cvjs_fastback" id="cvjs_fastback_'+d+'" href="javascript:cvjs_firstPage(\''+d+'\');"></a><a class="cvjs_back" id="cvjs_back_'+
d+'" href="javascript:cvjs_previousPage(\''+d+'\');"></a><a class="cvjs_enterpagenumber" id="cvjs_enterpagenumber_'+d+'" href="javascript:cvjs_enterPageChangeNumber(\''+d+'\');"></a><a class="cvjs_selectpagefromlist" id="cvjs_selectpagefromlist_'+d+'" href="javascript:cvjs_selectPageFromList(\''+d+'\');"></a><div id="floatpagemenuText_'+d+'">nr    page name</div><a class="cvjs_forward" id="cvjs_forward_'+d+'" href="javascript:cvjs_nextPage(\''+d+'\');"></a><a class="cvjs_fastforward" id="cvjs_fastforward_'+
d+'" href="javascript:cvjs_lastPage(\''+d+"');\"></a></div>");jQuery("#cvjs_modals_"+d).append('<div id="cloneObject_01"></div>');jQuery("#cvjs_modals_"+d).append('<canvas id="tempBitmapObjectHolder" width="10" height="10"></canvas>');jQuery("#cvjs_modals_"+d).append('<form id="datamaps_form" style="display:none"><table width="100%" border="0" cellspacing="0" border-spacing="0" ><tr></tr><tr><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div id="unlink_Modal_header" class="datamaps_text_modal">Data Maps</div></td><td><div class="onoffswitch"><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="cvjs_displayData_switch" ><label class="onoffswitch-label" for="cvjs_displayData_switch"><span class="onoffswitch-inner"></span><span class="onoffswitch-switch"></span></label></div></td>  </tr></table><div id ="datamaps_modal_line" class="horizontal_modal_line"></div><table id="datamaps_modal_table" class="text_modal_table_class" width="100%" border="0" cellspacing="0" border-spacing="0" > \t<tr><td><div id="cv_link11_fixtures" class="dropdown"><span class="dropdown-toggle" role="button" data-toggle="dropdown" href="#" data-target="#" id="drop_select_datamaps">None Selected<b class="caret"></b></span><ul id="select_datamaps" class="dropdown-menu" role="menu" aria-labelledby="drop_select_datamaps"></ul></div></td></tr> <tr><td>    <div id="cvjs_display_selection_1" class="occupancy-colors"><span class="hint--top void color-chip" data-hint="No Data"></span><span class="hint--top low2 color-chip" data-hint="&gt; 10 min"></span><span class="hint--top low1 color-chip" data-hint="7.5 to 10 min"></span><span class="hint--top mid0 color-chip" data-hint="5 to 7.5 min"></span><span class="hint--top high1 color-chip" data-hint="2.5 to 5 min"></span><span class="hint--top high2 color-chip" data-hint="&lt; 2.5 min"></span></div>        <div id="cvjs_display_selection_2" class="power-colors"><span class="hint--top void color-chip" data-hint="No Data"></span><span class="hint--top low2 color-chip" data-hint="&lt; 0.1 W/sq ft | 1.08 W/sq m"></span><span class="hint--top low1 color-chip" data-hint="0.1 to 0.2 W/sq ft | 1.1 to 2.2 W/sq m"></span><span class="hint--top mid0 color-chip" data-hint="0.2 to 0.4 W/sq ft | 2.2 to 4.3 W/sq m"></span><span class="hint--top high1 color-chip" data-hint="0.4 to 0.5 W/sq ft | 4.3 to 5.4 W/sq m"></span><span class="hint--top high2 color-chip" data-hint="&gt; 0.5 W/sq ft | 5.4 W/sq m"></span></div><div id="cvjs_display_selection_3" class="temperature-colors"><span class="hint--top void color-chip" data-hint="No Data"></span><span class="hint--bottom low2 color-chip" data-hint="&lt; 70 &deg;F | 21 &deg;C"></span></span><span class="hint--bottom low1 color-chip" data-hint="70 to 72 &deg;F | 21 to 22 &deg;C"></span><span class="hint--bottom mid0 color-chip" data-hint="72 to 77 &deg;F | 22 to 25 &deg;C"></span><span class="hint--bottom high1 color-chip" data-hint="77 to 81 &deg;F | 25 to 27 &deg;C"></span><span class="hint--bottom high2 color-chip" data-hint="&gt; 81 &deg;F | 27 &deg;C"></span></div> <div id="cvjs_display_selection_4" class="lightlevel-colors"> <span class="hint--top void color-chip" data-hint="No Data"></span><span class="hint--bottom low2 color-chip" data-hint="&lt; 70 &deg;F | 21 &deg;C"></span><span class="hint--bottom low1 color-chip" data-hint="70 to 72 &deg;F | 21 to 22 &deg;C"></span><span class="hint--bottom mid0 color-chip" data-hint="72 to 77 &deg;F | 22 to 25 &deg;C"></span><span class="hint--bottom high1 color-chip" data-hint="77 to 81 &deg;F | 25 to 27 &deg;C"></span><span class="hint--bottom high2 color-chip" data-hint="&gt; 81 &deg;F | 27 &deg;C"></span></div></td></tr></tr>     </table><table id="datamaps_select_save_changes" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="5" height="5" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><div style="width: 60px" ><div id="button2-nounlink"><img id="unlink_modal_cancel_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Cancel_Inactive_4.png" border="0"></div></div></td><td><td div style="height: 10px" ><img src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td><div style="width: 111px" ><div id="button1-unlink"><img id="unlink_modal_proceed_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Proceed_111x28_Up.png" border="0"></div></div></td></tr><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="7" height="7" /></td></tr></table></form>');jQuery("#datamaps_form").hide();jQuery("#datamaps_modal_line").hide();jQuery("#datamaps_modal_table").hide();jQuery("#datamaps_select_save_changes").hide();
jQuery("#cvjs_display_selection_1").hide();jQuery("#cvjs_display_selection_2").hide();jQuery("#cvjs_display_selection_3").hide();jQuery("#cvjs_display_selection_4").hide();b='<div class="dropdown-content">';for(e=0;4>e;e++)b=b+"<li><a href=\"javascript:cvjs_change_datamaps('"+e+"')\">"+languageTable.languages[cvjs_currentLanguage].DataMaps.Map[e]+"</a></li>";b+="</div>";jQuery("#select_datamaps").html(b);jQuery("#cvjs_displayData_switch").change(function(){jQuery(this).is(":checked")?(spaceLayer=
cvjs_clearLayer(spaceLayer,floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_ParseDisplayDataMaps(cvjs_currentMapNumber),jQuery("#datamaps_modal_table").show(),jQuery("#datamaps_select_save_changes").hide(),jQuery("#datamaps_modal_line").show(),jQuery("#datamaps_form").css({height:"120px"}),jQuery("#datamaps_form").css("left",40).css("top",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height()-197),
cvjs_initDataMapsDisplay&&(cvjs_initDataMapsDisplay=!1,cvjs_change_datamaps(0))):(spaceLayer=cvjs_clearLayer(spaceLayer),jQuery("#datamaps_modal_table").hide(),jQuery("#datamaps_select_save_changes").hide(),jQuery("#datamaps_modal_line").hide(),jQuery("#datamaps_form").css({height:"43px"}),jQuery("#datamaps_form").css("left",40).css("top",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height()-120))});jQuery(function(){jQuery("#datamaps_form").draggable()});
cvjs_layerlistModal_content='<table class="layerListTable" ><tr><td><div class="pagechangeListHeaderLayers" id="layerListHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_layerListTextHeader">'+languageTable.languages[cvjs_currentLanguage].LayerListModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_layerlist_'+d+'"></div></td></tr><tr><td><canvas id="dummy" width="30" height="8"></canvas></td></tr><tr><td><canvas id="dummy" width="30" height="4"></canvas><input id="cvjs_layer_search_field" class="search cvjs_search " placeholder="'+
languageTable.languages[cvjs_currentLanguage].LayerListModal.Search+'" /><canvas id="dummy" width="30" height="4"></canvas><button id="cvjs_layer_sort_button" class="sort cvjs_sort" data-sort="layer">'+languageTable.languages[cvjs_currentLanguage].LayerListModal.Sort+'</button></td></tr><tr><td><canvas id="dummy" width="30" height="4"></canvas></td></tr><tr><td><ul class="list cvjs_list" id="layerlist_id"></ul><canvas id="dummy" width="30" height="20"></canvas><input id="cvjs_layer_settings_button1" class="cvjs_input" type="button_layer" name="Button3" value="'+
languageTable.languages[cvjs_currentLanguage].LayerListModal.AllLayerOn+'" ><canvas id="dummy" width="30" height="20"></canvas><input id="cvjs_layer_settings_button2" class="cvjs_input" type="button_layer" name="Button3" value="'+languageTable.languages[cvjs_currentLanguage].LayerListModal.AllLayerOff+'"  ><canvas id="dummy" width="30" height="20"></canvas><input id="cvjs_layer_settings_button3" class="cvjs_input" type="button_layer" name="Button3" value="'+languageTable.languages[cvjs_currentLanguage].LayerListModal.SwapLayers+
'"  ></td></tr><tr><td><canvas id="" width="10" height="25"></canvas><font id="cvjs_layer_selectdrawing">'+languageTable.languages[cvjs_currentLanguage].LayerListModal.SelectDrawings+'</font><br><canvas id="dummy" width="2" height="21"></canvas><div id="cvjs_LayerSelectorLocation"><select id="cvjs_SelectLayerDrawings" multiple="multiple"><option value="1">'+languageTable.languages[cvjs_currentLanguage].LayerListModal.BaseAndXref+'</option><option value="2">Xref: TEMPLATE 1</option><option value="3">Xref: TEMPLATE 2</option></select></div></td></tr><tr><td style="border-bottom: 6px solid #fff"><canvas id="dummy" width="10" height="25"></canvas><input class="cvjs_btn" type="checkbox" id="cvjs_layerlist_checkbox" value="measurearea_status"><canvas id="dummy" width="15" height="25"></canvas><div id="cvjs_layerlist_checkboxText">'+
languageTable.languages[cvjs_currentLanguage].LayerListModal.XrefLayerName+"</div></td></tr></table>";jQuery("#cvjs_modals_"+d).append('<div id="layerList_'+d+'" class="cvjs_listwrapper"></div>');jQuery("#layerList_"+d).html(cvjs_layerlistModal_content);jQuery("#cvjs_exit_layerlist_"+d).on("click",function(){cvjs_exit_layerlist(d)});jQuery("#cvjs_layer_settings_button1").on("click",function(){modal_all_layer_on()});jQuery("#cvjs_layer_settings_button2").on("click",function(){modal_all_layer_off()});
jQuery("#cvjs_layer_settings_button3").on("click",function(){modal_swap_layers_on_off()});cvjs_pagechangeListModal_content='<table class="pagechangeListTable" ><tr><td><div class="pagechangeListHeader" id="pagechangeListHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_pagechangeListTextHeader">'+languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Header+
'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_pagechangelist_'+d+'"></div></td></tr><tr><td><canvas id="dummy" width="30" height="8"></canvas></td></tr><tr><td><canvas id="dummy" width="30" height="4"></canvas><input id="cvjs_pagechange_search_field" class="search cvjs_search" placeholder="'+languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Search+'" /><canvas id="dummy" width="30" height="4"></canvas><button id="cvjs_pagechange_sort_button" class="sort cvjs_sort" data-sort="layer">'+
languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Sort+'</button></td></tr><tr><td><canvas id="dummy" width="30" height="4"></canvas></td></tr><tr><td><ul class="list cvjs_list" id="pagechangelist_id"></ul></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div id="pagechangeList_'+d+'" class="pagechangeListModal cvjs_listwrapper"></div>');jQuery("#pagechangeList_"+d).html(cvjs_pagechangeListModal_content);jQuery("#cvjs_exit_pagechangelist_"+d).on("click",function(){cvjs_exit_pagechangelist(d)});
cvjs_birdseyeModal_content='<table class="cvjs_floorPlanMagnifyingGlassTable" ><tr><td><div class="cvjs_floorPlanMagnifyingGlassTop"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_magnifyHeader">'+languageTable.languages[cvjs_currentLanguage].BirdsEyeModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitBirdsEye_'+d+'"></div></tr></td><tr><td><canvas id="cvjs_floorPlanMagnifyingGlass_'+
d+'" width="300" height="200"></canvas></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="cvjs_floorPlanMagnifyingGlassEncapsulate" id="cvjs_floorPlanMagnifyingGlassEncapsulate_'+d+'"></div>');jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+d).html(cvjs_birdseyeModal_content);jQuery("#cvjs_exitBirdsEye_"+d).on("click",function(){cvjs_exitBirdsEye(d)});cvjs_calibrateModal_content='<table class="calibrateModalanguageTable"><tr><td><div class="calibrateModalHeader"><a class="modalIconLogo" href="'+
pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText" id="cvjs_calibrateModalHeader">'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitCalibrateModal_'+d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_calibrate_modal_unit">'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.Unit+
'</font><canvas id="dummy" width="10" height="10"></canvas><select id="cvjs_unitForScale"><option value="1">m</option><option value="2">cm</option><option value="3">mm</option><option value="4">km</option><option value="5">feet</option><option value="6">inches</option><option value="7">miles</option></select></td></tr><tr><td><canvas id="dummy" width="10" height="30"></canvas><input type="checkbox" id="cvjs_calibrate_checkbox2" value="grayscale_status"><canvas id="dummy" width="5" height="23"></canvas><font id="cvjs_calibrate_modal_scalefac">'+
languageTable.languages[cvjs_currentLanguage].CalibrateModal.Scalefac+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="1" id="cvjs_calibrateScaleFactor" class="cvjs_inputCalibrateModal"><canvas id="dummy" width="70" height="23"></canvas><input id="cvjs_calibrate_button2" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.OK+'" ><div id="cvjs_calibrationModalText2"><font id="cvjs_calibrate_modal_text2">'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.TextScale+
'</font></div></td></tr><tr><td><canvas id="dummy" width="10" height="30"></canvas><input type="checkbox" id="cvjs_calibrate_checkbox3" value="grayscale_status"><canvas id="dummy" width="5" height="30"></canvas><font id="cvjs_checkboxCalibrateSelectPoints">'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.SelectPoints+'</font><canvas id="dummy" width="40" height="23"></canvas><input type="checkbox" id="cvjs_calibrate_checkbox" value="grayscale_status"><canvas id="dummy" width="5" height="30"></canvas><font id="cvjs_checkboxCalibrateLocation">'+
languageTable.languages[cvjs_currentLanguage].CalibrateModal.SelectPath+'</font><td></tr><tr><td><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_calibrate_modal_distance">'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.Distance+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="1" id="cvjs_calibrateReferenceDistance" class="cvjs_inputCalibrateModal"><input id="cvjs_calibrate_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.OK+
'" ></td></tr><tr><td><div id="cvjs_calibrationModalText"><canvas id="dummy" width="0" height="17"></canvas><font id="cvjs_calibrate_modal_text">'+languageTable.languages[cvjs_currentLanguage].CalibrateModal.Text+"</font></div></td></tr></table>";jQuery("#cvjs_modals_"+d).append('<div class="calibrateModal" id="calibrateModal_'+d+'"></div>');jQuery("#calibrateModal_"+d).html(cvjs_calibrateModal_content);jQuery("#cvjs_exitCalibrateModal_"+d).on("click",function(){cvjs_exitCalibrateModal(d,1)});jQuery("#cvjs_calibrate_button").on("click",
function(){jQuery("#cvjs_calibrate_checkbox2").is(":checked")||cvjs_exitCalibrateModal(d,2)});jQuery("#cvjs_calibrate_button2").on("click",function(){jQuery("#cvjs_calibrate_checkbox2").is(":checked")&&cvjs_exitCalibrateModal(d,3)});jQuery("#cvjs_calibrate_checkbox3").prop("checked",!0);jQuery("#cvjs_calibrate_checkbox2").prop("checked",!1);jQuery("#cvjs_calibrate_checkbox").prop("checked",!1);e="";for(b=0;b<cvjs_measurementModalOptionsSize;b++)e=e+'<option value="'+(b+1)+'">'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.MenuItems.MenuItem[b]+
"</option>";cvjs_measurementModal_content='<table class="measurementModalanguageTable" ><tr><td><div class="measurementModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_measurementHeader">'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitMeasurementModal_'+
d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="25"></canvas><textarea class="cvjs_measurementDisplayBox" id="cvjs_measurementBox_'+d+'" cols="26" rows="1"></textarea><button id="cvjs_measurement_button_icon" class="cvjs_btn btn" onClick="cvjs_copyMeasurementField(\''+d+'\');return false;"><i class="fa fa-copy"></i></button><div class="cvjs_measurementLength" id="cvjs_measurementLength_'+d+'">'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance+'</div><canvas id="dummy" width="5" height="5"></canvas><input id="cvjs_measurement_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].MeasurementModal.MeasureAgain+'" onClick="cvjs_repeatMeasurementModal();"><canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td><div id="cvjs_measurementModalText"><canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.Text+'</div></td></tr><tr><td><select id="cvjs_measurementOption">'+e+'</select><canvas id="dummy" width="30" height="30"></canvas></td><div id="measureareaLocation">'+
languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area+'</div></td><td><input id="cvjs_closearea_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.ClosePolygon+'" onClick="cvjs_closeAreaMeasurement();"></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="measurementModal" id="measurementModal_'+d+'"></div>');jQuery("#measurementModal_"+d).html(cvjs_measurementModal_content);jQuery("#cvjs_closearea_button").hide();
jQuery("#cvjs_exitMeasurementModal_"+d).on("click",function(){cvjs_exitMeasurementModal(d)});c=languageTable.languages[cvjs_currentLanguage].PrintModal.PaperSizeTotal;e="";for(b=0;b<c;b++)e=e+'<option value="'+languageTable.languages[cvjs_currentLanguage].PrintModal.PaperSizes.PaperSize[b]+'">'+languageTable.languages[cvjs_currentLanguage].PrintModal.MenuItems.MenuItem[b]+"</option>";cvjs_printModal_content='<table class="printModalanguageTable"><tr><td><div class="printModalHeader"><a class="modalIconLogo" href="'+
pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_printHeader">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitPrintModal_'+d+'_1"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="25"></canvas><font id="cvjs_printmodal_paper">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Paper+
'</font><canvas id="dummy" width="10" height="10"></canvas><select id="cvjs_paperSize">'+e+'</select><canvas id="dummy" width="16" height="10"></canvas><font id="cvjs_printorientation_text">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Orientation+'</font><canvas id="dummy" width="10" height="10"></canvas><select id="cvjs_paperOrientation"><option value="1">Landscape</option><option value="2">Portrait</option></select></td></tr><tr><td><canvas id="dummy" width="10" height="25"></canvas>';
cvjs_printModal_content=cvjs_PrintModal_PrintResolution?cvjs_printModal_content+('<font id="cvjs_print_modal_resolution">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Resolution+'</print><canvas id="dummy" width="10" height="10"></canvas><input value="300" id="cvjs_printResolution" class="cvjs_inputCalibrateModal"><canvas id="dummy" width="10" height="10"></canvas><i class="cvjs_textModalSmall"><font id="cvjs_print_modal_resolution_text">'+languageTable.languages[cvjs_currentLanguage].PrintModal.ResolutionText+
'</font></i><canvas id="dummy" width="32" height="10"></canvas><input id="cvjs_print_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].PrintModal.Print+'" >'):cvjs_printModal_content+('<canvas id="dummy" width="350" height="10"></canvas><input id="cvjs_print_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].PrintModal.Print+'" >');cvjs_PrintModal_PrintPDF&&cvjs_PrintModal_printGreyScaleflag&&(e='<select id="cvjs_grayScaleType"><option value="1">'+
languageTable.languages[cvjs_currentLanguage].PrintModal.Grayscale+'</option><option value="2">'+languageTable.languages[cvjs_currentLanguage].PrintModal.BlackWhite+"</option></select>",cvjs_printModal_content+='<canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td></td></tr></table><input type="checkbox" id="cvjs_grayscale_checkbox" value="grayscale_status"><canvas id="dummy" width="30" height="30"></canvas></td><div id="greyscaleLocation">'+e+'</div><input type="checkbox" id="cvjs_printpdf_checkbox" value="grayscale_status"><div id="printToPdfLocation">'+
languageTable.languages[cvjs_currentLanguage].PrintModal.PrintPDF+"</div>");!cvjs_PrintModal_PrintPDF&&cvjs_PrintModal_printGreyScaleflag&&(e='<select id="cvjs_grayScaleType"><option value="1">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Grayscale+'</option><option value="2">'+languageTable.languages[cvjs_currentLanguage].PrintModal.BlackWhite+"</option></select>",cvjs_printModal_content+='<canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td></td></tr></table><input type="checkbox" id="cvjs_grayscale_checkbox" value="grayscale_status"><canvas id="dummy" width="30" height="30"></canvas></td><div id="greyscaleLocation">'+
e+"</div></div>");cvjs_PrintModal_PrintToScale&&(cvjs_printModal_content+='<input type="checkbox" id="cvjs_printtoscale_checkbox" value="printtoscale_status"><div id="printToScaleLocation">'+languageTable.languages[cvjs_currentLanguage].PrintModal.PrintToScale+'</div><div id="enterPrintToScaleValueLocation">'+languageTable.languages[cvjs_currentLanguage].PrintModal.EnterScale+'</div><input value="1:1" id="cvjs_printToScaleValue" class="cvjs_inputCalibrateModal">');cvjs_customPrintCheckboxMode&&(cvjs_printModal_content+=
'<input type="checkbox" id="cvjs_custom_checkbox" value="grayscale_status"><div id="printCustomCheckbox">'+languageTable.languages[cvjs_currentLanguage].PrintModal.CustomCheckbox+"</div>");cvjs_initCustomPrintCheckboxMode=!1;cvjs_customPrintTextboxMode&&(cvjs_customPrintDualTextboxMode?(cvjs_printModal_content+='<div id="cvjs_printModalTextboxLocation_text">'+languageTable.languages[cvjs_currentLanguage].PrintModal.TextBox1Header+"</div>",cvjs_printModal_content+='<div id="cvjs_printModalDualTextboxLocation_text">'+
languageTable.languages[cvjs_currentLanguage].PrintModal.TextBox2Header+"</div>",cvjs_printModal_content+='<div id="cvjs_printModalTextboxLocation"><textarea class="cvjs_redlines_edit_text_1" id="printmodal_text" cols="35" rows="3"></textarea></div>',cvjs_printModal_content+='<div id="cvjs_printModalDualTextboxLocation"><textarea class="cvjs_redlines_edit_text_1" id="printmodal_dual_text" cols="10" rows="3"></textarea></div>',jQuery("#cvjs_printModalTextboxLocation").hide(),jQuery("#cvjs_printModalDualTextboxLocation").hide()):
(cvjs_printModal_content+='<div id="cvjs_printModalTextModalFont">'+languageTable.languages[cvjs_currentLanguage].RedlineTextModal.FontSize+'</div><div id="cvjs_inputPrintTextModal"><input value="10" id="cvjs_printTextboxFontSizeInput_'+d+'" class="cvjs_inputRedlineTextModal"><canvas id="dummy" width="70" height="5"></div>',cvjs_printModal_content+='<div id="cvjs_printModalTextboxLocation"><textarea class="cvjs_redlines_edit_text_1" id="printmodal_text" cols="35" rows="3"></textarea></div>',cvjs_printModal_content+=
'<div id="cvjs_printModalTextboxVariablesLocation"><canvas id="dummy" width="1" height="10"></canvas>'+languageTable.languages[cvjs_currentLanguage].PrintModal.JsonVariable+'<br><canvas id="dummy" width="1" height="16"></canvas><select id="cvjs_SelectVariablesTextBox"><option value="1">variable1</option><option value="2">variable2</option><option value="3">variable3</option></select><div>'));cvjs_Community_Version||cvjs_initCADViewerPro_Section03(d);e="printModal";if(cvjs_customPrintCheckboxMode||
cvjs_customPrintTextboxMode)e="printModalTextbox";jQuery("#cvjs_modals_"+d).append('<div class="'+e+'" id="printModal_'+d+'"></div>');jQuery("#printModal_"+d).html(cvjs_printModal_content);cvjs_PrintModal_PrintToScale||(b=jQuery("."+e).css("height"),b=b.substring(0,b.indexOf("px")),b=parseInt(b)-25,jQuery("."+e).css("height",b+"px"));cvjs_PrintModal_PrintResolution||(b=jQuery("."+e).css("height"),b=b.substring(0,b.indexOf("px")),b=parseInt(b)-25,jQuery("."+e).css("height",b+"px"));cvjs_PrintModal_PrintResolution||
(jQuery("#greyscaleLocation").css("top","65px"),jQuery("#printToPdfLocation").css("top","65px"),jQuery("#cvjs_grayscale_checkbox").css("top","65px"),jQuery("#cvjs_printpdf_checkbox").css("top","65px"),cvjs_customPrintTextboxMode&&(cvjs_customPrintDualTextboxMode?cvjs_PrintModal_PrintToScale?(jQuery("#cvjs_printModalTextboxLocation").css("top","139x"),jQuery("#cvjs_printModalDualTextboxLocation").css("top","139px")):(jQuery("#cvjs_printModalTextboxLocation").css("top","114x"),jQuery("#cvjs_printModalDualTextboxLocation").css("top",
"114px")):cvjs_PrintModal_PrintToScale?(jQuery("#cvjs_printModalTextModalFont").css("top","120px"),jQuery("#cvjs_printModalTextboxLocation").css("top","120px"),jQuery("#cvjs_printModalTextboxVariablesLocation").css("top","143px")):(jQuery("#cvjs_printModalTextModalFont").css("top","95px"),jQuery("#cvjs_printModalTextboxLocation").css("top","95px"),jQuery("#cvjs_printModalTextboxVariablesLocation").css("top","118px"))),cvjs_PrintModal_PrintToScale&&(jQuery("#cvjs_printtoscale_checkbox").css("top",
"95px"),jQuery("#printToScaleLocation").css("top","95px"),jQuery("#enterPrintToScaleValueLocation").css("top","95px"),jQuery("#cvjs_printToScaleValue").css("top","95px")));cvjs_PrintModal_PrintToScale&&(jQuery("#cvjs_custom_checkbox").css("top","105px"),jQuery("#printCustomCheckbox").css("top","105px"));jQuery("#cvjs_exitPrintModal_"+d+"_1").on("click",function(){cvjs_exitPrintModal(d,1)});jQuery("#cvjs_print_button").on("click",function(){cvjs_exitPrintModal(d,2)});cvjs_spaceobjectsChangeSettingsModal_content=
'<table class="textsearchModalanguageTable" ><tr><td><div class="textSearchHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_spaceobjectchangesettingsTextHeader">'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.ModalModify+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitSpaceObjectsChangeSettingsModal_'+d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_spaceobjectchangesettingsTextLayer">'+
languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Layer+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="'+cvjs_currentNode_layer+'" id="cvjs_spaceobjectchangeLayerFromModal" class="cvjs_inputTextSearchModalwide"></td></tr><tr><td><canvas id="dummy" width="10" height="22"></canvas><font id="cvjs_spaceobjectchangesettingsTextSpaceId">'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.SpaceId+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="myNodeId" id="cvjs_spaceobjectchangeIdFromModal" class="cvjs_inputTextSearchModal"><canvas id="dummy" width="10" height="22"></canvas><font id="cvjs_spaceobjectchangesettingsTextType">'+
languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Type+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="myType" id="cvjs_spaceobjectchangeTypeFromModal" class="cvjs_inputTextSearchModal"></td></tr><tr><td><canvas id="dummy" width="1" height="26"></canvas></canvas><b class="cvjs_textModalSmall"></b><canvas id="dummy" width="10" height="10"></canvas><input type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Unlink+
'" id="cvjs_unlinkChangeSpaceObjects_'+d+'"><canvas id="dummy" width="10" height="10"></canvas><canvas id="dummy" width="5" height="10"></canvas></canvas><b class="cvjs_textModalSmall"></b><canvas id="dummy" width="30" height="10"></canvas><input type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Update+'" id="cvjs_updateChangeSpaceObjects_'+d+'"><canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td><b id="cvjs_spaceobjectchangesettingsExplanation" class="cvjs_changespaceModalSmall">'+
languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Explanation+"</b></td></tr></table>";jQuery("#cvjs_modals_"+d).append('<div class="spaceobjectchangeModal" id="spaceobjectsChangeSettingsModal_'+d+'"></div>');jQuery("#spaceobjectsChangeSettingsModal_"+d).html(cvjs_spaceobjectsChangeSettingsModal_content);jQuery("#cvjs_exitSpaceObjectsChangeSettingsModal_"+d).on("click",function(){cvjs_exitSpaceObjectsChangeSettingsModal(d)});jQuery("#cvjs_unlinkChangeSpaceObjects_"+d).on("click",function(){cvjs_unlinkChangeSpaceObjects()});
jQuery("#cvjs_updateChangeSpaceObjects_"+d).on("click",function(){cvjs_updateChangeSpaceObjects()});cvjs_spaceobjectsInitSettingsModal_content='<table class="textsearchModalanguageTable" ><tr><td><div class="textSearchHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_spaceobjectsettingsTextHeader">'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.ModalPoly+
'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitSpaceObjectsInitSettingsModal_'+d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_spaceobjectsettingsTextLayer">'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Layer+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="'+cvjs_currentNode_layer+'" id="cvjs_spaceobjectLayerFromModal" class="cvjs_inputTextSearchModalwide"></td></tr><tr><td><canvas id="dummy" width="10" height="22"></canvas><font id="cvjs_spaceobjectsettingsTextSpaceId">'+
languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.SpaceId+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="myNodeId" id="cvjs_spaceobjectIdFromModal" class="cvjs_inputTextSearchModal"><canvas id="dummy" width="5" height="10"></canvas><b class="cvjs_textModalSmall"></b></td></tr><tr><td><canvas id="dummy" width="10" height="22"></canvas><font id="cvjs_spaceobjectsettingsTextType">'+languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Type+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="myType" id="cvjs_spaceobjectTypeFromModal" class="cvjs_inputTextSearchModal"><canvas id="dummy" width="5" height="10"></canvas><b class="cvjs_textModalSmall"></b><canvas id="dummy" width="50" height="10"></canvas><input id="cvjs_spaceobjectsettingsTextCreate" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Create+'"><canvas id="dummy" width="10" height="10"></canvas></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="spaceObjectsCreateInitModal" id="spaceobjectsInitSettingsModal_'+d+'"></div>');jQuery("#spaceobjectsInitSettingsModal_"+d).html(cvjs_spaceobjectsInitSettingsModal_content);jQuery("#cvjs_exitSpaceObjectsInitSettingsModal_"+d).on("click",function(){cvjs_exitSpaceObjectsInitSettingsModal(d)});jQuery("#cvjs_spaceobjectsettingsTextCreate").on("click",
function(){cvjs_continueCreateSpaceObjects()});cvjs_textSearchModal_content='<table class="textsearchModalanguageTable" ><tr><td><div class="textSearchHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_searchTextHeader">'+languageTable.languages[cvjs_currentLanguage].SearchTextModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_textsearchmodal_'+
d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_search_text_searchtext">'+languageTable.languages[cvjs_currentLanguage].SearchTextModal.SearchText+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="" id="cvjs_searchTextFromModal" class="cvjs_inputTextSearchModalwide"></td></tr><tr><td><canvas id="dummy" width="10" height="22"></canvas><font id="cvje_search_text_zoom">'+languageTable.languages[cvjs_currentLanguage].SearchTextModal.Zoom+
'</font><canvas id="dummy" width="10" height="10"></canvas><input value="1000" id="cvjs_percentageLevelFromModal" class="cvjs_inputTextSearchModal"><canvas id="dummy" width="5" height="10"></canvas></canvas><b class="cvjs_textModalSmall">(%)</b><canvas id="dummy" width="30" height="10"></canvas><input id="cvjs_textsearch_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].SearchTextModal.Search+'" ><canvas id="dummy" width="10" height="10"></canvas></td></tr></table>';
jQuery("#cvjs_modals_"+d).append('<div class="textsearchModal" id="textsearchModal_'+d+'"></div>');jQuery("#textsearchModal_"+d).html(cvjs_textSearchModal_content);jQuery("#cvjs_exit_textsearchmodal_"+d).on("click",function(){cvjs_exit_textsearchmodal(d)});jQuery("#cvjs_textsearch_button").on("click",function(){cvjs_startSearchText(d)});cvjs_customSearchModal_content='<table class="textsearchModalanguageTable" ><tr><td><div class="textSearchHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+
pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_searchTextHeader">'+languageTable.languages[cvjs_currentLanguage].SearchCustomModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_customsearchmodal_'+d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_search_text_searchtext2">'+languageTable.languages[cvjs_currentLanguage].SearchCustomModal.SearchText+
'</font><canvas id="dummy" width="10" height="10"></canvas><input value="" id="cvjs_customSearchTestFromModal" class="cvjs_inputTextSearchModalwide"></td></tr><tr><td><canvas id="dummy" width="10" height="22"></canvas><canvas id="dummy" width="230" height="10"></canvas><canvas id="dummy" width="5" height="10"></canvas></canvas><canvas id="dummy" width="30" height="10"></canvas><input id="cvjs_textsearch_button_custom" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].SearchTextModal.Search+
'" ><canvas id="dummy" width="10" height="10"></canvas></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="textsearchModal" id="customsearchModal_'+d+'"></div>');jQuery("#customsearchModal_"+d).html(cvjs_customSearchModal_content);jQuery("#customsearchModal_"+d).hide();jQuery("#cvjs_exit_customsearchmodal_"+d).on("click",function(){cvjs_exit_customsearchmodal(d)});jQuery("#cvjs_textsearch_button_custom").on("click",function(){cvjs_startCustomSearchText()});cvjs_infoMessageModal_content=
'<div class="modal-dialog modal-dialog-md"><div class="info_messageModalWrapper"><table><tr><td><div id="infoModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_infoMessageHeader">'+languageTable.languages[cvjs_currentLanguage].InfoMessageModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_informationmodal_'+d+'" ></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="10"></canvas><div id="cvjs_informationModalText">Text here</div></td></tr></table></div></div>';
jQuery("#cvjs_modals_"+d).append('<div class="info_messageModal" id="info_messageModal_'+d+'" class="modal fade"></div>');jQuery("#info_messageModal_"+d).html(cvjs_infoMessageModal_content);jQuery("#cvjs_exit_informationmodal_"+d).on("click",function(){cvjs_exit_informationmodal(d)});cvjs_infoMessageModal_content='<table class="info_messageModal_2Table"><tr><td><div class="infoModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+
lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_infoMessageHeader2">'+languageTable.languages[cvjs_currentLanguage].InfoMessageModal.Header2+'</div><input class="cvjs_new_header_button" id="cvjs_exit_informationmodal_2_'+d+'" type="button" value="&times;" ></div></td></tr><tr><td><div class="cvjs_informationModalText_2_div"   id="cvjs_informationModalText_2_'+d+'"> Text here</div></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="info_messageModal_2" id="info_messageModal_2_'+
d+'"></div>');jQuery("#info_messageModal_2_"+d).html(cvjs_infoMessageModal_content);jQuery("#cvjs_exit_informationmodal_2_"+d).on("click",function(){cvjs_exit_informationmodal_2(d)});cvjs_documentPageChangeModal_content='<table class="documentPageChangeModalanguageTable"><tr><td><div class="thicknessHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_documentChangeModalHeader">'+
languageTable.languages[cvjs_currentLanguage].DocumentPageChangeModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_documentpagechangemodal_'+d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="24"></canvas><font id="cvjs_documentPageChangeModal_changetext">'+languageTable.languages[cvjs_currentLanguage].DocumentPageChangeModal.Page+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="1" id="cvjs_inputDocumentPageChange_'+
d+'" class="cvjs_inputDocumentPageChangeModal"><canvas id="dummy" width="70" height="5"></canvas><input id="cvjs_documentPageChangeModal_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].DocumentPageChangeModal.OK+'" "><canvas id="dummy" width="10" height="10"></canvas></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="documentPageChangeModal" id="documentPageChangeModal_'+d+'"></div>');jQuery("#documentPageChangeModal_"+d).html(cvjs_documentPageChangeModal_content);
jQuery("#cvjs_documentPageChangeModal_button").on("click",function(){cvjs_changePageByNumberViaButton(d)});jQuery("#cvjs_exit_documentpagechangemodal_"+d).on("click",function(){cvjs_exit_documentpagechangemodal(d)});cvjs_publishPDFModal_content='<table class="publishPDFModalanguageTable"><tr><td><div class="publishPDFModalHeader" id="publishPDFModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_publishPDFHeader">'+
languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_publishPDF_modal_hide_'+d+'"></div></td></tr><tr><td><br><br><canvas id="dummy" width="10" height="10"></canvas><font id="cvjs_publish_pdf_selectmode">'+languageTable.languages[cvjs_currentLanguage].PublishPDFModal.SelectMode+'</font><canvas id="dummy" width="20" height="10"></canvas><input class="radioPublishPDF1" id="radioPublishAsPDF1_'+d+'" type="radio" name="radioColor" value="1" checked="checked"><label id="cvjs_publishpdfmode1" for="radio1">'+
languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Mode1+'</label><canvas id="dummy" width="26" height="10"></canvas><input class="radioPublishPDF2" id="radioPublishAsPDF2_'+d+'" type="radio" name="radioColor" value="2"><label id="cvjs_publishpdfmode2" for="radio2">'+languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Mode2+'</label><canvas id="dummy" width="303" height="10"></canvas><input class="radioPublishPDF3" id="radioPublishAsPDF3_'+d+'" type="radio" name="radioColor" value="3"><label id="cvjs_publishpdfmode3" for="radio3">'+
languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Mode3+'</label></td></tr><tr id="publishPDFModal_row2_'+d+'" ><td><canvas id="dummy" width="10" height="10"></canvas><font id="cvjs_entiredoc_checkbox_text">'+languageTable.languages[cvjs_currentLanguage].PublishPDFModal.EntireDoc+'</font><input type="checkbox" id="cvjs_entiredoc_checkbox" value="grayscale_status"></td></tr> <tr id="publishPDFModal_row3_'+d+'" ><td></td></tr> <tr class="publishPDFModal_row4" id="publishPDFModal_row4_'+
d+'" ><td><table id="enter_email_content_table">         <tr><td><canvas id="dummy" width="10" height="20"></canvas><font id="cvjs_entiredoc_checkbox_text_recep">'+languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Recipient+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="email" id="cvjs_publishPDFemailrecipient_'+d+'" class="cvjs_publishPDFemailrecipient"></td></tr>        <tr><td><canvas id="dummy" width="10" height="20"></canvas><font id="cvjs_entiredoc_checkbox_title">'+
languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Title+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="title" id="cvjs_publishPDFemailtitle_'+d+'" class="cvjs_publishPDFemailtitle"></td></tr>                <tr><td><canvas id="dummy" width="10" height="10"></canvas>    <table><tr><td><canvas id="dummy" width="10" height="10"></canvas><font id="cvjs_entiredoc_checkbox_message">'+languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Message+'</font></td></tr><tr><td></td></tr></table>    <textarea class="cvjs_pdfmail_edit_text_1" id="pdfmail_text" cols="43" rows="3"></textarea></td></tr>                         </table></td></tr> <tr><td><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_publish_redline_to_pdf_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].PublishPDFModal.OK+'" onClick="cvjs_publishPDFViaButton(\''+d+'\');"><canvas id="dummy" width="10" height="10"></td></tr><tr></tr></table>';jQuery("#cvjs_modals_"+d).append('<div  class="publishPDFModal"  id="publishPDFModal_'+d+'"></div>');jQuery("#publishPDFModal_"+d).html(cvjs_publishPDFModal_content);jQuery("#cvjs_publishPDF_modal_hide_"+d).on("click",function(){cvjs_publishPDF_modal_hide(d)});cvjs_backgroundColorModal_content='<table class="backgroundModalanguageTable"><tr><td><div class="backgroundModalHeader"><a class="modalIconLogo" href="'+
pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_backgroundColorHeader">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_backgroundColor_'+d+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_background_color_pickcolor">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.PickColor+
'</font><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_backgroundPickerValue" value="FFFFFF" class="cvjs_inputBackgroundColorModal jscolor {width: 110, padding:4, height: 60, shadow:false, borderWidth:0, backgroundColor:\'transparent\', insetColor:\'#000\',closable:true, closeText:\'Close Color Picker!\', onFineChange:\'cvjs_setBackgroundColorHexPicker(this)\'}"><canvas id="dummy" width="20" height="10"></canvas><font id="cvjs_background_color_selectcolor">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.SelectColor+
'</font><canvas id="dummy" width="20" height="10"></canvas><input class="radioColor1_background" id="radioColor1_background_'+d+'" type="radio" name="radioColor" value="1" checked="checked"><img id="cvjs_radioColor1_img_background" src="'+cvjs_imagesLocation+'white_color.png" border="1"/><label id="cvjs_radio1" for="radio1"><font id="cvjs_radio1_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.White+'</font></label><canvas id="dummy" width="26" height="10"></canvas><input class="radioColor2_background"  id="radioColor2_background_'+
d+'" type="radio" name="radioColor" value="2"><img id="cvjs_radioColor2_img_background" src="'+cvjs_imagesLocation+'black_color.png" border="1"/><label id="cvjs_radio2" for="radio2"><font id="cvjs_radio2_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Black+'</font></label></td></tr><tr><td><canvas id="dummy" width="303" height="10"></canvas><input class="radioColor3_background"  id="radioColor3_background_'+d+'" type="radio" name="radioColor" value="3"><img id="cvjs_radioColor3_img_background" src="'+
cvjs_imagesLocation+'azure_color.png" border="1"/><label id="cvjs_radio3" for="radio3"><font id="cvjs_radio3_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Azure+'</font></label><canvas id="dummy" width="24" height="10"></canvas><input class="radioColor4_background"  id="radioColor4_background_'+d+'" type="radio" name="radioColor" value="4"><img id="cvjs_radioColor4_img_background" src="'+cvjs_imagesLocation+'pink_color.png" border="1"/><label id="cvjs_radio4" for="radio4"><font id="cvjs_radio4_text">'+
languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Pink+'</font></label></td></tr><tr><td><canvas id="dummy" width="303" height="10"></canvas><input class="radioColor5_background"  id="radioColor5_background_'+d+'" type="radio" name="radioColor" value="5"><img id="cvjs_radioColor5_img_background" src="'+cvjs_imagesLocation+'snow_color.png" border="1"/><label id="cvjs_radio5" for="radio5"><font id="cvjs_radio5_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Snow+
'</font></label><canvas id="dummy" width="26" height="10"></canvas><input class="radioColor6_background"  id="radioColor6_background_'+d+'" type="radio" name="radioColor" value="6"><img id="cvjs_radioColor6_img_background" src="'+cvjs_imagesLocation+'silver_color.png" border="1"/><label id="cvjs_radio6" for="radio6"><font id="cvjs_radio6_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Silver+'</font></label></td></tr><tr><td><canvas id="dummy" width="303" height="10"></canvas><input class="radioColor7_background"  id="radioColor7_background_'+
d+'" type="radio" name="radioColor" value="7"><img id="cvjs_radioColor7_img_background" src="'+cvjs_imagesLocation+'gray_color.png" border="1"/><label id="cvjs_radio7" for="radio7"><font id="cvjs_radio7_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Gray+'</font></label><canvas id="dummy" width="29" height="10"></canvas><input class="radioColor8_background"  id="radioColor8_background_'+d+'" type="radio" name="radioColor" value="8"><img id="cvjs_radioColor8_img_background" src="'+
cvjs_imagesLocation+'brown_color.png" border="1"/><label id="cvjs_radio8" for="radio8"><font id="cvjs_radio8_text">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Brown+'</font></label> </td></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td></td></tr><tr><td><input type="checkbox" id="cvjs_backgroundcolor_checkbox1" value="backgroundcolor_transparent_status"><div id="cvjs_backgroundColorTransparence">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Transparent+
'</div></td></tr><tr><td><input type="checkbox" id="cvjs_backgroundcolor_checkbox2" value="backgroundcolor_opacity_status"><div id="cvjs_enterBackgroundOpacity">'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Opacity+'</div><input value="1.0" id="cvjs_backgroundSetColorOpacity" class="cvjs_inputBackgroundModal"><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_backgroundcolor_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.OK+
'" onClick="cvjs_setBackgroundColorViaButton(\''+d+'\');"><canvas id="dummy" width="10" height="10"></td></tr></table>';jQuery("#cvjs_modals_"+d).append('<div class="backgroundModal" id="backgroundModal_'+d+'"></div>');jQuery("#backgroundModal_"+d).html(cvjs_backgroundColorModal_content);jQuery("#cvjs_exit_backgroundColor_"+d).on("click",function(){cvjs_exit_backgroundColor(d)});jQuery("#cvjs_backgroundcolor_checkbox1").change(function(){var a=d;cvjs_leafletJS&&(a=floorplan_div_Array[cvjs_active_floorplan_div_nr]);
jQuery(this).is(":checked")?(jQuery("#"+a).css("background-color","transparent"),jQuery("#cvjs_backgroundcolor_checkbox2").prop("checked",!1),jQuery("#"+a).css("opacity",1)):jQuery("#"+a).css("background-color",cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr])});jQuery("#cvjs_backgroundcolor_checkbox2").change(function(){var a=d;cvjs_leafletJS&&(a=floorplan_div_Array[cvjs_active_floorplan_div_nr]);var b=jQuery("#cvjs_backgroundSetColorOpacity").val();jQuery(this).is(":checked")?(jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",
!1),jQuery("#"+a).css("background-color",cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr]),jQuery("#"+a).css("opacity",b)):jQuery("#"+a).css("opacity",1)});jQuery("#cvjs_backgroundSetColorOpacity").change(function(){var a=d;cvjs_leafletJS&&(a=floorplan_div_Array[cvjs_active_floorplan_div_nr]);var b=jQuery("#cvjs_backgroundSetColorOpacity").val();jQuery("#cvjs_backgroundcolor_checkbox2").is(":checked")&&jQuery("#"+a).css("opacity",b)});jQuery("#cvjs_modals_"+d).append('<div id="genericColorModal_'+
d+'"><table><tr><td><div id="genericColorModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><b id="cvjs_textSearchHeader">Select Color</b><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_generic_col_model"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas>Select Color:<canvas id="dummy" width="30" height="10"></canvas><input id="radioColor1_generic" type="radio" name="radioColor" value="1" checked="checked"><img id="cvjs_radioColor1_img_generic" src="'+
cvjs_imagesLocation+'blue_color.png" border="1"/><label id="cvjs_radio1_generic" for="radio1">Blue</label><canvas id="dummy" width="26" height="10"></canvas><input id="radioColor2_generic" type="radio" name="radioColor" value="2"><img id="cvjs_radioColor2_img_generic" src="'+cvjs_imagesLocation+'red_color.png" border="1"/><label id="cvjs_radio2_generic" for="radio2">Red</label><canvas id="dummy" width="60" height="10"></canvas><input id="cvjs_genericcolor_button" type="button" name="bPrint" value="OK" onClick="cvjs_setGenericColorViaButton();"><canvas id="dummy" width="10" height="10"></td></tr><tr><td><canvas id="dummy" width="121" height="10"></canvas><input id="radioColor3_generic" type="radio" name="radioColor" value="3"><img id="cvjs_radioColor3_img_generic" src="'+
cvjs_imagesLocation+'orange_color.png" border="1"/><label id="cvjs_radio3_generic" for="radio3">Orange</label><canvas id="dummy" width="10" height="10"></canvas><input id="radioColor4_generic" type="radio" name="radioColor" value="4"><img id="cvjs_radioColor4_img_generic" src="'+cvjs_imagesLocation+'yellow_color.png" border="1"/><label id="cvjs_radio4_generic" for="radio4">Yellow</label></td></tr><tr><td><canvas id="dummy" width="121" height="10"></canvas><input id="radioColor5_generic" type="radio" name="radioColor" value="5"><img id="cvjs_radioColor5_img_generic" src="'+
cvjs_imagesLocation+'green_color.png" border="1"/><label id="cvjs_radio5_generic" for="radio5">Green</label><canvas id="dummy" width="17" height="10"></canvas><input id="radioColor6_generic" type="radio" name="radioColor" value="6"><img id="cvjs_radioColor6_img_generic" src="'+cvjs_imagesLocation+'purple_color.png" border="1"/><label id="cvjs_radio6_generic" for="radio6">Purple</label></td></tr><tr><td><canvas id="dummy" width="121" height="10"></canvas><input id="radioColor7_generic" type="radio" name="radioColor" value="7"><img id="cvjs_radioColor7_img_generic" src="'+
cvjs_imagesLocation+'gray_color.png" border="1"/><label id="cvjs_radio7_generic" for="radio7">Gray</label><canvas id="dummy" width="24" height="10"></canvas><input id="radioColor8_generic" type="radio" name="radioColor" value="8"><img id="cvjs_radioColor8_img_generic" src="'+cvjs_imagesLocation+'brown_color.png" border="1"/><label id="cvjs_radio8_generic" for="radio8">Brown</label> </td></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas></td></tr></table></div>');jQuery("#cvjs_generic_col_model").on("click",
function(){jQuery("#genericColorModal").hide()});cvjs_lineThicknessModal_content='<table class="linethicknessModalanguageTable"><tr><td><div class="linethicknessModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_lineThicknessHeader">'+languageTable.languages[cvjs_currentLanguage].LineThicknessModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_line_thickness_modal_hide_'+
d+'"></div></td></tr><tr><td><canvas id="dummy" width="20" height="5"></canvas><div id="lineThicknessText">'+languageTable.languages[cvjs_currentLanguage].LineThicknessModal.LineThickness+'</div><canvas id="dummy" width="20" height="5"></canvas><input value="1.00" id="lineThickness_'+d+'" class="cvjs_inputLineweightModal"></td><td><div class="lineThickness" id="lineThickness_'+d+'"></td></tr><tr><td><canvas id="dummy" width="50" height="5"></canvas><div class="cvjs_slider2" id="cvjs_slider2_'+d+'"><canvas id="dummy" width="50" height="5"></canvas></td></tr></table>';
jQuery("#cvjs_modals_"+d).append('<div class="linethicknessModal" id="linethicknessModal_'+d+'"></div>');jQuery("#linethicknessModal_"+d).html(cvjs_lineThicknessModal_content);jQuery("#cvjs_line_thickness_modal_hide_"+d).on("click",function(){cvjs_line_thickness_modal_hide(d)});c='<select id="cvjs_settingsSelectLanguage">';for(e=0;e<languageTable.numberOfLanguages;e++)c=e==cvjs_currentLanguage?c+('<option value="'+(e+1)+'" selected>'+languageTable.languages[e].thisLanguage+"</option>"):c+('<option value="'+
(e+1)+'">'+languageTable.languages[e].thisLanguage+"</option>");var f='<canvas id="dummy" width="10" height="33"></canvas><font id="cvjs_ax2020_paramtext">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.ConversionFixed+"</font><br>",l=languageTable.languages[cvjs_currentLanguage].SettingsModal.TotalParameters;e="";var m=!1;for(b=0;b<l;b++){m=!1;for(e=0;e<rest_nname[cvjs_active_floorplan_div_nr].length;e++)rest_nname[cvjs_active_floorplan_div_nr][e]==languageTable.languages[cvjs_currentLanguage].SettingsModal.ParamNames.ParamName[b]&&
(m=!0);m||(e=rest_nname[cvjs_active_floorplan_div_nr].length,rest_nname[cvjs_active_floorplan_div_nr][e]=languageTable.languages[cvjs_currentLanguage].SettingsModal.ParamNames.ParamName[b],rest_vvalue[cvjs_active_floorplan_div_nr][e]=languageTable.languages[cvjs_currentLanguage].SettingsModal.ParamValues.ParamValue[b])}for(b=0;b<rest_nname[cvjs_active_floorplan_div_nr].length;b++)f+='<div id="settings_param_lines_input"><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_param'+(b+1)+
'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Param+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="'+rest_nname[cvjs_active_floorplan_div_nr][b]+'" id="cvjs_param_list_name'+(b+1)+'" class="cvjs_inputSettingsModal"><canvas id="dummy" width="30" height="23"></canvas><font id="cvjs_param_value'+(b+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Value+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="'+rest_vvalue[cvjs_active_floorplan_div_nr][b]+
'" id="cvjs_param_list_value'+(b+1)+'" class="cvjs_inputSettingsModal"><br>';for(b=rest_nname[cvjs_active_floorplan_div_nr].length;8>b;b++)f+='<div id="settings_param_lines_input"><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_param'+(b+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Param+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="" id="cvjs_param_list_name'+(b+1)+'" class="cvjs_inputSettingsModal"><canvas id="dummy" width="30" height="23"></canvas><font id="cvjs_param_value'+
(b+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Value+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="" id="cvjs_param_list_value'+(b+1)+'" class="cvjs_inputSettingsModal"><br>';cvjs_settingsModal_content='<table class="settingsModalTable"><tr><td><div class="settingsModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_settingsModalHeader">'+
languageTable.languages[cvjs_currentLanguage].SettingsModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exitSettingsModal_top"></div></td></tr><tr><td><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_settings_language">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.OnlineLanguage+'</font><canvas id="dummy" width="10" height="10"></canvas>'+(c+"</select>")+"</td></tr><tr><td>"+(f+"</div>")+'<canvas id="dummy" width="116" height="10"></canvas><input id="cvjs_settings_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].SettingsModal.OK+'" ><div id="cvjs_settingsModalText"><canvas id="dummy" width="0" height="17"></canvas><font id="cvjs_settings_modal_text">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Text+"</font></div></td></tr></table>";jQuery("#cvjs_modals_"+d).append('<div class="settingsModal" id="settingsModal_'+d+'"></div>');jQuery("#settingsModal_"+d).html(cvjs_settingsModal_content);jQuery("#cvjs_exitSettingsModal_top").on("click",function(){cvjs_exitSettingsModal(d,
1)});jQuery("#cvjs_settings_button_icon").on("click",function(){cvjs_exitSettingsModal(d,2)});jQuery(function(){jQuery("#settingsModal_"+d).draggable()});jQuery("#settingsModal_"+d).hide();jQuery("#genericColorModal_"+d).hide();jQuery(function(){jQuery("#genericColorModal_"+d).draggable()});jQuery("#backgroundModal_"+d).hide();jQuery(function(){jQuery("#backgroundModal_"+d).draggable()});jQuery("#colorModal_"+d).hide();jQuery(function(){jQuery("#colorModal_"+d).draggable()});jQuery("#creationModeModal_"+
d).hide();jQuery(function(){jQuery("#creationModeModal_"+d).draggable({containment:[jQuery("#"+d).position().left-cvjs_containmentModalLeft,jQuery("#"+d).position().top-cvjs_containmentModalTop,jQuery("#"+d).position().left+jQuery("#"+d).width()-jQuery("#ellipseModal_"+d).width()+cvjs_containmentModalRight,jQuery("#"+d).position().top+jQuery("#"+d).height()-jQuery("#ellipseModal_"+d).height()+cvjs_containmentModalBottom]})});jQuery("#publishPDFModal_"+d).hide();jQuery(function(){jQuery("#publishPDFModal_"+
d).draggable()});jQuery("#documentPageChangeModal_"+d).hide();jQuery(function(){jQuery("#documentPageChangeModal_"+d).draggable({containment:[jQuery("#"+d).position().left-cvjs_containmentModalLeft,jQuery("#"+d).position().top-cvjs_containmentModalTop,jQuery("#"+d).position().left+jQuery("#"+d).width()-jQuery("#documentPageChangeModal_"+d).width()+cvjs_containmentModalRight,jQuery("#"+d).position().top+jQuery("#"+d).height()-jQuery("#documentPageChangeModal_"+d).height()+cvjs_containmentModalBottom]})});
jQuery("#printModal_"+d).hide();jQuery(function(){jQuery("#printModal_"+d).draggable()});jQuery(function(){jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+d).draggable()});jQuery("#cvjs_floorPlanMagnifyingGlassEncapsulate_"+d).hide();jQuery(function(){jQuery("#pagechangeList_"+d).draggable()});jQuery("#pagechangeList"+d).css("position","absolute");jQuery("#pagechangelist_id_"+d).mouseover(function(){jQuery("#pagechangelist_"+d).draggable({disabled:!0})});jQuery("#pagechangelist_id_"+d).mouseout(function(){jQuery("#pagechangelist_"+
d).draggable({disabled:!1})});jQuery("#pagechangeList_"+d).hide();jQuery("#exit_pagechangelist").mouseover(function(){jQuery("#exit_pagechangelist").css("filter","alpha(opacity=70)");jQuery("#exit_pagechangelist").css("opacity","0.7")});jQuery("#exit_pagechangelist").mouseout(function(){jQuery("#exit_pagechangelist").css("filter","alpha(opacity=100)");jQuery("#exit_pagechangelist").css("opacity","1.0")});jQuery(function(){jQuery("#layerList_"+d).draggable()});jQuery("#layerList_"+d).css("position",
"absolute");jQuery("#layerlist_id_"+d).mouseover(function(){jQuery("#layerList_"+d).draggable({disabled:!0})});jQuery("#layerlist_id_"+d).mouseout(function(){jQuery("#layerList_"+d).draggable({disabled:!1})});jQuery("#layerList_"+d).hide();jQuery("#exit_layerlist").mouseover(function(){jQuery("#exit_layerlist").css("filter","alpha(opacity=70)");jQuery("#exit_layerlist").css("opacity","0.7")});jQuery("#exit_layerlist").mouseout(function(){jQuery("#exit_layerlist").css("filter","alpha(opacity=100)");
jQuery("#exit_layerlist").css("opacity","1.0")});jQuery("#cvjs_wait_looper_"+d).hide();jQuery(function(){jQuery("#gMenu_"+d).draggable()});jQuery(function(){jQuery("#calibrateModal_"+d).draggable()});jQuery("#calibrateModal_"+d).hide();jQuery(function(){jQuery("#measurementModal_"+d).draggable()});jQuery("#measurementModal_"+d).hide();jQuery(function(){jQuery("#textsearchModal_"+d).draggable({containment:[jQuery("#"+d).position().left-cvjs_containmentModalLeft,jQuery("#"+d).position().top-cvjs_containmentModalTop,
jQuery("#"+d).position().left+jQuery("#"+d).width()-jQuery("#textsearchModal_"+d).width()+cvjs_containmentModalRight,jQuery("#"+d).position().top+jQuery("#"+d).height()-jQuery("#textsearchModal_"+d).height()+cvjs_containmentModalBottom]})});jQuery("#textsearchModal_"+d).hide();jQuery(function(){jQuery("#spaceobjectsInitSettingsModal_"+d).draggable()});jQuery("#spaceobjectsInitSettingsModal_"+d).hide();jQuery(function(){jQuery("#spaceobjectsChangeSettingsModal_"+d).draggable()});jQuery("#spaceobjectsChangeSettingsModal_"+
d).hide();jQuery(function(){jQuery("#linethicknessModal_"+d).draggable()});jQuery("#linethicknessModal_"+d).hide();cvjs_modalsInitialized_FileLoadModal||(jQuery(function(){jQuery("#cvjs_serverFileLoadModal").draggable()}),jQuery("#cvjs_serverFileLoadModal").hide(),jQuery("#cvjs_serverFileLoadModal_table").hide());cvjs_modalsInitialized_FileLoadModal||(cvjs_modalsInitialized_FileLoadModal=!0);jQuery(function(){jQuery("#delete_form_"+d).draggable()});jQuery(function(){jQuery("#clear_form_"+d).draggable()});
jQuery(function(){jQuery("#unlink_form_"+d).draggable()});jQuery(function(){jQuery("#info_messageModal_2_"+d).draggable()});jQuery("#info_messageModal_2_"+d).hide();jQuery("#info_messageModal_"+d).hide();cvjs_iconInterfaceDisabled[cvjs_interfaceCounterIndex(d)]?cvjs_iconInterfaceClassicSkin[cvjs_interfaceCounterIndex(d)]&&(cvjs_iconInterfaceClassicSkin_MinimumDisk[cvjs_interfaceCounterIndex(d)]?(jQuery("#gMenu_"+d).html('<div class="cvjs_controls_min" ><li style="list-style-type:none;" id="zoom-extents_'+
d+'"><i class="fa fa-arrows-alt"></i></li><li style="list-style-type:none" id="zoom-in_'+d+'"><i class="fa fa-plus"></i></li><li style="list-style-type:none" id="zoom-out_'+d+'"><i class="fa fa-minus"></i></li><li style="list-style-type:none" id="zoom-window_'+d+'"><i class="fa fa-search-plus"></i></li></div>'),jQuery("#zoom-in_"+d).on("click",function(){cvjs_zoomIn(d)}),jQuery("#zoom-out_"+d).on("click",function(){cvjs_zoomOut(d)}),jQuery("#zoom-extents_"+d).on("click",function(){cvjs_resetZoomPan(d)}),
jQuery("#zoom-window_"+d).on("click",function(){cvjs_zoomWindow(d)}),jQuery("#zoom-in_"+d).on("mouseover",function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(p){}cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(d);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.ZoomIn);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#gMenu_"+d).position().left+
42).css("top",jQuery("#gMenu_"+d).position().top+66)}),jQuery("#zoom-in_"+d).on("mouseout",function(){tip[cvjs_active_floorplan_div_nr].hide()}),jQuery("#zoom-out_"+d).on("mouseover",function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(p){}cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(d);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.ZoomOut);tip[cvjs_active_floorplan_div_nr].show();
tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#gMenu_"+d).position().left+42).css("top",jQuery("#gMenu_"+d).position().top+96)}),jQuery("#zoom-out_"+d).on("mouseout",function(){tip[cvjs_active_floorplan_div_nr].hide()}),jQuery("#zoom-extents_"+d).on("mouseover",function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(p){}cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(d);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.ZoomExtents);
tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#gMenu_"+d).position().left+42).css("top",jQuery("#gMenu_"+d).position().top+35)}),jQuery("#zoom-extents_"+d).on("mouseout",function(){tip[cvjs_active_floorplan_div_nr].hide()}),jQuery("#zoom-window_"+d).on("mouseover",function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(p){}cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(d);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.ZoomWindow);
tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#gMenu_"+d).position().left+42).css("top",jQuery("#gMenu_"+d).position().top+127)}),jQuery("#zoom-window_"+d).on("mouseout",function(){tip[cvjs_active_floorplan_div_nr].hide()})):cvjs_iconInterfaceClassicSkin_PanZoomDisk[cvjs_interfaceCounterIndex(d)]?jQuery("#gMenu_"+d).html('<img src="'+cvjs_imagesLocation+'PanZoomWindowFullPages7t.png" usemap="#PanZoomMap" border="0" height="363" width="78" class="map" hidefocus="true">'):
isSmartPhoneOrTablet||cvjs_iconInterfaceClassicSkinDeviceSize[cvjs_interfaceCounterIndex(d)]?jQuery("#gMenu_"+d).html('<img src="'+cvjs_imagesLocation+'ZoomExtentsDevice.png" usemap="#ZoomExtentsDeviceMapClassic" border="0" height="176" width="79" class="map" hidefocus="true">'):jQuery("#gMenu_"+d).html('<img src="'+cvjs_imagesLocation+'PanZoomFull.png" usemap="#PanZoomMapClassic" border="0" height="267" width="79" class="map" hidefocus="true">')):isSmartPhoneOrTablet?jQuery("#gMenu_"+d).html('<img src="'+
cvjs_imagesLocation+'PanZoomWindowFullPages7t.png" usemap="#PanZoomMap" border="0" height="363" width="78" class="map" hidefocus="true">'):pageChangeInterface[cvjs_interfaceCounterIndex(d)]?cvjs_version_3_2_modal?jQuery("#gMenu_"+d).html('<img src="'+cvjs_imagesLocation+'cvjsToolbar_dra_p1_8.png" style="margin-left: 10px; margin-top: 10px;" usemap="#cvjsToolbarMap_p1_8_'+d+'" border="0" height="276" width="62" class="map" hidefocus="true">'):jQuery("#gMenu_"+d).html('<img src="'+cvjs_imagesLocation+
'cvjsToolbar_dra_p1_3.png" style="margin-left: 10px; margin-top: 10px;" usemap="#cvjsToolbarMap_p1_3" border="0" height="276" width="62" class="map" hidefocus="true">'):pageChangeInterfaceFalse_noIconNavigation[cvjs_interfaceCounterIndex(d)]?jQuery("#gMenu_"+d).html('<img src="'+cvjs_imagesLocation+'cvjsToolbar_dra_p1_8.png" style="margin-left: 10px; margin-top: 10px;" usemap="#cvjsToolbarMap_p1_8_'+d+'" border="0" height="276" width="62" class="map" hidefocus="true">'):jQuery("#gMenu_"+d).html('<img src="'+
cvjs_imagesLocation+'cvjsToolbar_dra_p1_2.png" style="margin-left: 10px; margin-top: 10px;" usemap="#cvjsToolbarMap_p1" border="0" height="303" width="62" class="map" hidefocus="true">');cvjs_Community_Version||cvjs_initializeAllFileSelectorDivs(d);jQuery(function(){jQuery("#cvjs_slider2_"+d).slider({value:lineSliderStartValue,min:1,max:500,step:15,slide:function(a,b){jQuery("#lineThickness_"+d).val((b.value/100*lineSliderValue).toFixed(2));cvjs_MinWidthSVG=b.value/100*lineSliderValue;cvjs_MinWidthSVGZWfactor=
b.value/100;jQuery(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray_nZW[a]*cvjs_MinWidthSVGZWfactor)});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray[a]*cvjs_MinWidthSVGZWfactor)});jQuery("#cv_styles").html(cvjs_cvStyles_part1+cvjs_MinWidthSVGZWfactor*cvjs_MinWidthSVGZW+cvjs_cvStyles_part2)}});jQuery("#lineThickness_"+d).val((jQuery("#cvjs_slider2_"+d).slider("value")/100*lineSliderValue).toFixed(2))});
jQuery("#lineThickness_"+d).change(function(){cvjs_MinWidthSVG=jQuery("#lineThickness_"+d).val();cvjs_MinWidthSVGZWfactor=jQuery("#lineThickness_"+d).val();jQuery(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray_nZW[a]*cvjs_MinWidthSVGZWfactor)});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray[a]*cvjs_MinWidthSVGZWfactor)});jQuery("#cv_styles").html(cvjs_cvStyles_part1+cvjs_MinWidthSVGZWfactor*
cvjs_MinWidthSVGZW+cvjs_cvStyles_part2);5<cvjs_MinWidthSVG?jQuery("#cvjs_slider2_"+d).slider("value",500):.01>cvjs_MinWidthSVG?jQuery("#cvjs_slider2_"+d).slider("value",1):jQuery("#cvjs_slider2_"+d).slider("value",100*cvjs_MinWidthSVG)});jQuery("#sortable").sortable({disabled:!1});jQuery(function(){jQuery("#floatNavigationMenu_"+d).draggable()});jQuery("#floatNavigationMenu_"+d).hide();jQuery("#cvjs_zoomextents_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=
jQuery(this).attr("id").substring(17);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.ZoomExtents);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left-30).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_zoomextents_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});
jQuery("#cvjs_zoomwindow_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(16);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.ZoomWindow);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left).css("top",
jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_zoomwindow_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_rotateback_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(16);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.RotateBack);
tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+30).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_rotateback_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_rotateforward_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(19);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});
tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.RotateBack);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+60).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_rotateforward_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_fastback_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=
jQuery(this).attr("id").substring(14);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.First);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+90).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_fastback_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});
jQuery("#cvjs_back_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(10);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.Previous);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+120).css("top",
jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_back_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_enterpagenumber_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(21);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.EnterPage);
tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+160).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_enterpagenumber_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_selectpagefromlist_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(24);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);
tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.SelectPageFromList);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+240).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_selectpagefromlist_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_selectpagefromlist_"+
d).mousedown(function(){cvjs_PageChangeList(d)});jQuery("#cvjs_forward_"+d).mouseover(function(){cvjs_debug&&console.log(cvjs_active_floorplan_div_nr+"  "+jQuery(this).attr("id"));try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(13);console.log(a);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.Next);
tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+290).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_forward_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});jQuery("#cvjs_fastforward_"+d).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(n){}var a=jQuery(this).attr("id").substring(17);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});
tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].PageModal.Last);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#floatNavigationMenu_"+d).position().left+305).css("top",jQuery("#floatNavigationMenu_"+d).position().top+33)});jQuery("#cvjs_fastforward_"+d).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide()});cvjs_initialize_allColorCheckboxes(d);e="url("+cvjs_imagesLocation+"pageChange_08.png)";jQuery(".changePagebox1").css("background-image",
e);e="url("+cvjs_imagesLocation+"compareDrawingName_11B.png)";jQuery(".compareDrawingbox1").css("background-image",e);e="url("+cvjs_imagesLocation+"cvjsToolbar_dra_pageChange_11B.png)";jQuery(".changePagebox_topBar").css("background-image",e);jQuery("#"+a).append('<div id="cvjs_qrcode_'+d+'" style="width:200px; height:200px; margin-top:15px;"></div>');jQuery("#cvjs_qrcode_"+d).hide();cvjs_modalsInitialized=!0},error:function(a){console.log("Error "+a)}})}
var cvjs_makePDFEntireDoc=!1,radioButton_publishAsPDF=1,radioButton_mergeAsDXF=1;
function cvjs_initialize_allColorCheckboxes(a){try{jQuery("#radioMergeAsDXF1_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),radioButton_mergeAsDXF=1,0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_customPdfFolderFlag?(console.log("show entire document button"),jQuery("#mergeDXFModal_row2_"+a).show(),jQuery("#mergeDXFModal_row3_"+a).hide()):(console.log("hide button"),jQuery("#mergeDXFModal_row2_"+a).hide(),jQuery("#mergeDXFModal_row3_"+
a).show()),jQuery("#mergeDXFModal_row4_"+a).hide())}),jQuery("#radioMergeAsDXF2_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),radioButton_mergeAsDXF=2,cvjs_mailServerSetup?(jQuery("#mergeDXFModal_row2_"+a).hide(),jQuery("#mergeDXFModal_row3_"+a).hide(),jQuery("#mergeDXFModal_row4_"+a).show()):window.alert("Please set up e-mail server."))}),jQuery("#radioMergeAsDXF3_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),radioButton_mergeAsDXF=3,0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&
cvjs_customPdfFolderFlag?(console.log("show entire document button"),jQuery("#mergeDXFModal_row2_"+a).show(),jQuery("#mergeDXFModal_row3_"+a).hide()):(console.log("hide button"),jQuery("#mergeDXFModal_row2_"+a).hide(),jQuery("#mergeDXFModal_row3_"+a).show()),jQuery("#mergeDXFModal_row4_"+a).hide())}),jQuery("#radioPublishAsPDF1_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),radioButton_publishAsPDF=1,0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&
cvjs_customPdfFolderFlag?(console.log("show entire document button"),jQuery("#publishPDFModal_row2_"+a).show(),jQuery("#publishPDFModal_row3_"+a).hide()):(console.log("hide button"),jQuery("#publishPDFModal_row2_"+a).hide(),jQuery("#publishPDFModal_row3_"+a).show()),jQuery("#publishPDFModal_row4_"+a).hide())}),jQuery("#radioPublishAsPDF2_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),radioButton_publishAsPDF=2,cvjs_mailServerSetup?(jQuery("#publishPDFModal_row2_"+a).hide(),
jQuery("#publishPDFModal_row3_"+a).hide(),jQuery("#publishPDFModal_row4_"+a).show()):window.alert("Please set up e-mail server."))}),jQuery("#radioPublishAsPDF3_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),radioButton_publishAsPDF=3,0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_customPdfFolderFlag?(console.log("show entire document button"),jQuery("#publishPDFModal_row2_"+a).show(),jQuery("#publishPDFModal_row3_"+a).hide()):(console.log("hide button"),
jQuery("#publishPDFModal_row2_"+a).hide(),jQuery("#publishPDFModal_row3_"+a).show()),jQuery("#publishPDFModal_row4_"+a).hide())}),jQuery("#radioEllipse1_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_ellipseRedlineType=1)}),jQuery("#radioEllipse2_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_ellipseRedlineType=2)}),jQuery("#radioCreation1_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_creationInputType=1)}),
jQuery("#radioCreation2_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_creationInputType=2)}),jQuery("#radioColor1_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#0000FF",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#0000FF"))}),jQuery("#radioColor2_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor=
"#FF0000",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#FF0000"))}),jQuery("#radioColor3_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#ffa500",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#ffa500"))}),jQuery("#radioColor4_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#fff200",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#fff200"))}),
jQuery("#radioColor5_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#22B14C",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#22B14C"))}),jQuery("#radioColor6_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#800080",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#800080"))}),jQuery("#radioColor7_"+a).change(function(){jQuery(this).is(":checked")&&
(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#808080",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#808080"))}),jQuery("#radioColor8_"+a).change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_currentRedline_color=cvjs_genericPickedColor="#B97A57",document.getElementById("cvjs_colorPickerValue").jscolor.fromString("#B97A57"))}),jQuery("#radioColor1_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();
cvjs_genericPickedColor="#FFFFFF";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#FFFFFF")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#FFFFFF",floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1)}}),jQuery("#radioColor2_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();cvjs_genericPickedColor="#000000";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#000000")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#000000",
floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1)}}),jQuery("#radioColor3_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();cvjs_genericPickedColor="#F0FFFF";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#F0FFFF")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#F0FFFF",floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",
!1)}}),jQuery("#radioColor4_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();cvjs_genericPickedColor="#FFC0CB";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#FFC0CB")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#FFC0CB",floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1)}}),jQuery("#radioColor5_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();
cvjs_genericPickedColor="#FFFAFA";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#FFFAFA")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#FFFAFA",floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1)}}),jQuery("#radioColor6_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();cvjs_genericPickedColor="#C0C0C0";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#C0C0C0")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#C0C0C0",
floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1)}}),jQuery("#radioColor7_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();cvjs_genericPickedColor="#808080";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#808080")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#808080",floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",
!1)}}),jQuery("#radioColor8_background_"+a).change(function(){if(jQuery(this).is(":checked")){jQuery(this).val();cvjs_genericPickedColor="#B97A57";try{document.getElementById("cvjs_backgroundPickerValue").jscolor.fromString("#B97A57")}catch(b){console.log(b)}cvjs_setBackgroundColorHex("#B97A57",floorplan_div_Array[cvjs_active_floorplan_div_nr]);jQuery("#cvjs_backgroundcolor_checkbox1").prop("checked",!1)}}),jQuery("#radioColor1_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),
cvjs_genericPickedColor="#0000FF")}),jQuery("#radioColor2_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_genericPickedColor="#FF0000")}),jQuery("#radioColor3_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_genericPickedColor="#ffa500")}),jQuery("#radioColor4_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_genericPickedColor="#ffff00")}),jQuery("#radioColor5_generic").change(function(){jQuery(this).is(":checked")&&
(jQuery(this).val(),cvjs_genericPickedColor="#22B14C")}),jQuery("#radioColor6_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_genericPickedColor="#800080")}),jQuery("#radioColor7_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_genericPickedColor="#808080")}),jQuery("#radioColor8_generic").change(function(){jQuery(this).is(":checked")&&(jQuery(this).val(),cvjs_genericPickedColor="#B97A57")}),jQuery("#cvjs_calibrate_checkbox2").change(function(){jQuery(this).is(":checked")?
(cvjs_calibrateScale=!0,jQuery("#cvjs_calibrate_checkbox3").prop("checked",!1),jQuery("#cvjs_calibrate_checkbox").prop("checked",!1),jQuery("#cvjs_calibrate_modal_text2").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.TextScale),jQuery("#cvjs_calibrate_modal_text").html("")):jQuery("#cvjs_calibrate_modal_text2").html("")}),jQuery("#cvjs_calibrate_checkbox3").change(function(){jQuery(this).is(":checked")?(cvjs_calibrateScale=!1,jQuery("#cvjs_calibrate_checkbox").prop("checked",!1),
jQuery("#cvjs_calibrate_checkbox2").prop("checked",!1),cvjs_calibrateSelectObject=alloff=!1,cvjs_clearAllHighlightHandleObjectStyles(),tRubberBand_poly_redline1.attr({path:"M0,0"}),calibrate_Triangle.attr({fill:measurement_color,transform:"S0.0"}),calibrate_Triangle2.attr({fill:measurement_color,transform:"S0.0"}),cvjs_removeHandleFunc_CalibrateMeasurementPolyline(),cvjs_calibrateMeasurement_RedlinePolyline(),jQuery("#cvjs_calibrate_modal_text").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Text),
jQuery("#cvjs_calibrate_modal_text2").html("")):jQuery("#cvjs_calibrate_modal_text").html("")}),jQuery("#cvjs_calibrate_checkbox").change(function(){jQuery(this).is(":checked")?(cvjs_calibrateScale=!1,jQuery("#cvjs_calibrate_checkbox2").prop("checked",!1),jQuery("#cvjs_calibrate_checkbox3").prop("checked",!1),alloff=!1,cvjs_calibrateSelectObject=!0,draw_poly_redline1=!1,cvjs_calibrate_end=first_point_poly_redline1=!0,cvjs_clearAllHighlightHandleObjectStyles(),jQuery("#cvjs_calibrate_modal_text").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.TextObject),
jQuery("#cvjs_calibrate_modal_text2").html(""),tRubberBand_poly_redline1.attr({path:"M0,0"}),calibrate_Triangle.attr({fill:measurement_color,transform:"S0.0"}),calibrate_Triangle2.attr({fill:measurement_color,transform:"S0.0"}),cvjs_removeHandleFunc_CalibrateMeasurementPolyline()):jQuery("#cvjs_calibrate_modal_text").html("")}),jQuery("#cvjs_grayscale_checkbox").change(function(){cvjs_printGrayscale=jQuery(this).is(":checked")?!0:!1}),jQuery("#cvjs_printtoscale_checkbox").change(function(){cvjs_PrintToScale=
jQuery(this).is(":checked")?!0:!1}),jQuery("#cvjs_measurementOption").change(function(){if(1==jQuery(this).val()){cvjs_clearAllHighlightHandleObjectStyles();cvjs_measureArea=!1;cvjs_measurementInteractiveType=1;jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance);jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("0 "+cvjs_units[cvjs_active_floorplan_div_nr]);
jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",1);tRubberBand_poly_redline1.attr({path:"M0,0"});cvjs_removeHandleFunc_MeasurementFilledPolygon();jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.Text);jQuery("#cvjs_measurementModalText").css("top",52);jQuery("#cvjs_measurementModalText").css("left",0);jQuery("#cvjs_closearea_button").hide();tPolygon_redline1.attr({transform:"T0,0S0.01"});
tRubberBand_poly_redline1.attr({path:"M0,0"});var a="S0";measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a});measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a});tPolygon_redline1.remove();measurement_Triangle.remove();measurement_Triangle2.remove();cvjs_Measurement_RedlinePolyline()}2==jQuery(this).val()&&(cvjs_clearAllHighlightHandleObjectStyles(),cvjs_measureArea=!0,cvjs_measurementInteractiveType=2,jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area),
jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("0 "+cvjs_units[cvjs_active_floorplan_div_nr]+"\u00b2"),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",1),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.TextArea),jQuery("#cvjs_measurementModalText").css("top",52),jQuery("#cvjs_measurementModalText").css("left",
0),jQuery("#cvjs_closearea_button").show(),cvjs_removeHandleFunc_MeasurementPolyline(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_addHandleFunc_MeasurementFilledPolygon());3==jQuery(this).val()&&(cvjs_clearAllHighlightHandleObjectStyles(),
cvjs_measureArea=!1,cvjs_measurementInteractiveType=3,jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Point),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("(0,0)"),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",1),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),
cvjs_removeHandleFunc_MeasurementPolyline(),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.PointText),jQuery("#cvjs_measurementModalText").css("top",52),jQuery("#cvjs_measurementModalText").css("left",0),jQuery("#cvjs_closearea_button").hide(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,
transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_Measurement_RedlinePolyline());4==jQuery(this).val()&&(cvjs_clearAllHighlightHandleObjectStyles(),cvjs_measurementInteractiveType=4,cvjs_measureArea=!1,jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Point),jQuery("#cvjs_measurementBox_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("(0,0)"),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",1),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),cvjs_removeHandleFunc_MeasurementPolyline(),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.PointText),jQuery("#cvjs_measurementModalText").css("top",
52),jQuery("#cvjs_measurementModalText").css("left",0),jQuery("#cvjs_closearea_button").hide(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_Measurement_RedlinePolyline());5==jQuery(this).val()&&(cvjs_clearAllHighlightHandleObjectStyles(),
cvjs_measurementInteractiveType=5,cvjs_measureArea=!1,jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Points),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("(0,0)"),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",2),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),
cvjs_removeHandleFunc_MeasurementPolyline(),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.PointsText),jQuery("#cvjs_measurementModalText").css("top",76),jQuery("#cvjs_measurementModalText").css("left",226),jQuery("#cvjs_closearea_button").hide(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,
transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_Measurement_RedlinePolyline());6==jQuery(this).val()&&(cvjs_clearAllHighlightHandleObjectStyles(),cvjs_measurementInteractiveType=6,cvjs_measureArea=!1,jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Points),jQuery("#cvjs_measurementBox_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("(0,0)"),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",2),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),cvjs_removeHandleFunc_MeasurementPolyline(),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.PointsText),jQuery("#cvjs_measurementModalText").css("top",
76),jQuery("#cvjs_measurementModalText").css("left",226),jQuery("#cvjs_closearea_button").hide(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_Measurement_RedlinePolyline());7==jQuery(this).val()&&(cvjs_clearAllHighlightHandleObjectStyles(),
cvjs_measurementInteractiveType=7,cvjs_measureArea=!1,jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Points),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("M0,0"),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",2),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),
cvjs_removeHandleFunc_MeasurementPolyline(),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.PointsText),jQuery("#cvjs_measurementModalText").css("top",76),jQuery("#cvjs_measurementModalText").css("left",226),jQuery("#cvjs_closearea_button").hide(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,
transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),measurement_Triangle2.remove(),cvjs_Measurement_RedlinePolyline());8==jQuery(this).val()&&(cvjs_measureArea=!1,cvjs_measurementInteractiveType=8,cvjs_clearAllHighlightHandleObjectStyles(),tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),cvjs_removeHandleFunc_MeasurementPolyline(),cvjs_measurement_active=!0,jQuery("#cvjs_measurementLength_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.PathLength),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("0 "+cvjs_units[cvjs_active_floorplan_div_nr]),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).attr("rows",1),jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.PathText),
jQuery("#cvjs_measurementModalText").css("top",52),jQuery("#cvjs_measurementModalText").css("left",0),jQuery("#cvjs_closearea_button").hide())}),jQuery("#cvjs_measurearea_checkbox").change(function(){if(jQuery(this).is(":checked")){cvjs_measureArea=!0;jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.TextArea);jQuery("#cvjs_closearea_button").show();cvjs_removeHandleFunc_MeasurementPolyline();
tPolygon_redline1.attr({transform:"T0,0S0.01"});tRubberBand_poly_redline1.attr({path:"M0,0"});var a="S0";measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a});measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a});tPolygon_redline1.remove();measurement_Triangle.remove();measurement_Triangle2.remove();cvjs_addHandleFunc_MeasurementFilledPolygon()}else cvjs_measureArea=!1,tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon(),
jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.Text),jQuery("#cvjs_closearea_button").hide(),tPolygon_redline1.attr({transform:"T0,0S0.01"}),tRubberBand_poly_redline1.attr({path:"M0,0"}),a="S0",measurement_Triangle.attr({fill:cvjs_currentRedline_color,transform:a}),measurement_Triangle2.attr({fill:cvjs_currentRedline_color,transform:a}),tPolygon_redline1.remove(),measurement_Triangle.remove(),
measurement_Triangle2.remove(),cvjs_Measurement_RedlinePolyline()}),jQuery("#cvjs_SelectVariablesTextBox").change(function(){cvjs_customPrintTextboxOnChange()}),jQuery("#cvjs_layerlist_checkbox").change(function(){cvjs_layerList_checkbox=jQuery(this).is(":checked")?!0:!1;cvjs_LayerListModalXrefOnChange(1)}),jQuery("#cvjs_SelectLayerDrawings").change(function(){cvjs_LayerListModalXrefOnChange(2)}),jQuery("#cvjs_entiredoc_checkbox").change(function(){cvjs_makePDFEntireDoc=jQuery(this).is(":checked")?
!0:!1}),jQuery("#cvjs_printpdf_checkbox").change(function(){cvjs_printPdf=jQuery(this).is(":checked")?!0:!1}),jQuery("#cvjs_custom_checkbox").change(function(){if(jQuery(this).is(":checked")){cvjs_customPrintCheckbox=!0;jQuery("#cvjs_printModalTextboxLocation").show();jQuery("#cvjs_printModalTextboxLocation_text").show();cvjs_customPrintDualTextboxMode&&(jQuery("#cvjs_printModalDualTextboxLocation").show(),jQuery("#cvjs_printModalDualTextboxLocation_text").show());var a="printModal";if(cvjs_customPrintCheckboxMode||
cvjs_customPrintTextboxMode)a="printModalTextbox";var c=jQuery("."+a).css("height");c=c.substring(0,c.indexOf("px"));c=parseInt(c)+90}else{cvjs_customPrintCheckbox=!1;jQuery("#cvjs_printModalTextboxLocation").hide();jQuery("#cvjs_printModalTextboxLocation_text").hide();cvjs_customPrintDualTextboxMode&&(jQuery("#cvjs_printModalDualTextboxLocation").hide(),jQuery("#cvjs_printModalDualTextboxLocation_text").hide());a="printModal";if(cvjs_customPrintCheckboxMode||cvjs_customPrintTextboxMode)a="printModalTextbox";
c=jQuery("."+a).css("height");c=c.substring(0,c.indexOf("px"));c=parseInt(c)-90}jQuery("."+a).css("height",c+"px")})}catch(b){console.log("cvjs_initialize_allColorCheckboxes: "+b)}}var cvjs_customPrintTextboxOnChange_pre=1;
function cvjs_customPrintTextboxOnChange(){var a=jQuery("#cvjs_SelectVariablesTextBox").val();cvjs_printModalCustomTextBoxVariablesContent[cvjs_customPrintTextboxOnChange_pre-1]=jQuery("#printmodal_text").val();jQuery("#printmodal_text").val(cvjs_printModalCustomTextBoxVariablesContent[a-1]);cvjs_customPrintTextboxOnChange_pre=a}
function cvjs_LayerListModalXrefOnChange(a){var b=jQuery("#cvjs_SelectLayerDrawings").val(),c=document.getElementById("cvjs_SelectLayerDrawings").length,d=[];null==b?d[0]="none":(b=b.toString(),d=b.split(","));if(0==d[0].indexOf("none")&&2==a)for(cvjs_layerList.clear(),a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer);else{if(d.length==c){cvjs_layerList.clear();for(var e=0;e<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;e++){var f=
"javascript:cvjs_LayerListClick("+e+","+e+")";f="#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"_layerlist_menuitem_"+e+"_"+e;cvjs_layerList_checkbox?("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_spaceObjectLayerOnOff(floorplan_div_Array[cvjs_active_floorplan_div_nr],layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName,"off"),cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,
link:f,id:e,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName})),"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_spaceObjectLayerOnOff(floorplan_div_Array[cvjs_active_floorplan_div_nr],layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName,"on"),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:e,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName}))):
("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,link:f,id:e,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName})),"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,
link:f,id:e,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName})))}2==a&&modal_all_layer_on()}else{c=b=!1;for(e=0;e<d.length;e++)0==d[e].indexOf("1")&&1==d[e].length&&(b=!0),2<=parseInt(d[e])&&(c=!0);cvjs_layerList.clear();var g=0;for(e=0;e<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;e++)if(f=layerTable[cvjs_active_floorplan_div_nr].layers[e].xRefFile,0==f.indexOf("none")&&b)f="javascript:cvjs_LayerListClick("+e+","+g+")",f="#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+
"_layerlist_menuitem_"+e+"_"+g,1==a?cvjs_layerList_checkbox?("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName})),"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),
cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName}))):("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName})),"ON"==
layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName}))):cvjs_layerList_checkbox?(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,
id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName})):(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName})),g++;else{var h=!1;if(c)for(var k=0;k<d.length;k++){var l=parseInt(d[k]);1<l&&(l=document.getElementById("cvjs_SelectLayerDrawings").options[l-1].text,console.log("first "+l+"  "+
f),l=l.substring(languageTable.languages[cvjs_currentLanguage].LayerListModal.Xref.length+1),console.log("second "+l+" "+f),0==l.indexOf(f)&&l.length==f.length&&(h=!0))}h?(f="javascript:cvjs_LayerListClick("+e+","+g+")",f="#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"_layerlist_menuitem_"+e+"_"+g,1==a?cvjs_layerList_checkbox?("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,
link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName})),"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName}))):("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),
cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName})),"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[e].status&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName}))):cvjs_layerList_checkbox?
(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerBaseName})):(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer),cvjs_layerList.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On,link:f,id:g,layer:layerTable[cvjs_active_floorplan_div_nr].layers[e].layerName})),g++):
cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[e].layer)}}jQuery('a[href^="'+("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"_layerlist_menuitem_")+'"]').on("click",function(){var a=jQuery(this).attr("href"),b=a.substring(a.lastIndexOf("_")+1),c=a.lastIndexOf("_"),d=a.lastIndexOf("_",c-1);a=a.substring(d+1,c);a=parseInt(a);b=parseInt(b);cvjs_LayerListClick(a,b)})}}
function cvjs_line_thickness_modal_hide(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#linethicknessModal_"+a).hide()}function cvjs_exit_documentpagechangemodal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#documentPageChangeModal_"+a).hide()}function cvjs_exit_redlinethicknessmodal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#thicknessModal_"+a).hide()}
function cvjs_exit_informationmodal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#info_messageModal_"+a).modal("hide")}function cvjs_exit_textsearchmodal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#textsearchModal_"+a).hide();jQuery(cvjs_textSearchPreElement).css("fill",cvjs_textSearchPreFill)}function cvjs_exit_informationmodal_2(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#info_messageModal_2_"+a).hide()}
function cvjs_exit_layerlist_spaceobjects(a){for(var b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++){var c=cvjs_layerListSpace.get("id",b)[0].values().text_room_layer;-1<c.indexOf(languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned)||(-1<c.indexOf(languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.TextLayer)?cvjs_convertTextLayer=layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName:cvjs_convertRoomLayer=layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName)}cvjs_layerListSpace.clear();
jQuery("#layerListSpaceObject_"+a).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}function cvjs_exit_layerlist(a){cvjs_layerList.clear();jQuery("#layerList_"+a).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}function cvjs_exit_pagechangelist(a){cvjs_pagechangeList.clear();jQuery("#pagechangeList_"+a).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}
function cvjs_exitLineThicknessModal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#linethicknessModal_"+a).hide()}
function cvjs_adjustMinimumLineThickness_Value(a){cvjs_debug&&console.log("cvjs_adjustMinimumLineThickness_Value:"+a);if(0<a){var b=jQuery("#cv_styles").html();try{cvjs_cvStyles_part1=b.substring(0,b.indexOf("tmsMinLineWidth:")+17);cvjs_cvStyles_part2=b.substring(b.indexOf("tmsMinLineWidth:")+17);cvjs_cvStyles_part2=cvjs_cvStyles_part2.substring(cvjs_cvStyles_part2.indexOf(";"));var c=b.substring(b.indexOf("tmsMinLineWidth:")+17);c=c.substring(0,c.indexOf(";"));cvjs_MinWidthSVGZW=parseFloat(c)}catch(f){try{var d=
document.querySelector(".ZW");var e=getComputedStyle(d).getPropertyValue("stroke-width");cvjs_MinWidthSVGZW=parseFloat(e.substring(0,e.indexOf("px")))}catch(g){console.log("cv_styles as getproperty value: "+g);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;return}}a/=cvjs_MinWidthSVGZW;cvjs_SVGLineThicknessArray_nZW=[];cvjs_SVGLineThicknessArray=[];jQuery(".nZW").each(function(a){var b=parseFloat(jQuery(this).css("stroke-width"));cvjs_SVGLineThicknessArray_nZW[a]=b});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){if(-1<
parseInt(jQuery(this).attr("id").substring(3))){var b=parseFloat(jQuery(this).css("stroke-width"));cvjs_SVGLineThicknessArray[a]=b}});cvjs_MinWidthSVGZWfactor=a;jQuery(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray_nZW[a]*cvjs_MinWidthSVGZWfactor)});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray[a]*cvjs_MinWidthSVGZWfactor)});jQuery("#cv_styles").html(cvjs_cvStyles_part1+cvjs_MinWidthSVGZWfactor*
cvjs_MinWidthSVGZW+cvjs_cvStyles_part2)}}
function cvjs_adjustMinimumLineThickness(a){a/=100;cvjs_debug&&console.log("factor ="+a+" "+cvjs_svgLineThickness);if(0<a){var b=jQuery("#cv_styles").html();try{cvjs_cvStyles_part1=b.substring(0,b.indexOf("tmsMinLineWidth:")+17);cvjs_cvStyles_part2=b.substring(b.indexOf("tmsMinLineWidth:")+17);cvjs_cvStyles_part2=cvjs_cvStyles_part2.substring(cvjs_cvStyles_part2.indexOf(";"));var c=b.substring(b.indexOf("tmsMinLineWidth:")+17);c=c.substring(0,c.indexOf(";"));cvjs_MinWidthSVGZW=parseFloat(c)}catch(f){try{var d=
document.querySelector(".ZW");var e=getComputedStyle(d).getPropertyValue("stroke-width");cvjs_MinWidthSVGZW=parseFloat(e.substring(0,e.indexOf("px")))}catch(g){console.log("cv_styles as getproperty value: "+g);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;return}}cvjs_SVGLineThicknessArray_nZW=[];cvjs_SVGLineThicknessArray=[];jQuery(".nZW").each(function(a){var b=parseFloat(jQuery(this).css("stroke-width"));cvjs_SVGLineThicknessArray_nZW[a]=b});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){if(-1<
parseInt(jQuery(this).attr("id").substring(3))){var b=parseFloat(jQuery(this).css("stroke-width"));cvjs_SVGLineThicknessArray[a]=b}});cvjs_MinWidthSVGZWfactor=a;jQuery(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray_nZW[a]*cvjs_MinWidthSVGZWfactor)});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){jQuery(this).css("stroke-width",cvjs_SVGLineThicknessArray[a]*cvjs_MinWidthSVGZWfactor)});jQuery("#cv_styles").html(cvjs_cvStyles_part1+cvjs_MinWidthSVGZWfactor*
cvjs_MinWidthSVGZW+cvjs_cvStyles_part2)}}
var linethickness_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],first_thickness=!0,reference_thickness=.3,cvjs_cvStyles_part1="",cvjs_cvStyles_part2="",lineSliderValue=.3,lineSliderValue3=1,lineSliderStartValue=100,lineSliderStartValue3=100,lineSliderMax=.5,lineSliderStep=lineSliderMax/5,cvjs_MinWidth=.6,cvjs_MinWidthSVG=1,cvjs_MinWidthSVGZW=.6,cvjs_MinWidthSVGZWfactor=1,cvjs_svgLineThickness=!1,cvjs_SVGLineThicknessArray={},cvjs_SVGLineThicknessArray_nZW=
[];
function cvjs_activateLineThicknessModal(a){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr])if(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),linethickness_offset_flag[cvjs_active_floorplan_div_nr]&&(linethickness_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#linethicknessModal_"+a).css({position:"fixed"}),jQuery("#linethicknessModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),first_thickness){first_thickness=
!1;var b=jQuery("#cv_styles").html();try{cvjs_cvStyles_part1=b.substring(0,b.indexOf("tmsMinLineWidth:")+17);cvjs_cvStyles_part2=b.substring(b.indexOf("tmsMinLineWidth:")+17);cvjs_cvStyles_part2=cvjs_cvStyles_part2.substring(cvjs_cvStyles_part2.indexOf(";"));var c=b.substring(b.indexOf("tmsMinLineWidth:")+17);c=c.substring(0,c.indexOf(";"));cvjs_MinWidthSVGZW=parseFloat(c)}catch(f){try{var d=document.querySelector(".ZW");var e=getComputedStyle(d).getPropertyValue("stroke-width");cvjs_MinWidthSVGZW=
parseFloat(e.substring(0,e.indexOf("px")))}catch(g){console.log("cv_styles as getproperty value: "+g);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;return}}cvjs_SVGLineThicknessArray_nZW=[];cvjs_SVGLineThicknessArray=[];jQuery(".nZW").each(function(a){var b=parseFloat(jQuery(this).css("stroke-width"));cvjs_SVGLineThicknessArray_nZW[a]=b});jQuery("[id^=cv_]").not(".ZW").not(".nZW").each(function(a){if(-1<parseInt(jQuery(this).attr("id").substring(3))){var b=parseFloat(jQuery(this).css("stroke-width"));
cvjs_SVGLineThicknessArray[a]=b}});cvjs_debug&&console.log("length 2 "+cvjs_SVGLineThicknessArray.length+"  "+cvjs_SVGLineThicknessArray_nZW.length);lineSliderStartValue3=lineSliderStartValue=100;try{reference_thickness=cvjs_MinWidth}catch(f){reference_thickness=cvjs_MinWidthSVG=1;cvjs_svgLineThickness=!0;try{lineSliderValue=cvjs_MinWidth}catch(g){lineSliderValue=cvjs_MinWidthSVG}jQuery("#cvjs_slider2_"+a).slider("value",lineSliderStartValue);jQuery("#lineThickness_"+a).val(lineSliderValue.toFixed(2));
jQuery("#linethicknessModal_"+a).show();return}try{if(-1==cvjs_MinWidth){reference_thickness=cvjs_MinWidthSVG=cvjs_MinWidth=reference_thickness=1;cvjs_svgLineThickness=!0;try{lineSliderValue=cvjs_MinWidth}catch(f){lineSliderValue=cvjs_MinWidthSVG}jQuery("#cvjs_slider2_"+a).slider("value",lineSliderStartValue);jQuery("#lineThickness_"+a).val(lineSliderValue.toFixed(2));jQuery("#linethicknessModal_"+a).show()}}catch(f){reference_thickness=cvjs_MinWidthSVG=1;cvjs_svgLineThickness=!0;try{lineSliderValue=
cvjs_MinWidth}catch(g){lineSliderValue=cvjs_MinWidthSVG}jQuery("#cvjs_slider2_"+a).slider("value",lineSliderStartValue);jQuery("#lineThickness_"+a).val(lineSliderValue.toFixed(2));jQuery("#linethicknessModal_"+a).show()}}else jQuery("#linethicknessModal_"+a).show()}
var cvjs_iconInterfaceDisabled=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_iconInterfaceClassicSkin=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_iconInterfaceClassicSkinDeviceSize=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_iconInterfaceClassicSkin_MinimumDisk=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],pageChangeInterfaceFalse_noIconNavigation=
[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_iconInterfaceClassicSkin_PanZoomDisk=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],pageChangeInterface=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],interfaceCounterDiv="                             ".split(" "),interfaceCounter=0;
function cvjs_interfaceCounterIndex(a){for(var b=0;b<interfaceCounterDiv.length;b++)if(-1<interfaceCounterDiv[b].indexOf(a)&&interfaceCounterDiv[b].length==a.length)return b;a+="_svg";for(b=0;b<interfaceCounterDiv.length;b++)if(-1<interfaceCounterDiv[b].indexOf(a)&&interfaceCounterDiv[b].length==a.length)return b;return 0}function cvjs_displayAllInterfaceControlsZoomDisk(a){jQuery("#gMenu_"+(a+"_svg")).show()}function cvjs_hideAllInterfaceControls(a){jQuery("#gMenu_"+(a+"_svg")).hide()}
function cvjs_setIconInterfaceControls_PageModal(a,b,c){interfaceCounter++;var d=interfaceCounter;interfaceCounterDiv[d]=c+"_svg";pageChangeInterface[d]=a;pageChangeInterfaceFalse_noIconNavigation[d]=b}function cvjs_setIconInterfaceControls_DisableIcons(a,b){interfaceCounter++;var c=interfaceCounter;interfaceCounterDiv[c]=b+"_svg";cvjs_iconInterfaceDisabled[c]=a;pageChangeInterface[c]=!1;cvjs_iconInterfaceClassicSkin[c]=!1}
function cvjs_displayAllInterfaceControls(a,b){var c=cvjs_interfaceCounterIndex(b);0<c||(interfaceCounter++,c=interfaceCounter,interfaceCounterDiv[c]=b+"_svg");cvjs_iconInterfaceDisabled[c]=!a;pageChangeInterface[c]=!1;cvjs_iconInterfaceClassicSkin[c]=!1;cvjs_loadTopIconMenuVisible[c]=a;cvjs_loadTopIconNavigationVisible[c]=a}
function cvjs_setIconInterfaceControls_ClassicSkin(a,b){interfaceCounter++;var c=interfaceCounter;interfaceCounterDiv[c]=b+"_svg";cvjs_iconInterfaceDisabled[c]=a;pageChangeInterface[c]=!1;cvjs_iconInterfaceClassicSkin[c]=a;cvjs_iconInterfaceClassicSkinDeviceSize[c]=!1}
function cvjs_setIconInterfaceControls_ClassicSkin_DevicesSizeOnly(a,b){interfaceCounter++;var c=interfaceCounter;interfaceCounterDiv[c]=b+"_svg";cvjs_iconInterfaceDisabled[c]=a;pageChangeInterface[c]=!1;cvjs_iconInterfaceClassicSkin[c]=a;cvjs_iconInterfaceClassicSkinDeviceSize[c]=a}
function cvjs_setIconInterfaceControls_MimimumDisk(a,b){var c=cvjs_interfaceCounterIndex(b);0<c||(interfaceCounter++,c=interfaceCounter,interfaceCounterDiv[c]=b+"_svg");cvjs_iconInterfaceDisabled[c]||(cvjs_iconInterfaceDisabled[c]=a,pageChangeInterface[c]=!1,cvjs_iconInterfaceClassicSkin[c]=a,cvjs_iconInterfaceClassicSkinDeviceSize[c]=!1,cvjs_iconInterfaceClassicSkin_MinimumDisk[c]=a,jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/font-awesome.css"}).appendTo("head"))}
function cvjs_setIconInterfaceControls_MimimumDisk_internal(a,b){b=cvjs_interfaceCounterIndex(b);cvjs_iconInterfaceDisabled[b]||(cvjs_iconInterfaceDisabled[b]=a,pageChangeInterface[b]=!1,cvjs_iconInterfaceClassicSkin[b]=a,cvjs_iconInterfaceClassicSkinDeviceSize[b]=!1,cvjs_iconInterfaceClassicSkin_MinimumDisk[b]=a,jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/font-awesome.css"}).appendTo("head"))}
function cvjs_setIconInterfaceControls_PanZoomDisk(a,b){interfaceCounter++;var c=interfaceCounter;interfaceCounterDiv[c]=b+"_svg";cvjs_iconInterfaceDisabled[c]=a;pageChangeInterface[c]=!1;cvjs_iconInterfaceClassicSkin[c]=a;cvjs_iconInterfaceClassicSkinDeviceSize[c]=!1;cvjs_iconInterfaceClassicSkin_MinimumDisk[c]=!1;cvjs_iconInterfaceClassicSkin_PanZoomDisk[c]=a}function cvjs_overwriteDefaultDeviceSettings(a){a&&(isSmartPhoneOrTablet=!1)}
var floorPlan_div="",cvjs_location_flag=!0,hbody="",hbody_2="",dual_hbody_flag=!1;function cvjs_initFloorPlanDivArray(a){var b=floorplan_div_Array.length;cvjs_active_floorplan_div_nr=b;floorplan_div_Array[b]=a;floorplan_div_Array_current_Drawing[b]="";cvjs_SpaceObjectsContent[b]=[]}function cvjs_InitCADViewer_highLight_popUp_dual_Id(a,b,c,d,e,f){cvjs_InitCADViewerJS_highLight_popUp_dual_Id(a,b,c,d,e,f)}
function cvjs_InitCADViewerJS_highLight_popUp_dual_Id(a,b,c,d,e,f){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",
stroke:"#a4d7f4","stroke-width":3};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';hbody_2='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';
hbody_2+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';void 0!=b&&(defaultColor=b);void 0!=c&&(highlight=c);void 0!=d&&(selectColor=d);void 0!=e&&(hbody=e);void 0!=f&&(hbody_2=f);dual_hbody_flag=!0}function cvjs_InitCADViewer_highLight_popUp_app(a,b,c,d,e,f){cvjs_InitCADViewerJS_highLight_popUp_app(a,b,c,d,e,f)}
function cvjs_InitCADViewerJS_highLight_popUp_app(a,b,c,d,e,f){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_imagesLocation=cvjs_applicationFolder+"/images/";cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/";cvjs_defaultJSPath=cvjs_applicationFolder+"/js/";void 0!=b&&(cvjs_applicationFolder=
b,cvjs_imagesLocation=cvjs_applicationFolder+"/images/",cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/",cvjs_defaultJSPath=cvjs_applicationFolder+"/js/");cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3,"stroke-linejoin":"round"};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3,"stroke-linejoin":"round"};
hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';void 0!=c&&(defaultColor=c);void 0!=d&&(highlight=d);void 0!=e&&(selectColor=e);void 0!=f&&(hbody=f);dual_hbody_flag=!1}
function cvjs_InitCADViewer_highLight_popUp(a,b,c,d,e){cvjs_InitCADViewerJS_highLight_popUp(a,b,c,d,e)}
function cvjs_InitCADViewerJS_highLight_popUp(a,b,c,d,e){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4",
"stroke-width":3,"stroke-linejoin":"round"};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3,"stroke-linejoin":"round"};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';
void 0!=b&&(defaultColor=b);void 0!=c&&(highlight=c);void 0!=d&&(selectColor=d);void 0!=e&&(hbody=e);dual_hbody_flag=!1}function cvjs_InitCADViewer_highLight(a,b,c,d){cvjs_InitCADViewerJS_highLight(a,b,c,d)}
function cvjs_InitCADViewerJS_highLight(a,b,c,d){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4",
"stroke-width":3,"stroke-linejoin":"round"};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3,"stroke-linejoin":"round"};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';
void 0!=b&&(defaultColor=b);void 0!=c&&(highlight=c);void 0!=d&&(selectColor=d);dual_hbody_flag=!1}var cvjs_applicationFolder="../app/";function cvjs_InitCADViewer_app(a,b,c){cvjs_InitCADViewerJS_app(a,b,c)}
function cvjs_InitCADViewerJS_app(a,b){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_imagesLocation=cvjs_applicationFolder+"/images/";cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/";cvjs_defaultJSPath=cvjs_applicationFolder+"/js/";void 0!=b&&(cvjs_applicationFolder=b,cvjs_imagesLocation=
cvjs_applicationFolder+"/images/",cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/",cvjs_defaultJSPath=cvjs_applicationFolder+"/js/");cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';
hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';dual_hbody_flag=!1}function cvjs_InitCADViewer_app_highLight(a,b,c,d,e){cvjs_InitCADViewerJS_app_highLight(a,b,c,d,e)}
function cvjs_InitCADViewerJS_app_highLight(a,b,c,d,e){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_imagesLocation=cvjs_applicationFolder+"/images/";cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/";cvjs_defaultJSPath=cvjs_applicationFolder+"/js/";void 0!=b&&(cvjs_applicationFolder=
b,cvjs_imagesLocation=cvjs_applicationFolder+"/images/",cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/",cvjs_defaultJSPath=cvjs_applicationFolder+"/js/");cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';
hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';dual_hbody_flag=!1;void 0!=c&&(defaultColor=c);void 0!=d&&(highlight=d);void 0!=e&&(selectColor=e)}function cvjs_InitCADViewer_app_highLight_popUp(a,b,c,d,e,f){cvjs_InitCADViewerJS_app_highLight_popUp(a,b,c,d,e,f)}
function cvjs_InitCADViewerJS_app_highLight_popUp(a,b,c,d,e,f){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);cvjs_imagesLocation=cvjs_applicationFolder+"/images/";cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/";cvjs_defaultJSPath=cvjs_applicationFolder+"/js/";void 0!=b&&(cvjs_applicationFolder=
b,cvjs_imagesLocation=cvjs_applicationFolder+"/images/",cvjs_relativeScriptsPath=cvjs_applicationFolder+"/js/",cvjs_defaultJSPath=cvjs_applicationFolder+"/js/");cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';
hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';dual_hbody_flag=!1;void 0!=c&&(defaultColor=c);void 0!=d&&(highlight=d);void 0!=e&&(selectColor=e);void 0!=f&&(hbody=f);dual_hbody_flag=!1}function cvjs_InitCADViewer(a,b,c){cvjs_InitCADViewerJS(a,b,c)}
function cvjs_InitCADViewerJS(a,b,c){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);-1==cvjs_active_floorplan_div_nr&&(cvjs_initFloorPlanDivArray(a+"_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_location_flag=!0;cvjs_Community_Version||(cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1);void 0!=b&&(cvjs_imagesLocation=b);void 0!=c&&(cvjs_defaultJSPath=cvjs_relativeScriptsPath=c);cvjs_InitializeModals(a);defaultColor={fill:"#FFF","fill-opacity":"0.1",stroke:"#CCC","stroke-width":1,"stroke-linejoin":"round"};
highlight={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3};selectColor={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3};hbody='<div class="cvjs_modal_1" onclick="my_own_clickmenu1();">Custom<br>Menu 1<br><i class="fa fa-undo"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="my_own_clickmenu2();">Custom<br>Menu 2<br><i class="fa fa-info-circle"></i></div>';hbody+='<div class="cvjs_modal_1" onclick="cvjs_zoomHere();">Zoom<br>Here<br><i class="fa fa-search-plus"></i></div>';
dual_hbody_flag=!1}var cvjs_imagesLocation="../images/",floor_loaded=!1,nodes_loaded=!1,thumbs_loaded=!1,stickynotesRedlines_loaded=!1,current_jsNodesFloorNames="",current_jsThumbFloorNames="",current_jsFullFloorNames="",current_jsFloorNames="",current_jsRedlinename="",current_js_initialized=0,current_redline_js_initialized=0,js_loaded_flag=0,current_FileNamePath="",cvjs_relativeScriptsPath="../app/js";function cvjs_setRelativeScriptsPath(a){cvjs_relativeScriptsPath=a}
var cvjs_customPdfFolderFlag=!1,cvjs_customPdfFolderName="",cvjs_customPdfFolderForcedUpdate=!1;function cvjs_setCustomPdfFolder(a,b){cvjs_customPdfFolderFlag=!0;cvjs_customPdfFolderName=a;cvjs_customPdfFolderForcedUpdate=b}function cvjs_getCurrentPage(){return cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]?cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage:multiPages[cvjs_active_floorplan_div_nr].currentPage}
function cvjs_LoadDrawingPDF_base(a){var b="",c="",d=cvjs_serverHandlersPath+cvjs_returnPDFparamsController;console.log("pdf configuration file "+d);jQuery.ajax({url:d,type:"post",data:{file:""},success:function(d){console.log("return from fUrl: "+d);var e=d;d=e.substring(0,e.indexOf("|"));e=e.substring(e.indexOf("|")+1);e=e.substring(0,e.indexOf("|"));b=d;c=e;d=b;e=c;var g=cvjs_serverHandlersPath+cvjs_serverPDFConverterController,h={};h.pdf_file=a;h.temp_dir="pdf/"+Math.floor(1E5*Math.random()+1);
h.custom_folder=0;cvjs_customPdfFolderFlag&&(h.temp_dir="pdf/custom_"+cvjs_customPdfFolderName,h.custom_folder=cvjs_customPdfFolderForcedUpdate?0:1);cvjs_debug&&console.log(h.pdf_file+" Temp folder: "+h.temp_dir);var k=h.temp_dir;d=b+k;e=c+k;cvjs_multipagePDFtoSVG_tempDir=k;var l=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf("."));h.file_name=l;cvjs_multipageURL_FileNamePath=e;cvjs_multipage_FileNamePath=d;h.request_type="pages";jQuery.ajax({url:g,type:"post",data:h,success:function(a){cvjs_debug&&
console.log("WE now have the number of pages + status: "+a);a=a.split(" ");var b=parseInt(a[0]);if(1<=b){cvjs_debug&&console.log("Creating multipage SVG page structure n.length="+b.length+" "+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName);cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].multiPages=b;cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage=1;for(var c=0;c<b;c++){var d=l+"_"+(c+1)+".svg",e="Page "+(c+1);cvjs_debug&&console.log(d+" "+e);cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[c]=
{fileName:d,pageName:e}}cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]=!0;cvjs_PDFloadFlag=!1;actualLLX[cvjs_active_floorplan_div_nr]=0;actualLLY[cvjs_active_floorplan_div_nr]=0;actualURX[cvjs_active_floorplan_div_nr]=1;actualURY[cvjs_active_floorplan_div_nr]=1;cvjs_checkSVGOnServerBeforeLoadFirst()}"0"==a[1]&&(h.request_type="svg_conversion",jQuery.ajax({url:g,type:"post",data:h,success:function(a){cvjs_debug&&console.log("NOW THE ENTIRE PDF IS CONVERTED");jQuery.ajax({url:cvjs_serverHandlersPath+
cvjs_serverPDFSplitController,type:"post",data:h,success:function(a){cvjs_debug&&console.log("We have now split the PDF")}})}}))}})}})}
function cvjs_checkSVGOnServerBeforeLoadFirst(){var a="";a=cvjs_multipagePDFtoSVG_PhpLoadFlag?0==cvjs_getFileController.indexOf("getFile_09.php")?cvjs_phpPath+"getFile_09.php?fileTag="+cvjs_multipagePDFtoSVG_tempDir+"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.substring(0,cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.indexOf(".svg"))+"&remainOnServer=1&Type=svg":cvjs_serverHandlersPath+cvjs_getFileController+"?fileTag="+cvjs_multipagePDFtoSVG_tempDir+
"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.substring(0,cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.indexOf(".svg"))+"&remainOnServer=1&Type=svg":cvjs_multipageURL_FileNamePath+"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName;jQuery.ajax({url:a,type:"HEAD",error:function(){console.log("does not exist");setTimeout(function(){cvjs_checkSVGOnServerBeforeLoadFirst()},2500)},success:function(){console.log("exist");cvjs_debug&&console.log("loading "+
cvjs_multipageURL_FileNamePath+"  /  "+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName);cvjs_multipagePDFtoSVG_PhpLoadFlag?0==cvjs_getFileController.indexOf("getFile_09.php")?cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_phpPath+"getFile_09.php?fileTag="+cvjs_multipagePDFtoSVG_tempDir+"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.substring(0,cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.indexOf(".svg"))+
"&remainOnServer=1&Type=svg",void 0,!0):cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_serverHandlersPath+cvjs_getFileController+"?fileTag="+cvjs_multipagePDFtoSVG_tempDir+"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.substring(0,cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName.indexOf(".svg"))+"&remainOnServer=1&Type=svg",void 0,!0):cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_multipageURL_FileNamePath+
"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName,void 0,!0)}})}
function cvjs_checkSVGOnServerBeforeLoad(a){var b="";b=cvjs_multipagePDFtoSVG_PhpLoadFlag?0==cvjs_getFileController.indexOf("getFile_09.php")?cvjs_phpPath+"getFile_09.php?fileTag="+cvjs_multipagePDFtoSVG_tempDir+"/"+a.substring(0,a.indexOf(".svg"))+"&remainOnServer=1&Type=svg":cvjs_serverHandlersPath+cvjs_getFileController+"?fileTag="+cvjs_multipagePDFtoSVG_tempDir+"/"+a.substring(0,a.indexOf(".svg"))+"&remainOnServer=1&Type=svg":cvjs_multipageURL_FileNamePath+"/"+a;jQuery.ajax({url:b,type:"HEAD",
error:function(){console.log("does not exist "+a);setTimeout(function(){cvjs_checkSVGOnServerBeforeLoad(a)},2500)},success:function(){console.log("exist");cvjs_debug&&console.log("loading "+cvjs_multipageURL_FileNamePath+"  /  "+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName);cvjs_multipagePDFtoSVG_PhpLoadFlag?0==cvjs_getFileController.indexOf("getFile_09.php")?cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_phpPath+"getFile_09.php?fileTag="+cvjs_multipagePDFtoSVG_tempDir+
"/"+a.substring(0,a.indexOf(".svg"))+"&remainOnServer=1&Type=svg"):cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_serverHandlersPath+cvjs_getFileController+"?fileTag="+cvjs_multipagePDFtoSVG_tempDir+"/"+a.substring(0,a.indexOf(".svg"))+"&remainOnServer=1&Type=svg"):cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_multipageURL_FileNamePath+"/"+a)}})}var currentLoadedDrawingFullName="";
function cvjs_ClearDrawing(a){if(cvjs_loadInProgress)console.log("CADViewer: another load in progress, cannot clear: "+a);else{cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_rPaper[cvjs_active_floorplan_div_nr]=null;for(var b=document.getElementById(floorplan_div_Array[cvjs_active_floorplan_div_nr]);b.firstChild;)b.removeChild(b.firstChild);cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap("#"+a+"_svg")}}
function cvjs_LoadDrawing(a,b){currentLoadedDrawingFullName=b;cvjs_SVG_load_svg_fileName="";cvjs_parse_SVG_blob=!1;cvjs_LoadDrawingInternal(a,b,void 0,!1)}var cvjs_firstLoad=!1,default_full_loaded=!1,flagSetUpVqPngDefault=!1,floorplan_div_Array=[],floorplan_div_Array_current_Drawing=[],loading_active_floorplan_div="",json_inputfile_flag=!1,json_inputfile_name="";
function cvjs_LoadDrawingInternal(a,b,c,d){cvjs_loadInProgress=!1;cvjs_setBackgroundColorHex("none",a);void 0==d&&(d=!1);if(cvjs_loadInProgress&&!d){console.log("CADViewer: another load in progress, aborting: "+a+"  "+b+" we have "+cvjs_active_floorplan_div_nr);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(loading_active_floorplan_div);console.log("Setting back : "+cvjs_active_floorplan_div_nr+"  "+loading_active_floorplan_div);try{cvjs_LoadDrawingAborted(a,b)}catch(m){cvjs_debug&&console.log("cvjs_LoadDrawing: "+
m)}}else{cvjs_loadInProgress||d||(cvjs_firstLoad=cvjs_loadInProgress=!0);!cvjs_loadInProgress&&d&&(cvjs_loadInProgress=!0,cvjs_firstLoad=!1);loading_active_floorplan_div=a;cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);console.log(cvjs_versionNumber+" Loading: "+b);a=a.toString();if(-1==a.indexOf("_svg")||-1<a.indexOf("_svg")&&a.indexOf("_svg")<a.length-4)a+="_svg";void 0==c?currentLoadedDrawingFullName=b:(currentLoadedDrawingFullName=b+c+".js",cvjs_FileNameNoExtension=c);if(void 0==c||SVGloadFlag){var e=
d="",f=b.substring(b.lastIndexOf(".")+1),g="",h=!1;-1<b.indexOf("fileName=")?(f=g=b.substring(b.lastIndexOf(".")+1),d=b.substring(0,b.lastIndexOf("fileName=")+9),e=b.substring(b.lastIndexOf("fileName=")+9),f=b.substring(b.lastIndexOf(".")+1),"svg"==g&&(h=!0),cvjs_debug&&console.log("fileName branch")):-1<b.indexOf("Type=")?(f=g=b.substring(b.lastIndexOf("Type=")+5),d=b.substring(0,b.lastIndexOf("/")+1),e=b.substring(b.lastIndexOf("/")),f=b.substring(b.lastIndexOf("=")+1),"svg"==g&&(h=!0)):(d=b.substring(0,
b.lastIndexOf("/")+1),cvjs_FileNameNoExtension=e=b.substring(b.lastIndexOf("/")+1,b.lastIndexOf(".")),f=b.substring(b.lastIndexOf(".")+1));fileExtensionLower=f.toLowerCase();cvjs_debug&&console.log("fileExtension="+f+" lower "+fileExtensionLower);for(g=0;g<floorplan_div_Array.length;g++)floorplan_div_Array[g]==a&&(floorplan_div_Array_current_Drawing[g]=b,cvjs_active_floorplan_div_nr=g,cvjs_scrollMouse_intialized[g]=!1,cvjs_SpaceObjectsContent[g]=[]);if(0==fileExtensionLower.indexOf("json")){b=d;c=
e;fileLoad_contentFormat="JSON";e=cvjs_serverHandlersPath+cvjs_serverMergeDWGController;d={base_file:"none"};var k=b;-1<b.indexOf(cvjs_ServerUrl)&&(k=cvjs_ServerLocation+b.substring(cvjs_ServerUrl.length));d.merge_file=k+c+"."+f;d.out_file=cvjs_ServerLocation+"/converters/files/merged/"+c+".dwg";d.zip_output="false";d.QR_code="false";json_inputfile_flag=!0;jQuery.ajax({url:e,type:"post",data:d,async:!0,success:function(d){b=cvjs_ServerLocation+"/converters/files/merged/"+c+".dwg";f=fileExtensionLower=
"dwg";0==fileExtensionLower.indexOf("dwg")&&cvjs_conversion_setContentFormat("DWG");cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;cvjs_LoadDrawing_Conversion(a,b,c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr])},error:function(a){console.log("Error Merge "+a)}});return}0==fileExtensionLower.indexOf("js")&&(b=d,c=e,fileLoad_contentFormat=
"JS");if(0==fileExtensionLower.indexOf("png")||0==fileExtensionLower.indexOf("gif")||0==fileExtensionLower.indexOf("jpg")||0==fileExtensionLower.indexOf("jpeg"))b=d,c=e,fileLoad_contentFormat=f;if(0==fileExtensionLower.indexOf("tif")||0==fileExtensionLower.indexOf("tiff")||0<" cut dds exr g3 hdr ico iff jng mng pcx pbm pfm pgm ppm pict psd raw ras sgi targa wbmp webp xbm xpm jpx j2c jxr jif".indexOf(fileExtensionLower)){0==fileExtensionLower.indexOf("tif")?cvjs_conversion_setContentFormat("TIF"):
0==fileExtensionLower.indexOf("tiff")?cvjs_conversion_setContentFormat("TIF"):cvjs_conversion_setContentFormat(fileExtensionLower.toUpperCase());cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;cvjs_LoadDrawing_Conversion(a,b,c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]);return}if(cvjs_firstLoad&&cvjs_isAngular&&0==fileExtensionLower.indexOf("svg")){cvjs_conversion_setContentFormat("SVG");
cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;cvjs_debug&&console.log("ANGULAR before loading cvjs_LoadDrawing_Conversion( drawing: "+b+"   "+c);cvjs_LoadDrawing_Conversion(a,b,c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]);return}if(0==fileExtensionLower.indexOf("dwg")||0==fileExtensionLower.indexOf("dwf")||0==fileExtensionLower.indexOf("dxf")){0==
fileExtensionLower.indexOf("dwg")&&cvjs_conversion_setContentFormat("DWG");0==fileExtensionLower.indexOf("dwf")&&cvjs_conversion_setContentFormat("DWF");0==fileExtensionLower.indexOf("dxf")&&cvjs_conversion_setContentFormat("DXF");cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;cvjs_LoadDrawing_Conversion(a,b,c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]);
return}if(0==fileExtensionLower.indexOf("dgn")){cvjs_debug&&console.log("IN DGN BRANCH");cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;0==fileExtensionLower.indexOf("dgn")&&cvjs_conversion_setContentFormat("DGN");cvjs_LoadDrawing_Conversion(a,b,c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]);return}if(0==fileExtensionLower.indexOf("pcf")){cvjs_debug&&
console.log("IN PCF BRANCH");cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;0==fileExtensionLower.indexOf("pcf")&&cvjs_conversion_setContentFormat("PCF");cvjs_LoadDrawing_Conversion(a,b,c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]);return}if(0==fileExtensionLower.indexOf("txt")||0==fileExtensionLower.indexOf("svg")||0==
fileExtensionLower.indexOf("svgz")){if(cvjs_firstLoad&&cvjs_fileLoadingFromSharePointServer){cvjs_firstLoad=!1;k=cvjs_serverHandlersPath+"CV-JS_sharepoint_downloadfile.php";var l=d+e+"."+f;l=l.replace(/%20/g," ");e={};e.sharepointfilename=l;e.targetfile=sharePoint_dataServerPath+l;e.user_name=cvjs_sharepoint_UserName;cvjs_debug&&console.log("share point SVG filename="+l+"  "+cvjs_sharepoint_UserName+" "+(sharePoint_dataServerPath+l)+" "+sharePoint_dataUrlPath);jQuery.ajax({url:k,type:"post",data:e,
success:function(a){console.log("download response"+a);SVGloadFile=sharePoint_dataUrlPath+l;h&&(SVGloadFile=b,h=!1);b=cvjs_relativeScriptsPath;cvjs_debug&&console.log("SVGloadFile "+SVGloadFile);6<SVGloadFile.lastIndexOf("://")&&(6<SVGloadFile.lastIndexOf("http://")?SVGloadFile=SVGloadFile.substring(SVGloadFile.lastIndexOf("http://")):6<SVGloadFile.lastIndexOf("https://")&&(SVGloadFile=SVGloadFile.substring(SVGloadFile.lastIndexOf("https://"))));cvjs_debug&&console.log("After http / httpsSVGloadFile "+
SVGloadFile);thumbs_loaded=floor_loaded=nodes_loaded=SVGloadFlag=!0;buildings={BUILDING_NAME_GOES_HERE:{name:"",company:"",address:"",city:"",state:"",zipcode:"",country:"",FacMgr:"",FacMgr_title:"",FacMgr_email:"",FacMgr_phone:"",floors:{FLOOR_NAME_GOES_HERE:{name:"name_of_file_to_appear",file:"file_name",rooms:{}}}}};if(null==cvjs_rPaper[cvjs_active_floorplan_div_nr]||void 0==cvjs_rPaper[cvjs_active_floorplan_div_nr])cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]),
console.log(cvjs_active_floorplan_div_nr+"  "+floorplan_div_Array[cvjs_active_floorplan_div_nr]);fileOverlay?cvjs_debug&&console.log("file overlay we do nothing, setup after SVG"):(layers_all=cvjs_rPaper[cvjs_active_floorplan_div_nr].g(),cvjs_Community_Version||(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()));SetUpVq(1,15)},error:function(a){console.log("2 json getEngines error="+a)}})}else{json_inputfile_flag&&(json_inputfile_flag=!1,cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=
cvjs_preConversionFileName[cvjs_active_floorplan_div_nr].substring(0,cvjs_preConversionFileName[cvjs_active_floorplan_div_nr].lastIndexOf("."))+".json",cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]="json");cvjs_firstLoad&&(cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower,cvjs_firstLoad=!1);SVGloadFile=d+e+"."+f;cvjs_buildFolderTree_crossDomain&&(SVGloadFile=0<SVGloadFile.indexOf("converters/files/pdf")?cvjs_serverHandlersPath+cvjs_serverLoadFileController+
"?file="+cvjs_ServerLocation+SVGloadFile.substring(SVGloadFile.indexOf("/converters/files/pdf")):cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+SVGloadFile);h&&(SVGloadFile=b,h=!1);b=cvjs_relativeScriptsPath;cvjs_debug&&console.log("SVGloadFile "+SVGloadFile);thumbs_loaded=floor_loaded=nodes_loaded=SVGloadFlag=!0;buildings={BUILDING_NAME_GOES_HERE:{name:"",company:"",address:"",city:"",state:"",zipcode:"",country:"",FacMgr:"",FacMgr_title:"",FacMgr_email:"",FacMgr_phone:"",floors:{FLOOR_NAME_GOES_HERE:{name:"name_of_file_to_appear",
file:"file_name",rooms:{}}}}};cvjs_debug&&console.log("ZX1 Standard SVG load cvjs_active_floorplan_div_nr="+cvjs_active_floorplan_div_nr);if(null==cvjs_rPaper[cvjs_active_floorplan_div_nr]||void 0==cvjs_rPaper[cvjs_active_floorplan_div_nr])cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]),console.log(cvjs_active_floorplan_div_nr+"  "+floorplan_div_Array[cvjs_active_floorplan_div_nr]);fileOverlay?cvjs_debug&&console.log("file overlay we do nothing, setup after SVG"):
(layers_all=cvjs_rPaper[cvjs_active_floorplan_div_nr].g(),cvjs_Community_Version||(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()));SetUpVq(1,15)}return}if(0==fileExtensionLower.indexOf("pdf")){0==fileExtensionLower.indexOf("pdf")&&cvjs_conversion_setContentFormat("PDF");cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]=b;cvjs_LoadDrawing_Conversion(a,b,
c,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]);return}fileExtensionLower.indexOf("pdf")}try{SVGloadedFragment=!1;if(cvjs_initMasterBackground){for(k=document.getElementById(floorplan_div_Array[cvjs_active_floorplan_div_nr]);k.firstChild;)k.removeChild(k.firstChild);try{cvjs_debug&&console.log("before remove "+cvjs_SpaceObjectsContent[0].length)}catch(m){console.log(m)}cvjs_rPaper[cvjs_active_floorplan_div_nr]=
null;cvjs_rPaper[cvjs_active_floorplan_div_nr]||(cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap("#"+a))}cvjs_debug&&console.log("REMOVED removed  SVGloadFlag"+SVGloadFlag+" SVGloadedFragment"+SVGloadedFragment)}catch(m){}jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+
floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading+"</div></td></tr></table>");jQuery("#cvjs_wait_looper_text_id_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading);cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();
printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();cvjs_objectIsZoomedExtents=!0;cvjs_loadDrawing_conversionMode=!1;cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]=b;jQuery("#"+a).html("");VqSetup=thumbs_loaded=nodes_loaded=floor_loaded=!1;current_FileNamePath=b;js_loaded_flag=0;if(0==fileLoad_contentFormat.indexOf("JS"))1==current_js_initialized?(cvjs_debug&&console.log(c.indexOf("Type=")+" JS ileNamePath.indexOf('Type=')  replacing current_jsFloorNames="+
current_jsFloorNames+"  "+b+c),-1<c.indexOf("Type=")?replacejscssfile(current_jsFloorNames,b+c,"js"):replacejscssfile(current_jsFloorNames,b+c+".js","js"),cvjs_FourFilesInOne||(replacejscssfile(current_jsNodesFloorNames,b+c+"-nodes.js","js"),replacejscssfile(current_jsThumbFloorNames,b+c+"-thumb.js","js"),replacejscssfile(current_jsFullFloorNames,b+c+"-full.js","js"))):(cvjs_debug&&console.log("initial loading .js file files! "+b+c),current_js_initialized=1,-1<b.indexOf("Type=")?loadJSbase(b+c,"js"):
loadJSbase(b+c+".js"),cvjs_FourFilesInOne||(loadJSbase(b+c+"-nodes.js"),loadJSbase(b+c+"-thumb.js"),loadJSbase(b+c+"-full.js"))),cvjs_FourFilesInOne||(current_jsNodesFloorNames=b+c+"-nodes.js",current_jsThumbFloorNames=b+c+"-thumb.js",current_jsFullFloorNames=b+c+"-full.js"),current_jsFloorNames=-1<c.indexOf("Type=")?b+c:b+c+".js",rebuild_drop_spaces=1,waitForJSLoaded();else{cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr]=fileExtensionLower;cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]=
!1;cvjs_bitmapLoadFlag=!0;try{cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap("#"+a),e=b+c+"."+fileLoad_contentFormat,cvjs_buildFolderTree_crossDomain&&(e=cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+e),cvjs_debug&&console.log("calling setup Png "+e),default_full_loaded=!0,SetUpVqPngDefault(e,floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(m){console.log(m)}}}}
function waitForJSLoaded(){try{layers_all.length?cvjs_debug&&console.log("layers waitForJSLoaded"):cvjs_debug&&console.log("no layers waitForJSLoaded")}catch(a){40>load_failures?(load_failures++,jQuery("#loading").html(languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading),setTimeout(function(){waitForJSLoaded()},256)):(jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
"Path to file not found: "+current_FileNamePath+cvjs_FileNameNoExtension+".js"))}}var cvjs_rasterImageLoaded,sharePoint_dataServerPath="",sharePoint_dataUrlPath="",cvjs_sharepoint_UserName="",cvjs_sharepoint_DocLib="";
function SetUpVqPngDefault(a){if(cvjs_fileLoadingFromSharePointServer){var b=cvjs_serverHandlersPath+"CV-JS_sharepoint_downloadfile.php";a=a.replace(/%20/g," ");var c={};c.sharepointfilename=a;c.targetfile=sharePoint_dataServerPath+a;c.user_name=cvjs_sharepoint_UserName;cvjs_debug&&console.log("share point bitmap filename="+a+"  "+cvjs_sharepoint_UserName+" "+(sharePoint_dataServerPath+a)+" "+sharePoint_dataUrlPath);jQuery.ajax({url:b,type:"post",data:c,success:function(b){console.log("download response"+
b);SetUpVqPngDefault_base(sharePoint_dataUrlPath+a)},error:function(a){console.log("2 json getEngines error="+a)}})}else SetUpVqPngDefault_base(a)}
function SetUpVqPngDefault_base(a){thumbs_loaded=floor_loaded=nodes_loaded=!0;buildings={BUILDING_NAME_GOES_HERE:{name:"",company:"",address:"",city:"",state:"",zipcode:"",country:"",FacMgr:"",FacMgr_title:"",FacMgr_email:"",FacMgr_phone:"",floors:{FLOOR_NAME_GOES_HERE:{name:"name_of_file_to_appear",file:"file_name",rooms:{}}}}};layers_all=cvjs_rPaper[cvjs_active_floorplan_div_nr].g();cvjs_Community_Version||(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].g());
cvjs_rPaper[cvjs_active_floorplan_div_nr]=null;var b="#"+floorplan_div_Array[cvjs_active_floorplan_div_nr];cvjs_rPaper[cvjs_active_floorplan_div_nr]||(cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap(b));floor_loaded&&nodes_loaded&&thumbs_loaded&&default_full_loaded?(load_failures=0,thumb_loaded=!1,cvjs_rasterImageLoaded=new Image,cvjs_rasterImageLoaded.onload=function(){cvjs_rPaper[cvjs_active_floorplan_div_nr].g();var b=cvjs_bitmapFileNameIsServerPath_flag?cvjs_rPaper[cvjs_active_floorplan_div_nr].image(cvjs_serverHandlersPath+
cvjs_serverLoadFileController+"?file="+a,0,0,this.width,this.height):cvjs_rPaper[cvjs_active_floorplan_div_nr].image(a,0,0,this.width,this.height);var d=b.getBBox();layers_all=cvjs_rPaper[cvjs_active_floorplan_div_nr].g();cvjs_Community_Version||(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].g());layers_all.add(b);b="M0,0V"+this.height+"H"+this.width+"V0.0H0.0";cvjs_debug&&console.log("boundingbox "+b);b=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(b).attr({stroke:"rgb(164,164,164)",
"stroke-width":"0.1",fill:"none"});layers_all.add(b);panWithThumb=!1;b="M0,0V"+d.height+"H"+d.width+"V0.0H0.0";layer_thumb=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(b).attr({stroke:"rgba(153,153,153,0.5)","stroke-width":"2",fill:"none"}));d=layers_all.getBBox();actualLLX[cvjs_active_floorplan_div_nr]=0;actualLLY[cvjs_active_floorplan_div_nr]=0;actualURX[cvjs_active_floorplan_div_nr]=d.width;actualURY[cvjs_active_floorplan_div_nr]=d.height;cvjs_debug&&
console.log("XXXXXXXXXXXXXXXX   boundingbox "+d.width+"  "+d.height);cvjs_masterBackground[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]));cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#ffffff",
"fill-opacity":"0.01","stroke-width":0});cvjs_masterBackground[cvjs_active_floorplan_div_nr].data("id","master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({id:"master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]});layers_all.after(cvjs_masterBackground[cvjs_active_floorplan_div_nr]);viewBox[cvjs_active_floorplan_div_nr].X=actualLLX[cvjs_active_floorplan_div_nr];viewBox[cvjs_active_floorplan_div_nr].Y=actualLLY[cvjs_active_floorplan_div_nr];
viewBox[cvjs_active_floorplan_div_nr].width=actualURX[cvjs_active_floorplan_div_nr];viewBox[cvjs_active_floorplan_div_nr].height=actualURY[cvjs_active_floorplan_div_nr];cvjs_floorplan_div=floorplan_div_Array[cvjs_active_floorplan_div_nr];cvjs_masterBackground[cvjs_active_floorplan_div_nr].drag(dragMove,dragStart,dragEnd);cvjs_firstLoadViewBoxX=viewBox[cvjs_active_floorplan_div_nr].X;cvjs_firstLoadViewBoxY=viewBox[cvjs_active_floorplan_div_nr].Y;cvjs_firstLoadViewBoxW=viewBox[cvjs_active_floorplan_div_nr].width;
cvjs_firstLoadViewBoxH=viewBox[cvjs_active_floorplan_div_nr].height;d=document.querySelector(":root");b=getComputedStyle(d);cvjs_tmsMinLineWidth_init=b.getPropertyValue("--tmsMinLineWidth");cvjs_tmsMinFixedLineWidth_init=b.getPropertyValue("--tmsMinFixedLineWidth");""==cvjs_tmsMinFixedLineWidth_init&&(cvjs_tmsMinFixedLineWidth_init=-1);cvjs_debug&&console.log("cvjs_tmsMinLineWidth_init x2 -2"+cvjs_tmsMinLineWidth_init+" "+cvjs_tmsMinFixedLineWidth_init);cvjs_addMouseWheelControls(cvjs_active_floorplan_div_nr);
jQuery("#looper").hide();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();var e=floorplan_div_Array[cvjs_active_floorplan_div_nr];jQuery("#tip_"+e).css({position:"absolute"});jQuery("#tip_"+e).css({border:"1px solid gray"});jQuery("#tip_"+e).css({"z-index":2E3});jQuery("#tip_"+e).css({color:"#333"});jQuery("#tip_"+e).css({"background-color":"#efefef"});jQuery("#tip_"+e).css({padding:"3px"});
jQuery("#tip_"+e).css({"max-width":"300px"});jQuery("#tip_"+e).css({"white-space":"nowrap"});jQuery("#tip_"+e).css({"font-family":"arial, verdana, sans-serif"});jQuery("#tip_"+e).css({"font-size":"0.75em"});tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+e);tip[cvjs_active_floorplan_div_nr].hide();ResizeVq(jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr].width),jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr].height));if(!jQuery("#floatNavigationMenu_"+e).is(":visible")&&
pageChangeInterface[cvjs_interfaceCounterIndex(floorplan_div_Array[cvjs_active_floorplan_div_nr])]){jQuery("#floatNavigationMenu_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();var f=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position(),g=f.top+5;f=f.left+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width()-475;40>f&&(f=40);jQuery("#floatNavigationMenu_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).offset({top:g,left:f})}jQuery("#floatpagemenuText_"+
e).html("&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1/1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  Single Page");jQuery("#floatpagemenuText1_topBar_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("1/1");jQuery("#floatpagemenuText2_topBar_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("Single Page");multiPages[cvjs_active_floorplan_div_nr]={multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]};
layerTable[cvjs_active_floorplan_div_nr]={numberOfLayers:0,layers:[]};console.log("multiPages[ "+multiPages[cvjs_active_floorplan_div_nr].multiPages);try{cvjs_SVGGroup[cvjs_active_floorplan_div_nr].before(cvjs_masterBackground[cvjs_active_floorplan_div_nr])}catch(k){console.log("error setting masterbackground first")}if(cvjs_customMethodForOnLoadEnd)cvjs_loadInProgress=!1,cvjs_myOnLoadEndMethod();else try{var h=floorplan_div_Array[cvjs_active_floorplan_div_nr].slice(0,-4);cvjs_loadInProgress=!1;console.log("NOTE_ End of png load loop booleans in init");
cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]=0;0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_dragBackgroundToFront_SVG(h);cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr]=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("background-color");cvjs_clearSpaceLayer();first_thickness=!0;cvjs_firstLoadViewBoxX=viewBox[cvjs_active_floorplan_div_nr].X;cvjs_firstLoadViewBoxY=viewBox[cvjs_active_floorplan_div_nr].Y;cvjs_firstLoadViewBoxW=
viewBoxWidth[cvjs_active_floorplan_div_nr];cvjs_firstLoadViewBoxH=viewBoxHeight[cvjs_active_floorplan_div_nr];d=document.querySelector(":root");b=getComputedStyle(d);cvjs_tmsMinLineWidth_init=b.getPropertyValue("--tmsMinLineWidth");cvjs_tmsMinFixedLineWidth_init=b.getPropertyValue("--tmsMinFixedLineWidth");""==cvjs_tmsMinFixedLineWidth_init&&(cvjs_tmsMinFixedLineWidth_init=-1);cvjs_debug&&console.log("cvjs_tmsMinLineWidth_init x2"+cvjs_tmsMinLineWidth_init+" "+cvjs_tmsMinFixedLineWidth_init);cvjs_OnLoadEnd(h)}catch(k){console.log("Please define cvjs_OnLoadEnd in your encapsulating code: "+
k)}jQuery("#looper").hide();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_bitmapLoadFlag=!1},cvjs_rasterImageLoaded.setAttribute("crossOrigin","anonymous"),cvjs_bitmapFileNameIsServerPath_flag?(b=cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+a,cvjs_rasterImageLoaded.src=b,console.log("After calling - loading server bitmaps through php setting cvjs_rasterImageLoaded.src="+b)):(cvjs_rasterImageLoaded.src=a,console.log("After calling - loading bitmap direct from url cvjs_rasterImageLoaded.src="+
a))):40>load_failures?(load_failures++,jQuery("#loading").html(languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading),setTimeout(function(){SetUpVqPngDefault(a,floorplan_div_Array[cvjs_active_floorplan_div_nr])},256)):(load_failures=0,jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],"Failure loading file: "+current_FileNamePath+cvjs_FileNameNoExtension+
".js"))}
function cvjs_clearCurrentRedline(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_clearDrawingStickyNotes();var b=!1;for(a=0;a<vqRedlines.length;a++)if(vqRedlines[a].data("locked")){b=!0;break}if(b)for(b=cvjs_findMaxRedlineStickyNote(),a=0;a<b;a++)cvjs_setUpVqRedlines_deleteNode_direct("RED_"+(a+1));else{cvjs_deleteAllRedlines();for(a=0;a<vqRedlines.length;a++)vqRedlines[a].remove();vqRedlines.length=0}b=!1;for(a=0;a<
vqStickyNotes.length;a++)vqStickyNotes[a].data("locked")&&(b=!0);if(b)for(b=cvjs_findMaxRedlineStickyNote(),a=0;a<b;a++)c="SNOTE_"+(a+1),cvjs_setUpStickyNotes_deleteNode_direct(c);else for(b=cvjs_findMaxRedlineStickyNote(),a=0;a<b;a++){var c="SNOTE_"+(a+1);cvjs_setUpStickyNotes_deleteNode_direct(c)}}
function cvjs_findMaxRedlineStickyNote(){var a=0;for(c in vqRedlines){var b=vqRedlines[c].data("node");b=parseInt(b.substring(4));b>a&&(a=b)}var c=0;for(var d in vqStickyNotes)b=vqStickyNotes[d].data("node"),b=parseInt(b.substring(6)),b>c&&(c=b);return a+c}function cvjs_findMaxStickyNote(){var a=0,b;for(b in vqRedlines){var c=vqRedlines[b].data("node");c=parseInt(c.substring(4));c>a&&(a=c)}return a}
function cvjs_setUpVqRedlines_deleteNode_direct(a){var b;for(b in vqRedlines){var c=vqRedlines[b].data("node");vqRedlines[b].data("locked")||c!=a||(vqRedlines[b].data("deleted",!0),vqRedlines[b].attr({transform:"S0.001",opacity:"0.01"}))}}
function cvjs_setUpStickyNotes_deleteNode_direct(a){var b;for(b in vqStickyNotes){var c=vqStickyNotes[b].data("node");c==a&&(vqStickyNotes[b].data("deleted",!0),vqStickyNotes[b].attr({transform:"S0.001",opacity:"0.01"}),hideOnlyStickyNote(b),jQuery(vqStickyNotes[b].node).qtip("destroy"),vqStickyNotes.splice(b,1))}}
function cvjs_setOriginatingFileUsernamePassword(a,b){cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr]=a;cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]=b}function cvjs_restApiController(){return rest_php_version}function cvjs_restApiControllerLocation(){return tms_rest_api_url1}function cvjs_setRestApiControllerLocation(a){tms_rest_api_url1=a}
function cvjs_setRestApiController(a){rest_php_version=a;-1<rest_php_version.indexOf("call-Api_Conversion.php")&&(rest_converter="AutoXchange AX2020",rest_version="V1.00");cvjs_debug&&console.log(rest_converter+"  "+rest_php_version+"  "+a)}function cvjs_restApiConverter(){return rest_converter}function cvjs_restApiConverterVersion(){return rest_version}function cvjs_setConverter(a,b){rest_converter=a;rest_version=b}function cvjs_setConverterCredentials(a,b){cvjs_usr=a;cvjs_pwd=b}
function cvjs_Init_ConversionServer(a,b,c,d){tms_rest_api_url1=a;rest_php_version=b;cvjs_usr=c;cvjs_pwd=d}
var tms_rest_api_url1="http://onlinedemo.vizquery.com/cadviewer_3_0_1/php/",rest_php_version="call-Api_Conversion.php",rest_action="conversion",rest_converter="AutoXchange AX2020",rest_version="V1.00",rest_contentType="file",rest_contentLocation,rest_contentStream,rest_embeddedContent,rest_contentFormat="DWG",rest_contentUserName,rest_contentPassword,rest_userLabel="fromCADViewerJS",rest_contentResponse="stream",rest_parameters,rest_nname=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
[],[],[],[],[],[],[],[],[],[],[]],rest_vvalue=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],rest_nname_custom=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],rest_vvalue_custom=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];function cvjs_setSVG_outputFormatInAXConversions(a){cvjs_SVG_outputFormatInAXConversions=a}
function cvjs_conversion_clearAXconversionParameters(a){cvjs_active_floorplan_div_nr="undefined"===typeof a?0:cvjs_rPaperIndex(a);rest_nname[cvjs_active_floorplan_div_nr].length=0;rest_vvalue[cvjs_active_floorplan_div_nr].length=0;rest_nname[cvjs_active_floorplan_div_nr][0]="f";rest_vvalue[cvjs_active_floorplan_div_nr][0]="js";cvjs_SVG_outputFormatInAXConversions&&(rest_vvalue[cvjs_active_floorplan_div_nr][0]="svg");rest_nname_custom[cvjs_active_floorplan_div_nr].length=0;rest_vvalue_custom[cvjs_active_floorplan_div_nr].length=
0}
function cvjs_conversion_addAXconversionParameter(a,b,c){cvjs_active_floorplan_div_nr="undefined"===typeof c?0:cvjs_rPaperIndex(c);c=rest_nname_custom[cvjs_active_floorplan_div_nr].length;rest_nname_custom[cvjs_active_floorplan_div_nr][c]=a;rest_vvalue_custom[cvjs_active_floorplan_div_nr][c]=b;cvjs_debug&&console.log("addAXConversionParameter "+rest_nname_custom[cvjs_active_floorplan_div_nr][c]+" "+rest_vvalue_custom[cvjs_active_floorplan_div_nr][c]+"  "+rest_nname_custom[cvjs_active_floorplan_div_nr].length)}
function cvjs_conversion_setContentType(a){rest_contentType=a}function cvjs_conversion_setContentFormat(a){rest_contentFormat=a}function cvjs_fileLoad_setContentFormat(a){if("PNG"==a||"png"==a)fileLoad_contentFormat="png";if("JPG"==a||"jpg"==a)fileLoad_contentFormat="jpg";if("GIF"==a||"gif"==a)fileLoad_contentFormat="gif";if("JS"==a||"js"==a)fileLoad_contentFormat="JS"}function cvjs_conversion_setUserLabel(a){rest_userLabel=a}function cvjs_conversion_setContentResponse(a){rest_contentResponse=a}
function cvjs_conversion_getContentResponse(){return rest_contentResponse}var cvjs_debug=!1;function cvjs_debugMode(a){cvjs_debug=a}function cvjs_setPasswordProtectionServerAccess(a){cvjs_passwordProtected=a}function cvjs_setServerAccessToServlet(a){cvjs_servlet_handshake=a;cvjs_jsonp_handshake=1==a?!1:!0;cvjs_post_handshake=!1}function cvjs_setServerAccessToPost(a){cvjs_post_handshake=a;cvjs_jsonp_handshake=1==a?!1:!0;cvjs_servlet_handshake=!1}
var cvjs_usr="guest",cvjs_pwd="guest",cvjs_passwordProtected=!1,cvjs_servlet_handshake=!1,cvjs_jsonp_handshake=!0,cvjs_post_handshake=!1,contentStreamGraphics,contentStreamNodes,contentStreamData,contentStreamThumb,contentLocationGraphics,contentLocationNodes,contentLocationData,contentLocationThumb;function cvjs_LoadDrawing_Conversion(a,b,c,d,e){cvjs_Community_Version?cvjs_LoadDrawing_Conversion_original(a,b,c,d,e):cvjs_checkLicensePreThenLoad(a,b,c,d,e)}
function cvjs_LoadDrawing_Conversion_original(a,b,c,d,e){cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]=!1;try{if(cvjs_debug&&console.log("cvjs_LoadDrawing_Conversion_original  "),cvjs_initMasterBackground)if(fileOverlay)cvjs_debug&&console.log("file overlay we do nothing 3");else{try{for(var f=document.getElementById(floorplan_div_Array[cvjs_active_floorplan_div_nr]);f.firstChild;)f.removeChild(f.firstChild)}catch(m){console.log("IE11 clean: "+m)}cvjs_rPaper[cvjs_active_floorplan_div_nr]=
null;var g="#"+floorplan_div_Array[cvjs_active_floorplan_div_nr];cvjs_rPaper[cvjs_active_floorplan_div_nr]||(cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap(g));cvjs_debug&&console.log("cvjs_LoadDrawing_Conversion_original: setting active floorplan "+cvjs_active_floorplan_div_nr+"  snap() ")}}catch(m){console.log(m)}for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)if("layout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(void 0==rest_vvalue[cvjs_active_floorplan_div_nr][f]||""==rest_nname[cvjs_active_floorplan_div_nr][f])){console.log("layout undefined!");
return}jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading+"</div></td></tr></table>");
jQuery("#cvjs_wait_looper_text_id_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading);cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();cvjs_fileLoadTimeOutTimeFlag&&(cvjs_debug&&console.log("TIMEOUT calling: cvjs_fileLoadTimeOut(), where cvjs_setFileLoadTimeOutFlag: "+cvjs_fileLoadTimeOutTimeFlag+"  cvjs_fileLoadTimeOutTime: "+cvjs_fileLoadTimeOutTime+" ms"),cvjs_fileLoadTimeOut(function(){jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).is(":visible")?(cvjs_debug&&console.log("TIMEOUT cvjs_fileLoadTimeOut() called: wait looper is-visible , hide looper + display modal"),jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.TimeOut1+cvjs_fileLoadTimeOutTime/1E3+languageTable.languages[cvjs_currentLanguage].InfoMessageModal.TimeOut2),
cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1):cvjs_debug&&console.log("TIMEOUT  cvjs_fileLoadTimeOut() called:  wait looper non-visible , display time has lapsed, no action as drawing is loaded")}));jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();cvjs_loadDrawing_conversionMode=cvjs_objectIsZoomedExtents=!0;cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr]=
b;cvjs_conversion_originatingFileNameNoExtension[cvjs_active_floorplan_div_nr]=c;cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr]=d;cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr]=e;fileOverlay?cvjs_debug&&console.log("HERE WE DO NOT REMOVE THE CONTENT OF flooplan"):jQuery("#"+a).html("");VqSetup=thumbs_loaded=nodes_loaded=floor_loaded=!1;if(void 0==rest_nname[cvjs_active_floorplan_div_nr].length||0==rest_nname[cvjs_active_floorplan_div_nr].length)rest_nname[cvjs_active_floorplan_div_nr][0]=
"f",rest_vvalue[cvjs_active_floorplan_div_nr][0]="js",cvjs_SVG_outputFormatInAXConversions&&(rest_vvalue[cvjs_active_floorplan_div_nr][0]="svg");if(cvjs_compareDrawings)for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"f"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_vvalue[cvjs_active_floorplan_div_nr][f]="svg");a=!0;for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"basic"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1),"layout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&
(a=!1),"model"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1),"layoutsonly"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1),"last"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1),"paper"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(a=!1);for(f=0;f<rest_nname_custom[cvjs_active_floorplan_div_nr].length;f++)"basic"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&
(a=!1),"layout"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1),"model"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1),"layoutsonly"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1),"lastsavedview"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1),"last"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1),"firstlayout"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1),"paper"==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(a=!1);
for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)console.log("init load "+rest_nname[cvjs_active_floorplan_div_nr][f]+" "+rest_vvalue[cvjs_active_floorplan_div_nr][f]);a&&(f=rest_nname[cvjs_active_floorplan_div_nr].length,0==rest_contentFormat.toLowerCase().indexOf("dwf")?rest_nname[cvjs_active_floorplan_div_nr][f]="firstlayout":(rest_nname[cvjs_active_floorplan_div_nr][f]="model",rest_vvalue[cvjs_active_floorplan_div_nr][f]=""),rest_vvalue[cvjs_active_floorplan_div_nr][f]="",f=rest_nname[cvjs_active_floorplan_div_nr].length,
rest_nname[cvjs_active_floorplan_div_nr][f]="extents",rest_vvalue[cvjs_active_floorplan_div_nr][f]="");0==rest_contentFormat.toLowerCase().indexOf("pcf")&&(f=rest_nname[cvjs_active_floorplan_div_nr].length,rest_nname[cvjs_active_floorplan_div_nr][f]="treatas",rest_vvalue[cvjs_active_floorplan_div_nr][f]="DGN");if(cvjs_convertSpaceObject){c=!1;a=rest_nname[cvjs_active_floorplan_div_nr].length;for(f=0;f<a;f++)"RL"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_vvalue[cvjs_active_floorplan_div_nr][f]=
cvjs_convertRoomLayer,c=!0);c||(rest_nname[cvjs_active_floorplan_div_nr][a]="RL",rest_vvalue[cvjs_active_floorplan_div_nr][a]=cvjs_convertRoomLayer);c=!1;a=rest_nname[cvjs_active_floorplan_div_nr].length;for(f=0;f<a;f++)"TL"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_vvalue[cvjs_active_floorplan_div_nr][f]=cvjs_convertTextLayer,c=!0);c||(rest_nname[cvjs_active_floorplan_div_nr][a]="TL",rest_vvalue[cvjs_active_floorplan_div_nr][a]=cvjs_convertTextLayer);c="";a=!0;for(f=0;f<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;f++)"OFF"==
layerTable[cvjs_active_floorplan_div_nr].layers[f].status&&(a?(c+=layerTable[cvjs_active_floorplan_div_nr].layers[f].layerName,a=!1):c+=";"+layerTable[cvjs_active_floorplan_div_nr].layers[f].layerName);if(0<c.length){g=!1;a=rest_nname[cvjs_active_floorplan_div_nr].length;for(f=0;f<a;f++)"LOFF"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_vvalue[cvjs_active_floorplan_div_nr][f]=c,g=!0);g||(rest_nname[cvjs_active_floorplan_div_nr][a]="LOFF",rest_vvalue[cvjs_active_floorplan_div_nr][a]=c)}}else{a=
rest_nname[cvjs_active_floorplan_div_nr].length;for(f=0;f<a;f++)"RL"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr].splice(f,1),rest_vvalue[cvjs_active_floorplan_div_nr].splice(f,1));a=rest_nname[cvjs_active_floorplan_div_nr].length;for(f=0;f<a;f++)"TL"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr].splice(f,1),rest_vvalue[cvjs_active_floorplan_div_nr].splice(f,1))}g=-1;for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"layout"==
rest_nname[cvjs_active_floorplan_div_nr][f]&&(g=f);var h=-1;for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"model"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(h=f);if(0<rest_nname_custom[cvjs_active_floorplan_div_nr].length){a=rest_nname[cvjs_active_floorplan_div_nr].length;var k=rest_nname_custom[cvjs_active_floorplan_div_nr].length;for(f=0;f<k;f++){var l=!1;for(c=0;c<a;c++)rest_nname[cvjs_active_floorplan_div_nr][c]==rest_nname_custom[cvjs_active_floorplan_div_nr][f]&&(l=!0);l||
(rest_nname[cvjs_active_floorplan_div_nr][a]=rest_nname_custom[cvjs_active_floorplan_div_nr][f],rest_vvalue[cvjs_active_floorplan_div_nr][a]=rest_vvalue_custom[cvjs_active_floorplan_div_nr][f],a++)}}if(-1<g)for(f=g+1;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"last"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"model"==rest_nname[cvjs_active_floorplan_div_nr][f]&&
(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"paper"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]="");if(-1<h)for(f=h+1;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"last"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"lastsavedview"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=
""),"layout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=""),"paper"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]="");if(0==rest_contentFormat.toLowerCase().indexOf("pdf"))for(a=rest_nname[cvjs_active_floorplan_div_nr].length,g=multiPages[cvjs_active_floorplan_div_nr].multiPages,f=0;f<a;f++)if(console.log(f+
" "+rest_nname[cvjs_active_floorplan_div_nr][f]),"layout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&"dummy"!=rest_vvalue[cvjs_active_floorplan_div_nr][f])for(rest_nname[cvjs_active_floorplan_div_nr][f]="pg",console.log("layout to pg i "+f),c=0;c<g;c++)console.log(f+" "+c+" "+multiPages[cvjs_active_floorplan_div_nr].pages[c].pageName+"  "+rest_vvalue[cvjs_active_floorplan_div_nr][f]),multiPages[cvjs_active_floorplan_div_nr].pages[c].pageName==rest_vvalue[cvjs_active_floorplan_div_nr][f]&&(rest_vvalue[cvjs_active_floorplan_div_nr][f]=
(c+1).toString());a={action:"svg_js_creation"};cvjs_SVG_outputFormatInAXConversions&&(a.action="svg_creation",cvjs_fileLoadingFromSharePointServer&&(a.action="svg_creation_sharepoint_REST"));cvjs_compareDrawings&&(a.action="svg_creation");a.converter=rest_converter;a.version=rest_version;a.contentType=rest_contentType;b=b.replace(/\\/g,"/");"file"==a.contentType&&(0<b.indexOf("%")?a.contentLocation=b:a.contentLocation=encodeURIComponent(b));"stream"==a.contentType&&(0<b.indexOf("%")?a.contentStream=
b:a.contentStream=encodeURIComponent(b));"embedded"==a.contentType&&(0<b.indexOf("%")?a.embeddedContent=b:a.embeddedContent=encodeURIComponent(b));a.contentFormat=rest_contentFormat;a.contentUsername=d;cvjs_fileLoadingFromSharePointServer&&(a.contentUsername=cvjs_sharepoint_UserName);a.contentPassword=e;a.userLabel=rest_userLabel;a.contentResponse=rest_contentResponse;"stream"==a.contentResponse&&(a.leaveStreamOnServer=0,cvjs_compareDrawings&&(a.leaveStreamOnServer=1));rest_serviceCall&&(a.userLabel=
rest_ServiceToken,a.applicationPlatform=rest_applicationPlatform,a.applicationPlatformUsername=rest_applicationPlatformUsername,a.applicationPlatformUserID=rest_applicationPlatformUserID,"stream"==a.contentResponse&&(a.leaveStreamOnServer=rest_leaveStreamOnServer));a.parameters=[];for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)b={},b.paramName=rest_nname[cvjs_active_floorplan_div_nr][f],b.paramValue=rest_vvalue[cvjs_active_floorplan_div_nr][f],a.parameters[f]=b;api_data=JSON.stringify(a);
tms_rest_api_url=tms_rest_api_url1+rest_php_version;-1<tms_rest_api_url1.indexOf("tms-restful-api")&&(cvjs_passwordProtected=!0,cvjs_isLicensed&&(cvjs_usr="tms",cvjs_pwd="restful"),cvjs_Community_Version&&(cvjs_usr="tms",cvjs_pwd="restful"),cvjs_debug&&console.log(cvjs_isLicensed+" "+cvjs_usr+" "+cvjs_pwd));cvjs_passwordProtected?(d=tms_rest_api_url.indexOf("//"),b=tms_rest_api_url.substring(0,d+2),d=tms_rest_api_url.substring(d+2),b=b+cvjs_usr+":"+cvjs_pwd+"@"+d):b=tms_rest_api_url;cvjs_debug&&console.log(b+
" in makeConversion  request="+encodeURIComponent(api_data)+"  non encoded request: "+api_data);d="";d=cvjs_encodeURIcall_server?b+"?json="+encodeURIComponent(api_data):b+"?json="+api_data;cvjs_debug&&console.log(" url_json:"+d);cvjs_jsonp_handshake&&(cvjs_debug&&console.log("before ajax call to php "),jQuery.ajax({url:d,jsonp:"tms_restful_api",dataType:"jsonp",success:function(a){cvjs_debug&&console.log("jsonP Conversion success: "+a);parseServerResponse(a)},error:function(a,b,c){console.log("1 jsonp getEngines error="+
a.responseText+" status="+b+" error="+c)}}));cvjs_servlet_handshake&&(cvjs_debug&&console.log("3 before ajax call to Servlet"),d={},d.request=api_data,cvjs_debug&&console.log("before ajax call to Servlet url="+b+" filelist_data['request']: "+d.request),jQuery.ajax({url:b,type:"post",data:d,success:function(a){cvjs_debug&&console.log("Conversion success parseServerResponse: "+a);parseServerResponse(a)},error:function(a,b,c){console.log("2 jsonp getEngines error="+a.responseText+" status="+b+" error="+
c)}}));cvjs_post_handshake&&(cvjs_debug&&console.log("before ajax post call"),d={},d.json_data=api_data,jQuery.ajax({url:b,type:"POST",data:d,success:function(a){cvjs_debug&&console.log("post Conversion: "+a);parseServerResponse(a)},error:function(a){console.log("2 json getEngines error="+a)}}))}var cvjs_svgCreationContentLocation="",cvjs_svgCreatedFromConversion=!1,cvjs_fileLoadTimeOutTime=3E3,cvjs_fileLoadTimeOutTimeFlag=!1;
function cvjs_setFileLoadTimeOut(a,b){cvjs_fileLoadTimeOutTimeFlag=!0;cvjs_fileLoadTimeOutTime=1E3*b;cvjs_debug&&console.log("init TIMEOUT: cvjs_setFileLoadTimeOutFlag: "+cvjs_fileLoadTimeOutTimeFlag+"  cvjs_fileLoadTimeOutTime: "+cvjs_fileLoadTimeOutTime+" ms")}function cvjs_fileLoadTimeOut(a){setTimeout(function(){a()},cvjs_fileLoadTimeOutTime)}
function parseServerResponse(a){a=jQuery.parseJSON(a);"E0"!=a.errorCode?(jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],"Server side conversion error, AutoXchange responded with errorcode: "+a.errorCode)):("svg_js_creation"==a.completedAction&&("stream"==rest_contentResponse?(contentStreamGraphics=a.contentStreamGraphics,contentStreamNodes=a.contentStreamNodes,
contentStreamData=a.contentStreamData,contentStreamThumb=a.contentStreamThumb,1==cvjs_drawingLoadCounter&&(cvjs_compareDrawingsFirstDrawing=contentStreamData),1==current_js_initialized?(replacejscssfile(current_jsFloorNames,contentStreamData,"js"),cvjs_FourFilesInOne||(replacejscssfile(current_jsNodesFloorNames,contentStreamNodes,"js"),replacejscssfile(current_jsThumbFloorNames,contentStreamThumb,"js"),replacejscssfile(current_jsFullFloorNames,contentStreamGraphics,"js"))):(current_js_initialized=
1,loadJSbase(contentStreamData),cvjs_FourFilesInOne||(loadJSbase(contentStreamNodes),loadJSbase(contentStreamThumb),loadJSbase(contentStreamGraphics))),current_jsFloorNames=contentStreamData,cvjs_FourFilesInOne||(current_jsNodesFloorNames=contentStreamNodes,current_jsThumbFloorNames=contentStreamThumb,current_jsFullFloorNames=contentStreamGraphics),rebuild_drop_spaces=1):"file"==rest_contentResponse?(contentLocationGraphics=a.contentLocationGraphics,contentLocationNodes=a.contentLocationNodes,contentLocationData=
a.contentLocationData,contentLocationThumb=a.contentLocationThumb,cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]=a.contentLocationGraphics.substring(0,a.contentLocationGraphics.lastIndexOf("/")+1),1==cvjs_drawingLoadCounter&&(cvjs_compareDrawingsFirstDrawing=contentLocationData),1==current_js_initialized?(replacejscssfile(current_jsFloorNames,contentLocationData,"js"),cvjs_FourFilesInOne||(replacejscssfile(current_jsNodesFloorNames,contentLocationNodes,"js"),replacejscssfile(current_jsThumbFloorNames,
contentLocationThumb,"js"),replacejscssfile(current_jsFullFloorNames,contentLocationGraphics,"js"))):(current_js_initialized=1,loadJSbase(contentLocationData),cvjs_FourFilesInOne||(loadJSbase(contentLocationNodes),loadJSbase(contentLocationThumb),loadJSbase(contentLocationGraphics))),current_jsFloorNames=contentLocationData,cvjs_FourFilesInOne||(current_jsNodesFloorNames=contentLocationNodes,current_jsThumbFloorNames=contentLocationThumb,current_jsFullFloorNames=contentLocationGraphics),rebuild_drop_spaces=
1):cvjs_debug&&console.log("currently contentStream and contentLocation are implemented!! embedded to follow...")),"svg_creation_sharepoint_REST"==a.completedAction&&(cvjs_svgCreationContentLocation=a.contentLocation,cvjs_svgCreatedFromConversion=!0,"stream"==rest_contentResponse?(cvjs_debug&&console.log(" svg_creation_sharepoint_REST 1 svg server response "+a.contentStream),cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a.contentStream,void 0,!0)):"file"==rest_contentResponse?
(cvjs_debug&&console.log("svg_creation_sharepoint_REST 2 here we parse an svg server response "+a.contentLocation),cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a.contentLocation,void 0,!0)):cvjs_debug&&console.log("currently contentStream and contentLocation are implemented!! embedded to follow...")),"svg_creation"==a.completedAction&&(cvjs_svgCreationContentLocation=a.contentLocation,cvjs_svgCreatedFromConversion=!0,"stream"==rest_contentResponse?(cvjs_debug&&console.log(" 1 REST parse svg server response "+
a.contentStreamData+" "+a.contentLocation),contentStreamData=a.contentStreamData,cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a.contentStreamData,void 0,!0)):"file"==rest_contentResponse?(cvjs_debug&&console.log("2 REST parse svg server response "+a.contentLocationData+" "+a.contentLocation),contentLocationData=a.contentLocationData,cvjs_LoadDrawingInternal(floorplan_div_Array[cvjs_active_floorplan_div_nr],a.contentLocationData,void 0,!0)):cvjs_debug&&console.log("currently contentStream and contentLocation are implemented!! embedded to follow...")))}
function createjscssfile(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a)}else"css"==b&&(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a));cvjs_buildFolderTree_crossDomain&&(a=a.substring(0,a.indexOf("?dummy")),c.src=cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+a);return c}
var cvjs_currentLoadedDrawingAsString="",cvjs_loadCurrentLoadedDrawingAsString=!1;
function replacejscssfile(a,b,c){if(cvjs_initMasterBackground||"js"!=c){cvjs_debug&&console.log("replacejscssfile "+a+"  "+b+"  "+c);try{var d="js"==c?"src":"css"==c?"href":"none",e=document.getElementsByTagName("js"==c?"script":"css"==c?"link":"none");cvjs_buildFolderTree_crossDomain&&(b=cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+b);for(var f=e.length;0<=f;f--)if(e[f]&&null!=e[f].getAttribute(d)&&-1!=e[f].getAttribute(d).indexOf(a)){cvjs_debug&&console.log(" i  "+f+" "+e[f].getAttribute(d));
cvjs_loadMultipleRedlinesStickyNotes||cvjs_collab_mode||cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_debug&&console.log("replacejscssfile  create new element "+b+" old "+a);var g="";g="js"==c?createjscssfile(b+"?dummy="+Math.random(),c):createjscssfile(b,c);e[f].parentNode.replaceChild(g,e[f]);cvjs_debug&&console.log("replacejscssfile  replace child");js_loaded_flag=1}}catch(h){console.log(h)}cvjs_loadCurrentLoadedDrawingAsString&&(a=cvjs_serverHandlersPath+cvjs_serverLoadFileController,
c={},c.file=b,jQuery.ajax({url:a,type:"post",data:c,success:function(a){cvjs_currentLoadedDrawingAsString=a}}))}else cvjs_debug&&console.log("load base"),loadJSbase(b)}
function loadJSbase(a){cvjs_debug&&console.log("loadJSbase "+a);try{var b=document.createElement("script");b.type="application/javascript";b.src=a+"?dummy="+Math.random();cvjs_buildFolderTree_crossDomain&&(b.src=cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+a);document.body.appendChild(b)}catch(d){console.log(d)}if(cvjs_loadCurrentLoadedDrawingAsString){b=cvjs_serverHandlersPath+cvjs_serverLoadFileController;var c={};c.file=a;cvjs_debug&&console.log(" "+c.file);jQuery.ajax({url:b,
type:"post",data:c,success:function(a){cvjs_currentLoadedDrawingAsString=a}})}}var SVGloadFile="",SVGloadFlag=!1,cvjs_parse_SVG_blob=!1,cvjs_SVG_load_svg_fileName="";
function cvjs_LoadDrawing_SVG(a,b,c){jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();SVGloadFile=b;SVGloadFlag=!0;cvjs_parse_SVG_blob=!1;cvjs_SVG_load_svg_fileName=c;a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_LoadDrawingInternal(a,SVGloadFile,c,void 0)}var cvjs_SVG_basestring;
function cvjs_LoadDrawing_SVG_string(a,b,c,d){jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();printDebugFlag&&jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();cvjs_parse_SVG_blob=SVGloadFlag=!0;d&&(b=atob(b));cvjs_SVG_basestring=b;cvjs_SVG_load_svg_fileName=c;a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");-1<c.indexOf(".svg")||(c+=".svg");cvjs_LoadDrawingInternal(a,c,"",void 0)}
var _label,Header1,BackgroundColor="#FFF",rDrawing;function setView(a,b,c,d,e){viewBox[cvjs_active_floorplan_div_nr].X=b;viewBox[cvjs_active_floorplan_div_nr].Y=c;a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+d+" "+e+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}var bbox;
function ResizeVq(a,b){try{viewBoxWidth[cvjs_active_floorplan_div_nr]=a;viewBoxHeight[cvjs_active_floorplan_div_nr]=b;rpWidth[cvjs_active_floorplan_div_nr]=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr];rpHeight[cvjs_active_floorplan_div_nr]=actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr];var c=actualLLX[cvjs_active_floorplan_div_nr],d=actualLLY[cvjs_active_floorplan_div_nr],e=rpWidth[cvjs_active_floorplan_div_nr]/viewBoxWidth[cvjs_active_floorplan_div_nr],
f=rpHeight[cvjs_active_floorplan_div_nr]/viewBoxHeight[cvjs_active_floorplan_div_nr];zoomScale=e>f?f:e;var g=jQuery.parseJSON('{"viewBox" : "'+c+" "+d+" "+rpWidth[cvjs_active_floorplan_div_nr]+" "+rpHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(g);viewBox[cvjs_active_floorplan_div_nr].X=c;viewBox[cvjs_active_floorplan_div_nr].Y=d;viewBoxWidth[cvjs_active_floorplan_div_nr]=rpWidth[cvjs_active_floorplan_div_nr];viewBoxHeight[cvjs_active_floorplan_div_nr]=
rpHeight[cvjs_active_floorplan_div_nr];vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr]}catch(h){}}var thumb_loaded=!1,load_failures=0,SVGloadedFragment="",SVGfragmentIsLoaded=!1;
function SetUpVq(a,b,c){cvjs_debug&&console.log("In SetUpVq: cvjs_bitmapLoadFlag="+cvjs_bitmapLoadFlag+" floor: "+floor_loaded+" nodes: "+nodes_loaded+" thumb: "+thumbs_loaded);if(!cvjs_bitmapLoadFlag)if(floor_loaded&&nodes_loaded&&thumbs_loaded)if(load_failures=0,thumb_loaded=!1,SVGloadFlag){if("undefined"===typeof c)for(var d=0;d<floorplan_div_Array.length;d++)floorplan_div_Array_current_Drawing[d]==SVGloadFile&&(c=floorplan_div_Array[d]);cvjs_debug&&console.log("ZX5 Loading SVG "+SVGloadFile+" "+
SVGfragmentIsLoaded+"  floorplan_div "+c+" cvjs_active_floorplan_div_nr "+cvjs_active_floorplan_div_nr);if(!SVGfragmentIsLoaded){SVGfragmentIsLoaded=!0;try{cvjs_parse_SVG_blob?(cvjs_debug&&console.log("cvjs_parse_SVG_blob"),SVGloadedFragment=Snap.parse(cvjs_SVG_basestring),cvjs_debug&&console.log("before DoSetUpVq, SVGfragmentIsLoaded "+SVGfragmentIsLoaded),VqSetup=!1,cvjs_setUpSpacesHandlesDragBackground(c)):Snap.load(SVGloadFile,function(a){SVGloadedFragment=a;cvjs_debug&&console.log("before DoSetUpVq, SVGfragmentIsLoaded "+
SVGfragmentIsLoaded+" loadedFragment "+a);VqSetup=!1;cvjs_setUpSpacesHandlesDragBackground(c)})}catch(e){console.log("Err 1: "+e)}}}else cvjs_debug&&console.log("Standard .js load of DoSetUpVq"),cvjs_setUpSpacesHandlesDragBackground(c);else 80>load_failures?(load_failures++,jQuery("#loading").html(languageTable.languages[cvjs_currentLanguage].LoadingModal.Loading),setTimeout(function(){SetUpVq(a,b,c)},256)):(load_failures=0,jQuery("#loading").html("Failure to load drawing, floor: "+floor_loaded+" ,nodes: "+
nodes_loaded),jQuery("#looper").hide(),jQuery("#waitpane").show(),setTimeout(function(){jQuery("#waitpane").hide();jQuery("#looper").show()},5120))}var cvjs_addSVGClickHandler=!1;function cvjs_addSVGClickHandler_onLoad(a){cvjs_addSVGClickHandler=a}
var mousedown_SVGCanvas=function(){cvjs_debug&&console.log("SVG we have clicked "+jQuery(this).attr("id"))},page_change_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_SVGGroup=[],cvjs_svgviewBox,cvjs_svgHeight,cvjs_svgwidth,cvjs_svgScaleTrans,cvjs_svgTransX,cvjs_svgTransY,cvjs_svgScale,cvjs_svgWidthHeight100percent=!1,cvjs_leafletJS=!1;function cvjs_setLeafletJS(a){cvjs_leafletJS=a}
function pinch_zoom_two_fingers(a,b,c,d){try{if(firstFingerX=a,firstFingerY=b,totalDragStart=1,preventDrag=!1,secondFingerX=c,secondFingerY=d,totalDragStart=2,preventDrag=!0,deltaX=secondFingerX-firstFingerX,deltaY=secondFingerY-firstFingerY,deltaDynamic=Math.sqrt(deltaX*deltaX+deltaY*deltaY),(4<deltaDynamic-deltaDynamicPre||-4>deltaDynamic-deltaDynamicPre)&&flagOK){flagOK=!1;deltaDynamicPre=deltaDynamic;viewBox[cvjs_active_floorplan_div_nr].X=viewBox_initX[cvjs_active_floorplan_div_nr];viewBox[cvjs_active_floorplan_div_nr].Y=
viewBox_initY[cvjs_active_floorplan_div_nr];vBHo=viewBoxHeight_init[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth_init[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]=viewBoxWidth_init[cvjs_active_floorplan_div_nr];viewBoxHeight[cvjs_active_floorplan_div_nr]=viewBoxHeight_init[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase;viewBoxHeight[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase;viewBox[cvjs_active_floorplan_div_nr].X-=
(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)/2;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/2;zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];var e=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(e);
firstFingerX1=firstFingerX;firstFingerY1=firstFingerY;flagOK=!0}}catch(f){}}
function pinch_zoom_two_fingers_touchend(){viewBox[cvjs_active_floorplan_div_nr].X=viewBox_initX[cvjs_active_floorplan_div_nr];viewBox[cvjs_active_floorplan_div_nr].Y=viewBox_initY[cvjs_active_floorplan_div_nr];vBHo=viewBoxHeight_init[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth_init[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]=viewBoxWidth_init[cvjs_active_floorplan_div_nr];viewBoxHeight[cvjs_active_floorplan_div_nr]=viewBoxHeight_init[cvjs_active_floorplan_div_nr];
viewBoxWidth[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase;viewBoxHeight[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)/2;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/2;zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+
" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}var scroll_locationX,scroll_locationY,cvjs_scrollMouse_intialized=[];
function cvjs_addMouseWheelControls(a){if(!cvjs_scrollMouse_intialized[a]){cvjs_scrollMouse_intialized[a]=!0;var b=floorplan_div_Array[a];/Firefox/i.test(navigator.userAgent)?(jQuery("#"+b).mousemove(function(a){scroll_locationX=a.pageX;scroll_locationY=a.pageY}),jQuery("#"+b).bind("DOMMouseScroll",function(a){var c=scroll_locationX,e=scroll_locationY;0<a.originalEvent.detail?cvjs_zoomOutMouseWheel(c,e,b):cvjs_zoomInMouseWheel(c,e,b);return!1})):jQuery("#"+b).bind("mousewheel",function(a){var c=a.clientX,
e=a.clientY;0>a.originalEvent.wheelDelta?cvjs_zoomOutMouseWheel(c,e,b):cvjs_zoomInMouseWheel(c,e,b,c,e);return!1})}}var cvjs_SVGCallbackMethod;
function cvjs_addHandleFunc_findSVGcoordinates(a){cvjs_SVGCallbackMethod=a;canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?
global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.mousedown(mousedown_cvjs_svgCoord)}var mousedown_cvjs_svgCoord=function(a,b,c){cvjs_SVGCallbackMethod((b-delta_x)/global_scale,(c-delta_y)/global_scale);handleGroup.selectAll("handler").remove();handleGroup.remove()},cvjs_SVGCallbackMethod2;
function cvjs_addHandleFunc_clickSVGobject(a){cvjs_SVGCallbackMethod2=a;canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?
global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.mousedown(mousedown_cvjs_svgObject)}var mousedown_cvjs_svgObject=function(a,b,c){handleGroup.selectAll("handler").remove();handleGroup.remove()};
function cvjs_zoomWindow(a){cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");if(panWithThumb)try{layers_all.attr(hide),layer_thumb.attr(show),cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show),all_layer_off_thumb_on()}catch(b){console.log("ZoomWindow "+b)}lastY_r=lastX_r=firstY_r=firstX_r=0;flag_rectangle=!1;cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=
!0,cvjs_Community_Version||hideOnlyPop(),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a),cvjs_addHandleFunc_ZoomWindow(a),cvjs_debug&&console.log("Zoom Window!!!"+a))}
function cvjs_addHandleFunc_ZoomWindow(a){tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+a).width();canvas_height=jQuery("#"+a).height();a=jQuery("#"+a).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=
(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;a=viewBoxWidth[cvjs_active_floorplan_div_nr]/400;var b=document.querySelector(".ZW");var c="";var d=1;try{c=getComputedStyle(b),d=c.getPropertyValue("stroke-width"),d=parseFloat(d.substring(0,d.indexOf("px")))}catch(e){console.log("create_zoomwindow: "+
e)}void 0!=d&&0<d&&(a=cvjs_interactiveZoomWidthAdjustment?2*d:viewBoxWidth[cvjs_active_floorplan_div_nr]/2500*d*2);cvjs_debug&&console.log("  "+d+" ZW_strokeweight  box: "+viewBoxWidth[cvjs_active_floorplan_div_nr]+"  "+a);b="#0a0a0a";cvjs_blackBackground&&(b="#FEFEFE");a=jQuery.parseJSON('{"stroke": "'+b+'", "fill" : "none", "stroke-opacity": "0.95", "stroke-width": "'+a+'"}');tRubberBand_r.attr(a);handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_create_zoomwindow_rectangle,start_cvjs_create_zoomwindow_rectangle,stop_cvjs_create_zoomwindow_rectangle)}
function cvjs_removeHandleFunc_ZoomWindowRectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_objectIsZoomedExtents=!1}var cvjs_create_zoomStartX=0,cvjs_create_zoomStartY=0,start_cvjs_create_zoomwindow_rectangle=function(a,b){flag_rectangle=!1;console.log(a+" "+b+" ");cvjs_create_zoomStartX=a;cvjs_create_zoomStartY=b};zoomwindow_counter=0;
var move_cvjs_create_zoomwindow_rectangle=function(a,b,c,d){zoomwindow_counter++;c+=document.body.scrollLeft;d+=document.body.scrollTop;flag_rectangle?(lastX_r=a,lastY_r=b):(10<Math.abs(a)+Math.abs(b)?(firstX_r=cvjs_create_zoomStartX+document.body.scrollLeft,firstY_r=cvjs_create_zoomStartY+document.body.scrollTop,lastX_r=c,lastY_r=d):(firstX_r=c,firstY_r=d,lastX_r=a,lastY_r=b),flag_rectangle=!0);tPath_r="M"+(firstX_r-delta_x)/global_scale+","+(firstY_r-delta_y)/global_scale;tPath_r+="h"+lastX_r/global_scale+
"v"+lastY_r/global_scale+"h"+-lastX_r/global_scale+"v"+(-lastY_r/global_scale+" Z");1==zoomwindow_counter&&(zoomwindow_counter=0,tRubberBand_r.attr({path:tPath_r}))},stop_cvjs_create_zoomwindow_rectangle=function(){tRubberBand_r.attr({path:"M0,0"});0>lastX_r&&(firstX_r+=lastX_r);0>lastY_r&&(firstY_r+=lastY_r);viewBox[cvjs_active_floorplan_div_nr].X=(firstX_r-delta_x)/global_scale;viewBox[cvjs_active_floorplan_div_nr].Y=(firstY_r-delta_y)/global_scale;viewBoxHeight[cvjs_active_floorplan_div_nr]=Math.abs(lastY_r/
global_scale);viewBoxWidth[cvjs_active_floorplan_div_nr]=Math.abs(lastX_r/global_scale);var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);tRubberBand_r.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});cvjs_removeHandleFunc_ZoomWindowRectangle();
cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;if(panWithThumb)try{layers_all.attr(show),layer_thumb.attr(hide),cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show),all_layer_on_thumb_off()}catch(b){console.log("ZoomWindowEnd "+b)}cvjs_zoomZeroWidth();cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)};
function cvjs_panRight(){cvjs_Community_Version||hideOnlyPop();viewBox[cvjs_active_floorplan_div_nr].X+=viewBoxWidth[cvjs_active_floorplan_div_nr]/10;var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);cvjs_objectIsZoomedExtents=!1}
function cvjs_panUp(){cvjs_Community_Version||hideOnlyPop();viewBox[cvjs_active_floorplan_div_nr].Y-=viewBoxHeight[cvjs_active_floorplan_div_nr]/10;var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);cvjs_objectIsZoomedExtents=!1}
function cvjs_panDown(){cvjs_Community_Version||hideOnlyPop();viewBox[cvjs_active_floorplan_div_nr].Y+=viewBoxHeight[cvjs_active_floorplan_div_nr]/10;var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);cvjs_objectIsZoomedExtents=!1}
function cvjs_panLeft(){cvjs_Community_Version||hideOnlyPop();viewBox[cvjs_active_floorplan_div_nr].X-=viewBoxWidth[cvjs_active_floorplan_div_nr]/10;var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);cvjs_objectIsZoomedExtents=!1}
function cvjs_zoomExtents(a){cvjs_resetZoomPan(a)}
function cvjs_resetZoomPan(a){cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(cvjs_tmsMinLineWidth_init);cvjs_addedObjectsToExtents=!0;if("undefined"===typeof a)return!1;cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_debug&&console.log("cvjs_resetZoomPan: cvjs_active_floorplan_div_nr "+cvjs_active_floorplan_div_nr+" rpWidth[cvjs_active_floorplan_div_nr] "+
rpWidth[cvjs_active_floorplan_div_nr]+" rpHeight[cvjs_active_floorplan_div_nr] "+rpHeight[cvjs_active_floorplan_div_nr]+"  "+a);bbox=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();try{layers_all.attr(show),cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show),layer_thumb.attr(hide)}catch(c){}cvjs_Community_Version||hideOnlyPop();if(cvjs_addedObjectsToExtents){cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({transform:"T0,0S1.0"});bbox=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();
if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]&&(bbox=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox(),cvjs_customLayerContentAdded)){a=cvjs_customLayerContent.getBBox();var b=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox();a.x<b.x&&(bbox.x=a.x);a.y<b.y&&(bbox.y=a.y);cvjs_debug&&console.log("YYYYYYYYYYYYYYY"+a.x+" "+a.width);cvjs_debug&&console.log("YYYYYYYYYYYYYYY"+b.x+" "+b.width);a.x+a.width>b.x+b.width&&(bbox.width=a.x+a.width-b.x);a.y+a.height>b.y+b.height&&(bbox.height=
a.x+a.width-b.y)}cvjs_debug&&console.log("bounding box rpaper "+bbox.x+"  "+bbox.y+" "+bbox.width+" "+bbox.height);cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({transform:"T0,0S3.0"});viewBox[cvjs_active_floorplan_div_nr].X=bbox.x;viewBox[cvjs_active_floorplan_div_nr].Y=bbox.y;viewBoxWidth[cvjs_active_floorplan_div_nr]=bbox.width;viewBoxHeight[cvjs_active_floorplan_div_nr]=bbox.height;vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];zoomScale=
1;a='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }';a=jQuery.parseJSON(a);cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}else cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({transform:"T0,0S1.0"}),viewBox[cvjs_active_floorplan_div_nr].X=actualLLX[cvjs_active_floorplan_div_nr],viewBox[cvjs_active_floorplan_div_nr].Y=actualLLY[cvjs_active_floorplan_div_nr],
viewBoxWidth[cvjs_active_floorplan_div_nr]=rpWidth[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr]=rpHeight[cvjs_active_floorplan_div_nr],vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr],vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr],zoomScale=1,a='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+rpWidth[cvjs_active_floorplan_div_nr]+" "+rpHeight[cvjs_active_floorplan_div_nr]+'" }',a=jQuery.parseJSON(a),cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a),
cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({transform:"T0,0S3.0"});cvjs_objectIsZoomedExtents=!0;cvjs_zoomZeroWidth()}
function cvjs_resetZoomPan_SetMasterBackground(a){void 0!=a&&(cvjs_active_floorplan_div_nr=a);cvjs_debug&&console.log("cvjs_resetZoomPan_SetMasterBackground: cvjs_active_floorplan_div_nr "+cvjs_active_floorplan_div_nr+" rpWidth[cvjs_active_floorplan_div_nr] "+rpWidth[cvjs_active_floorplan_div_nr]+" rpHeight[cvjs_active_floorplan_div_nr] "+rpHeight[cvjs_active_floorplan_div_nr]);if(jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).is(":visible")){try{cvjs_masterBackground[cvjs_active_floorplan_div_nr].remove()}catch(d){console.log(d)}cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();
try{layers_all.attr(show),cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show),layer_thumb.attr(hide)}catch(d){}cvjs_Community_Version||hideOnlyPop();a=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]&&(a=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox(),cvjs_customLayerContentAdded)){var b=cvjs_customLayerContent.getBBox(),c=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox();b.x<c.x&&(a.x=
b.x);b.y<c.y&&(a.y=b.y);cvjs_debug&&console.log("YYYYYYYYYYYYYYY"+b.x+" "+b.width);cvjs_debug&&console.log("YYYYYYYYYYYYYYY"+c.x+" "+c.width);b.x+b.width>c.x+c.width&&(a.width=b.x+b.width-c.x);b.y+b.height>c.y+c.height&&(a.height=b.x+b.width-c.y)}viewBox[cvjs_active_floorplan_div_nr].X=a.x;viewBox[cvjs_active_floorplan_div_nr].Y=a.y;viewBoxWidth[cvjs_active_floorplan_div_nr]=a.width;viewBoxHeight[cvjs_active_floorplan_div_nr]=a.height;vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];
zoomScale=1;a='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }';a=jQuery.parseJSON(a);cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);void 0!=cvjs_masterBackground[cvjs_active_floorplan_div_nr]&&cvjs_masterBackground[cvjs_active_floorplan_div_nr].remove();a="#master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr];void 0!=cvjs_masterBackground[cvjs_active_floorplan_div_nr]&&
jQuery(a).remove();void 0!=cvjs_masterBackground[cvjs_active_floorplan_div_nr]&&jQuery(a).empty();cvjs_masterBackground[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(viewBox[cvjs_active_floorplan_div_nr].X,viewBox[cvjs_active_floorplan_div_nr].Y,viewBoxWidth[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr]));cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#fff","fill-opacity":"0.01",
"stroke-width":0});cvjs_masterBackground[cvjs_active_floorplan_div_nr].data("id","master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({id:"master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]});cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].prepend(cvjs_masterBackground[cvjs_active_floorplan_div_nr]);actualLLX[cvjs_active_floorplan_div_nr]=viewBox[cvjs_active_floorplan_div_nr].X;actualLLY[cvjs_active_floorplan_div_nr]=
viewBox[cvjs_active_floorplan_div_nr].Y;actualURX[cvjs_active_floorplan_div_nr]=actualLLX[cvjs_active_floorplan_div_nr]+viewBoxWidth[cvjs_active_floorplan_div_nr];actualURY[cvjs_active_floorplan_div_nr]=actualLLY[cvjs_active_floorplan_div_nr]+viewBoxHeight[cvjs_active_floorplan_div_nr];cvjs_redlineThickness_scaleFactor=cvjs_redlineThickness_drawingFactor*Math.sqrt(Math.pow(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],2)+Math.pow(actualURX[cvjs_active_floorplan_div_nr]-
actualLLX[cvjs_active_floorplan_div_nr],2));cvjs_Community_Version||cvjs_checkLicense();cvjs_objectIsZoomedExtents=!0}else viewBox[cvjs_active_floorplan_div_nr].X=actualLLX[cvjs_active_floorplan_div_nr],viewBox[cvjs_active_floorplan_div_nr].Y=actualLLY[cvjs_active_floorplan_div_nr],viewBoxWidth[cvjs_active_floorplan_div_nr]=rpWidth[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr]=rpHeight[cvjs_active_floorplan_div_nr],vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr],vBWo=
viewBoxWidth[cvjs_active_floorplan_div_nr],zoomScale=1,a='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+rpWidth[cvjs_active_floorplan_div_nr]+" "+rpHeight[cvjs_active_floorplan_div_nr]+'" }',a=jQuery.parseJSON(a),cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}
function cvjs_zoomIn(a){"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg");cvjs_Community_Version||hideOnlyPop();vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]/=DefaultZoomFactor;viewBoxHeight[cvjs_active_floorplan_div_nr]/=DefaultZoomFactor;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-
vBWo)/2;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/2;a=jQuery.parseJSON('{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];cvjs_objectIsZoomedExtents=!1;cvjs_zoomZeroWidth();
cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)}
function cvjs_zoomInMouseWheel(a,b,c){"undefined"!==typeof c&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c));var d=jQuery("#"+c).width(),e=jQuery("#"+c).height();c=jQuery("#"+c).position();var f=d/viewBoxWidth[cvjs_active_floorplan_div_nr],g=e/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=f<g?f:g;d=(d-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;e=(e-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-
viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;a+=document.body.scrollLeft;b+=document.body.scrollTop;a=((a-d)/global_scale-viewBox[cvjs_active_floorplan_div_nr].X)/viewBoxWidth[cvjs_active_floorplan_div_nr];b=((b-e)/global_scale-viewBox[cvjs_active_floorplan_div_nr].Y)/viewBoxHeight[cvjs_active_floorplan_div_nr];cvjs_Community_Version||hideOnlyPop();vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]/=
DefaultZoomFactor_mouseWheel;viewBoxHeight[cvjs_active_floorplan_div_nr]/=DefaultZoomFactor_mouseWheel;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)*a;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)*b;b=jQuery.parseJSON('{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+
'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(b);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];cvjs_objectIsZoomedExtents=!1;cvjs_zoomZeroWidth();cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)}
function cvjs_zoomOut(a){"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg");cvjs_Community_Version||hideOnlyPop();vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]*=DefaultZoomFactor;viewBoxHeight[cvjs_active_floorplan_div_nr]*=DefaultZoomFactor;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-
vBWo)/2;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/2;a=jQuery.parseJSON('{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];cvjs_objectIsZoomedExtents=!1;cvjs_zoomZeroWidth();
cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)}function cvjs_zoomInOutCustomFactor(a,b){cvjs_zoomOutCustomFactor(a,b)}
function cvjs_zoomOutCustomFactor(a,b){"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_Community_Version||hideOnlyPop();vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]*=b;viewBoxHeight[cvjs_active_floorplan_div_nr]*=b;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)/2;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-
vBHo)/2;a=jQuery.parseJSON('{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];cvjs_objectIsZoomedExtents=!1;cvjs_zoomZeroWidth();cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/
cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)}
function cvjs_zoomOutMouseWheel(a,b,c){"undefined"!==typeof c&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c));var d=jQuery("#"+c).width(),e=jQuery("#"+c).height();c=jQuery("#"+c).position();var f=d/viewBoxWidth[cvjs_active_floorplan_div_nr],g=e/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=f<g?f:g;d=(d-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;e=(e-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/
2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;a+=document.body.scrollLeft;b+=document.body.scrollTop;a=((a-d)/global_scale-viewBox[cvjs_active_floorplan_div_nr].X)/viewBoxWidth[cvjs_active_floorplan_div_nr];b=((b-e)/global_scale-viewBox[cvjs_active_floorplan_div_nr].Y)/viewBoxHeight[cvjs_active_floorplan_div_nr];cvjs_Community_Version||hideOnlyPop();vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]*=
DefaultZoomFactor_mouseWheel;viewBoxHeight[cvjs_active_floorplan_div_nr]*=DefaultZoomFactor_mouseWheel;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)*a;viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)*b;b=jQuery.parseJSON('{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+
'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(b);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];cvjs_objectIsZoomedExtents=!1;cvjs_zoomZeroWidth();cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)}
function cvjs_zoomPositionFactor(a,b,c,d,e,f){"undefined"!==typeof e&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(e));var g=jQuery("#"+e).width(),h=jQuery("#"+e).height();jQuery("#"+e).position();e=g/viewBoxWidth[cvjs_active_floorplan_div_nr];h/=viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=e<h?e:h;cvjs_Community_Version||hideOnlyPop();vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]*=f;viewBoxHeight[cvjs_active_floorplan_div_nr]*=
f;viewBox[cvjs_active_floorplan_div_nr].X=c-a/global_scale;viewBox[cvjs_active_floorplan_div_nr].Y=d-b/global_scale;a='{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }';console.log("attr_l "+a);a=jQuery.parseJSON(a);cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];
cvjs_objectIsZoomedExtents=!1;cvjs_zoomZeroWidth();cvjs_interactiveZoomWidthAdjustment&&cvjs_adjustMinimumLineThickness_Value(viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_firstLoadViewBoxW*cvjs_tmsMinLineWidth_init)}
function cvjs_redrawViewBox(){cvjs_Community_Version||hideOnlyPop();viewBox[cvjs_active_floorplan_div_nr].X-=.01;var a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);cvjs_debug&&console.log("after pan 1")}function d2h(a){var b=a.toString(16);return 16>a?"0"+b:b}
function h2d(a){return parseInt(a,16)}function rgb2hex(a,b,c){return d2h(a)+d2h(b)+d2h(c)}var fnArr_FileName=[],fnArr_ShortName=[],fnArr_listdirectory_FileName=[],fnArr_listdirectory_ShortName=[];
function cvjs_LoadTopIconMenuViewing(a){a.lastIndexOf("_svg")==a.length-4&&(a=a.substring(0,a.length-4));jQuery("#topIconMenu_placeholder_1_"+a+"_svg").html("");cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0","none",a,"cvjsIcon_base_left.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList);var b=48;0==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(b+=420);1==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(b+=540);2==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&
(b+=330);3==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(b+=300);4==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(b+=360);5==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(b+=120);jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({width:b});0==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_1","cvjs_toggleBlackWhite",a,"cvjsIcon_dra_p1_4_1_ToggleBlackWhite.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Toggle),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_2","cvjs_setBackgroundColor",a,"cvjsIcon_dra_p1_4_2_BackgroundColor.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Background),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_2","cvjs_interactiveSearchText",a,"cvjsIcon_dra_p1_5_2_SearchText.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Search),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_2","cvjs_Print",
a,"cvjsIcon_dra_p1_1_2_Print.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Print),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_1","cvjs_LayerList",a,"cvjsIcon_dra_p1_1_1_LayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_8_1","cvjs_Measurement",a,"cvjsIcon_dra_p1_8_1_Measurement.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Measurement),cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_p_8_2","cvjs_calibrateMeasurement",a,"cvjsIcon_dra_p1_8_2_CalibrateMeasurement.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Calibrate),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_9_1","cvjs_displayMagnifyingGlass",a,"cvjsIcon_dra_p1_9_1_ToggleBirdsEyeWindow.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.BirdsEye),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_9_2","cvjs_activateLineThicknessModal",
a,"cvjsIcon_dra_p1_9_2_AdjustLineThickness.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LineThickness),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_2","cvjs_interactiveLayerOff",a,"cvjsIcon_dra_p1_6_2_LayerOff.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerOff),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_1","cvjs_swapLayersInDrawing",a,"cvjsIcon_dra_p1_7_1_SwapLayers.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.SwapLayers),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_2","cvjs_allLayersInDrawingOn",a,"cvjsIcon_dra_p1_7_2_LayerOn.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.AllLayersOn),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_1","cvjs_displayInformationModal_Mode",0,"cvjsIcon_dra_p1_6_1_Information.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.About));0==cvjs_loadTopIconMenuVisible[cvjs_interfaceCounterIndex(a)]&&jQuery("#topIconMenu_placeholder_1_"+
a+"_svg").hide()}var cvjs_loadCADViewerLanguageName="English",cvjs_loadCADViewerLanguageLocation="/app/cv/cv-pro/language_table/cadviewerProLanguage.xml",cvjs_apiLoadCADViewerLanguage=!1;function cvjs_loadCADViewerLanguage(a,b){cvjs_apiLoadCADViewerLanguage=!0;cvjs_loadCADViewerLanguageName=a;null!=b&&void 0!=b&&(cvjs_loadCADViewerLanguageLocation=b)}
function cvjs_setLayerColor(a,b){-1==b.indexOf("#")&&(b="#"+b);a=("layer_"+a).replace(/ /g,"_20_");a=a.toLowerCase();console.log("cvjs_setLayerColor "+b+" "+a);jQuery("*[id]").each(function(){var a=jQuery(this).attr("id");oArr[a]||(oArr[a]=!0)});for(var c in oArr)try{var d="#"+c;if(0==c.indexOf("cv_")&&void 0!=jQuery(d).parent().parent().attr("id")&&0==jQuery(d).parent().parent().attr("id").toLowerCase().indexOf(a)&&jQuery(d).parent().parent().attr("id").length==a.length)try{jQuery(d).css("stroke",
b)}catch(e){console.log("err "+e)}else if(0==c.indexOf("cv_")&&void 0!=jQuery(d).parent().parent().parent().attr("id")&&0==jQuery(d).parent().parent().parent().attr("id").toLowerCase().indexOf(a)&&jQuery(d).parent().parent().parent().attr("id").length==a.length)try{jQuery(d).css("fill",b)}catch(e){console.log("err "+e)}}catch(e){cvjs_debug&&console.log("colorLayer err:"+e)}}
function cvjs_setLanguage(a){try{cvjs_currentLanguage=1;for(var b=0;b<languageTable.numberOfLanguages;b++)0==a.toLowerCase().indexOf(languageTable.languages[b].thisLanguage.toLowerCase())&&a.length==languageTable.languages[b].thisLanguage.length&&(cvjs_currentLanguage=b)}catch(c){console.log(c)}try{for(b=0;b<languageTable.numberOfLanguages;b++)0==a.indexOf(languageTable.languages[b].languageCode)&&(cvjs_currentLanguage=b)}catch(c){console.log(c)}}
function cvjs_getLanguages(){var a="";try{for(var b=0;b<languageTable.numberOfLanguages;b++)a+=languageTable.languages[b].languageCode+":"+languageTable.languages[b].thisLanguage+";"}catch(c){console.log(c)}return a}var cvjs_ServerLocation="",cvjs_ServerUrl="",cvjs_ServerBackEndUrl="";function cvjs_getServerLocation(){return cvjs_ServerLocation}function cvjs_getServerURL(){return cvjs_ServerUrl}
function cvjs_returnSpaceObjectSelected(){cvjs_debug&&console.log(" cvjs_returnSpaceObjectSelected "+cvjs_lastObj[cvjs_active_floorplan_div_nr]);try{return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("id")}catch(a){console.log("cvjs_returnSpaceObjectSelected: "+a)}return-1}function cvjs_setServerBackEndUrl(a){cvjs_ServerBackEndUrl=a}function cvjs_getServerBackEndUrl(){return cvjs_ServerBackEndUrl}
function cvjs_setServerLocationURL(a,b){cvjs_ServerLocation=a;cvjs_ServerUrl=b;cvjs_setServerHandersPath_called||(cvjs_serverHandlersPath=b+"php/",cvjs_phpPath=b+"php/");cvjs_printObjectPathAbsolute_called||(cvjs_printObjectPathAbsolute=cvjs_ServerUrl+"/php/temp_print/",cvjs_printObjectPathAbsoluteServer=cvjs_ServerLocation+"/php/temp_print/",cvjs_printObjectPathRelativeFlag=!1)}
var cvjs_TopIconMenu_pageNumber=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cvjs_TopIconMenu_maxPageNumber=[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],cvjs_topIconMenu=[Object,Object,Object,Object,Object,Object,Object,Object,Object,Object,Object],cvjs_loadTopIconMenuVisible=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_loadTopIconNavigationVisible=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_loadTopIconMenuXML=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_topIconMenuXML="cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml cadviewerjs_menu_all_items.xml".split(" "),
cvjs_topIconMenuXML_location="/app/js/menu_config/",cvjs_apiLoadIconMenuXML=!1;function cvjs_setTopMenuXML(a,b,c){null!=c&&void 0!=c&&(cvjs_topIconMenuXML_location=c);cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]=!0;cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(a)]=b}function cvjs_setCustomTopMenuXML(a,b){cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(b)]=!0;cvjs_topIconMenuXML[cvjs_interfaceCounterIndex(b)]=a}
function cvjs_displayTopMenuIconBar(a,b){var c=cvjs_interfaceCounterIndex(b);0<c||(interfaceCounter++,c=interfaceCounter,interfaceCounterDiv[c]=b+"_svg");cvjs_loadTopIconMenuVisible[c]=a}function cvjs_displayTopNavigationBar(a,b){var c=cvjs_interfaceCounterIndex(b);0<c||(interfaceCounter++,c=interfaceCounter,interfaceCounterDiv[c]=b+"_svg");cvjs_loadTopIconNavigationVisible[c]=a}
function cvjs_changePreviousIconPage_TopIconMenu(a){cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]--;0>cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]=cvjs_TopIconMenu_maxPageNumber[cvjs_interfaceCounterIndex(a)]-1);cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]?cvjs_LoadTopIconMenuXML(a,cvjs_topIconMenu[cvjs_interfaceCounterIndex(a)]):cvjs_LoadTopIconMenu(a)}
function cvjs_changeNextIconPage_TopIconMenu(a){cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]++;cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]>=cvjs_TopIconMenu_maxPageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]=0);cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]?cvjs_LoadTopIconMenuXML(a,cvjs_topIconMenu[cvjs_interfaceCounterIndex(a)]):cvjs_LoadTopIconMenu(a)}
function cvjs_LoadTopNavigationMenu(a){a.lastIndexOf("_svg")==a.length-4&&(a=a.substring(0,a.length-4));jQuery("#topIconMenu_placeholder_2_"+a+"_svg").html("");jQuery("#topIconMenu_placeholder_2_"+a+"_svg").append('<div id="floatNavigationMenu_topBar_'+a+'" style="flex-direction:row;" class="changePagebox_topBar"><a class="cvjs_rotateforward_topBar" id="cvjs_rotateforward_topBar_'+a+'" ></a><a class="cvjs_rotateback_topBar" id="cvjs_rotateback_topBar_'+a+'" ></a><a class="cvjs_fastback_topBar" id="cvjs_fastback_topBar_'+
a+'" ></a><a class="cvjs_back_topBar" id="cvjs_back_topBar_'+a+'" ></a><a class="cvjs_enterpagenumber_topBar" id="cvjs_enterpagenumber_topBar_'+a+'" ></a><a class="cvjs_selectpagefromlist_topBar" id="cvjs_selectpagefromlist_topBar_'+a+'" ></a><div class="floatpagemenuText1_topBar" id="floatpagemenuText1_topBar_'+a+'_svg" style="flex-direction:row;">nr </div><div class="floatpagemenuText2_topBar" id="floatpagemenuText2_topBar_'+a+'_svg" style="flex-direction:row;">page name</div><a class="cvjs_forward_topBar" id="cvjs_forward_topBar_'+
a+'" ></a><a class="cvjs_fastforward_topBar" id="cvjs_fastforward_topBar_'+a+'" ></a></div>');jQuery("#cvjs_rotateforward_topBar_"+a).on("click",function(){cvjs_rotateForward(a)});jQuery("#cvjs_rotateback_topBar_"+a).on("click",function(){cvjs_rotateBackward(a)});jQuery("#cvjs_fastback_topBar_"+a).on("click",function(){cvjs_firstPage(a)});jQuery("#cvjs_back_topBar_"+a).on("click",function(){cvjs_previousPage(a)});jQuery("#cvjs_enterpagenumber_topBar_"+a).on("click",function(){cvjs_enterPageChangeNumber(a)});
jQuery("#cvjs_selectpagefromlist_topBar_"+a).on("click",function(){cvjs_PageChangeList(a)});jQuery("#cvjs_fastforward_topBar_"+a).on("click",function(){cvjs_lastPage(a)});jQuery("#cvjs_forward_topBar_"+a).on("click",function(){cvjs_nextPage(a)});cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_rotateforward_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.RotateForward,1);cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_rotateback_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.RotateBack,
1);cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_fastback_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.First,1);cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_back_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.Previous,1);cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_enterpagenumber_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.EnterPage,1);cvjs_navigationMenuItemHighlight(a,
"topIconMenu_placeholder_2","cvjs_selectpagefromlist_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.SelectPageFromList,2);cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_forward_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.Next,2);cvjs_navigationMenuItemHighlight(a,"topIconMenu_placeholder_2","cvjs_fastforward_topBar",languageTable.languages[cvjs_currentLanguage].PageModal.Last,2);jQuery(window).trigger("resize");0==cvjs_loadTopIconNavigationVisible[cvjs_interfaceCounterIndex(a)]&&
jQuery("#topIconMenu_placeholder_2_"+a+"_svg").hide()}
function cvjs_LoadTopIconMenu(a){a.lastIndexOf("_svg")==a.length-4&&(a=a.substring(0,a.length-4));jQuery("#topIconMenu_placeholder_1_"+a+"_svg").html("");cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0","none",a,"cvjsIcon_base_left.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList);cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0_2prev","cvjs_changePreviousIconPage_TopIconMenu",a,"cvjsIcon_dra_p1_0_2_PreviousMenu_small.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.PreviousPage);
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0_2","cvjs_changeNextIconPage_TopIconMenu",a,"cvjsIcon_dra_p1_0_2_NextMenu_small.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.NextMenuPage);cvjs_interfaceCounterIndex(a);cvjs_interfaceCounterIndex(a);cvjs_interfaceCounterIndex(a);cvjs_interfaceCounterIndex(a);cvjs_interfaceCounterIndex(a);cvjs_interfaceCounterIndex(a);jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({width:100});0==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&
(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_1","cvjs_LayerList",a,"cvjsIcon_dra_p1_1_1_LayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_2","cvjs_Print",a,"cvjsIcon_dra_p1_1_2_Print.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Print),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_1","cvjs_toggleBlackWhite",a,"cvjsIcon_dra_p1_4_1_ToggleBlackWhite.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Toggle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_2","cvjs_setBackgroundColor",a,"cvjsIcon_dra_p1_4_2_BackgroundColor.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Background),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_1","cvjs_openFileLoadToServer",a,"cvjsIcon_dra_p1_5_1_FileLoad.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.FileLoad),cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_p_5_2","cvjs_interactiveSearchText",a,"cvjsIcon_dra_p1_5_2_SearchText.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Search),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_1","cvjs_displayInformationModal_Mode",0,"cvjsIcon_dra_p1_6_1_Information.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.About),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_2","cvjs_interactiveLayerOff",a,"cvjsIcon_dra_p1_6_2_LayerOff.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerOff),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_1","cvjs_swapLayersInDrawing",a,"cvjsIcon_dra_p1_7_1_SwapLayers.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.SwapLayers),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_2","cvjs_allLayersInDrawingOn",a,"cvjsIcon_dra_p1_7_2_LayerOn.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.AllLayersOn),cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_p_8_1","cvjs_Measurement",a,"cvjsIcon_dra_p1_8_1_Measurement.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Measurement),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_8_2","cvjs_calibrateMeasurement",a,"cvjsIcon_dra_p1_8_2_CalibrateMeasurement.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Calibrate),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_9_1","cvjs_displayMagnifyingGlass",a,"cvjsIcon_dra_p1_9_1_ToggleBirdsEyeWindow.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.BirdsEye),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_9_2","cvjs_activateLineThicknessModal",a,"cvjsIcon_dra_p1_9_2_AdjustLineThickness.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LineThickness));1==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_9_1","cvjs_mergeDXFDWG",a,"cvjsIcon_dra_p2_9_1_MergeRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.MergeAsDXF),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_9_2","cvjs_publishPDF",a,"cvjsIcon_dra_p2_9_2_PublishPDF.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.PublishAsPDF),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_2","cvjs_loadStickyNotesRedlinesUser",a,"cvjsIcon_dra_p2_1_2_LoadRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.LoadRedline),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_1","cvjs_saveStickyNotesRedlinesUser",
a,"cvjsIcon_dra_p2_1_1_SaveRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.SaveRedline),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_1","cvjs_setRedlineColor",a,"cvjsIcon_dra_p2_3_1_RedlineColor.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Color),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_2","cvjs_setRedlineThickness",a,"cvjsIcon_dra_p2_3_2_RedlineThickness.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Thickness),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_1","cvjs_drawStickyNote",a,"cvjsIcon_dra_p2_4_1_StickyNote.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.StickyNote),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_8_2","cvjs_drawRedlineText",a,"cvjsIcon_dra_p2_8_2_RedlineText.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Text),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_1","cvjs_drawRedline_Freehand",a,
"cvjsIcon_dra_p2_5_1_FreehandRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Freehand),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_2","cvjs_drawRedlineEllipseCloud",a,"cvjsIcon_dra_p2_5_2_RedlineCloud.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Cloud),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_1","cvjs_drawRedlineFilledPolygon",a,"cvjsIcon_dra_p2_6_1_RedlineFilledPolygon.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.FilledPolygon),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_2","cvjs_drawRedlinePolyline",a,"cvjsIcon_dra_p2_6_2_RedlinePolygon.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Polyline),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_1","cvjs_drawRedlineFilledRectangle",a,"cvjsIcon_dra_p2_7_1_RedlineFilledRect.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.FilledRectangle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_2",
"cvjs_drawRedlineRectangle",a,"cvjsIcon_dra_p2_7_2_RedlineRect.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Rectangle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_8_1","cvjs_drawRedlineArrow",a,"cvjsIcon_dra_p2_8_1_RedlineArrow.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Arrow),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_1","cvjs_deleteSingleRedline",a,"cvjsIcon_dra_p2_2_1_DeleteSingleRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.DeleteSingle),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_2","cvjs_deleteLastRedline",a,"cvjsIcon_dra_p2_2_2_DeleteLastRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.DeleteLast),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_2","cvjs_clearCurrentRedline",a,"cvjsIcon_dra_p2_4_2_ClearRedlines.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.ClearAll));2==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_p_2_2","cvjs_insertImageLink",a,"cvjsIcon_dra_p3_2_2_InsertImageLink.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.InsertLink),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_1","cvjs_loadAllImageLinks",a,"cvjsIcon_dra_p3_2_1_LoadImageLinks.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.LoadLink),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_1","cvjs_saveAllImageLinks",a,"cvjsIcon_dra_p3_3_1_SaveImageLinks.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.SaveLink),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_2","cvjs_clearAllImageLinks",a,"cvjsIcon_dra_p3_3_2_ClearImageLinks.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.ClearLink),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_1","cvjs_quickCount",a,"cvjsIcon_dra_p3_4_1_QuickCount.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.QuickCount),cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_p_4_2","cvjs_showMeCounts",a,"cvjsIcon_dra_p3_4_2_SummaryQuickCount.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.CountSum),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_1","cvjs_clearQuickCounts",a,"cvjsIcon_dra_p3_5_1_ClearQuickCount.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.ClearCount),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p3_1_1","cvjs_compareDrawings_LoadSecondDrawing",a,
"cvjsIcon_dra_p4_1_1_LoadSecondCompare.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareLoad),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p3_1_2","cvjs_compareDrawings_ToggleDrawings",a,"cvjsIcon_dra_p4_1_2_ToggleCompareIndividually.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareToggle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p3_2_1","cvjs_compareDrawings_ToggleDrawingOverlay",a,"cvjsIcon_dra_p4_2_1_ToggleCompareOverlaid.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareToggleOverlay),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p3_2_2","cvjs_exitCompareDrawings",a,"cvjsIcon_dra_p4_2_2_ExitCompare.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareExit));3==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_2x","cvjs_loadSpaceObjectsUser",a,"cvjsIcon_dra_p5_7_1_LoadSpaceOverlay.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.LoadRedline),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_2","cvjs_changeSpaceObjectDisplayMode",a,"cvjsIcon_dra_p5_1_2_SpaceObjectEditMode.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Mode),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_2","cvjs_addPolygonSpaceObject",a,"cvjsIcon_dra_p5_3_2_PolygonSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Polygon),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_1","cvjs_addRectangleSpaceObject",a,"cvjsIcon_dra_p5_3_1_RectangleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Rect),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_1","cvjs_addCircleSpaceObject",a,"cvjsIcon_dra_p5_4_1_CircleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Circle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_2","cvjs_copyCircleSpaceObject",
a,"cvjsIcon_dra_p5_4_2_CopyCircleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.CopyCircle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_1","cvjs_deleteSpaceObject",a,"cvjsIcon_dra_p5_5_1_DeleteSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Delete),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_1","cvjs_loadDrawingsWithSpaceObjects",a,"cvjsIcon_dra_p5_2_1_LoadPreProcessSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Load),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_2","cvjs_LayerListSpaceObject",a,"cvjsIcon_dra_p5_2_2_SpaceObjectsLayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.LayerList));4==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_1_1","cvjs_spaceObjectSettings",a,"cvjsIcon_dra_p5_1_1_Settings.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Settings),cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_p_1_2","cvjs_changeSpaceObjectDisplayMode",a,"cvjsIcon_dra_p5_1_2_SpaceObjectEditMode.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Mode),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_1","cvjs_loadDrawingsWithSpaceObjects",a,"cvjsIcon_dra_p5_2_1_LoadPreProcessSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Load),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_2_2","cvjs_LayerListSpaceObject",
a,"cvjsIcon_dra_p5_2_2_SpaceObjectsLayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.LayerList),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_1","cvjs_addRectangleSpaceObject",a,"cvjsIcon_dra_p5_3_1_RectangleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Rect),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_3_2","cvjs_addPolygonSpaceObject",a,"cvjsIcon_dra_p5_3_2_PolygonSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Polygon),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_1","cvjs_addCircleSpaceObject",a,"cvjsIcon_dra_p5_4_1_CircleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Circle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_4_2","cvjs_copyCircleSpaceObject",a,"cvjsIcon_dra_p5_4_2_CopyCircleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.CopyCircle),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_1",
"cvjs_deleteSpaceObject",a,"cvjsIcon_dra_p5_5_1_DeleteSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Delete),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_5_2","cvjs_setSpacePolygonOnLayer",a,"cvjsIcon_dra_p5_5_2_MakeSpaceObjectOnPolygon.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.SelectPolygon),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_1","cvjs_displaySpaceObjectsStructure",a,"cvjsIcon_dra_p5_6_1_SpaceObjectDisplayMode.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Publish),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_6_2","cvjs_saveAsSVG",a,"cvjsIcon_dra_p5_6_2_DownloadProcessedSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.DownloadSVG));5==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_1","cvjs_start_collab",a,"cvjsIcon_dra_p4_7_1_JoinCollab.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CollaborationJoinSession),
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_7_2","cvjs_make_collab_presenter",a,"cvjsIcon_dra_p4_7_2_TakeControl.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CollaborationTakeControl),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_8_1","cvjs_clear_collab_redline",a,"cvjsIcon_dra_p4_8_1_ClearCollabRedlines.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CollaborationClearSession),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1",
"cvjs_p_8_2","cvjs_stop_collab",a,"cvjsIcon_dra_p4_8_2_LeaveCollabSession.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CollaborationLeaveSession));0==cvjs_loadTopIconMenuVisible[cvjs_interfaceCounterIndex(a)]&&jQuery("#topIconMenu_placeholder_1_"+a+"_svg").hide()}var cvjs_iconColumns=0,cvjs_iconColumnsFlag=!1,cvjs_iconmenu_pos_x=0,cvjs_iconmenu_pos_y=0,cvjs_initLoadMenuXML=!0,cvjs_gMenu_pos_x=30,cvjs_gMenu_pos_y=20;
function cvjs_LoadTopIconMenuXML(a,b){a.lastIndexOf("_svg")==a.length-4&&(a=a.substring(0,a.length-4));jQuery("#topIconMenu_placeholder_1_"+a+"_svg").html("");cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0","none",a,"cvjsIcon_base_left.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList);cvjs_TopIconMenu_maxPageNumber[cvjs_interfaceCounterIndex(a)]=b.cvjs.iconmenu.totalpages;1==cvjs_TopIconMenu_maxPageNumber[cvjs_interfaceCounterIndex(a)]?cvjs_Community_Version&&
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0_0","cadviewer.com",a,"cvjsIcon_dra_p1_0_0_CADViewer.png","www.cadviewer.com"):(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0_2prev","cvjs_changePreviousIconPage_TopIconMenu",a,"cvjsIcon_dra_p1_0_2_PreviousMenu_small.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.PreviousPage),cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0_2","cvjs_changeNextIconPage_TopIconMenu",a,"cvjsIcon_dra_p1_0_2_NextMenu_small.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.NextMenuPage));var c=1==b.cvjs.iconmenu.totalpages?b.cvjs.iconmenu.pages.page.command:b.cvjs.iconmenu.pages.page[cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]].command;try{var d=b.cvjs.iconmenu.customcommand.tooltip}catch(g){d="no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file;no text in xml config file".split(";")}try{cvjs_iconColumns=
b.cvjs.iconmenu.icons_per_row,0<cvjs_iconColumns&&(cvjs_iconColumnsFlag=!0)}catch(g){console.log("error 1 "+g),cvjs_iconColumnsFlag=!1}try{var e=b.cvjs.iconmenu.icon_page_left_x;cvjs_iconmenu_pos_x=parseInt(e);Number.isNaN(cvjs_iconmenu_pos_x)&&(cvjs_iconmenu_pos_x=0)}catch(g){console.log("ERR"+g),cvjs_iconmenu_pos_x=0}try{e=b.cvjs.iconmenu.icon_page_left_y,cvjs_iconmenu_pos_y=parseInt(e),Number.isNaN(cvjs_iconmenu_pos_y)&&(cvjs_iconmenu_pos_y=0)}catch(g){console.log("ERR"+g),cvjs_iconmenu_pos_y=
0}try{e=b.cvjs.zoommenu.location_left_x,cvjs_gMenu_pos_x=parseInt(e),Number.isNaN(cvjs_gMenu_pos_x)&&(cvjs_gMenu_pos_x=30)}catch(g){console.log("ERR"+g),cvjs_gMenu_pos_x=0}try{e=b.cvjs.zoommenu.location_left_y,cvjs_gMenu_pos_y=parseInt(e),Number.isNaN(cvjs_gMenu_pos_y)&&(cvjs_gMenu_pos_y=20)}catch(g){console.log("ERR"+g),cvjs_gMenu_pos_y=0}e=0;var f=1==b.cvjs.iconmenu.totalpages?2:48;cvjs_Community_Version&&1==b.cvjs.iconmenu.totalpages&&(f+=38);cvjs_iconColumnsFlag?f+=30*cvjs_iconColumns:(f+=30*
c.length,0==cvjs_TopIconMenu_pageNumber[cvjs_interfaceCounterIndex(a)]&&(f+=30));jQuery("#topIconMenu_placeholder_1_"+a+"_svg").css({width:f});b=!1;for(f=0;f<c.length;f++)cvjs_iconColumnsFlag&&e==cvjs_iconColumns&&(cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_p_0","none",a,"cvjsIcon_dra_p1_0_2_Blank.png",""),e=0),e++,"cvjs_LayerList"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_001","cvjs_LayerList",a,"cvjsIcon_dra_p1_1_1_LayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList):
"cvjs_LayerListSpace"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_073","cvjs_LayerList",a,"cvjsIcon_dra_p5_2_2_SpaceObjectsLayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList):"cvjs_Print"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_002","cvjs_Print",a,"cvjsIcon_dra_p1_1_2_Print.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Print):"cvjs_toggleBlackWhite"==c[f]?cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_cmd_003","cvjs_toggleBlackWhite",a,"cvjsIcon_dra_p1_4_1_ToggleBlackWhite.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Toggle):"cvjs_setBackgroundColor"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_004","cvjs_setBackgroundColor",a,"cvjsIcon_dra_p1_4_2_BackgroundColor.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Background):"cvjs_openFileLoadToServer"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1",
"cvjs_cmd_005","cvjs_openFileLoadToServer",a,"cvjsIcon_dra_p1_5_1_FileLoad.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.FileLoad):"cvjs_openFileLoadToServerSpace"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_072","cvjs_openFileLoadToServer",a,"cvjsIcon_dra_p5_2_1_LoadPreProcessSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.FileLoad):"cvjs_interactiveSearchText"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1",
"cvjs_cmd_006","cvjs_interactiveSearchText",a,"cvjsIcon_dra_p1_5_2_SearchText.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Search):"cvjs_About"==c[f]?(b=!0,cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_007","cvjs_displayInformationModal_Mode",0,"cvjsIcon_dra_p1_6_1_Information.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.About)):"cvjs_Settings"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_008","cvjs_Settings",
a,"cvjsIcon_dra_p1_12_1_Settings.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Settings):"cvjs_SettingsSpace"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_071","cvjs_Settings",a,"cvjsIcon_dra_white_Settings.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Settings):"cvjs_interactiveLayerOff"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_009","cvjs_interactiveLayerOff",a,"cvjsIcon_dra_p1_6_2_LayerOff.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerOff):
"cvjs_swapLayersInDrawing"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_010","cvjs_swapLayersInDrawing",a,"cvjsIcon_dra_p1_7_1_SwapLayers.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.SwapLayers):"cvjs_allLayersInDrawingOn"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_011","cvjs_allLayersInDrawingOn",a,"cvjsIcon_dra_p1_7_2_LayerOn.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.AllLayersOn):"cvjs_Measurement"==
c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_012","cvjs_Measurement",a,"cvjsIcon_dra_p1_8_1_Measurement.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Measurement):"cvjs_calibrateMeasurement"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_013","cvjs_calibrateMeasurement",a,"cvjsIcon_dra_p1_8_2_CalibrateMeasurement.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.Calibrate):"cvjs_displayMagnifyingGlass"==c[f]?cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_cmd_014","cvjs_displayMagnifyingGlass",a,"cvjsIcon_dra_p1_9_1_ToggleBirdsEyeWindow.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.BirdsEye):"cvjs_activateLineThicknessModal"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_015","cvjs_activateLineThicknessModal",a,"cvjsIcon_dra_p1_9_2_AdjustLineThickness.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LineThickness):"cvjs_mergeDXFDWG"==c[f]?cvjs_insertSingleIconImage(a,
"topIconMenu_placeholder_1","cvjs_cmd_016","cvjs_mergeDXFDWG",a,"cvjsIcon_dra_p2_9_1_MergeRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.MergeAsDXF):"cvjs_publishPDF"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_017","cvjs_publishPDF",a,"cvjsIcon_dra_p2_9_2_PublishPDF.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.PublishAsPDF):"cvjs_loadStickyNotesRedlinesUser"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_018",
"cvjs_loadStickyNotesRedlinesUser",a,"cvjsIcon_dra_p2_1_2_LoadRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.LoadRedline):"cvjs_saveStickyNotesRedlinesUser"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_019","cvjs_saveStickyNotesRedlinesUser",a,"cvjsIcon_dra_p2_1_1_SaveRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.SaveRedline):"cvjs_setRedlineColor"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_020",
"cvjs_setRedlineColor",a,"cvjsIcon_dra_p2_3_1_RedlineColor.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Color):"cvjs_setRedlineThickness"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_021","cvjs_setRedlineThickness",a,"cvjsIcon_dra_p2_3_2_RedlineThickness.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Thickness):"cvjs_drawStickyNote"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_022","cvjs_drawStickyNote",
a,"cvjsIcon_dra_p2_4_1_StickyNote.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.StickyNote):"cvjs_drawRedlineText"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_023","cvjs_drawRedlineText",a,"cvjsIcon_dra_p2_8_2_RedlineText.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Text):"cvjs_drawRedline_Freehand"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_024","cvjs_drawRedline_Freehand",a,"cvjsIcon_dra_p2_5_1_FreehandRedline.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Freehand):"cvjs_drawRedlineEllipseCloud"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_025","cvjs_drawRedlineEllipseCloud",a,"cvjsIcon_dra_p2_5_2_RedlineCloud.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Cloud):"cvjs_drawRedlineFilledPolygon"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_026","cvjs_drawRedlineFilledPolygon",a,"cvjsIcon_dra_p2_6_1_RedlineFilledPolygon.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.FilledPolygon):"cvjs_drawRedlinePolyline"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_027","cvjs_drawRedlinePolyline",a,"cvjsIcon_dra_p2_6_2_RedlinePolygon.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Polyline):"cvjs_drawRedlineFilledRectangle"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_028","cvjs_drawRedlineFilledRectangle",a,"cvjsIcon_dra_p2_7_1_RedlineFilledRect.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.FilledRectangle):"cvjs_drawRedlineRectangle"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_029","cvjs_drawRedlineRectangle",a,"cvjsIcon_dra_p2_7_2_RedlineRect.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Rectangle):"cvjs_drawRedlineArrow"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_030","cvjs_drawRedlineArrow",a,"cvjsIcon_dra_p2_8_1_RedlineArrow.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.Arrow):
"cvjs_deleteSingleRedline"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_031","cvjs_deleteSingleRedline",a,"cvjsIcon_dra_p2_2_1_DeleteSingleRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.DeleteSingle):"cvjs_deleteLastRedline"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_032","cvjs_deleteLastRedline",a,"cvjsIcon_dra_p2_2_2_DeleteLastRedline.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.DeleteLast):"cvjs_clearCurrentRedline"==
c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_033","cvjs_clearCurrentRedline",a,"cvjsIcon_dra_p2_4_2_ClearRedlines.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.ClearAll):"cvjs_PinMarker"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_034","cvjs_PinMarker",a,"cvjsIcon_dra_p6_1_1_PinMarker.png",languageTable.languages[cvjs_currentLanguage].IconPage_p6_1.PinMarker):"cvjs_insertImageLink"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1",
"cvjs_cmd_035","cvjs_insertImageLink",a,"cvjsIcon_dra_p3_2_2_InsertImageLink.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.InsertLink):"cvjs_loadAllImageLinks"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_036","cvjs_loadAllImageLinks",a,"cvjsIcon_dra_p3_2_1_LoadImageLinks.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.LoadLink):"cvjs_saveAllImageLinks"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_037","cvjs_saveAllImageLinks",
a,"cvjsIcon_dra_p3_3_1_SaveImageLinks.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.SaveLink):"cvjs_clearAllImageLinks"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_038","cvjs_clearAllImageLinks",a,"cvjsIcon_dra_p3_3_2_ClearImageLinks.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.ClearLink):"cvjs_quickCount"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_039","cvjs_quickCount",a,"cvjsIcon_dra_p3_4_1_QuickCount.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.QuickCount):"cvjs_showMeCounts"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_040","cvjs_showMeCounts",a,"cvjsIcon_dra_p3_4_2_SummaryQuickCount.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.CountSum):"cvjs_clearQuickCounts"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_041","cvjs_clearQuickCounts",a,"cvjsIcon_dra_p3_5_1_ClearQuickCount.png",languageTable.languages[cvjs_currentLanguage].IconPage_p3_8.ClearCount):
"cvjs_compareDrawings_LoadSecondDrawing"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_042","cvjs_compareDrawings_LoadSecondDrawing",a,"cvjsIcon_dra_p4_1_1_LoadSecondCompare.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareLoad):"cvjs_compareDrawings_ToggleDrawings"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_043","cvjs_compareDrawings_ToggleDrawings",a,"cvjsIcon_dra_p4_1_2_ToggleCompareIndividually.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareToggle):
"cvjs_compareDrawings_ToggleDrawingOverlay"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_044","cvjs_compareDrawings_ToggleDrawingOverlay",a,"cvjsIcon_dra_p4_2_1_ToggleCompareOverlaid.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareToggleOverlay):"cvjs_exitCompareDrawings"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_045","cvjs_exitCompareDrawings",a,"cvjsIcon_dra_p4_2_2_ExitCompare.png",languageTable.languages[cvjs_currentLanguage].IconPage_p4_8.CompareExit):
"cvjs_spaceObjectSettings"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_046","cvjs_spaceObjectSettings",a,"cvjsIcon_dra_p5_1_1_Settings.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Settings):"cvjs_changeSpaceObjectDisplayMode"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_047","cvjs_changeSpaceObjectDisplayMode",a,"cvjsIcon_dra_p5_1_2_SpaceObjectEditMode.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Mode):
"cvjs_loadDrawingsWithSpaceObjects"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_048","cvjs_loadDrawingsWithSpaceObjects",a,"cvjsIcon_dra_p5_2_1_LoadPreProcessSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Load):"cvjs_LayerListSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_049","cvjs_LayerListSpaceObject",a,"cvjsIcon_dra_p5_2_2_SpaceObjectsLayerList.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.LayerList):
"cvjs_addRectangleSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_050","cvjs_addRectangleSpaceObject",a,"cvjsIcon_dra_p5_3_1_RectangleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Rect):"cvjs_addPolygonSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_051","cvjs_addPolygonSpaceObject",a,"cvjsIcon_dra_p5_3_2_PolygonSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Polygon):
"cvjs_addCircleSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_052","cvjs_addCircleSpaceObject",a,"cvjsIcon_dra_p5_4_1_CircleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Circle):"cvjs_copyCircleSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_053","cvjs_copyCircleSpaceObject",a,"cvjsIcon_dra_p5_4_2_CopyCircleSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.CopyCircle):
"cvjs_deleteSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_054","cvjs_deleteSpaceObject",a,"cvjsIcon_dra_p5_5_1_DeleteSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Delete):"cvjs_clearSpaceObjects"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_076","cvjs_clearSpaceObjects",a,"cvjsIcon_dra_p7_4_2_ClearSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.ClearSpaces):"cvjs_setSpacePolygonOnLayer"==
c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_055","cvjs_setSpacePolygonOnLayer",a,"cvjsIcon_dra_p5_5_2_MakeSpaceObjectOnPolygon.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.SelectPolygon):"cvjs_displaySpaceObjectsStructure"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_056","cvjs_displaySpaceObjectsStructure",a,"cvjsIcon_dra_p5_6_1_SpaceObjectDisplayMode.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Publish):
"cvjs_saveSpaceObjectsUser"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_074","cvjs_saveSpaceObjectsUser",a,"cvjsIcon_dra_p5_6_2_DownloadProcessedSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.SaveSpaceObjects):"cvjs_resizeSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_057","cvjs_resizeSpaceObject",a,"cvjsIcon_dra_p7_3_1_ResizeSpaceImageObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.ResizeSpaceObject):
"cvjs_moveSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_058","cvjs_moveSpaceObject",a,"cvjsIcon_dra_p7_3_3_DragSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.MoveSpaceObject):"cvjs_rotateSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_075","cvjs_rotateSpaceObject",a,"cvjsIcon_dra_p7_3_5_RotateSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.RotateSpaceObject):"cvjs_loadSpaceObjectsUser"==
c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_059","cvjs_loadSpaceObjectsUser",a,"cvjsIcon_dra_p5_7_1_LoadSpaceOverlay.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.LoadSpaceObjects):"cvjs_saveAsSVG"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_060","cvjs_saveAsSVG",a,"cvjsIcon_dra_p5_6_2_DownloadProcessedSpaceObjects.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.DownloadSVG):"cvjs_customCommand_01"==c[f]?
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_01","cvjs_customCommand_01",a,"cvjsIcon_customCommand_01.png",d[0]):"cvjs_customCommand_02"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_02","cvjs_customCommand_02",a,"cvjsIcon_customCommand_02.png",d[1]):"cvjs_customCommand_03"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_03","cvjs_customCommand_03",a,"cvjsIcon_customCommand_03.png",d[2]):"cvjs_customCommand_04"==c[f]?
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_04","cvjs_customCommand_04",a,"cvjsIcon_customCommand_04.png",d[3]):"cvjs_customCommand_05"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_05","cvjs_customCommand_05",a,"cvjsIcon_customCommand_05.png",d[4]):"cvjs_customCommand_06"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_06","cvjs_customCommand_06",a,"cvjsIcon_customCommand_06.png",d[5]):"cvjs_customCommand_07"==c[f]?
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_07","cvjs_customCommand_07",a,"cvjsIcon_customCommand_07.png",d[6]):"cvjs_customCommand_08"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_08","cvjs_customCommand_08",a,"cvjsIcon_customCommand_08.png",d[7]):"cvjs_customCommand_09"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_09","cvjs_customCommand_09",a,"cvjsIcon_customCommand_09.png",d[8]):"cvjs_customCommand_10"==c[f]?
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_10","cvjs_customCommand_10",a,"cvjsIcon_customCommand_10.png",d[9]):"cvjs_customCommand_11"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_11","cvjs_customCommand_11",a,"cvjsIcon_customCommand_01.png",d[0]):"cvjs_customCommand_12"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_12","cvjs_customCommand_12",a,"cvjsIcon_customCommand_02.png",d[11]):"cvjs_customCommand_13"==c[f]?
cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_13","cvjs_customCommand_13",a,"cvjsIcon_customCommand_03.png",d[12]):"cvjs_customCommand_14"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_14","cvjs_customCommand_14",a,"cvjsIcon_customCommand_04.png",d[13]):"cvjs_customCommand_15"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_15","cvjs_customCommand_15",a,"cvjsIcon_customCommand_05.png",d[14]):"cvjs_customCommand_16"==
c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_16","cvjs_customCommand_16",a,"cvjsIcon_customCommand_06.png",d[15]):"cvjs_customCommand_17"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_17","cvjs_customCommand_17",a,"cvjsIcon_customCommand_07.png",d[16]):"cvjs_customCommand_18"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_18","cvjs_customCommand_18",a,"cvjsIcon_customCommand_08.png",d[17]):"cvjs_customCommand_19"==
c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_19","cvjs_customCommand_19",a,"cvjsIcon_customCommand_09.png",d[18]):"cvjs_customCommand_20"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_custom_20","cvjs_customCommand_20",a,"cvjsIcon_customCommand_10.png",d[19]):"cvjs_addFixedSizeImageSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_061","cvjs_addFixedSizeImageSpaceObject",a,"cvjsIcon_dra_p7_2_1_FixedSpaceImageObject.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.InsertSpaceImage):"cvjs_addDragRectangleImageSpaceObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_062","cvjs_addDragRectangleImageSpaceObject",a,"cvjsIcon_dra_p7_2_2_RectangleSpaceImageObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.DragSpaceImage):"cvjs_resizeSpaceImageObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_063","cvjs_resizeSpaceImageObject",
a,"cvjsIcon_dra_p7_3_1_ResizeSpaceImageObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.ResizeSpaceImage):"cvjs_deleteSpaceImageObject"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_064","cvjs_deleteSpaceImageObject",a,"cvjsIcon_dra_p5_5_1_DeleteSpaceObject.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.Delete):"cvjs_saveAsSVGOnServer"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_065","cvjs_saveAsSVG",
a,"cvjsIcon_dra_p6_2_1_PublishSVG.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.DownloadSVG):"cvjs_customFileLoad"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_066","cvjs_customFileLoad",a,"cvjsIcon_dra_p1_5_1_CustomFileLoad.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.FileLoad):"cvjs_customLayerList"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_067","cvjs_customLayerList",a,"cvjsIcon_dra_p5_2_2_CustomLayerList.png",
languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.LayerList):"cvjs_downloadAsSVG"==c[f]?cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_068","cvjs_downloadAsSVG",a,"cvjsIcon_dra_p6_2_1_PublishSVG.png",languageTable.languages[cvjs_currentLanguage].IconPage_p5_8.DownloadSVG):"cvjs_mergeQR"==c[f]&&cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_069","cvjs_mergeQR",a,"cvjsIcon_dra_p6_2_1_MergeQR.png",languageTable.languages[cvjs_currentLanguage].IconPage_p2_8.MergeWithQR);
1==cvjs_TopIconMenu_maxPageNumber[cvjs_interfaceCounterIndex(a)]&&0==b&&cvjs_insertSingleIconImage(a,"topIconMenu_placeholder_1","cvjs_cmd_070","cvjs_displayInformationModal_Mode",0,"cvjsIcon_dra_p1_6_1_Information.png",languageTable.languages[cvjs_currentLanguage].IconPage_p1_8.About);cvjs_initLoadMenuXML&&(cvjs_initLoadMenuXML=!1,cvjs_resizeWindow_position(a))}
function cvjs_rPaperIndex(a){for(var b=0;b<floorplan_div_Array.length;b++)if(-1<floorplan_div_Array[b].indexOf(a)&&floorplan_div_Array[b].length==a.length)return b;a+="_svg";for(b=0;b<floorplan_div_Array.length;b++)if(-1<floorplan_div_Array[b].indexOf(a)&&floorplan_div_Array[b].length==a.length)return b;return-1}var buildings,vqBuilding="BUILDING_NAME_GOES_HERE",vqFloor="FLOOR_NAME_GOES_HERE",cvjs_SpaceObjectsContent=[],vqTBorder=[],vqText=[],vqURLs=[];
function cvjs_insertSingleIconImage(a,b,c,d,e,f,g){cvjs_Community_Version&&0==d.indexOf("cadviewer.com")?jQuery("#"+b+"_"+a+"_svg").append('<a id="'+c+"_"+a+'" href="http://'+d+'"><img id='+c+"_img' src="+cvjs_imagesLocation+"singleIcons/"+f+" ></a>"):jQuery("#"+b+"_"+a+"_svg").append('<a id="'+c+"_"+a+'" ><img id='+c+"_img' src="+cvjs_imagesLocation+"singleIcons/"+f+" ></a>");if(0==d.indexOf("cvjs_changePreviousIconPage_TopIconMenu"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_changePreviousIconPage_TopIconMenu(e)});
if(0==d.indexOf("cvjs_changeNextIconPage_TopIconMenu"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_changeNextIconPage_TopIconMenu(e)});if(0==d.indexOf("cvjs_Settings"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_Settings(e)});if(0==d.indexOf("cvjs_LayerList"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_LayerList(e)});if(0==d.indexOf("cvjs_Print"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_Print(e)});if(0==d.indexOf("cvjs_toggleBlackWhite"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_toggleBlackWhite(e)});
if(0==d.indexOf("cvjs_setBackgroundColor"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_setBackgroundColor(e)});if(0==d.indexOf("cvjs_openFileLoadToServer"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_openFileLoadToServer(e)});if(0==d.indexOf("cvjs_interactiveSearchText"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_interactiveSearchText(e)});if(0==d.indexOf("cvjs_interactiveLayerOff"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_interactiveLayerOff(e)});if(0==d.indexOf("cvjs_swapLayersInDrawing"))jQuery("#"+
c+"_"+a).on("click",function(){cvjs_swapLayersInDrawing(e)});if(0==d.indexOf("cvjs_allLayersInDrawingOn"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_allLayersInDrawingOn(e)});if(0==d.indexOf("cvjs_Measurement"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_Measurement(e)});if(0==d.indexOf("cvjs_calibrateMeasurement"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_calibrateMeasurement(e)});if(0==d.indexOf("cvjs_displayMagnifyingGlass"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_displayMagnifyingGlass(e)});
if(0==d.indexOf("cvjs_activateLineThicknessModal"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_activateLineThicknessModal(e)});if(0==d.indexOf("cvjs_About"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_displayInformationModal_Mode(e)});if(0==d.indexOf("cvjs_displayInformationModal_Mode"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_displayInformationModal_Mode(e)});if(0==d.indexOf("cvjs_publishPDF"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_publishPDF(e)});if(0==d.indexOf("cvjs_saveAsSVGOnServer"))jQuery("#"+
c+"_"+a).on("click",function(){cvjs_saveAsSVG(e)});if(0==d.indexOf("cvjs_saveAsSVG"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_saveAsSVG(e)});if(0==d.indexOf("cvjs_loadStickyNotesRedlinesUser"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_loadStickyNotesRedlinesUser(e)});if(0==d.indexOf("cvjs_saveStickyNotesRedlinesUser"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_saveStickyNotesRedlinesUser(e)});if(0==d.indexOf("cvjs_setRedlineColor"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_setRedlineColor(e)});
if(0==d.indexOf("cvjs_setRedlineThickness"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_setRedlineThickness(e)});if(0==d.indexOf("cvjs_drawStickyNote"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawStickyNote(e)});if(0==d.indexOf("cvjs_drawRedlineText"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawRedlineText(e)});if(0==d.indexOf("cvjs_drawRedline_Freehand"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawRedline_Freehand(e)});if(0==d.indexOf("cvjs_drawRedlineEllipseCloud"))jQuery("#"+
c+"_"+a).on("click",function(){cvjs_drawRedlineEllipseCloud(e)});if(0==d.indexOf("cvjs_drawRedlineFilledPolygon"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawRedlineFilledPolygon(e)});if(0==d.indexOf("cvjs_drawRedlinePolyline"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawRedlinePolyline(e)});if(0==d.indexOf("cvjs_drawRedlineFilledRectangle"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawRedlineFilledRectangle(e)});if(0==d.indexOf("cvjs_drawRedlineRectangle"))jQuery("#"+c+"_"+a).on("click",
function(){cvjs_drawRedlineRectangle(e)});if(0==d.indexOf("cvjs_drawRedlineArrow"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_drawRedlineArrow(e)});if(0==d.indexOf("cvjs_deleteSingleRedline"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_deleteSingleRedline(e)});if(0==d.indexOf("cvjs_deleteLastRedline"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_deleteLastRedline(e)});if(0==d.indexOf("cvjs_clearCurrentRedline"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_clearCurrentRedline(e)});if(0==
d.indexOf("cvjs_mergeDXFDWG"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_mergeDXFDWG(e)});if(0==d.indexOf("cvjs_insertImageLink"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_insertImageLink(e)});if(0==d.indexOf("cvjs_loadAllImageLinks"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_loadAllImageLinks(e)});if(0==d.indexOf("cvjs_saveAllImageLinks"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_saveAllImageLinks(e)});if(0==d.indexOf("cvjs_clearAllImageLinks"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_clearAllImageLinks(e)});
if(0==d.indexOf("cvjs_quickCount"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_quickCount(e)});if(0==d.indexOf("cvjs_showMeCounts"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_showMeCounts(e)});if(0==d.indexOf("cvjs_clearQuickCounts"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_clearQuickCounts(e)});if(0==d.indexOf("cvjs_compareDrawings_LoadSecondDrawing"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_compareDrawings_LoadSecondDrawing(e)});if(0==d.indexOf("cvjs_compareDrawings_ToggleDrawings"))jQuery("#"+
c+"_"+a).on("click",function(){cvjs_compareDrawings_ToggleDrawings(e)});if(0==d.indexOf("cvjs_compareDrawings_ToggleDrawingOverlay"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_compareDrawings_ToggleDrawingOverlay(e)});if(0==d.indexOf("cvjs_exitCompareDrawings"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_exitCompareDrawings(e)});if(0==d.indexOf("cvjs_changeSpaceObjectDisplayMode"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_changeSpaceObjectDisplayMode(e)});if(0==d.indexOf("cvjs_addPolygonSpaceObject"))jQuery("#"+
c+"_"+a).on("click",function(){cvjs_addPolygonSpaceObject(e)});if(0==d.indexOf("cvjs_addRectangleSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_addRectangleSpaceObject(e)});if(0==d.indexOf("cvjs_addCircleSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_addCircleSpaceObject(e)});if(0==d.indexOf("cvjs_copyCircleSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_copyCircleSpaceObject(e)});if(0==d.indexOf("cvjs_resizeSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_resizeSpaceObject(e)});
if(0==d.indexOf("cvjs_moveSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_moveSpaceObject(e)});if(0==d.indexOf("cvjs_rotateSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_rotateSpaceObject(e)});if(0==d.indexOf("cvjs_deleteSpaceObject"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_deleteSpaceObject(e)});if(0==d.indexOf("cvjs_clearSpaceObjects"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_clearSpaceObjects(e)});if(0==d.indexOf("cvjs_LayerListSpaceObject"))jQuery("#"+c+
"_"+a).on("click",function(){cvjs_LayerListSpaceObject(e)});if(0==d.indexOf("cvjs_SettingsSpace"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_Settings(e)});if(0==d.indexOf("cvjs_openFileLoadToServerSpace"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_openFileLoadToServer(e)});if(0==d.indexOf("cvjs_LayerListSpace"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_LayerList(e)});if(0==d.indexOf("cvjs_loadSpaceObjectsUser"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_loadSpaceObjectsUser(e)});
if(0==d.indexOf("cvjs_saveSpaceObjectsUser"))jQuery("#"+c+"_"+a).on("click",function(){cvjs_openSpaceObjectSaveModal(e)});jQuery("#"+c+"_"+a).mouseover(function(){if(0==d.indexOf("cvjs_changeNextIconPage_TopIconMenu")||0==d.indexOf("cvjs_changePreviousIconPage_TopIconMenu"))jQuery("#topIconMenu_placeholder_1_"+a+"_svg").draggable(),jQuery("#topIconMenu_placeholder_1_"+a+"_svg").draggable({disabled:!1});cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0);try{tip[cvjs_active_floorplan_div_nr].hide()}catch(h){console.log(h)}cvjs_active_floorplan_div_nr=
cvjs_rPaperIndex(a);cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0);jQuery("#"+c+"_"+a).css("cursor","pointer");jQuery("#"+c+"_"+a).css({WebkitFilter:"brightness(90%) invert(0)  blur(0px)"});cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0,console.log("floorplan "+a+" "+b),tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+a+"_svg"));tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(g);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",
jQuery("#"+a+"_svg").position().left+jQuery("#"+b+"_"+a+"_svg").position().left-jQuery("#"+a+"_svg").position().left+jQuery("#"+c+"_"+a).position().left+27);tip[cvjs_active_floorplan_div_nr].css("top",jQuery("#"+a+"_svg").position().top+jQuery("#"+b+"_"+a+"_svg").position().top-jQuery("#"+a+"_svg").position().top+26+jQuery("#"+c+"_"+a).position().top)});jQuery("#"+c+"_"+a).mouseout(function(){0==d.indexOf("cvjs_changeNextIconPage_TopIconMenu")&&jQuery("#topIconMenu_placeholder_1_"+a+"_svg").draggable("disable");
cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0,tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+a+"_svg"));tip[cvjs_active_floorplan_div_nr].hide();jQuery("#"+c+"_"+a).css("opacity","1.0");jQuery("#"+c+"_"+a).css({WebkitFilter:"brightness(100%) invert(0)  blur(0px)"})})}
function cvjs_navigationMenuItemHighlight(a,b,c,d,e){jQuery("#"+c+"_"+a).mouseover(function(){try{tip[cvjs_active_floorplan_div_nr].hide()}catch(g){}cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);jQuery("#"+c+"_"+a).css("cursor","pointer");jQuery("#"+c+"_"+a).css("opacity","0.1");cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0);tip[cvjs_active_floorplan_div_nr].css({position:"absolute"});tip[cvjs_active_floorplan_div_nr].html(d);var f=0;1==e&&(f=31);2==e&&(f=-130);tip[cvjs_active_floorplan_div_nr].css("left",
jQuery("#"+a+"_svg").position().left+jQuery("#"+b+"_"+a+"_svg").position().left+jQuery("#"+c+"_"+a).position().left+f-jQuery("#"+a+"_svg").position().left);tip[cvjs_active_floorplan_div_nr].css("top",jQuery("#"+a+"_svg").position().top+jQuery("#"+b+"_"+a+"_svg").position().top+32-jQuery("#"+a+"_svg").position().top);tip[cvjs_active_floorplan_div_nr].show()});jQuery("#"+c+"_"+a).mouseout(function(){tip[cvjs_active_floorplan_div_nr].hide();jQuery("#"+c+"_"+a).css("opacity","0.0")})}
function cvjs_allowFileLoadToServer(a){cvjs_fileLoadToServer=a}
var cvjs_buildFolderTree_crossDomain=!1,cvjs_compareDrawingsFirstDrawing="",cvjs_compareDrawingsSecondDrawing="",cvjs_compareDrawings=!1,colorFlag=!0,firstOverlayCompareFile=!0,layers_all_overlay,layers_all_overlay2,fileOverlay=!1,attr_1='{"display" : "none" }',hide=jQuery.parseJSON(attr_1),attr_2='{"display" : "inline" }',show=jQuery.parseJSON(attr_2),cvjs_SVG_multiPages=[{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",
pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},
{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]},{multiPages:1,currentPage:1,pages:[{fileName:"default",pageName:"Single Page"}]}],cvjs_SVG_multiPagesFlag=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],cvjs_multipageURL_FileNamePath="",cvjs_multipage_FileNamePath="",cvjs_multipagePDFtoSVG_tempDir="";
function cvjs_buildMultiPageSVG(a,b){cvjs_multipageURL_FileNamePath=b;b=cvjs_serverHandlersPath+cvjs_serverListDirectoryController;var c={};c.directory=a;c.directoryurl=a;jQuery.ajax({url:b,type:"post",data:c,success:function(a){a=a.split("<br>");if(1<=a.length){cvjs_debug&&console.log("Creating multipage SVG page structure n.length="+a.length+" "+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[0].fileName);cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].multiPages=a.length-1;cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage=
1;for(var b=0,c=0;c<a.length;c++)if(0<a[c].indexOf(".svg")||0<a[c].indexOf(".svgz")){var d=a[c].substring(a[c].lastIndexOf("_")+1,a[c].indexOf(".svg"));d=parseInt(d);var h="Page "+d;1<=d&&(cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[d-1]={fileName:a[c],pageName:h});b++}cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]=!0}}})}
var layer_cvjs_SpaceObjectsContent=[],cvjs_redlineThickness_scaleFactor=1,cvjs_redlineThickness_drawingFactor=2E-4,string_X="",totalDragStart=0,firstFingerX=0,firstFingerY=0,secondFingerX=0,secondFingerY=0,firstFingerX1=0,firstFingerY1=0,firstFingerX1_base=0,firstFingerY1_base=0,firstFingerX1_viewBox_base=0,firstFingerY1_viewBox_base=0,flagOK=!0,preventDrag=!0,base_x=0,base_y=0;
function dragStart(a,b,c){cvjs_debug&&console.log("dragstart "+cvjs_floorplan_div+" "+cvjs_rPaperIndex(cvjs_floorplan_div));try{cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(cvjs_floorplan_div),this.data("id").substring(7)}catch(d){console.log(" err "+d)}lastDy=lastDx=pdy=pdx=0;vbx=viewBox[cvjs_active_floorplan_div_nr].X;vby=viewBox[cvjs_active_floorplan_div_nr].Y;cvjs_Community_Version||hideOnlyPop();base_y=base_x=0;thumb_loaded||(base_x=a,base_y=b);thumb_loaded||(thumb_loaded=!0);try{firstFingerX=
c.touches[0].pageX,firstFingerY=c.touches[0].pageY,totalDragStart=1,secondFingerX=c.touches[1].pageX,secondFingerY=c.touches[1].pageY,totalDragStart=2}catch(d){}try{c.cancelable&&(c.preventDefault(),c.stopPropagation()),2==totalDragStart&&c.cancelable&&(c.preventDefault(),c.stopPropagation())}catch(d){console.log("t7 "+d)}tip[cvjs_active_floorplan_div_nr].hide();a=viewBoxWidth[cvjs_active_floorplan_div_nr]/jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();b=viewBoxHeight[cvjs_active_floorplan_div_nr]/
jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();cvjs_pan_drag_scale=a>b?a:b}var cvjs_pan_drag_scale=1;
function dragMove(a,b,c,d,e){try{!panWithThumb||0==base_x-c&&0==base_y-d||(layers_all.attr(hide),layer_thumb.attr(show),console.log("dragMove hide vqrooms   cvjs_active_floorplan_div_nr "+cvjs_active_floorplan_div_nr),layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(hide),all_layer_off_thumb_on())}catch(f){console.log("t7 "+f)}2!=totalDragStart&&2>totalDragStart&&(c=Math.abs(lastDy-b)*cvjs_pan_drag_scale/viewBoxHeight[cvjs_active_floorplan_div_nr],(.01<Math.abs(lastDx-a)*cvjs_pan_drag_scale/
viewBoxWidth[cvjs_active_floorplan_div_nr]||.01<c)&&dragMoveControl&&(lastDx=a,lastDy=b,pdx=a*cvjs_pan_drag_scale,pdy=b*cvjs_pan_drag_scale,viewBox[cvjs_active_floorplan_div_nr].X=vbx-pdx,viewBox[cvjs_active_floorplan_div_nr].Y=vby-pdy,a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }'),cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)))}
function dragEnd(a){cvjs_SVGHyperLinkCSSAll_Drag&&(cvjs_SVGHyperLinkCSSAll_Drag=!1,cvjs_SVGGroup[cvjs_active_floorplan_div_nr].undrag(),console.log("no mouseup undrag dragend"));preventDrag=!0;2==totalDragStart&&(a.preventDefault(),a.stopPropagation());try{if(2==totalDragStart){viewBox[cvjs_active_floorplan_div_nr].X=viewBox_initX[cvjs_active_floorplan_div_nr];viewBox[cvjs_active_floorplan_div_nr].Y=viewBox_initY[cvjs_active_floorplan_div_nr];vBHo=viewBoxHeight_init[cvjs_active_floorplan_div_nr];
vBWo=viewBoxWidth_init[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]=viewBoxWidth_init[cvjs_active_floorplan_div_nr];viewBoxHeight[cvjs_active_floorplan_div_nr]=viewBoxHeight_init[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase;viewBoxHeight[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase;viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)/2;viewBox[cvjs_active_floorplan_div_nr].Y-=
(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/2;zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_rPaper[cvjs_active_floorplan_div_nr].width;var b=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(b)}}catch(c){}try{panWithThumb&&(layers_all.attr(show),layer_thumb.attr(hide),
all_layer_on_thumb_off()),cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show),thumb_loaded=!1}catch(c){console.log("t8 "+c)}}var cvjs_customMethodForOnLoadEnd=!1,cvjs_myOnLoadEndMethod;function cvjs_setCustomCallbackMethodOnLoadEnd(a,b){cvjs_customMethodForOnLoadEnd=a;cvjs_myOnLoadEndMethod=b}
function cvjs_setLooperPosition(){jQuery(window).width();jQuery(window).height();var a=window.innerWidth;var b=window.innerHeight;var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();var d=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(),e=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position");150==d&&300==e&&(d=b,e=a);a=e/2-120+c.left;c=d/2-60+c.top;jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).css({left:a,top:c,position:"fixed"});jQuery("#looper_image_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("");jQuery("#looper_image_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).append('<img class="waiting" src="'+cvjs_imagesLocation+'looper.gif" />')}
function cvjs_zoomZeroWidth(){if(cvjs_zeroWidthHandling){var a=viewBoxWidth[cvjs_active_floorplan_div_nr]/cvjs_zeroWidthHandling_viewBoxWidth;cvjs_debug&&console.log("cvjs_zoomZeroWidth  zoomFactor "+a);for(var b in cvjs_zeroWidthHandlingArr)try{var c="#"+b;if(0==jQuery(c).parent().attr("id").indexOf("layer_")||0==jQuery(c).parent().attr("id").indexOf("Layer_")){var d=jQuery(c).css("stroke-width");-1<d.indexOf("px")&&(d=d.substring(0,d.indexOf("px")),d=parseFloat(d));d*=cvjs_MinWidthSVG;jQuery(c).css("stroke-width",
cvjs_SVGLineThicknessArray[b]*a*cvjs_zeroWidthScaleFactor)}}catch(e){}.5>a?.25>a?.1>a?jQuery(".tmsPoints").css("r",1.2*a*cvjs_zeroWidthScaleFactor):jQuery(".tmsPoints").css("r",.3*a*3*cvjs_zeroWidthScaleFactor):jQuery(".tmsPoints").css("r",.6*a*cvjs_zeroWidthScaleFactor):jQuery(".tmsPoints").css("r",.3*a*cvjs_zeroWidthScaleFactor)}}var cvjs_zeroWidthHandling=!1,cvjs_zeroWidthHandling_viewBoxWidth=0,cvjs_zeroWidthHandling_viewBoxHeight=0,cvjs_zeroWidthHandlingArr={},cvjs_zeroWidthScaleFactor=1;
function cvjs_initZeroWidthHandling(a,b){cvjs_zeroWidthHandling=!0;cvjs_zeroWidthScaleFactor=b;cvjs_zeroWidthHandling_viewBoxWidth=viewBoxWidth[cvjs_active_floorplan_div_nr];cvjs_zeroWidthHandling_viewBoxHeight=viewBoxHeight[cvjs_active_floorplan_div_nr];reference_thickness=cvjs_MinWidthSVG=1;cvjs_svgLineThickness=!0;var c=0;cvjs_SVGLineThicknessArray={};cvjs_zeroWidthHandlingArr={};jQuery("*[id] .ZW").each(function(){var a=jQuery(this).attr("id");c++;cvjs_zeroWidthHandlingArr[a]||(cvjs_zeroWidthHandlingArr[a]=
!0)});cvjs_debug&&console.log("cvjs_initZeroWidthHandling = "+c);for(var d in cvjs_zeroWidthHandlingArr)try{var e="#"+d;if(0==jQuery(e).parent().attr("id").indexOf("layer_")||0==jQuery(e).parent().attr("id").indexOf("Layer_")){var f=jQuery(e).css("stroke-width");-1<f.indexOf("px")&&(f=f.substring(0,f.indexOf("px")),f=parseFloat(f));cvjs_SVGLineThicknessArray[d]=f}}catch(g){}1!=b&&cvjs_resetZoomPan(a)}var dragInsidePolygon=!1,cvjs_SVGHyperLinkCSSAll_Drag=!1;
function cvjs_rotateForward(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var b=cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]+90;360<=b&&(b=0);-360>=b&&(b=0);cvjs_rotateAngle(b,a)}function cvjs_rotateBackward(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var b=cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]-90;360<=b&&(b=0);-360>=b&&(b=0);cvjs_rotateAngle(b,a)}
var cvjs_currentRotationAngle=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
function cvjs_rotateAngle(a,b){if(!(-360>a||360<a)){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);console.log(b+"  "+cvjs_active_floorplan_div_nr);var c=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();cvjs_debug&&console.log("bounding box rpaper "+c.x+"  "+c.y+" "+c.width+" "+c.height);c="T"+(c.x+c.width/2)+" "+(c.y+c.height/2)+"0,0R"+a;cvjs_SVGGroup[cvjs_active_floorplan_div_nr].attr({transform:c});cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({transform:c});cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]=
a;cvjs_zoomExtents(b)}}var firstX_r=0,firstY_r=0,lastX_r=0,lastY_r=0,flag_rectangle=!1,tPath_r,tRubberBand_r,interactive_text_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_interactiveSearchText(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4)),a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),interactive_text_offset_flag[cvjs_active_floorplan_div_nr]&&(interactive_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#textsearchModal_"+a).css({position:"fixed"}),jQuery("#textsearchModal_"+a).offset({left:150+jQuery("#"+
a).position().left,top:50+jQuery("#"+a).position().top})),textSearchPre="",jQuery("#textsearchModal_"+a).show())}
function cvjs_interactiveSearchText_zoomLevel(a){interactive_text_offset_flag[cvjs_active_floorplan_div_nr]&&(interactive_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#textsearchModal").css({position:"fixed"}),jQuery("#textsearchModal").offset({left:150+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().left,top:50+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top}));textSearchPre="";jQuery("#cvjs_percentageLevelFromModal").val(a);jQuery("#textsearchModal").show()}
function cvjs_exitSearchTextModal(){jQuery(cvjs_textSearchPreElement).css("fill",cvjs_textSearchPreFill);cvjs_textSearchPreFill=cvjs_textSearchPreElement="";jQuery("#textsearchModal").hide()}var cvjs_textSearchPreElement="",cvjs_textSearchPreFill="";
function cvjs_searchText(a,b){isNaN(b)&&(b=100);jQuery("text").each(function(c){if(-1<jQuery(this).text().toLowerCase().indexOf(a.toLowerCase())){jQuery(cvjs_textSearchPreElement).css("fill",cvjs_textSearchPreFill);c=jQuery(this).attr("x");var d=jQuery(this).attr("y");cvjs_debug&&console.log("text search  xx="+c+" yy="+d);cvjs_textSearchPreElement=this;cvjs_textSearchPreFill=jQuery(this).css("fill");jQuery(this).css("fill","#FF0000");cvjs_svgWidthHeight100percent||(cvjs_debug&&console.log("cvjs_svgTransX "+
cvjs_svgTransX+" cvjs_svgTransY "+cvjs_svgTransY+" cvjs_svgScale "+cvjs_svgScale),""!=cvjs_svgTransX&&""!=cvjs_svgTransX&&(c=(cvjs_svgTransX+Number(c))*cvjs_svgScale,d=(cvjs_svgTransY+Number(d))*cvjs_svgScale),viewBoxWidth[cvjs_active_floorplan_div_nr]=rpWidth[cvjs_active_floorplan_div_nr]/b*100,viewBoxHeight[cvjs_active_floorplan_div_nr]=rpHeight[cvjs_active_floorplan_div_nr]/b*100,viewBox[cvjs_active_floorplan_div_nr].X=c-viewBoxWidth[cvjs_active_floorplan_div_nr]/2,viewBox[cvjs_active_floorplan_div_nr].Y=
d-viewBoxHeight[cvjs_active_floorplan_div_nr]/2,c=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }'),cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(c),zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr])}})}
function cvjs_searchTextInstance(a,b,c){isNaN(b)&&(b=100);var d=0,e=!1;jQuery("text").each(function(f){if(-1<jQuery(this).text().toLowerCase().indexOf(a.toLowerCase())&&(d++,d==c)){f=jQuery(this).attr("x");var g=jQuery(this).attr("y");jQuery(cvjs_textSearchPreElement).css("fill",cvjs_textSearchPreFill);cvjs_textSearchPreElement=this;cvjs_textSearchPreFill=jQuery(this).css("fill");jQuery(this).css("fill","#FF0000");cvjs_svgWidthHeight100percent||(""!=cvjs_svgTransX&&""!=cvjs_svgTransX&&(f=(cvjs_svgTransX+
Number(f))*cvjs_svgScale,g=(cvjs_svgTransY+Number(g))*cvjs_svgScale),viewBoxWidth[cvjs_active_floorplan_div_nr]=rpWidth[cvjs_active_floorplan_div_nr]/b*100,viewBoxHeight[cvjs_active_floorplan_div_nr]=rpHeight[cvjs_active_floorplan_div_nr]/b*100,viewBox[cvjs_active_floorplan_div_nr].X=f-viewBoxWidth[cvjs_active_floorplan_div_nr]/2,viewBox[cvjs_active_floorplan_div_nr].Y=g-viewBoxHeight[cvjs_active_floorplan_div_nr]/2,f=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+
" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }'),cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(f),zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr],e=!0)}});return e}var calibrate_first_point=!0,calibrate_first_point_x=1,calibrate_first_point_y=1,calibration_active=!1,calibrate_Triangle,calibrate_Triangle2,calibrate_color="#ED1E05",calibrate_lineWidth=.33,calibrate_lineWidth_base=.33;
function cvjs_calibrateMeasurement_RedlinePolyline(){try{calibrate_lineWidth=cvjs_redlineThickness_scaleFactor*calibrate_lineWidth_base;calibrate_first_point=!0;tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tRubberBand_poly_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_redline1).attr({stroke:calibrate_color,"stroke-width":calibrate_lineWidth,fill:"#FFF","fill-opacity":"0.01"});polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tPolygon_redline1=
cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:calibrate_color,"stroke-width":calibrate_lineWidth,fill:"#FFF","fill-opacity":"0.01"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/
viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;a=-3.33*calibrate_lineWidth_base*cvjs_redlineThickness_scaleFactor+","+3.33*calibrate_lineWidth_base*
cvjs_redlineThickness_scaleFactor+" 0,"+-3.33*calibrate_lineWidth_base*cvjs_redlineThickness_scaleFactor+" "+3.33*calibrate_lineWidth_base*cvjs_redlineThickness_scaleFactor+","+3.33*calibrate_lineWidth_base*cvjs_redlineThickness_scaleFactor;calibrate_Triangle=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(a);calibrate_Triangle2=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(a);draw_poly_redline1=!1;first_point_poly_redline1=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"}).attr({id:"cvjs_handle_group_calibrate"});handleGroup.attr({transform:"T0,0S5.0"});try{jQuery("#cvjs_handle_group_calibrate").insertBefore("#"+cvjs_firstCloneHandle)}catch(b){console.log("cvjs_calibrateMeasurement_RedlinePolyline 2:"+b)}handleGroup.mousedown(mousedown_polygon_calibrate);
handleGroup.mousemove(mousemove_polygon_calibrate);calibration_active=!0}catch(b){console.log("cvjs_calibrateMeasurement_RedlinePolyline: "+b)}}function cvjs_removeHandleFunc_CalibrateMeasurementPolyline(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
function finish_calibrate(){calibrate_x2=(lastX_poly_redline1-delta_x)/global_scale;calibrate_y2=(lastY_poly_redline1-delta_y)/global_scale;cvjs_removeHandleFunc_CalibrateMeasurementPolyline();draw_poly_redline1=!1;cvjs_calibrate_end=first_point_poly_redline1=!0;calibration_active=!1}
function mousedown_polygon_calibrate_core(){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly_redline1?finish_calibrate():(polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),tPolygon_redline1.attr({stroke:calibrate_color,
"stroke-width":calibrate_lineWidth,fill:"#FFF","fill-opacity":"0.01"}),calibrate_x1=(firstX_poly_redline1-delta_x)/global_scale,calibrate_y1=(firstY_poly_redline1-delta_y)/global_scale,draw_poly_redline1=!0,cvjs_calibrate_end=!1)}var mousedown_polygon_calibrate=function(){mousedown_polygon_calibrate_core()};
function mousemove_polygon_calibrate_core(a,b){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;if(draw_poly_redline1)if(first_point_poly_redline1?(first_point_poly_redline1=!1,firstX_poly_redline1=a,firstY_poly_redline1=b,lastX_poly_redline1=a,lastY_poly_redline1=b,originX_poly_redline1=a,originY_poly_redline1=b,
polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale):(lastX_poly_redline1=a,lastY_poly_redline1=b),calibrate_first_point)calibrate_first_point=!1,tPath_poly_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPath_poly_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,tRubberBand_poly_redline1.attr({path:tPath_poly_redline1}),calibrate_x1=
(firstX_poly_redline1-delta_x)/global_scale,calibrate_y1=(firstY_poly_redline1-delta_y)/global_scale,calibrate_first_point_x=calibrate_x1,calibrate_first_point_y=calibrate_y1;else{calibrate_x1=calibrate_first_point_x;calibrate_y1=calibrate_first_point_y;b=(lastX_poly_redline1-delta_x)/global_scale-calibrate_x1;c=(lastY_poly_redline1-delta_y)/global_scale-calibrate_y1;a=Math.atan2(c,b)/Math.PI*180;c=Math.atan2(c,b);b=10*Math.cos(c)*cvjs_redlineThickness_scaleFactor*calibrate_lineWidth_base*.333;c=
10*Math.sin(c)*cvjs_redlineThickness_scaleFactor*calibrate_lineWidth_base*.333;var d="r"+(a-90)+"T"+(calibrate_x1+b)+","+(calibrate_y1+c);calibrate_Triangle.attr({fill:measurement_color,transform:"r"+(a-270)+"T"+((lastX_poly_redline1-delta_x)/global_scale-b)+","+((lastY_poly_redline1-delta_y)/global_scale-c)});calibrate_Triangle2.attr({fill:measurement_color,transform:d});tPath_poly_redline1="M"+(calibrate_first_point_x+b)+","+(calibrate_first_point_y+c);tPath_poly_redline1+="L"+((lastX_poly_redline1-
delta_x)/global_scale-b)+","+((lastY_poly_redline1-delta_y)/global_scale-c);tRubberBand_poly_redline1.attr({path:tPath_poly_redline1})}}var mousemove_polygon_calibrate=function(a,b,c){mousemove_polygon_calibrate_core(b,c)},measurement_first_point=!0,measurement_first_point_x=1,measurement_first_point_y=1,measurement_Triangle,measurement_Triangle2,measurement_color="#ED1E05",measurement_lineWidth=.33,measurement_lineWidth_base=.33,cvjs_measurement_active=!1;
function cvjs_Measurement_RedlinePolyline(){try{measurement_lineWidth=cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base;measurement_first_point=!0;tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tRubberBand_poly_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_redline1).attr({stroke:measurement_color,"stroke-width":measurement_lineWidth,fill:"#FFF","fill-opacity":"0.01"});polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tPolygon_redline1=
cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:measurement_color,"stroke-width":measurement_lineWidth,fill:"#FFF","fill-opacity":"0.01"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=
canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;a=-3.33*measurement_lineWidth_base*cvjs_redlineThickness_scaleFactor+","+3.33*measurement_lineWidth_base*
cvjs_redlineThickness_scaleFactor+" 0,"+-3.33*measurement_lineWidth_base*cvjs_redlineThickness_scaleFactor+" "+3.33*measurement_lineWidth_base*cvjs_redlineThickness_scaleFactor+","+3.33*measurement_lineWidth_base*cvjs_redlineThickness_scaleFactor;measurement_Triangle=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(a);measurement_Triangle2=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(a);draw_poly_redline1=!1;first_point_poly_redline1=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"}).attr({id:"cvjs_handle_group_measurement"});handleGroup.attr({transform:"T0,0S5.0"});try{jQuery("#cvjs_handle_group_measurement").insertBefore("#"+cvjs_firstCloneHandle)}catch(b){console.log("cvjs_Measurement_RedlinePolyline 2:"+b)}cvjs_measurement_active=!0;
handleGroup.mousedown(mousedown_polygon_measurement);handleGroup.mousemove(mousemove_polygon_measurement)}catch(b){console.log("cvjs_Measurement_RedlinePolyline:"+b)}}function cvjs_removeHandleFunc_MeasurementPolyline(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_measurement_active=!1}
function finish_measurement(){cvjs_callbackMeasurement&&cvjs_measurementCallback(cvjs_currentMeasurementLength,0,cvjs_units[cvjs_active_floorplan_div_nr]);2==cvjs_measurementInteractiveType&&(tRubberBand_poly_redline1.attr({path:"M0,0"}),cvjs_removeHandleFunc_MeasurementFilledPolygon());1==cvjs_measurementInteractiveType&&cvjs_removeHandleFunc_MeasurementPolyline();draw_poly_redline1=!1;cvjs_measurement_end=first_point_poly_redline1=!0}
function mousedown_polygon_measurement_core(a,b){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;if(2<cvjs_measurementInteractiveType){a=(lastX_poly_redline1-delta_x)/global_scale;b=(lastY_poly_redline1-delta_y)/global_scale;c=a-10*measurement_lineWidth;var d=a+10*measurement_lineWidth;if(3==cvjs_measurementInteractiveType||
4==cvjs_measurementInteractiveType)polyPath_redline1="";polyPath_redline1+="M"+c+","+b+"L"+d+","+b;c=b-10*measurement_lineWidth;d=b+10*measurement_lineWidth;polyPath_redline1+="M"+a+","+c+"L"+a+","+d;3==cvjs_measurementInteractiveType&&jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("("+cvjs_get_dwg_x_coord(a,multiPages[cvjs_active_floorplan_div_nr].currentPage).toFixed(4)+","+cvjs_get_dwg_y_coord(b,multiPages[cvjs_active_floorplan_div_nr].currentPage).toFixed(4)+
")");4==cvjs_measurementInteractiveType&&jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("("+a.toFixed(4)+","+b.toFixed(4)+")");5==cvjs_measurementInteractiveType&&(c=jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(),0==c.indexOf("(0,0)")?jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("("+cvjs_get_dwg_x_coord(a,multiPages[cvjs_active_floorplan_div_nr].currentPage).toFixed(4)+","+cvjs_get_dwg_y_coord(b,
multiPages[cvjs_active_floorplan_div_nr].currentPage).toFixed(4)+")"):jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(c+",("+cvjs_get_dwg_x_coord(a,multiPages[cvjs_active_floorplan_div_nr].currentPage).toFixed(4)+","+cvjs_get_dwg_y_coord(b,multiPages[cvjs_active_floorplan_div_nr].currentPage).toFixed(4)+")"));6==cvjs_measurementInteractiveType&&(c=jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(),0==c.indexOf("(0,0)")?jQuery("#cvjs_measurementBox_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("("+a.toFixed(4)+","+b.toFixed(4)+")"):jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(c+",("+a.toFixed(4)+","+b.toFixed(4)+")"));7==cvjs_measurementInteractiveType&&(c=jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(),0==c.indexOf("M0,0")?jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("M"+a.toFixed(4)+","+b.toFixed(4)):jQuery("#cvjs_measurementBox_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(c+"L"+a.toFixed(4)+","+b.toFixed(4)));console.log(" 1: mouse_down  "+polyPath_redline1);tRubberBand_poly_redline1.attr({path:polyPath_redline1});3!=cvjs_measurementInteractiveType&&4!=cvjs_measurementInteractiveType||cvjs_removeHandleFunc_MeasurementPolyline()}else draw_poly_redline1?finish_measurement():(console.log(" first point "+first_point_poly_redline1),first_point_poly_redline1&&(first_point_poly_redline1=!1,lastX_poly_redline1=a,lastY_poly_redline1=
b,firstX_poly_redline1=a,firstY_poly_redline1=b,originX_poly_redline1=a,originY_poly_redline1=b,polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale),tPolygon_redline1.attr({path:polyPath_redline1}),tPolygon_redline1.attr({stroke:measurement_color,"stroke-width":measurement_lineWidth,fill:"#FFF","fill-opacity":"0.01"}),draw_poly_redline1=!0,cvjs_measurement_end=!1,console.log(" 2: mouse_down  "+polyPath_redline1))}
var mousedown_polygon_measurement=function(a,b,c){mousedown_polygon_measurement_core(b,c)};
function mousemove_polygon_measurement_core(a,b){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;if(2<cvjs_measurementInteractiveType)lastX_poly_redline1=a,lastY_poly_redline1=b;else if(draw_poly_redline1){lastX_poly_redline1=a;lastY_poly_redline1=b;measurement_first_point?(measurement_first_point=!1,measurement_x1=
(firstX_poly_redline1-delta_x)/global_scale,measurement_y1=(firstY_poly_redline1-delta_y)/global_scale,measurement_x2=(lastX_poly_redline1-delta_x)/global_scale,measurement_y2=(lastY_poly_redline1-delta_y)/global_scale,b=measurement_x2-measurement_x1,c=measurement_y2-measurement_y1,c=Math.atan2(c,b),b=10*Math.cos(c)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333,c=10*Math.sin(c)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333):(measurement_x2=(lastX_poly_redline1-
delta_x)/global_scale,measurement_y2=(lastY_poly_redline1-delta_y)/global_scale,b=measurement_x2-measurement_x1,c=measurement_y2-measurement_y1,c=Math.atan2(c,b),b=10*Math.cos(c)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333,c=10*Math.sin(c)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333);tPath_poly_redline1="M"+(measurement_x1+b)+","+(measurement_y1+c);tPath_poly_redline1+="L"+(measurement_x2-1.1*b)+","+(measurement_y2-1.1*c);tRubberBand_poly_redline1.attr({path:tPath_poly_redline1});
b=measurement_x2-measurement_x1;c=measurement_y2-measurement_y1;a=Math.atan2(c,b)/Math.PI*180;c=Math.atan2(c,b);b=10*Math.cos(c)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333;c=10*Math.sin(c)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333;var d="r"+(a-90)+"T"+(measurement_x1+b)+","+(measurement_y1+c);measurement_Triangle.attr({fill:measurement_color,transform:"r"+(a-270)+"T"+(measurement_x2-1.1*b)+","+(measurement_y2-1.1*c)});measurement_Triangle2.attr({fill:measurement_color,
transform:d});cvjs_currentMeasurementLength=b=(cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*Math.sqrt(Math.pow(measurement_x2-measurement_x1,2)+Math.pow(measurement_y2-measurement_y1,2))).toFixed(2);1==cvjs_measurementInteractiveType?jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance):jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area);
0==cvjs_units[cvjs_active_floorplan_div_nr].indexOf("feet")?(a=Math.floor(b),b-=Math.floor(b),b=Math.round(16*b),16==b&&(a+=1,b=0),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(a+"' "+b+'/16"')):jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(b+" "+cvjs_units[cvjs_active_floorplan_div_nr])}}
var mousemove_polygon_measurement=function(a,b,c){mousemove_polygon_measurement_core(b,c)},originX_poly_redline1=0,originY_poly_redline1=0,firstX_poly_redline1=0,firstY_poly_redline1=0,lastX_poly_redline1=400,lastY_poly_redline1=300,tPath_poly_redline1,tRubberBand_poly_redline1,polyPath_redline1,tPolygon_redline1,draw_poly_redline1=!1,first_point_poly_redline1=!0,cvjs_currentRedline_color="#FF0000",area_vertices,area_vertices_counter=0;
function calcPolygonArea(a){for(var b=0,c=0,d=a.length;c<d;c++){var e=a[c==a.length-1?0:c+1].x,f=a[c].y;b+=a[c].x*a[c==a.length-1?0:c+1].y*.5;b-=e*f*.5}return Math.abs(b)}var cvjs_measurementArea=0,cvjs_measurementMultipleSegmentLength=0,cvjs_MeasurementFilledPoly_firstsegment=!1,cvjs_addHandleFunc_MeasurementFilledPolygon_started=!1;
function cvjs_addHandleFunc_MeasurementFilledPolygon(){area_vertices=[];cvjs_measurementMultipleSegmentLength=area_vertices_counter=0;cvjs_addHandleFunc_MeasurementFilledPolygon_started=cvjs_MeasurementFilledPoly_firstsegment=!0;tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tRubberBand_poly_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor/
2,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"});polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tPolygon_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor/2,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();
var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*
global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly_redline1=!1;first_point_poly_redline1=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"}).attr({id:"cvjs_handle_group_measurement"});
handleGroup.attr({transform:"T0,0S5.0"});try{jQuery("#cvjs_handle_group_measurement").insertBefore("#"+cvjs_firstCloneHandle)}catch(b){console.log("cvjs_addHandleFunc_MeasurementFilledPolygon 2:"+b)}cvjs_measurement_active=!0;handleGroup.mousedown(mousedown_polygon_area_measurement);handleGroup.mousemove(mousemove_polygon_area_measurement);handleGroup.dblclick(measurement_finish_filledpolygon);oldKeyDown=jQuery(document).keydown().bind({});jQuery(document).keydown(function(a){27==a.keyCode&&cvjs_addHandleFunc_MeasurementFilledPolygon_started&&
(cvjs_addHandleFunc_MeasurementFilledPolygon_started=!1,cvjs_measurementMultipleSegmentLength=Math.round(100*cvjs_currentMeasurementLength)/100,measurement_first_point=!0,measurement_finish_filledpolygon())})}
function cvjs_removeHandleFunc_MeasurementFilledPolygon(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}cvjs_measurement_active=!1}
function cvjs_closeAreaMeasurement(){lastX_poly_redline1=firstX_poly_redline1;lastY_poly_redline1=firstY_poly_redline1;measurement_finish_filledpolygon()}
var measurement_finish_filledpolygon=function(){console.log("doubleclick or finish measurement");cvjs_measurement_end=!0;polyPath_redline1+="L"+lastX_poly_redline1+","+lastY_poly_redline1+"L"+firstX_poly_redline1_segment1+","+firstY_poly_redline1_segment1+"Z";tPolygon_redline1.attr({path:polyPath_redline1});cvjs_removeHandleFunc_MeasurementFilledPolygon();tRubberBand_poly_redline1.attr({path:"M0,0"});draw_poly_redline1=!1;first_point_poly_redline1=!0;measurement_x1=firstX_poly_redline1_segment1;measurement_y1=
firstY_poly_redline1_segment1;var a=(cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*Math.sqrt(Math.pow(measurement_x2-measurement_x1,2)+Math.pow(measurement_y2-measurement_y1,2))).toFixed(2);cvjs_measurementMultipleSegmentLength=Math.round(100*cvjs_measurementMultipleSegmentLength)/100;a=Math.round(100*a)/100;cvjs_debug&&console.log("XX"+cvjs_measurementMultipleSegmentLength+"XX"+a+"ZZ cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr] "+cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]);var b=
cvjs_measurementMultipleSegmentLength+a;cvjs_currentMeasurementLength=cvjs_measurementMultipleSegmentLength=b=Math.round(100*b)/100;area_vertices[area_vertices_counter]=[];area_vertices[area_vertices_counter]={x:firstX_poly_redline1_segment1,y:firstY_poly_redline1_segment1};cvjs_debug&&console.log("finish ver "+area_vertices_counter+" "+area_vertices[area_vertices_counter].x+"  "+area_vertices[area_vertices_counter].y);area_vertices_counter++;cvjs_measurementArea=(calcPolygonArea(area_vertices)*cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*
cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]).toFixed(2);cvjs_callbackMeasurement&&cvjs_measurementCallback(cvjs_measurementMultipleSegmentLength,cvjs_measurementArea,cvjs_units[cvjs_active_floorplan_div_nr]);1==cvjs_measurementInteractiveType?jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance):jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area);
0==cvjs_units[cvjs_active_floorplan_div_nr].indexOf("feet")?(a=Math.floor(b),b-=Math.floor(b),b=Math.round(16*b),16==b&&(a+=1,b=0),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(cvjs_measurementArea+" "+cvjs_units[cvjs_active_floorplan_div_nr]+"\u00b2 ("+a+"' "+b+'/16")')):jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(cvjs_measurementArea+" "+cvjs_units[cvjs_active_floorplan_div_nr]+"\u00b2 ("+cvjs_measurementMultipleSegmentLength+
" "+cvjs_units[cvjs_active_floorplan_div_nr]+")")},firstX_poly_redline1_segment1=0,firstY_poly_redline1_segment1=0,mousedown_polygon_area_measurement=function(a,b,c){mousedown_polygon_area_measurement_core(b,c)};
function mousedown_polygon_area_measurement_core(a,b){measurement_first_point=!0;draw_poly_redline1?(polyPath_redline1+="L"+lastX_poly_redline1+","+lastY_poly_redline1,tPolygon_redline1.attr({path:polyPath_redline1}),firstX_poly_redline1=lastX_poly_redline1,firstY_poly_redline1=lastY_poly_redline1,area_vertices[area_vertices_counter]=[],area_vertices[area_vertices_counter]={x:lastX_poly_redline1,y:lastY_poly_redline1},cvjs_debug&&console.log("true mousedown area_vertices"+area_vertices_counter+" "+
area_vertices[area_vertices_counter].x+"  "+area_vertices[area_vertices_counter].y),area_vertices_counter++):(draw_poly_redline1=!0,firstX_poly_redline1_segment1=firstX_poly_redline1,firstY_poly_redline1_segment1=firstY_poly_redline1,area_vertices[area_vertices_counter]=[],area_vertices[area_vertices_counter]={x:firstX_poly_redline1_segment1,y:firstY_poly_redline1_segment1},cvjs_debug&&console.log("false mousedown area_vertices"+area_vertices_counter+" "+area_vertices[area_vertices_counter].x+"  "+
area_vertices[area_vertices_counter].y),area_vertices_counter++,polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1,tPolygon_redline1.attr({path:polyPath_redline1}),tPolygon_redline1.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"}));cvjs_MeasurementFilledPoly_firstsegment?(cvjs_MeasurementFilledPoly_firstsegment=!1,cvjs_measurementMultipleSegmentLength=0):(cvjs_measurementMultipleSegmentLength=
Math.round(100*cvjs_currentMeasurementLength)/100,measurement_first_point=!0)}var mousemove_polygon_area_measurement=function(a,b,c){mousemove_polygon_area_measurement_core(b,c)};
function mousemove_polygon_area_measurement_core(a,b){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:
global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;draw_poly_redline1?(first_point_poly_redline1?(first_point_poly_redline1=!1,originX_poly_redline1=(a-delta_x)/global_scale,originY_poly_redline1=(b-delta_y)/global_scale,firstX_poly_redline1=(a-delta_x)/
global_scale,firstY_poly_redline1=(b-delta_y)/global_scale,lastX_poly_redline1=(a-delta_x)/global_scale,lastY_poly_redline1=(b-delta_y)/global_scale,polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1):(lastX_poly_redline1=(a-delta_x)/global_scale,lastY_poly_redline1=(b-delta_y)/global_scale),b=Math.atan2(lastY_poly_redline1-firstY_poly_redline1,lastX_poly_redline1-firstX_poly_redline1),a=1*Math.cos(b)*cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333,b=1*Math.sin(b)*
cvjs_redlineThickness_scaleFactor*measurement_lineWidth_base*.333,tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1,tPath_poly_redline1+="L"+(lastX_poly_redline1-a)+","+(lastY_poly_redline1-b),tRubberBand_poly_redline1.attr({path:tPath_poly_redline1})):(firstX_poly_redline1=(a-delta_x)/global_scale,firstY_poly_redline1=(b-delta_y)/global_scale);measurement_first_point&&(measurement_first_point=!1,measurement_x1=firstX_poly_redline1,measurement_y1=firstY_poly_redline1);measurement_x2=
lastX_poly_redline1;measurement_y2=lastY_poly_redline1;cvjs_MeasurementFilledPoly_firstsegment||(a=(cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*Math.sqrt(Math.pow(measurement_x2-measurement_x1,2)+Math.pow(measurement_y2-measurement_y1,2))).toFixed(2),cvjs_measurementMultipleSegmentLength=Math.round(100*cvjs_measurementMultipleSegmentLength)/100,a=Math.round(100*a)/100,a=cvjs_measurementMultipleSegmentLength+a,cvjs_currentMeasurementLength=b=a=Math.round(100*a)/100,1==cvjs_measurementInteractiveType?
jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance):jQuery("#cvjs_measurementLength_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area),0==cvjs_units[cvjs_active_floorplan_div_nr].indexOf("feet")?(a=Math.floor(b),b-=Math.floor(b),b=Math.round(16*b),16==b&&(a+=1,b=0),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(a+
"' "+b+'/16"')):jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(b+" "+cvjs_units[cvjs_active_floorplan_div_nr]))}var cvjs_currentRedline_strokeWidth=1,XrefFileList=[],cvjs_printModalCustomCheckBox="",cvjs_customPrintCheckbox=!1,cvjs_customPrintCheckboxMode=!1,printmodalTextBox="";
function cvjs_setPrintModalCustomCheckBox(a,b){cvjs_customPrintCheckboxMode=a;cvjs_printModalCustomCheckBox=b;cvjs_debug&&console.log("in cvjs_setPrintModalCustomCheckBox "+cvjs_printModalCustomCheckBox+"  "+b)}
function cvjs_setPrintModalCustomCheckBoxFromFile(a,b){var c=cvjs_serverHandlersPath+cvjs_serverLoadFileController,d={};d.file=cvjs_ServerLocation+"/app/cv/"+b;jQuery.ajax({url:c,type:"post",async:!1,data:d,success:function(c){cvjs_customPrintCheckboxMode=a;cvjs_printModalCustomCheckBox=c;cvjs_debug&&console.log("in cvjs_setPrintModalCustomCheckBox "+cvjs_printModalCustomCheckBox+"  "+b)}})}
var cvjs_printModalCustomTextBox="",cvjs_printModalCustomTextBoxVariablesList=[],cvjs_printModalCustomTextBoxVariablesContent=[],cvjs_printModalCustomTextBoxVariablesPrepend=[],cvjs_customPrintTextbox=!1,cvjs_customPrintTextboxMode=!1,cvjs_customPrintDualTextboxMode=!1;function cvjs_setPrintModalCustomDualTextBox(a,b){cvjs_customPrintDualTextboxMode=!0;cvjs_setPrintModalCustomTextBox(a,b)}
function cvjs_setPrintModalCustomTextBox(a,b){cvjs_customPrintTextboxMode=a;cvjs_printModalCustomTextBoxVariablesList=b.split(",");cvjs_printModalCustomTextBox="hello";cvjs_printModalCustomTextBoxVariablesContent=Array(cvjs_printModalCustomTextBoxVariablesList.length);cvjs_printModalCustomTextBoxVariablesPrepend=Array(cvjs_printModalCustomTextBoxVariablesList.length);for(a=0;a<cvjs_printModalCustomTextBoxVariablesList.length;a++){var c=cvjs_printModalCustomTextBoxVariablesList[a].split(":");1==c.length?
cvjs_printModalCustomTextBoxVariablesPrepend[a]="none":(c[0]=c[0].replace("%7B","{"),c[1]=c[1].replace("%7D","}"),cvjs_printModalCustomTextBoxVariablesPrepend[a]=c[1].substring(0,c[1].length-1),cvjs_printModalCustomTextBoxVariablesList[a]=c[0].substring(1))}cvjs_debug&&console.log("in cvjs_setPrintModalCustomTextBox "+cvjs_printModalCustomCheckBox+"  "+b)}function cvjs_setPrintModalCustomDualTextBoxFromFile(a,b){cvjs_customPrintDualTextboxMode=!0;cvjs_setPrintModalCustomTextBoxFromFile(a,b)}
function cvjs_setPrintModalCustomTextBoxFromFile(a,b){var c,d=cvjs_serverHandlersPath+cvjs_serverLoadFileController,e={};e.file=cvjs_ServerLocation+"/app/cv/"+b;jQuery.ajax({url:d,type:"post",async:!1,data:e,success:function(a){c=a;cvjs_debug&&console.log("in cvjs_setPrintModalCustomCheckBox "+cvjs_printModalCustomCheckBox+"  "+b)}});cvjs_customPrintTextboxMode=a;cvjs_printModalCustomTextBoxVariablesList=c.split(",");cvjs_printModalCustomTextBox="hello";cvjs_printModalCustomTextBoxVariablesContent=
Array(cvjs_printModalCustomTextBoxVariablesList.length);cvjs_printModalCustomTextBoxVariablesPrepend=Array(cvjs_printModalCustomTextBoxVariablesList.length);for(a=0;a<cvjs_printModalCustomTextBoxVariablesList.length;a++)d=cvjs_printModalCustomTextBoxVariablesList[a].split(":"),1==d.length?cvjs_printModalCustomTextBoxVariablesPrepend[a]="none":(d[0]=d[0].replace("%7B","{"),d[1]=d[1].replace("%7D","}"),cvjs_printModalCustomTextBoxVariablesPrepend[a]=d[1].substring(0,d[1].length-1),cvjs_printModalCustomTextBoxVariablesList[a]=
d[0].substring(1));cvjs_debug&&console.log("in cvjs_setPrintModalCustomTextBox "+cvjs_printModalCustomCheckBox+"  "+c)}function cvjs_GetURLParameter(a){for(var b=window.location.search.substring(1).split("&"),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return d[1]}return""}function cvjs_PrintToPDFWindowRelativeSize(a){cvjs_print_to_pdf_windowRelativeSize=a}var cvjs_fileModalEditMode=!0;function cvjs_setFileModalEditMode(a){cvjs_fileModalEditMode=a}
function cvjs_setPrintPaperSizeasSVGObject(a){cvjs_printPaperSizeasSVGObjectFlag=a}var cvjs_printPaperSizeasSVGObjectFlag=!0;
function cvjs_printPaperSizeasSVGObject(a){try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var b=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox(),c=!1;c=1>b.width/b.height?!0:!1;var d=-1<navigator.userAgent.indexOf("Chrome"),e=-1<navigator.userAgent.indexOf("Firefox"),f=-1<navigator.userAgent.indexOf("MSIE")||-1<navigator.userAgent.indexOf("Trident"),g=-1<navigator.userAgent.indexOf("Safari");navigator.userAgent.indexOf("Presto");d&&g&&(g=!1);
var h='<?xml version="1.0" encoding="utf-8" ?>';h+=' <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';h+='<svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"';h+=' width="'+b.width+'" height="'+b.height+'" viewbox="'+b.x+" "+b.y+" "+b.width+" "+b.height+'"';cvjs_printGrayscale?(h+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" filter="url(#grayscale)"> ',
h=2==jQuery("#cvjs_grayScaleType").val()?h+'<filter id="grayscale"><feColorMatrix type="matrix" values="0.1 0.1 0.1 0 0 0.1 0.1 0.1 0 0 0.1 0.1 0.1 0 0 0 0 0 1 0"/></filter>':h+'<filter id="grayscale"><feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/></filter>'):h+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=
cvjs_rPaperIndex(a);var k=h+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>";cvjs_useFrameOutputFile_ZoomedStatus=!1;if(cvjs_useFrameOutputFile){var l=cvjs_rPaper[cvjs_active_floorplan_div_nr].toString();l=l.substring(l.indexOf("svg id")+7);l=l.substring(l.indexOf("viewBox")+9);l=l.substring(0,l.indexOf('"'));var m=l.split(" ");cvjs_FrameOutput_bbox.x=parseFloat(m[0]);cvjs_FrameOutput_bbox.y=parseFloat(m[1]);cvjs_FrameOutput_bbox.width=parseFloat(m[2]);cvjs_FrameOutput_bbox.height=parseFloat(m[3]);
cvjs_useFrameOutputFile_ZoomedStatus=0==cvjs_FrameOutput_PrintOutputAtDualTextbox?100>Math.abs(cvjs_FrameOutput_bbox.width-2500)||100>Math.abs(cvjs_FrameOutput_bbox.height-2500)?!1:!0:1==cvjs_customPrintCheckbox?!0:!1;cvjs_FrameOutput_clipbox.x=parseFloat(m[0]);cvjs_FrameOutput_clipbox.y=parseFloat(m[1]);cvjs_FrameOutput_clipbox.width=parseFloat(m[2]);cvjs_FrameOutput_clipbox.height=parseFloat(m[3])}cvjs_NodeJSserver&&(k=k.replace(/xlink:href=["]assets[/]cadviewer/g,'xlink:href="'+cvjs_ServerUrl+
"files?file="));var p=Math.floor(1E6*Math.random()+1),n="print/"+p+"/"+cvjs_FileNameNoExtension+".svg";l="print/"+p+"/"+cvjs_FileNameNoExtension+"_frame.svg";a=cvjs_printPaperWidth_mm;h=cvjs_printPaperHeight_mm;var q=k.indexOf("tmsMinLineWidth");if(0<q){var r=k.substring(q+17),t=r.indexOf(";");r=r.substring(0,t);var u=parseFloat(r);cvjs_printOrientation.indexOf("landscape");if(c){var v=b.height;v=h/v;e||(u*=v,x=k.substring(0,q+17),B=k.substring(q+17+t),k=x+u+B)}else{var y=b.width;y=a/y;if(!e){u*=
y;var x=k.substring(0,q+17),B=k.substring(q+17+t);k=x+u+B}}}cvjs_debug&&console.log("YYYY "+k.length+" ZZZ");var A=k.substring(k.lastIndexOf("</g><g></g>")+11,k.lastIndexOf("</svg></svg>"));cvjs_debug&&console.log("redlines "+A);if(0<A.length){k=k.substring(0,k.lastIndexOf("</g><g></g>")+11)+"</svg></svg>";var z=k.lastIndexOf("</g><desc>Created with Snap</desc>");if(-1<z){var C=k.substring(z);k=k.substring(0,z)+A+C}else z=k.lastIndexOf("</image>"),-1<z&&(C=k.substring(z+8),k=k.substring(0,z+8)+A+
C)}b=cvjs_serverHandlersPath+cvjs_serverSaveFileController;q=cvjs_ServerLocation+"/converters/files/"+n;r={};r.file=q;r.file_content=k;jQuery.ajax({url:b,type:"post",async:!1,data:r,success:function(a){cvjs_debug&&console.log("Saved zoomed svg file")}});if(cvjs_useFrameOutputFile_ZoomedStatus){cvjs_Conversion_forPrint(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_FrameOutputFileName,cvjs_conversion_originatingUsername[cvjs_active_floorplan_div_nr],cvjs_conversion_originatingPassword[cvjs_active_floorplan_div_nr],
"svg");var D="";k={};if(0<cvjs_FrameOutputConvertedFileName.indexOf("fileTag")){var F=cvjs_FrameOutputConvertedFileName.substring(cvjs_FrameOutputConvertedFileName.indexOf("fileTag")+8);cvjs_FrameOutputConvertedFileName=F.substring(0,F.indexOf("&"))+".svg"}else"f"!=cvjs_FrameOutputConvertedFileName.charAt(0)&&(cvjs_FrameOutputConvertedFileName="f"+cvjs_FrameOutputConvertedFileName.substring(cvjs_FrameOutputConvertedFileName.lastIndexOf("/")+1));k.file=cvjs_ServerLocation+"/converters/files/"+cvjs_FrameOutputConvertedFileName;
jQuery.ajax({url:cvjs_serverHandlersPath+cvjs_serverLoadFileController,type:"post",data:k,async:!1,success:function(a){D=a;cvjs_debug&&console.log("Load background file:   length of file"+a.length)},error:function(a){console.log("Error "+a)}});F=0;F=cvjs_spaceReduction_TitleBlock_ZoomPrint_top+cvjs_spaceReduction_TitleBlock_ZoomPrint_bottom>cvjs_spaceReduction_TitleBlock_ZoomPrint_left+cvjs_spaceReduction_TitleBlock_ZoomPrint_right?cvjs_spaceReduction_TitleBlock_ZoomPrint_top+cvjs_spaceReduction_TitleBlock_ZoomPrint_bottom:
cvjs_spaceReduction_TitleBlock_ZoomPrint_left+cvjs_spaceReduction_TitleBlock_ZoomPrint_right;var w='<g id="cv_frame_insert01" transform="translate('+2500*cvjs_spaceReduction_TitleBlock_ZoomPrint_top+","+2500*cvjs_spaceReduction_TitleBlock_ZoomPrint_left+"),scale("+(1-F)+')"><svg viewBox="'+cvjs_FrameOutput_bbox.x+" "+cvjs_FrameOutput_bbox.y+" "+cvjs_FrameOutput_bbox.width+" "+cvjs_FrameOutput_bbox.height+'" ><use xlink:href="'+cvjs_ServerUrl+"/converters/files/"+n+'#cv_main_drawing" ></use>   </svg></g>';
D=D.substring(0,D.lastIndexOf("</svg>"))+w+"</svg>";b=cvjs_serverHandlersPath+cvjs_serverSaveFileController;r={};r.file=cvjs_ServerLocation+"/converters/files/"+l;r.file_content=D;cvjs_debug&&console.log(r.file+"  "+D.length);jQuery.ajax({url:b,type:"post",async:!1,data:r,success:function(a){cvjs_debug&&console.log("saving file with svgUseString ")},error:function(a){console.log("Error "+a)}});n=l}var G=n.substring(n.lastIndexOf("/")+1);G=G.substring(0,G.lastIndexOf(".")-1);w="<!DOCTYPE html><html><head><title>"+
G+"</title>";if(cvjs_removePrintObject){var E=cvjs_serverHandlersPath+cvjs_serverDeleteFileController+"?file="+encodeURIComponent("xXXX"+cvjs_ServerLocation+"/converters/files/"+n);0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("angular")||0!=cvjs_backEndHandlerType.indexOf("nodejs")||(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");0==cvjs_frontEndHandlerType.indexOf("javascript")&&0==cvjs_backEndHandlerType.indexOf("nodejs")&&
(cvjs_defaultJSPath=cvjs_javaScriptsAbsoluteFolder="/app/js/");w=JQ_absoluteFolder?w+('<script src="'+cvjs_javaScriptsAbsoluteFolder+'" type="text/javascript">\x3c/script>'):w+('<script src="'+cvjs_defaultJSPath+'jquery-2.2.3.js" type="text/javascript">\x3c/script>');w+='<script type="text/javascript">';w+="jQuery(window).on('beforeunload', function ()";w+="{";w+="jQuery.ajax({";w+="url:'"+E+"',";w+="cache: false,";w+="success: function(html){";w+="}";w+="});";w+="});";w+="jQuery(window).on('unload', function ()";
w+="{";w+="jQuery.ajax({";w+="url:'"+E+"',";w+="cache: false,";w+="success: function(html){";w+="}";w+="});";w+="});";w+="window.onbeforeunload = function () {";w+="jQuery.ajax({";w+="url:'"+E+"',";w+="cache: false,";w+="success: function(html){";w+="}";w+="});";w+="return undefined; }; ";w+="\x3c/script>"}w+='<style type="text/css" media="print">';w+="@page {size: ";w=-1<cvjs_printOrientation.indexOf("landscape")?w+(a+"mm "+h+"mm"):w+(h+"mm "+a+"mm");w+="}";w+="</style>";E="";E=(0==cvjs_frontEndHandlerType.indexOf("vuejs")||
0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("angular"))&&0==cvjs_backEndHandlerType.indexOf("nodejs")||0==cvjs_frontEndHandlerType.indexOf("javascript")&&0==cvjs_backEndHandlerType.indexOf("nodejs")?0==cvjs_ServerBackEndUrl.slice(-1).indexOf("/")?cvjs_ServerBackEndUrl+"converters/files/"+n:cvjs_ServerBackEndUrl+"/converters/files/"+n:n.substring(n.lastIndexOf("/")+1);w+='<script src="'+cvjs_defaultJSPath+'/popper.js" type="text/javascript">\x3c/script><script src="'+
cvjs_defaultJSPath+'/bootstrap.min.js" type="text/javascript">\x3c/script><link href="'+cvjs_defaultJSPath+'../css/bootstrap.min.css" rel="stylesheet">\x3c/script>';w+='<link href="'+cvjs_defaultJSPath+'../css/font-awesome.min.css" rel="stylesheet">\x3c/script>';w+="<style>.btn {  background-color: DodgerBlue;  border: none;  color: white;  padding: 12px 30px;  cursor: pointer;  font-size: 20px;} /* Darker background on mouse-over */ .btn:hover {  background-color: RoyalBlue;} </style>";w+='<script type="text/javascript">';
w+="jQuery(document).ready(function(){\tjQuery('#printbutton').click(function (e) { \t\tjQuery('#printbutton').remove(); window.print(); \t});});\x3c/script>";w+="</head><body>";w+='<button id="printbutton" class="btn" style="width:100%"><i class="fa fa-print"></i> Print: '+(n.substring(n.lastIndexOf("/")+1)+"</button> <br>");w+="<div id=\"imagetag\"><object type='image/svg+xml' data='"+E;d=-1<navigator.userAgent.indexOf("Chrome");e=-1<navigator.userAgent.indexOf("Firefox");f=-1<navigator.userAgent.indexOf("MSIE")||
-1<navigator.userAgent.indexOf("Trident");g=-1<navigator.userAgent.indexOf("Safari");navigator.userAgent.indexOf("Presto");var H=-1<navigator.userAgent.indexOf("Edge");cvjs_debug&&console.log("what browser "+d+" "+e+" "+f+" "+g+" "+H);H&&(d=!1);cvjs_debug&&console.log("after Edge "+d);c?d?(w+="'  style=\"height: auto; width:"+(a-40)+'mm;" /></div></body></html>',cvjs_debug&&console.log("P1 widthHeightFactorSVGless1  '  style=\"height: auto; width:"+(a-10)+'mm;" /></div></body></html>')):e?(cvjs_debug&&
console.log("P2 widthHeightFactorSVGless1  '  style=\"height:"+(h-40)+"mm; width:"+(a-0)+'mm;" /></div></body></html>'),w+="'  style=\"height:"+(h-40)+"mm; width:"+(a-0)+'mm;" /></div></body></html>'):(cvjs_debug&&console.log("P3 widthHeightFactorSVGless1  '  style=\"height: auto; width:"+(a-40)+'mm;" /></div></body></html>'),w+="'  style=\"height: auto; width:"+(a-40)+'mm;" /></div></body></html>'):d?(cvjs_debug&&console.log("P4 no widthHeightFactorSVGless1  '  style=\"height: auto; width: "+(a-
40)+'mm;" /></div></body></html>'),w+="'  style=\"height: "+(h-40)+'mm; width: auto;" /></div></body></html>'):e?(cvjs_debug&&console.log("P5 no widthHeightFactorSVGless1  "+(h-40)+"mm; width: "+(a-0)+'mm;" /></div></body></html>'),w+="'  style=\"height: "+(h-40)+"mm; width: "+(a-0)+'mm;" /></div></body></html>'):(cvjs_debug&&console.log('P6 no widthHeightFactorSVGless1   style="height: '+(h-40)+'mm; width: auto;" /></div></body></html>'),w+="'  style=\"height: "+(h-40)+'mm; width: auto;" /></div></body></html>');
b=cvjs_serverHandlersPath+cvjs_serverSaveFileController;q=cvjs_ServerLocation+"/converters/files/"+n.substring(0,n.lastIndexOf("."))+".html";r={};r.file=q;r.file_content=w;jQuery.ajax({url:b,type:"post",async:!1,data:r,success:function(a){cvjs_debug&&console.log("saving html before opening ");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();console.log("6.4.38 cvjs_ServerBackEndUrl"+cvjs_ServerBackEndUrl+" XX"+cvjs_frontEndHandlerType+"XX XX"+cvjs_backEndHandlerType+
"XX");console.log((0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("angular"))&&0==cvjs_backEndHandlerType.indexOf("nodejs"));(0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("angular"))&&0==cvjs_backEndHandlerType.indexOf("nodejs")||0==cvjs_frontEndHandlerType.indexOf("javascript")&&0==cvjs_backEndHandlerType.indexOf("nodejs")?(a=cvjs_ServerBackEndUrl.slice(-1),
console.log("before printwindow "+cvjs_ServerBackEndUrl+"converters/files/"+n.substring(0,n.lastIndexOf("."))+".html","CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width),printWindow=0==a.indexOf("/")?window.open(cvjs_ServerBackEndUrl+"converters/files/"+n.substring(0,n.lastIndexOf("."))+".html","CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width):window.open(cvjs_ServerBackEndUrl+"/converters/files/"+n.substring(0,n.lastIndexOf("."))+
".html","CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width)):printWindow=window.open(cvjs_ServerUrl+"/converters/files/"+n.substring(0,n.lastIndexOf("."))+".html","CADViewer - Print","height="+.5*window.screen.height+",width="+.5*window.screen.width)}})}catch(I){console.log(I),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()}}
var cvjs_useFrameOutputFile=!1,cvjs_useFrameOutputFile_ZoomedStatus=!1,cvjs_FrameOutputFileName="",cvjs_FrameOutputConvertedFileName="",cvjs_spaceReduction_TitleBlock_ZoomPrint_top=0,cvjs_spaceReduction_TitleBlock_ZoomPrint_bottom=0,cvjs_spaceReduction_TitleBlock_ZoomPrint_left=0,cvjs_spaceReduction_TitleBlock_ZoomPrint_right=0,cvjs_FrameOutput_bbox={x:0,y:0,width:0,height:0},cvjs_FrameOutput_clipbox={x:0,y:0,width:0,height:0},cvjs_FrameOutput_PrintOutputAtDualTextbox=!1;
function cvjs_superimposeBackgroundDrawing_PrintOutputAtDualTextbox(a,b,c,d,e,f){cvjs_useFrameOutputFile=cvjs_FrameOutput_PrintOutputAtDualTextbox=!0;cvjs_FrameOutputFileName=b;cvjs_spaceReduction_TitleBlock_ZoomPrint_top=c;cvjs_spaceReduction_TitleBlock_ZoomPrint_bottom=d;cvjs_spaceReduction_TitleBlock_ZoomPrint_left=e;cvjs_spaceReduction_TitleBlock_ZoomPrint_right=f}
function cvjs_superimposeBackgroundDrawing_PrintOutputAtZoom(a,b,c,d,e,f){cvjs_FrameOutput_PrintOutputAtDualTextbox=!1;cvjs_useFrameOutputFile=!0;cvjs_FrameOutputFileName=b;cvjs_spaceReduction_TitleBlock_ZoomPrint_top=c;cvjs_spaceReduction_TitleBlock_ZoomPrint_bottom=d;cvjs_spaceReduction_TitleBlock_ZoomPrint_left=e;cvjs_spaceReduction_TitleBlock_ZoomPrint_right=f}
function parseServerResponseSVGPrint(a){a=jQuery.parseJSON(a);"E0"==a.errorCode?(jQuery("#looper").hide(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),"svg_creation"==a.completedAction&&(cvjs_FrameOutputConvertedFileName="","stream"==rest_contentResponse&&(cvjs_FrameOutputConvertedFileName=a.contentStreamData),"file"==rest_contentResponse&&(cvjs_FrameOutputConvertedFileName=a.contentStreamData)),console.log("Converted callback")):(jQuery("#looper").hide(),
jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],"E1"==a.errorCode?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ServerSideFormatForPDFPrint:"Server side conversion error, AutoXchange responded with errorcode: "+a.errorCode))}
var cvjs_initCustomPrintCheckboxMode=!1,settings_text_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_Settings(a){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");settings_text_offset_flag[cvjs_active_floorplan_div_nr]&&(settings_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#settingsModal_"+a).css({position:"fixed"}),jQuery("#settingsModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}));for(var b="",c=0;c<
languageTable.numberOfLanguages;c++)b=c==cvjs_currentLanguage?b+('<option value="'+(c+1)+'" selected>'+languageTable.languages[c].thisLanguage+"</option>"):b+('<option value="'+(c+1)+'">'+languageTable.languages[c].thisLanguage+"</option>");jQuery("#cvjs_settingsSelectLanguage").html(b);b="";for(var d=languageTable.languages[cvjs_currentLanguage].SettingsModal.TotalParameters,e=!1,f=0;f<d;f++){e=!1;for(c=0;c<rest_nname_custom[cvjs_active_floorplan_div_nr].length;c++)rest_nname_custom[cvjs_active_floorplan_div_nr][c]==
languageTable.languages[cvjs_currentLanguage].SettingsModal.ParamNames.ParamName[f]&&(e=!0);e||(c=rest_nname_custom[cvjs_active_floorplan_div_nr].length,rest_nname_custom[cvjs_active_floorplan_div_nr][c]=languageTable.languages[cvjs_currentLanguage].SettingsModal.ParamNames.ParamName[f],rest_vvalue_custom[cvjs_active_floorplan_div_nr][c]=languageTable.languages[cvjs_currentLanguage].SettingsModal.ParamValues.ParamValue[f])}d=0;f=-1;for(c=0;c<rest_nname[cvjs_active_floorplan_div_nr].length;c++)console.log("rest_nname[cvjs_active_floorplan_div_nr ][i] "+
rest_nname[cvjs_active_floorplan_div_nr][c]),0==rest_nname[cvjs_active_floorplan_div_nr][c].indexOf("layout")&&(f=c,console.log("rest_nname[cvjs_active_floorplan_div_nr ][i] "+rest_nname[cvjs_active_floorplan_div_nr][c]));if(-1<f)for(f+=1;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)"last"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]="",rest_vvalue[cvjs_active_floorplan_div_nr][f]=""),"model"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]=
"",rest_vvalue[cvjs_active_floorplan_div_nr][f]=""),"paper"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]="",rest_vvalue[cvjs_active_floorplan_div_nr][f]=""),"firstlayout"==rest_nname[cvjs_active_floorplan_div_nr][f]&&(rest_nname[cvjs_active_floorplan_div_nr][f]="",rest_vvalue[cvjs_active_floorplan_div_nr][f]="");d=0;f=-1;for(c=0;c<rest_nname[cvjs_active_floorplan_div_nr].length;c++)console.log("rest_nname[cvjs_active_floorplan_div_nr ][i] "+rest_nname[cvjs_active_floorplan_div_nr][c]),
0==rest_nname[cvjs_active_floorplan_div_nr][c].indexOf("model")&&(f=c);for(c=0;c<rest_nname_custom[cvjs_active_floorplan_div_nr].length;c++)for(d=0;d<rest_nname[cvjs_active_floorplan_div_nr].length;d++)rest_nname[cvjs_active_floorplan_div_nr][d]==rest_nname_custom[cvjs_active_floorplan_div_nr][c]&&(rest_nname[cvjs_active_floorplan_div_nr][d]="",rest_vvalue[cvjs_active_floorplan_div_nr][d]="");if(-1<f)for(f+=1;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)0==rest_nname[cvjs_active_floorplan_div_nr][f].indexOf("last")&&
(rest_nname[cvjs_active_floorplan_div_nr][f]="",rest_vvalue[cvjs_active_floorplan_div_nr][f]=""),0==rest_nname[cvjs_active_floorplan_div_nr][f].indexOf("model")&&(rest_nname[cvjs_active_floorplan_div_nr][f]="",rest_vvalue[cvjs_active_floorplan_div_nr][f]=""),0==rest_nname[cvjs_active_floorplan_div_nr][f].indexOf("firstlayout")&&(rest_nname[cvjs_active_floorplan_div_nr][f]="",rest_vvalue[cvjs_active_floorplan_div_nr][f]="");for(c=d=0;c<rest_nname[cvjs_active_floorplan_div_nr].length;c++)if(""==rest_nname[cvjs_active_floorplan_div_nr][c]){for(f=
c;f<rest_nname[cvjs_active_floorplan_div_nr].length-1;f++)rest_nname[cvjs_active_floorplan_div_nr][f]=rest_nname[cvjs_active_floorplan_div_nr][f+1],rest_vvalue[cvjs_active_floorplan_div_nr][f]=rest_vvalue[cvjs_active_floorplan_div_nr][f+1];d++}rest_nname[cvjs_active_floorplan_div_nr].length-=d;for(f=0;f<rest_nname[cvjs_active_floorplan_div_nr].length;f++)b+='<canvas id="dummy" width="10" height="23"></canvas><i><font id="cvjs_param'+(f+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Param+
'</font></i><canvas id="dummy" width="10" height="10"></canvas><input value="'+rest_nname[cvjs_active_floorplan_div_nr][f]+'" id="cvjs_param_list_name'+(f+1)+'" class="cvjs_inputSettingsModal"><canvas id="dummy" width="30" height="23"></canvas><i><font id="cvjs_param_value'+(f+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Value+'</font></i><canvas id="dummy" width="10" height="10"></canvas><input value="'+rest_vvalue[cvjs_active_floorplan_div_nr][f]+'" id="cvjs_param_list_value'+
(f+1)+'" class="cvjs_inputSettingsModal"><br>';b+='<canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_conversion_user">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.ConversionUser+"</font><br>";for(f=0;f<rest_nname_custom[cvjs_active_floorplan_div_nr].length;f++)b+='<canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_param'+(f+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Param+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="'+
rest_nname_custom[cvjs_active_floorplan_div_nr][f]+'" id="cvjs_param_list_name'+(f+1+rest_nname[cvjs_active_floorplan_div_nr].length)+'" class="cvjs_inputSettingsModal"><canvas id="dummy" width="30" height="23"></canvas><font id="cvjs_param_value'+(f+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Value+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="'+rest_vvalue_custom[cvjs_active_floorplan_div_nr][f]+'" id="cvjs_param_list_value'+(f+1+rest_nname[cvjs_active_floorplan_div_nr].length)+
'" class="cvjs_inputSettingsModal"><br>';for(f=rest_nname[cvjs_active_floorplan_div_nr].length+rest_nname_custom[cvjs_active_floorplan_div_nr].length;9>f;f++)b+='<div id="settings_param_lines_input"><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_param'+(f+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Param+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="" id="cvjs_param_list_name'+(f+1)+'" class="cvjs_inputSettingsModal"><canvas id="dummy" width="30" height="23"></canvas><font id="cvjs_param_value'+
(f+1)+'">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Value+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="" id="cvjs_param_list_value'+(f+1)+'" class="cvjs_inputSettingsModal"><br>';b+='<div id="cvjs_settingsModalText"><canvas id="dummy" width="0" height="17"></canvas><font id="cvjs_settings_modal_text">'+languageTable.languages[cvjs_currentLanguage].SettingsModal.Text+'</font></div><button id="cvjs_settings_button_icon" class="cvjs_btn btn" ><i class="fa fa-check"></i></button>';
jQuery("#settings_param_lines_input").html(b);jQuery("#settingsModal_"+a).show();jQuery("#cvjs_settings_button_icon").on("click",function(){cvjs_exitSettingsModal(a,2)})}}
function cvjs_exitSettingsModal(a,b){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#settingsModal_"+a).hide();if(2==b){cvjs_currentLanguage=jQuery("#cvjs_settingsSelectLanguage option:selected").val()-1;cvjs_setCurrentLanguage(a,cvjs_currentLanguage);for(a=0;a<rest_nname_custom[cvjs_active_floorplan_div_nr].length;a++)rest_nname_custom[cvjs_active_floorplan_div_nr][a]=jQuery("#cvjs_param_list_name"+(a+1+rest_nname[cvjs_active_floorplan_div_nr].length)).val(),rest_vvalue_custom[cvjs_active_floorplan_div_nr][a]=
jQuery("#cvjs_param_list_value"+(a+1+rest_nname[cvjs_active_floorplan_div_nr].length)).val();for(a=rest_nname_custom[cvjs_active_floorplan_div_nr].length+rest_nname[cvjs_active_floorplan_div_nr].length;9>a;a++)""!=jQuery("#cvjs_param_list_name"+(a+1)).val()&&(rest_nname_custom[cvjs_active_floorplan_div_nr][a-rest_nname[cvjs_active_floorplan_div_nr].length]=jQuery("#cvjs_param_list_name"+(a+1)).val(),rest_vvalue_custom[cvjs_active_floorplan_div_nr][a-rest_nname[cvjs_active_floorplan_div_nr].length]=
jQuery("#cvjs_param_list_value"+(a+1)).val())}}
function cvjs_setCurrentLanguage(a,b){cvjs_currentLanguage=b;a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");jQuery("#cvjs_layerListTextHeader").html(languageTable.languages[cvjs_currentLanguage].LayerListModal.Header);jQuery("#cvjs_layer_search_field").attr("placeholder",languageTable.languages[cvjs_currentLanguage].LayerListModal.Search);jQuery("#cvjs_layer_sort_button").html(languageTable.languages[cvjs_currentLanguage].LayerListModal.Sort);jQuery("#cvjs_layer_settings_button1").attr("value",languageTable.languages[cvjs_currentLanguage].LayerListModal.AllLayerOn);
jQuery("#cvjs_layer_settings_button2").attr("value",languageTable.languages[cvjs_currentLanguage].LayerListModal.AllLayerOff);jQuery("#cvjs_layer_settings_button3").attr("value",languageTable.languages[cvjs_currentLanguage].LayerListModal.SwapLayers);jQuery("#cvjs_layer_selectdrawing").html(languageTable.languages[cvjs_currentLanguage].LayerListModal.SelectDrawings);jQuery("#cvjs_layerlist_checkboxText").html(languageTable.languages[cvjs_currentLanguage].LayerListModal.XrefLayerName);jQuery('#cvjs_SelectLayerDrawings option[value="1"]').text(languageTable.languages[cvjs_currentLanguage].LayerListModal.BaseAndXref);
jQuery("#cvjs_pagechangeListTextHeader").html(languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Header);jQuery("#cvjs_pagechange_search_field").attr("placeholder",languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Search);jQuery("#cvjs_pagechange_sort_button").html(languageTable.languages[cvjs_currentLanguage].PageChangeListModal.Sort);jQuery("#cvjs_magnifyHeader").html(languageTable.languages[cvjs_currentLanguage].BirdsEyeModal.Header);jQuery("#cvjs_calibrateModalHeader").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Header);
jQuery("#cvjs_calibrate_modal_unit").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Unit);jQuery("#cvjs_calibrate_modal_distance").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Distance);jQuery("#cvjs_calibrate_modal_scalefac").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Scalefac);jQuery("#cvjs_checkboxCalibrateSelectPoints").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.SelectPoints);jQuery("#cvjs_checkboxCalibrateLocation").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.SelectPath);
jQuery("#cvjs_calibrate_button").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.OK);jQuery("#cvjs_calibrate_button2").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.OK);jQuery("#cvjs_calibrate_modal_text").html(languageTable.languages[cvjs_currentLanguage].CalibrateModal.Text);jQuery("#cvjs_calibrate_modal_text2").html("");jQuery("#cvjs_measurementHeader").html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Header);jQuery("#cvjs_measurementLength_"+
a).html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Distance);jQuery("#cvjs_measurement_button").attr("value",languageTable.languages[cvjs_currentLanguage].MeasurementModal.MeasureAgain);jQuery("#cvjs_measurementModalText").html('<canvas id="dummy" width="0" height="20"></canvas>'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.Text);jQuery("#measureareaLocation").html(languageTable.languages[cvjs_currentLanguage].MeasurementModal.Area);jQuery("#cvjs_closearea_button").attr("value",
languageTable.languages[cvjs_currentLanguage].MeasurementModal.ClosePolygon);cvjs_loadTopIconMenuXML[cvjs_interfaceCounterIndex(a)]?cvjs_LoadTopIconMenuXML(a,cvjs_topIconMenu[cvjs_interfaceCounterIndex(a)]):cvjs_LoadTopIconMenu(a);cvjs_LoadTopNavigationMenu(a);a=languageTable.languages[cvjs_currentLanguage].PrintModal.PaperSizeTotal;b="";for(var c=0;c<a;c++)b=b+'<option value="'+languageTable.languages[cvjs_currentLanguage].PrintModal.PaperSizes.PaperSize[c]+'">'+languageTable.languages[cvjs_currentLanguage].PrintModal.MenuItems.MenuItem[c]+
"</option>";jQuery("#cvjs_printHeader").html(languageTable.languages[cvjs_currentLanguage].PrintModal.Header);jQuery("#cvjs_printmodal_paper").html(languageTable.languages[cvjs_currentLanguage].PrintModal.Paper);jQuery("#cvjs_paperSize").html(b);jQuery("#cvjs_print_modal_resolution").html(languageTable.languages[cvjs_currentLanguage].PrintModal.Resolution);jQuery("#cvjs_print_modal_resolution_text").html(languageTable.languages[cvjs_currentLanguage].PrintModal.ResolutionText);jQuery("#cvjs_print_button").attr("value",
languageTable.languages[cvjs_currentLanguage].PrintModal.Print);jQuery("#greyscaleLocation").html('<select id="cvjs_grayScaleType"><option value="1">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Grayscale+'</option><option value="2">'+languageTable.languages[cvjs_currentLanguage].PrintModal.BlackWhite+"</option></select>");jQuery("#printToPdfLocation").html(languageTable.languages[cvjs_currentLanguage].PrintModal.PrintPDF);jQuery("#printToScaleLocation").html(languageTable.languages[cvjs_currentLanguage].PrintModal.PrintToScale);
jQuery("#enterPrintToScaleValueLocation").html(languageTable.languages[cvjs_currentLanguage].PrintModal.EnterScale);jQuery("#printCustomCheckbox").html(languageTable.languages[cvjs_currentLanguage].PrintModal.CustomCheckbox);jQuery("#cvjs_printModalTextboxLocation_text").html(languageTable.languages[cvjs_currentLanguage].PrintModal.TextBox1Header);jQuery("#cvjs_printModalDualTextboxLocation_text").html(languageTable.languages[cvjs_currentLanguage].PrintModal.TextBox2Header);jQuery("#cvjs_printorientation_text").html(languageTable.languages[cvjs_currentLanguage].PrintModal.Orientation);
a='<option value="1">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Landscape+"</option>";a+='<option value="2">'+languageTable.languages[cvjs_currentLanguage].PrintModal.Portrait+"</option>";jQuery("#cvjs_paperOrientation").html(a);jQuery("#cvjs_searchTextHeader").html(languageTable.languages[cvjs_currentLanguage].SearchTextModal.Header);jQuery("#cvjs_search_text_searchtext").html(languageTable.languages[cvjs_currentLanguage].SearchTextModal.SearchText);jQuery("#cvje_search_text_zoom").html(languageTable.languages[cvjs_currentLanguage].SearchTextModal.Zoom);
jQuery("#cvjs_textsearch_button").attr("value",languageTable.languages[cvjs_currentLanguage].SearchTextModal.Search);jQuery("#cvjs_infoMessageHeader").html(languageTable.languages[cvjs_currentLanguage].InfoMessageModal.Header);jQuery("#cvjs_infoMessageHeader2").html(languageTable.languages[cvjs_currentLanguage].InfoMessageModal.Header2);jQuery("#cvjs_documentChangeModalHeader").html(languageTable.languages[cvjs_currentLanguage].DocumentPageChangeModal.Header);jQuery("#cvjs_documentPageChangeModal_changetext").html(languageTable.languages[cvjs_currentLanguage].DocumentPageChangeModal.Page);
jQuery("#cvjs_documentPageChangeModal_button").attr("value",languageTable.languages[cvjs_currentLanguage].DocumentPageChangeModal.OK);jQuery("#cvjs_publishPDFHeader").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Header);jQuery("#cvjs_publish_pdf_selectmode").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.SelectMode);jQuery("#cvjs_publishpdfmode1").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Mode1);jQuery("#cvjs_publishpdfmode2").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Mode2);
jQuery("#cvjs_publishpdfmode3").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Mode3);jQuery("#cvjs_entiredoc_checkbox_text").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.EntireDoc);jQuery("#cvjs_entiredoc_checkbox_text_recep").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Recipient);jQuery("#cvjs_entiredoc_checkbox_title").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Title);jQuery("#cvjs_entiredoc_checkbox_message").html(languageTable.languages[cvjs_currentLanguage].PublishPDFModal.Message);
jQuery("#cvjs_publish_redline_to_pdf_button").attr("value",languageTable.languages[cvjs_currentLanguage].PublishPDFModal.OK);jQuery("#cvjs_backgroundColorHeader").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Header);jQuery("#cvjs_background_color_pickcolor").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.PickColor);jQuery("#cvjs_background_color_selectcolor").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.SelectColor);jQuery("#cvjs_radio1_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.White);
jQuery("#cvjs_radio2_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Black);jQuery("#cvjs_radio3_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Azure);jQuery("#cvjs_radio4_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Pink);jQuery("#cvjs_radio5_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Snow);jQuery("#cvjs_radio6_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Silver);
jQuery("#cvjs_radio7_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Gray);jQuery("#cvjs_radio8_text").html(languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.Brown);jQuery("#cvjs_backgroundcolor_button").attr("value",languageTable.languages[cvjs_currentLanguage].BackgroundColorModal.OK);jQuery("#cvjs_lineThicknessHeader").html(languageTable.languages[cvjs_currentLanguage].LineThicknessModal.Header);jQuery("#lineThicknessText").html(languageTable.languages[cvjs_currentLanguage].LineThicknessModal.LineThickness);
jQuery("#cvjs_layerListTextHeaderSpace").html(languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Header);jQuery("#cvjs_layer_search_space_field").attr("placeholder",languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Search);jQuery("#cvjs_layer_sort_button_space").html(languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Sort);jQuery("#cvjs_layer_settings_space_button1").attr("value",languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.AllLayerOn);
jQuery("#cvjs_layer_settings_space_button2").attr("value",languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.AllLayerOff);jQuery("#cvjs_layer_settings_space_button3").attr("value",languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.SwapLayers);jQuery("#cvjs_CollabHeader").html(languageTable.languages[cvjs_currentLanguage].CollaborationStartModal.Header);jQuery("#collab_start_text").html(languageTable.languages[cvjs_currentLanguage].CollaborationStartModal.Session);jQuery("#cvjs_collabStart_button").attr("value",
languageTable.languages[cvjs_currentLanguage].CollaborationStartModal.OK);jQuery("#cvjs_redlineColorHeader").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Header);jQuery("#cvjs_redline_color_pickcolor").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.PickColor);jQuery("#cvjs_redline_color_selectcolor").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.SelectColor);jQuery("#cvjs_radio1_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Blue);
jQuery("#cvjs_radio2_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Red);jQuery("#cvjs_radio3_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Orange);jQuery("#cvjs_radio4_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Yellow);jQuery("#cvjs_radio5_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Green);jQuery("#cvjs_radio6_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Purple);
jQuery("#cvjs_radio7_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Gray);jQuery("#cvjs_radio8_text_red").html(languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Brown);jQuery("#cvjs_redlinecolor_button").attr("value",languageTable.languages[cvjs_currentLanguage].RedlineColorModal.OK);jQuery("#cvjs_redlineEllipseHeader").html(languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.Header);jQuery("#cvjs_redline_ellipse_type").html(languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.SelectType);
jQuery("#cvjs_redline_ellipse_textellipse").html(languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.Ellipse);jQuery("#cvjs_redline_ellipse_textcloud").html(languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.Cloud);jQuery("#cvjs_ellipse_button").attr("value",languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.OK);jQuery("#cvjs_mergeDXFHeader").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Header);jQuery("#cvjs_publish_dxf_selectmode").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.SelectMode);
jQuery("#cvjs_mergedxfmode1").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Mode1);jQuery("#cvjs_mergedxfmode2").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Mode2);jQuery("#cvjs_mergedxfmode3").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Mode3);jQuery("#cvjs_entiredoc_checkbox_text_dxf").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.EntireDoc);jQuery("#cvjs_entiredoc_checkbox_text_recep_dxf").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Recipient);
jQuery("#cvjs_entiredoc_checkbox_title_dxf").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Title);jQuery("#cvjs_entiredoc_checkbox_message_dxf").html(languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Message);jQuery("#cvjs_publish_redline_to_dxf_button").attr("value",languageTable.languages[cvjs_currentLanguage].MergeDXFModal.OK);jQuery("#cvjs_redlineThicknessHeader").html(languageTable.languages[cvjs_currentLanguage].RedlineThicknessModal.Header);jQuery("#cvjs_redline_thickness_thickness").html(languageTable.languages[cvjs_currentLanguage].RedlineThicknessModal.Thickness);
jQuery("#cvjs_thickness_button").attr("value",languageTable.languages[cvjs_currentLanguage].RedlineThicknessModal.OK);jQuery("#cvjs_redlineTextHeader").html(languageTable.languages[cvjs_currentLanguage].RedlineTextModal.Header);jQuery("#cvjs_redline_text_fontsize").html(languageTable.languages[cvjs_currentLanguage].RedlineTextModal.FontSize);jQuery("#cvjs_redlinetext_button").attr("value",languageTable.languages[cvjs_currentLanguage].RedlineTextModal.OK);jQuery("#cvjs_redline_text_inserttext").html(languageTable.languages[cvjs_currentLanguage].RedlineTextModal.Text);
jQuery("#cvjs_settingsModalHeader").html(languageTable.languages[cvjs_currentLanguage].SettingsModal.Header);jQuery("#cvjs_settings_language").html(languageTable.languages[cvjs_currentLanguage].SettingsModal.OnlineLanguage);jQuery("#cvjs_settings_button").attr("value",languageTable.languages[cvjs_currentLanguage].SettingsModal.OK);jQuery("#cvjs_ax2020_paramtext").html(languageTable.languages[cvjs_currentLanguage].SettingsModal.ConversionFixed);b="";for(c=0;c<cvjs_measurementModalOptionsSize;c++)b=
b+'<option value="'+(c+1)+'">'+languageTable.languages[cvjs_currentLanguage].MeasurementModal.MenuItems.MenuItem[c]+"</option>";jQuery("#cvjs_measurementOption").html(b);jQuery("#cvjs_spaceobjectchangesettingsTextHeader").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.ModalModify);jQuery("#cvjs_spaceobjectchangesettingsTextLayer").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Layer);jQuery("#cvjs_spaceobjectchangesettingsTextSpaceId").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.SpaceId);
jQuery("#cvjs_spaceobjectchangesettingsTextType").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Type);jQuery("#cvjs_spaceobjectchangesettingsUnlink").attr("value",languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Unlink);jQuery("#cvjs_spaceobjectchangesettingsUpdate").attr("value",languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Update);jQuery("#cvjs_spaceobjectchangesettingsExplanation").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Explanation);
jQuery("#cvjs_spaceobjectsettingsTextLayer").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Layer);jQuery("#cvjs_spaceobjectsettingsTextSpaceId").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.SpaceId);jQuery("#cvjs_spaceobjectsettingsTextCreate").attr("value",languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.Create)}function cvjs_copyMeasurementField(a){document.getElementById("cvjs_measurementBox_"+a).select();document.execCommand("copy")}
var spacemodal_init_settings_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_spaceObjectsInitSettingsModal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),spacemodal_init_settings_offset_flag[cvjs_active_floorplan_div_nr]&&(spacemodal_init_settings_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#spaceobjectsInitSettingsModal_"+a).css({position:"fixed"}),jQuery("#spaceobjectsInitSettingsModal_"+a).offset({left:150+jQuery("#"+a).position().left,
top:50+jQuery("#"+a).position().top})),jQuery("#spaceobjectsInitSettingsModal_"+a).show())}function cvjs_exitSpaceObjectsInitSettingsModal(){jQuery("#spaceobjectsInitSettingsModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}
function cvjs_continueCreateSpaceObjects(){try{var a=jQuery("#cvjs_spaceobjectIdFromModal").val(),b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a){window.alert(languageTable.languages[cvjs_currentLanguage].InfoMessageModal.IdAlreadyUsed);return}var c=jQuery("#cvjs_spaceobjectLayerFromModal").val();a=!1;for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)c==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName&&
(a=!0);a||(a="layer_"+c,layerTable[cvjs_active_floorplan_div_nr].layers[layerTable[cvjs_active_floorplan_div_nr].numberOfLayers]={layer:a,layerClass:a,layerName:c,status:"ON",layerBaseName:"",xRefFile:""},layerTable[cvjs_active_floorplan_div_nr].numberOfLayers+=1);jQuery("#spaceobjectsInitSettingsModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;1==cvjs_addSpaceObjectType&&cvjs_addPolygonSpaceObjectCore(floorplan_div_Array[cvjs_active_floorplan_div_nr]);
2==cvjs_addSpaceObjectType&&cvjs_addRectangleSpaceObjectCore(floorplan_div_Array[cvjs_active_floorplan_div_nr]);3==cvjs_addSpaceObjectType&&cvjs_addCircleSpaceObjectCore(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(d){console.log("cvjs_continueCreateSpaceObjects:"+d)}}var spacemodal_update_settings_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_spaceObjectsChangeSettingsModal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4)),a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),spacemodal_update_settings_offset_flag[cvjs_active_floorplan_div_nr]&&(spacemodal_update_settings_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#spaceobjectsChangeSettingsModal_"+a).css({position:"fixed"}),jQuery("#spaceobjectsChangeSettingsModal_"+
a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#spaceobjectsChangeSettingsModal_"+a).show(),a=jQuery("#cvjs_spaceobjectchangeLayerFromModal").val(),"unassigned"!=a&&void 0!=a||jQuery("#cvjs_spaceobjectchangeLayerFromModal").val("cvjs_SpaceLayer"))}
function cvjs_exitSpaceObjectsChangeSettingsModal(){jQuery("#spaceobjectsChangeSettingsModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;cvjs_setCreationMode(!cvjs_supressPopUpModal,!0);hideOnlyPop();cvjs_clearDrawing();cvjs_displayModalAlreadyCalled=!1}
function cvjs_updateChangeSpaceObjects(){jQuery("#spaceobjectsUpdateSettingsModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;var a=selected_current_jsonStrucure.id;cvjs_changeSpaceObjectType(a,jQuery("#cvjs_spaceobjectchangeTypeFromModal").val());cvjs_changeSpaceObjectLayer(a,jQuery("#cvjs_spaceobjectchangeLayerFromModal").val());cvjs_changeSpaceObjectLinkStatus(a,!0);cvjs_changeSpaceObjectName(a,jQuery("#cvjs_spaceobjectchangeIdFromModal").val());
cvjs_changeSpaceObjectID(a,jQuery("#cvjs_spaceobjectchangeIdFromModal").val());a=jQuery("#cvjs_spaceobjectchangeLayerFromModal").val();for(var b=!1,c=0;c<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;c++)a==layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName&&(b=!0);b||(b="layer_"+a,layerTable[cvjs_active_floorplan_div_nr].layers[layerTable[cvjs_active_floorplan_div_nr].numberOfLayers]={layer:b,layerClass:b,layerName:a,status:"ON",layerBaseName:"",xRefFile:""},layerTable[cvjs_active_floorplan_div_nr].numberOfLayers+=
1);cvjs_draw_space_object_names_on_spaces();hideOnlyPop();cvjs_clearDrawing()}function cvjs_unlinkChangeSpaceObjects(){jQuery("#spaceobjectsUpdateSettingsModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;cvjs_changeSpaceObjectLinkStatus(selected_current_jsonStrucure.id,!1);cvjs_draw_space_object_names_on_spaces();hideOnlyPop();cvjs_clearDrawing()}
var alloff=!1,cvjs_maxfiles=600,cvjs_globalScaleNote=1,custom_modal_dir_listing=[{filename:"My file - revision1.dwg",url:"http://server/path/myfile-revison1.dwg",path:"/serverx/path/myfile-revison1.dwg"},{filename:"My file - revision2.dwg",url:"http://server/path/myfile-revison2.dwg",path:"/serverx/path/myfile-revison2.dwg"},{filename:"My file - revision3.dwg",url:"http://server/path/myfile-revison3.dwg",path:"/serverx/path/myfile-revison3.dwg"},{filename:"My file - revision4.dwg",url:"http://server/path/myfile-revison4.dwg",
path:"/serverx/path/myfile-revison4.dwg"}],cvjs_saveRedlinesAsDXF=!1,cvjs_saveRedlinesAsXML=!1,layer_vqstickynotes="",layer_vqredlines="",bMouseDown=!1,bTempMouseDown=!1,bPan=!1,firstx,firsty,lastDX,lastDY,TouchZoomFactor=1.1,floorplan_height,floorplan_width,tip_width=30,vqRoomMouseSelect=!1,thumbsMode=!1,layer_vqdrag;totalDragStart=0;string_X="";var dx=0,dy=0;pdy=pdx=0;var openHyperlinkInNewWindow=!1,hyperlinkNewWindowWidth=200,hyperlinkNewWindowHeight=200,cvjs_customToolTip=!1,locked=!1,rid;
function cvjs_setCustomToolTip(a){cvjs_customToolTip=a}var cvjs_customToolTipArrayId=[],cvjs_customToolTipArrayContent=[];
function cvjs_showToolTipLocation(a,b,c){tip[cvjs_active_floorplan_div_nr].html(a);tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",b+document.documentElement.scrollLeft+10).css("top",c+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",b-a.left+document.documentElement.scrollLeft+
10).css("top",c-a.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].show()}function cvjs_hideToolTip(){tip[cvjs_active_floorplan_div_nr].hide()}function cvjs_displayCustomToolTip(a){for(var b in cvjs_customToolTipArrayId)if(cvjs_customToolTipArrayId[b]==a)return cvjs_customToolTipArrayContent[b];return a}
function cvjs_setCustomToolTipValue(a,b){try{for(var c="",d=0;d<b.length;d++)c=0==d?b[0]:c+"<br>"+b[d];b=!0;for(d=0;d<cvjs_customToolTipArrayId.length;d++)a==cvjs_customToolTipArrayId[d]&&(cvjs_customToolTipArrayContent[d]=c,b=!1);b&&(cvjs_customToolTipArrayId.push(a),cvjs_customToolTipArrayContent.push(c))}catch(e){console.log(e)}}
function cvjs_searchReplaceText(a,b){jQuery("text").each(function(c){if(-1<jQuery(this).text().toLowerCase().indexOf(a.toLowerCase())){c=jQuery(this).attr("x");var d=jQuery(this).attr("y"),e=jQuery(this).attr("transform");jQuery(this).attr("font-size");jQuery(this).attr("stroke");jQuery(this).attr("fill");jQuery(this).attr("fill-opacity");c='<text x="'+c+'" y="'+d+'" transform="'+e+'" >'+b+"</text>";jQuery(this).replaceWith(c)}})}
function cvjs_openHyperlinkInNewWindow(a,b,c){openHyperlinkInNewWindow=a;hyperlinkNewWindowWidth=b;hyperlinkNewWindowHeight=c}function consolelog(a){console.log(a)}function cvjs_getSpaceObjectIdList(){var a=[],b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])a.push(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"));return a}
function cvjs_getSpaceObjectNodeList(){var a=[],b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])a.push(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"));return a}function cvjs_getSpaceObjectNamesList(){var a=[],b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])a.push(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name"));return a}
function cvjs_getSpaceObjectTypefromId(a){var b=-1,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")==a){b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("type");break}return b}
function cvjs_getSpaceObjectNodefromId(a){var b=-1,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")==a){b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node");break}return b}
function cvjs_getSpaceObjectNamefromId(a){var b=-1,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")==a){b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("name");break}return b}
function cvjs_getSpaceObjectIdfromNode(a){var b=-1,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")==a){b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id");break}return b}
function cvjs_getSpaceObjectNamefromNode(a){var b=-1,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")==a){b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("name");break}return b}
function cvjs_getAttributeStatus(a){var b=0,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")==a&&(b=c);return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributeStatus")}
function cvjs_setAttributeStatus(a,b){var c=0,d;for(d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")==a&&(c=d);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].removeData("attributeStatus");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("attributeStatus",b)}
function cvjs_getAttributeFromSpaceObjectNode(a,b){var c=0,d;for(d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")==a&&(c=d);a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("attributes");for(var e in a)if(c=a[e],c.name==b)return c.value;return-1}
function cvjs_setAttributeInSpaceObjectNode(a,b,c){var d=0;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")==a&&(d=e);a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("attributes");var e=!1;for(var f in a)a[f].name==b&&(a[f].value=c,e=!0);e||(a[a.length]={name:b,value:c});cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].removeData("attributes");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("attributes",
a)}function cvjs_newLayer(a){try{return a=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()}catch(b){}}function cvjs_newLayerDiv(a,b){try{return a=cvjs_rPaper[cvjs_rPaperIndex(b)].g()}catch(c){}}function cvjs_clearLayer(a){try{a.remove(),a=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()}catch(b){a=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()}cvjs_customLayerContentAdded=!1;return a}
function cvjs_clearLayerDiv(a,b){try{a.remove(),a=cvjs_rPaper[cvjs_rPaperIndex(b+"_svg")].g()}catch(c){a=cvjs_rPaper[cvjs_rPaperIndex(b)].g()}return a}function cvjs_clearTextLayer(a){try{a.remove();a=cvjs_rPaper[cvjs_active_floorplan_div_nr].g();for(var b in vqTBorder)vqTBorder[b].attr(hide)}catch(c){a=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()}return a}function cvjs_sortLayersInOrder(a,b){try{a.prepend(b)}catch(c){return!1}return!0}
function cvjs_sortLayers_prepend(a,b){try{a.prepend(b)}catch(c){return!1}return!0}function cvjs_sortLayers_insertAfter(a,b){try{a.insertAfter(b)}catch(c){return!1}return!0}function cvjs_AllGroupsOn(){for(var a in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(show)}
function cvjs_AllGroupsOff(){for(var a in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])"Undefined"!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("group")&&""!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("group")&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(hide)}
function cvjs_GroupOn(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group")==a&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(show)}
function cvjs_GroupOn_OthersOff(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group")==a?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(show):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(hide)}
function cvjs_GroupOn_AllOff(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group")==a?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(show):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(hide)}
function cvjs_GroupOff(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group")==a&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(hide)}function cvjs_ApplyPatternOnSpaceObjectId(a,b,c,d,e){b=cvjs_getSpaceObjectNodefromId(b);cvjs__ApplyPatternOnObject_layerSort(a,b,c,d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr],1)}
function cvjs_ApplyPatternOnSpaceObjectNode(a,b,c,d,e){cvjs__ApplyPatternOnObject_layerSort(a,b,c,d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr],1)}function cvjs_ApplyPatternOnUrl(a,b,c,d,e){cvjs__ApplyPatternOnObject_layerSort(a,b,c,d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr],2)}
function cvjs__ApplyPatternOnObject_layerSort(a,b,c,d,e,f,g){var h=!1;if(1==g)for(var k in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][k].data("node")==b){var l=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][k];h=!0}if(2==g)for(k in vqURLs)vqURLs[k].data("node")==b&&(l=vqURLs[k],h=!0);if(h){g=l.toString();b=!0;if(-1<g.indexOf("path")){b=!0;var m=g.indexOf(" d=");m=g.substring(m+4);l=m.indexOf('" ');m=m.substring(0,l)}if(-1<
g.indexOf("circle")){b=!1;var p=g.indexOf(" cx=");p=g.substring(p+5);var n=p.indexOf('"');p=p.substring(0,n);n=g.indexOf(" cy=");n=g.substring(n+5);var q=n.indexOf('"');n=n.substring(0,q);q=g.indexOf(" r=");g=g.substring(q+4);q=g.indexOf('"');q=g.substring(0,q)}if("pattern_45degree_standard"==c||"pattern_45degree_fine"==c||"pattern_45degree_wide"==c||"pattern_90degree_standard"==c||"pattern_90degree_fine"==c||"pattern_90degree_wide"==c||"pattern_135degree_standard"==c||"pattern_135degree_fine"==c||
"pattern_135degree_wide"==c||"pattern_0degree_standard"==c||"pattern_0degree_fine"==c||"pattern_0degree_wide"==c||"pattern_45degree_crosshatch_standard"==c||"pattern_45degree_crosshatch_fine"==c){if("pattern_45degree_standard"==c){cvjs_setUpPattern_45degree_standard(d,"1.0");var r=pattern_45degree_standard}"pattern_45degree_fine"==c&&(cvjs_setUpPattern_45degree_fine(d,"1.0"),r=pattern_45degree_standard);"pattern_45degree_wide"==c&&(cvjs_setUpPattern_45degree_wide(d,"1.0"),r=pattern_45degree_standard);
"pattern_90degree_standard"==c&&(cvjs_setUpPattern_90degree_standard(d,"1.0"),r=pattern_90degree_standard);"pattern_90degree_fine"==c&&(cvjs_setUpPattern_90degree_fine(d,"1.0"),r=pattern_90degree_standard);"pattern_90degree_wide"==c&&(cvjs_setUpPattern_90degree_wide(d,"1.0"),r=pattern_90degree_standard);"pattern_135degree_standard"==c&&(cvjs_setUpPattern_135degree_standard(d,"1.0"),r=pattern_135degree_standard);"pattern_135degree_fine"==c&&(cvjs_setUpPattern_135degree_fine(d,"1.0"),r=pattern_135degree_standard);
"pattern_135degree_wide"==c&&(cvjs_setUpPattern_135degree_wide(d,"1.0"),r=pattern_135degree_standard);"pattern_0degree_standard"==c&&(cvjs_setUpPattern_0degree_standard(d,"1.0"),r=pattern_0degree_standard);"pattern_0degree_fine"==c&&(cvjs_setUpPattern_0degree_fine(d,"1.0"),r=pattern_0degree_standard);"pattern_0degree_wide"==c&&(cvjs_setUpPattern_0degree_wide(d,"1.0"),r=pattern_0degree_standard);"pattern_45degree_crosshatch_standard"==c&&(cvjs_setUpPattern_45degree_crosshatch_standard(d,"1.0"),r=pattern_45degree_crosshatch);
"pattern_45degree_crosshatch_fine"==c&&(cvjs_setUpPattern_45degree_crosshatch_fine(d,"1.0"),r=pattern_45degree_crosshatch);b?(c=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(m),c.attr({fill:r,"fill-opacity":e,stroke:d,"stroke-opacity":e}),a.add(c)):(c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(p,n,q,q),cvjs_debug&&console.log(c),a.add(c.attr({fill:r,"fill-opacity":e,stroke:d,"stroke-opacity":e})));try{f.prepend(a)}catch(t){}return 1}return-1}}
var pattern_45degree_standard=null,pattern_90degree_standard=null,pattern_135degree_standard=null,pattern_0degree_standard=null,pattern_45degree_crosshatch=null;function cvjs_setUpPattern_45degree_standard(a,b){pattern_45degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M10-5-10,15M15,0,0,15M0-5-20,15").attr({fill:"none",stroke:a,strokeWidth:2,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_45degree_wide(a,b){pattern_45degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M10-5-10,15M15,0,0,15M0-5-20,15").attr({fill:"none",stroke:a,strokeWidth:5,"stroke-opacity":b}).pattern(0,0,10,10)}function cvjs_setUpPattern_45degree_fine(a,b){pattern_45degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M10-5-10,15M15,0,0,15M0-5-20,15").attr({fill:"none",stroke:a,strokeWidth:.5,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_90degree_fine(a,b){pattern_90degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M10-5 10,15M15,0,15,15M0-5 0,15").attr({fill:"none",stroke:a,strokeWidth:.5,"stroke-opacity":b}).pattern(0,0,10,10)}function cvjs_setUpPattern_90degree_standard(a,b){pattern_90degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M10-5 10,15M15,0,15,15M0-5 0,15").attr({fill:"none",stroke:a,strokeWidth:2,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_90degree_wide(a,b){pattern_90degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M10-5 10,15M15,0,15,15M0-5 0,15").attr({fill:"none",stroke:a,strokeWidth:5,"stroke-opacity":b}).pattern(0,0,10,10)}function cvjs_setUpPattern_135degree_standard(a,b){pattern_135degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0-5 20,15M10,-5,30,15M-10-5 10,15").attr({fill:"none",stroke:a,strokeWidth:2,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_135degree_wide(a,b){pattern_135degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0-5 20,15M10,-5,30,15M-10-5 10,15").attr({fill:"none",stroke:a,strokeWidth:5,"stroke-opacity":b}).pattern(0,0,10,10)}function cvjs_setUpPattern_135degree_fine(a,b){pattern_135degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0-5 20,15M10,-5,30,15M-10-5 10,15").attr({fill:"none",stroke:a,strokeWidth:.5,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_0degree_standard(a,b){pattern_0degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M-5,0,15,0M-5,10,15,10M-5,20,15,20").attr({fill:"none",stroke:a,strokeWidth:2,"stroke-opacity":b}).pattern(0,0,10,10)}function cvjs_setUpPattern_0degree_wide(a,b){pattern_0degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M-5,0,15,0M-5,10,15,10M-5,20,15,20").attr({fill:"none",stroke:a,strokeWidth:5,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_0degree_fine(a,b){pattern_0degree_standard=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M-5,0,15,0M-5,10,15,10M-5,20,15,20").attr({fill:"none",stroke:a,strokeWidth:.5,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_45degree_crosshatch_standard(a,b){pattern_45degree_crosshatch=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0-5 20,15M10,-5,30,15M-10-5 10,15M10-5-10,15M15,0,0,15M0-5-20,15").attr({fill:"none",stroke:a,strokeWidth:2,"stroke-opacity":b}).pattern(0,0,10,10)}
function cvjs_setUpPattern_45degree_crosshatch_fine(a,b){pattern_45degree_crosshatch=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0-5 20,15M10,-5,30,15M-10-5 10,15M10-5-10,15M15,0,0,15M0-5-20,15").attr({fill:"none",stroke:a,strokeWidth:.5,"stroke-opacity":b}).pattern(0,0,10,10)}var linear_gradient;function cvjs_ApplyRelativeLinearGradientStandard2Colors(a,b,c,d){cvjs_ApplyRelativeLinearGradient(a,0,0,1,1,b,"",c,d)}
function cvjs_ApplyRelativeLinearGradientStandard3Colors(a,b,c,d,e){cvjs_ApplyRelativeLinearGradient(a,0,0,1,1,b,c,d,e)}function cvjs_ApplyRelativeLinearGradient(a,b,c,d,e,f,g,h,k){linear_gradient=""==g?cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("l("+b+", "+c+", "+d+" ,"+e+" )"+f+"-"+h):cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("l("+b+", "+c+", "+d+" ,"+e+" )"+f+"-"+g+"-"+h);a.attr({fill:linear_gradient,"fill-opacity":k,"stroke-opacity":k})}
function cvjs_ApplyRelativeLinearGradientStandard2ColorsOnSpaceObjectId(a,b,c,d,e){b=cvjs_getSpaceObjectNodefromId(b);cvjs_ApplyRelativeLinearGradientOnObject_layerSort(a,b,0,0,1,1,c,"",d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}function cvjs_ApplyRelativeLinearGradientStandard2ColorsOnSpaceObjectNode(a,b,c,d,e){cvjs_ApplyRelativeLinearGradientOnObject_layerSort(a,b,0,0,1,1,c,"",d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}
function cvjs_ApplyRelativeLinearGradientStandard3ColorsOnSpaceObjectId(a,b,c,d,e,f){b=cvjs_getSpaceObjectNodefromId(b);cvjs_ApplyRelativeLinearGradientOnObject_layerSort(a,b,0,0,1,1,c,d,e,f,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}function cvjs_ApplyRelativeLinearGradientStandard3ColorsOnSpaceObjectNode(a,b,c,d,e,f){cvjs_ApplyRelativeLinearGradientOnObject_layerSort(a,b,0,0,1,1,c,d,e,f,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}
function cvjs_ApplyRelativeLinearGradientOnObject_layerSort(a,b,c,d,e,f,g,h,k,l,m){var p=!1,n;for(n in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("node")==b){var q=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n];p=!0}if(p){q=q.toString();b=!0;if(-1<q.indexOf("path")){b=!0;var r=q.indexOf(" d=");r=q.substring(r+4);p=r.indexOf('" ');r=r.substring(0,p)}if(-1<q.indexOf("circle")){b=!1;var t=q.indexOf(" cx=");t=q.substring(t+
5);var u=t.indexOf('"');t=t.substring(0,u);u=q.indexOf(" cy=");u=q.substring(u+5);var v=u.indexOf('"');u=u.substring(0,v);v=q.indexOf(" r=");q=q.substring(v+4);v=q.indexOf('"');v=q.substring(0,v)}linear_gradient=""==h?cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("l("+c+", "+d+", "+e+" ,"+f+" )"+g+"-"+k):cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("l("+c+", "+d+", "+e+" ,"+f+" )"+g+"-"+h+"-"+k);b?(c=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(r),c.attr({fill:linear_gradient,"fill-opacity":l,
"stroke-opacity":l}),a.add(c)):(c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(t,u,v,v),c.attr({fill:linear_gradient,"fill-opacity":l,"stroke-opacity":l}),a.add(c));try{return m.prepend(a),1}catch(y){}return-1}}var radial_gradient;function cvjs_ApplyRelativeRadialGradientStandard2Colors(a,b,c,d){cvjs_ApplyRelativeRadialGradient(a,.5,.5,.5,b,"",c,d)}function cvjs_ApplyRelativeRadialGradientStandard3Colors(a,b,c,d,e){cvjs_ApplyRelativeRadialGradient(a,.5,.5,.5,b,c,d,e)}
function cvjs_ApplyRelativeRadialGradient(a,b,c,d,e,f,g,h){radial_gradient=""==f?cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("r("+b+", "+c+", "+d+" )"+e+"-"+g):cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("r("+b+", "+c+", "+d+" )"+e+"-"+f+"-"+g);a.attr({fill:radial_gradient,"fill-opacity":h,"stroke-opacity":h});cvjs_debug&&console.log("after "+a)}
function cvjs_ApplyRelativeRadialGradientStandard2ColorsOnSpaceObjectId(a,b,c,d,e){b=cvjs_getSpaceObjectNodefromId(b);cvjs_ApplyRelativeRadialGradientOnObject_layerSort(a,b,.5,.5,.5,c,"",d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}function cvjs_ApplyRelativeRadialGradientStandard2ColorsOnSpaceObjectNode(a,b,c,d,e){cvjs_ApplyRelativeRadialGradientOnObject_layerSort(a,b,.5,.5,.5,c,"",d,e,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}
function cvjs_ApplyRelativeRadialGradientStandard3ColorsOnSpaceObjectId(a,b,c,d,e,f){b=cvjs_getSpaceObjectNodefromId(b);cvjs_ApplyRelativeRadialGradientOnObject_layerSort(a,b,.5,.5,.5,c,d,e,f,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}function cvjs_ApplyRelativeRadialGradientStandard3ColorsOnSpaceObjectNode(a,b,c,d,e,f){cvjs_ApplyRelativeRadialGradientOnObject_layerSort(a,b,.5,.5,.5,c,d,e,f,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}
function cvjs_ApplyRelativeRadialGradientOnObject_layerSort(a,b,c,d,e,f,g,h,k,l){var m;for(n in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("node")==b&&(m=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n]);m=m.toString();b=!0;if(-1<m.indexOf("path")){b=!0;var p=m.indexOf(" d=");p=m.substring(p+4);var n=p.indexOf('" ');p=p.substring(0,n)}if(-1<m.indexOf("circle")){b=!1;var q=m.indexOf(" cx=");q=m.substring(q+5);var r=
q.indexOf('"');q=q.substring(0,r);r=m.indexOf(" cy=");r=m.substring(r+5);var t=r.indexOf('"');r=r.substring(0,t);t=m.indexOf(" r=");m=m.substring(t+4);t=m.indexOf('"');t=m.substring(0,t)}radial_gradient=""==g?cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("r("+c+", "+d+", "+e+" )"+f+"-"+h):cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("r("+c+", "+d+", "+e+" )"+f+"-"+g+"-"+h);b?(c=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(p),c.attr({fill:radial_gradient,"fill-opacity":k,"stroke-opacity":k}),
a.add(c)):(c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(q,r,t,t),c.attr({fill:radial_gradient,"fill-opacity":k,"stroke-opacity":k}),a.add(c));try{return l.prepend(a),1}catch(u){}return-1}
var text_style_arial_11pt_bold={stroke:"#00539B",fill:"#00539B","font-family":"Arial","font-size":"11pt","font-weight":"bold",margin:0,cursor:"pointer","text-align":"left","z-index":1980},text_style_arial_9pt_normal={stroke:"#00539B",fill:"#00539B","font-family":"Arial","font-size":"9pt","font-weight":"normal",margin:0,"margin-top":"-10px",cursor:"pointer","text-align":"left","vertical-align":"top",width:"128px","z-index":1980},text_style_dialog={"text-font":"Dialog","font-family":"Dialog","font-size":"7pt",
"text-anchor":"start","font-weight":"normal","font-style":"italic",stroke:"#88539B",fill:"#88539B"};function setTextStyle(){return{}}
function cvjs_AddTextOnObject(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r){var t;for(u in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][u].data("node")==b&&(t=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][u]);var u=t.getBBox();b=u.y;t=u.height;c=u.x+u.width*c;f*=t;d=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(c,b+1.05*f,d).attr(e);d.attr({"font-size":f});d.attr({"stroke-width":f/15});d.attr({stroke:g});d.attr({fill:g});g=t*l;h=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(c,
b+1.05*g+1.05*f,h).attr(k);h.attr({"font-size":g});h.attr({"stroke-width":g/15});h.attr({stroke:m});h.attr({fill:m});m=t*q;p=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(c,b+1.05*m+1.05*g+1.05*f,p).attr(n);p.attr({"font-size":m});p.attr({"stroke-width":m/15});p.attr({stroke:r});p.attr({fill:r});a.add(d);a.add(h);a.add(p)}
function cvjs_AddTextAndTBorderOnSpaceObject3Lines(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r,t,u,v,y){var x=0,B=0,A=!1;for(x in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][x].data("node")==b){var z=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][x];B=x;A=!0}if(A){x=z.toString();b=!0;if(-1<x.indexOf("path")){b=!0;var C=x.indexOf(" d=");C=x.substring(C+4);A=C.indexOf('" ');C=C.substring(0,A)}if(-1<x.indexOf("circle")){b=!1;A=x.indexOf(" cx=");
A=x.substring(A+5);var D=A.indexOf('"');A.substring(0,D);A=x.indexOf(" cy=");A=x.substring(A+5);D=A.indexOf('"');A.substring(0,D);A=x.indexOf(" r=");x=x.substring(A+4);A=x.indexOf('"');x.substring(0,A)}A=z.getBBox();z=A.y;x=A.height;d=A.x+A.width*d;h*=x;f=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(d,z+1.05*h,f).attr(g);f.attr({"font-size":h});f.attr({"stroke-width":h/15,"stroke-opacity":"1"});f.attr({stroke:k});f.attr({fill:k});vqText.push(f.data("node",e));k=vqText.length;0<k&&k--;vqText[k].data("name",
e);vqText[k].data("id",e);vqText[k].data("layer",a);n*=x;m=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(d,z+1.05*n+1.05*h,m).attr(p);m.attr({"font-size":n});m.attr({"stroke-width":n/15,"stroke-opacity":"1"});m.attr({stroke:q});m.attr({fill:q});vqText.push(m.data("node",l));k=vqText.length;0<k&&k--;vqText[k].data("name",l);vqText[k].data("id",l);vqText[k].data("layer",a);q=x*v;t=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(d,z+1.05*q+1.05*n+1.05*h,t).attr(u);t.attr({"font-size":q});t.attr({"stroke-width":q/
15,"stroke-opacity":"1"});t.attr({stroke:y});t.attr({fill:y});vqText.push(t.data("node",r));k=vqText.length;0<k&&k--;vqText[k].data("name",r);vqText[k].data("id",r);vqText[k].data("layer",a);a=[];a[0]=e;a[1]=l;a[2]=r;if(b)e=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(C),f,m,t).data("node",c),vqTBorder.push(e),e=vqTBorder.length,0<e&&e--,vqTBorder[e].data("name",c),vqTBorder[e].data("id",c),vqTBorder[e].data("layer",c),vqTBorder[e].attr(show).attr({fill:"none",
"stoke-width":"0.01",stroke:"#000000","stroke-opacity":"0.01"});else return-1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][B].data("tborderId",c);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][B].data("textId",a)}}function cvjs_AddTextAndTBorderOnSpaceObjectId_GlobalHeight(a,b,c,d,e,f,g,h){b=cvjs_getSpaceObjectNodefromId(b);var k=vqTBorder.length;k++;k="TBORDER_"+k;var l=[],m;for(m in d)l[m]="TEXT_"+k+"_"+(m+1);cvjs_AddTextAndTBorderOnSpaceObject(a,b,k,c,l,d,e,f,g,h,!0)}
function cvjs_AddTextOnSpaceObject(a,b,c,d,e,f,g,h,k){var l=0,m=!1;for(l in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("id")==b){var p=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l];m=!0}if(m){b=p.toString();if(-1<b.indexOf("path")){var n=b.indexOf(" d=");n=b.substring(n+4);l=n.indexOf('" ');n=n.substring(0,l)}-1<b.indexOf("circle")&&(l=b.indexOf(" cx="),l=b.substring(l+5),m=l.indexOf('"'),l.substring(0,m),l=
b.indexOf(" cy="),l=b.substring(l+5),m=l.indexOf('"'),l.substring(0,m),l=b.indexOf(" r="),b=b.substring(l+4),l=b.indexOf('"'),b.substring(0,l));l=p.getBBox();p=l.x;var q=l.y;b=l.width;k&&(p=l.x+l.width/2,q=l.y+l.height/2);l=l.height;m=p;var r=q,t;for(t=0;t<d.length;t++){if(h){var u=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(n);u.attr({fill:"#FFFFFF","fill-opacity":"1"})}var v=l*f[t];m=k?m-.5*v:p+b*c;r=k?r+.4*v:r+1.05*v;q=a.text(m,r,d[t]).attr(e[t]);q.attr({"font-size":v});q.attr({fill:g[t]});
h&&q.attr({mask:u});q.attr({"pointer-events":"none"})}}}function cvjs_AddTextAndTBorderOnSpaceObjectId(a,b,c,d,e,f,g,h,k){b=cvjs_getSpaceObjectNodefromId(b);void 0==k&&(k=!1);var l=vqTBorder.length;l++;l="TBORDER_"+l;var m=[],p;for(p in d)m[p]="TEXT_"+l+"_"+(p+1);cvjs_AddTextAndTBorderOnSpaceObject(a,b,l,c,m,d,e,f,g,h,k,!1)}
function cvjs_AddTextAndTBorderOnSpaceObjectNode(a,b,c,d,e,f,g,h,k){var l=vqTBorder.length;l++;l="TBORDER_"+l;void 0==k&&(k=!1);var m=[],p;for(p in d)m[p]="TEXT_"+l+"_"+(p+1);cvjs_AddTextAndTBorderOnSpaceObject(a,b,l,c,m,d,e,f,g,h,k,!1)}
function cvjs_AddTextAndTBorderOnSpaceObject(a,b,c,d,e,f,g,h,k,l,m,p){var n=0,q=0,r=!1;for(n in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("node")==b){var t=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n];q=n;r=!0}if(r){n=t.toString();b=!0;if(-1<n.indexOf("path")){b=!0;var u=n.indexOf(" d=");u=n.substring(u+4);var v=u.indexOf('" ');u=v=u.substring(0,v)}if(-1<n.indexOf("circle")){b=!1;r=n.indexOf(" cx=");r=n.substring(r+
5);var y=r.indexOf('"');r.substring(0,y);r=n.indexOf(" cy=");r=n.substring(r+5);y=r.indexOf('"');r.substring(0,y);r=n.indexOf(" r=");n=n.substring(r+4);r=n.indexOf('"');n.substring(0,r)}y=t.getBBox();t=y.x;r=y.y;n=y.width;m&&(t=y.x+y.width/2,r=y.y+y.height/2);m=p?actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]:y.height;p=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(v)).data("node",c);v=r;for(r=0;r<e.length;r++){if(l){var x=
cvjs_rPaper[cvjs_active_floorplan_div_nr].path(u);x.attr({fill:"#FFFFFF","fill-opacity":"1"})}y=t+n*d;var B=m*h[r];v+=1.05*B;y=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(y,v,f[r]).attr(g[r]);y.attr({"font-size":B});y.attr({fill:k[r]});l&&y.attr({mask:x});y.attr({"pointer-events":"none"});vqText.push(y.data("node",e[r]));B=vqText.length;0<B&&B--;vqText[B].data("name",e[r]);vqText[B].data("id",e[r]);vqText[B].data("layer",a);p.add(y)}if(b)vqTBorder.push(p),a=vqTBorder.length,0<a&&a--,vqTBorder[a].data("name",
c),vqTBorder[a].data("id",c),vqTBorder[a].data("layer",c),vqTBorder[a].attr(show).attr({fill:"none","stoke-width":"0.01",stroke:"#000000","stroke-opacity":"0.01"});else return-1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][q].data("tborderId",c);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][q].data("textId",e)}}
function cvjs_AddTextOnObjectScaleText(a,b,c,d,e,f,g,h,k,l,m){var p=a.getBBox(),n=p.x;a=p.y;var q=p.width;p=p.height;cvjs_debug&&console.log(n+" "+a+"  "+q+" "+p);b=n+q*b;e*=p;c=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(b,a+1.05*e,c).attr(d);c.attr({"font-size":e});c.attr({"stroke-width":e/15});h*=p;f=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(b,a+1.05*h+1.05*e,f).attr(g);f.attr({"font-size":h});f.attr({"stroke-width":h/15});m*=p;k=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(b,a+1.05*
m+1.05*h+1.05*e,k).attr(l);k.attr({"font-size":m});k.attr({"stroke-width":m/15})}var handleGroup,canvas_width,canvas_height,global_scale_X,global_scale_Y,global_scale,delta_x,delta_y;
function cvjs_setCallbackMethod(a,b){switch(a){case "cvjs_OnLoadEnd":cvjs_OnLoadEnd=b;break;case "cvjs_graphicalObjectOnChange":cvjs_graphicalObjectOnChange=b;break;case "cvjs_OnLoadEndRedlines":cvjs_OnLoadEndRedlines=b;break;case "cvjs_ObjectSelected":cvjs_ObjectSelected=b;break;case "cvjs_measurementCallback":cvjs_measurementCallback=b;break;case "cvjs_CalibrateMeasurementCallback":cvjs_CalibrateMeasurementCallback=b;break;case "cvjs_Url_callback":cvjs_Url_callback=b;break;case "cvjs_loadSpaceImage_UserConfiguration":cvjs_loadSpaceImage_UserConfiguration=
b;break;case "cvjs_NoObjectSelected":cvjs_NoObjectSelected=b;break;case "cvjs_SVGfileObjectClicked":cvjs_SVGfileObjectClicked=b;break;case "cvjs_SVGfileObjectMouseEnter":cvjs_SVGfileObjectMouseEnter=b;break;case "cvjs_SVGfileObjectMouseLeave":cvjs_SVGfileObjectMouseLeave=b;break;case "cvjs_SVGfileObjectMouseMove":cvjs_SVGfileObjectMouseMove=b;break;case "cvjs_ParseDisplayDataMaps":cvjs_ParseDisplayDataMaps=b;break;case "cvjs_QuickCountCallback":cvjs_QuickCountCallback=b;break;case "cvjs_OnHyperlinkClick":cvjs_OnHyperlinkClick=
b;break;case "cvjs_setUpStickyNotesRedlines":cvjs_setUpStickyNotesRedlines=b;break;case "custom_host_parser_PopUpMenu":custom_host_parser_PopUpMenu=b;break;case "cvjs_customHostParser":cvjs_customHostParser=b;break;case "drawPathsGeneric":drawPathsGeneric=b;break;case "cvjs_callbackForModalDisplay":cvjs_callbackForModalDisplay=b;break;case "cvjs_populateMyCustomPopUpBody":cvjs_populateMyCustomPopUpBody=b;break;case "cvjs_customModalPopUpBody":cvjs_customModalPopUpBody=b;break;case "cvjs_NoObjectSelectedStickyNotes":cvjs_NoObjectSelectedStickyNotes=
b;break;case "cvjs_NoObjectSelectedHyperlinks":cvjs_NoObjectSelectedHyperlinks=b;break;case "cvjs_ObjectSelectedHyperlink":cvjs_ObjectSelectedHyperlink=b;break;case "cvjs_ObjectSelectedStickyNotes":cvjs_ObjectSelectedStickyNotes=b;break;case "cvjs_saveStickyNotesRedlinesUser":cvjs_saveStickyNotesRedlinesUser=b;break;case "cvjs_loadStickyNotesRedlinesUser":cvjs_loadStickyNotesRedlinesUser=b;break;case "my_own_clickmenu1":my_own_clickmenu1=b;break;case "my_own_clickmenu2":my_own_clickmenu2=b;break;
case "cvjs_popupTitleClick":cvjs_popupTitleClick=b;break;case "cvjs_mousedown":cvjs_mousedown=b;break;case "cvjs_click":cvjs_click=b;break;case "cvjs_dblclick":cvjs_dblclick=b;break;case "cvjs_mouseout":cvjs_mouseout=b;break;case "cvjs_mouseover":cvjs_mouseover=b;break;case "cvjs_mouseleave":cvjs_mouseleave=b;break;case "cvjs_mouseenter":cvjs_mouseenter=b;break;case "cvjs_change_space":cvjs_change_space=b;break;case "cvjs_graphicalObjectCreated":cvjs_graphicalObjectCreated=b;break;default:console.log("NO cvjs_setCallbackMethod "+
a)}}var cvjs_supressHyperlinkColors=!1,cvjs_callbackForModalDisplayVar=!1,cvjs_standardHighLightColors=!0;function cvjs_setCallbackForModalDisplay(a,b,c){cvjs_callbackForModalDisplayVar=a;cvjs_customModalPopUpBody=b;cvjs_populateMyCustomPopUpBody=c}
function cvjs_setCreationMode(a,b,c){cvjs_supressPopUpModal=a;cvjs_standardHighLightColors=1==b?!1:!0;if(1==cvjs_supressPopUpModal)for(var d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip("destroy");
else for(d in textLayer1=cvjs_clearTextLayer(textLayer1),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")!=c){a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id_link",a);a='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+a+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("name")+
'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+a+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("type")+"</h4></td></tr></table>";b=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))b=b.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")),
b=b.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")),b=b.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id"));dual_hbody_flag&&(-1<=parseInt(cvjs_currentNode_id)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:b,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},
hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:hbody_2,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:b,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},
hideOnHTMLClick:"false"})}else cvjs_debug&&console.log("here "+c)}
function cvjs_setNoModalMode(a){cvjs_supressPopUpModal=a;cvjs_standardHighLightColors=!0;if(1==cvjs_supressPopUpModal)for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip("destroy");else for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){a=
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id_link",a);a='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+a+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name")+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+a+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type")+
"</h4></td></tr></table>";var c=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))c=c.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")),c=c.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")),c=c.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"));
dual_hbody_flag&&(-1<=parseInt(cvjs_currentNode_id)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip({content:{text:c,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip({content:{text:hbody_2,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",
at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip({content:{text:c,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"})}}
function cvjs_setCustomModalsContent(a,b,c){cvjs_supressPopUpModal=!1;cvjs_standardHighLightColors=!0;if(1==cvjs_supressPopUpModal)for(var d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip("destroy");
else for(d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id_link",b);b='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+b+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("name")+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+b+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("type")+"</h4></td></tr></table>";c=a;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))c=c.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")),c=c.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")),c=c.replace("cvjs_zoomHere()",
"cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id"));cvjs_debug&&console.log(" "+d);dual_hbody_flag&&(-1<=parseInt(cvjs_currentNode_id)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:hbody_2,
title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"})}}
var cvjs_currentNode_underbar="NODE_",cvjs_currentNode_name="unassigned",cvjs_currentNode_id="unassigned",cvjs_currentNode_layer="unassigned",cvjs_currentNode_group="unassigned",cvjs_currentNode_attributes="unassigned",cvjs_currentNode_attributeStatus="unpopulated",cvjs_currentNode_occupancy="unassigned",cvjs_currentNode_type="unassigned",cvjs_currentNode_tags="unassigned",cvjs_currentNode_linked=!1,cvjs_currentNode_tborderId="unassigned",cvjs_currentNode_textId=[],cvjs_currentNode_translate_x=0,
cvjs_currentNode_translate_y=0,cvjs_currentNode_scale_x=1,cvjs_currentNode_scale_y=1,cvjs_currentNode_rotate=1,cvjs_currentNode_transform="",cvjs_currentNode_area="",cvjs_currentNode_displaySpaceObject="on",cvjs_currentStickyNote_underbar="SNOTE_",cvjs_currentStickyNote_name="unassigned",cvjs_currentStickyNote_id="unassigned",cvjs_currentStickyNote_layer="RedlineLayer",cvjs_currentStickyNote_group="unassigned",cvjs_currentStickyNote_text="",cvjs_currentStickyNote_userid="unassigned",cvjs_currentStickyNote_date=
"unassigned",cvjs_currentStickyNote_linked=!0,cvjs_currentStickyNote_transform="none",cvjs_currentStickyNote_currentPage=1,cvjs_currentStickyNote_drawingRotation=0,cvjs_currentRedline_underbar="RED_",cvjs_currentRedline_name="unassigned",cvjs_currentRedline_id="unassigned",cvjs_currentRedline_layer="RedlineLayer",cvjs_currentRedline_group="unassigned";cvjs_currentRedline_color="#FF0000";cvjs_currentRedline_strokeWidth=3;
var cvjs_currentRedline_fill="none",cvjs_currentRedline_fill_opacity="0.01",cvjs_currentRedline_transform="none",cvjs_currentRedline_userid="none",cvjs_currentRedline_currentPage=1,cvjs_currentRedline_polypath_arrow="none",cvjs_currentRedline_triangle_design="none",cvjs_currentRedline_redline_text="none",cvjs_currentRedline_username="none",cvjs_currentRedline_drawingRotation=0,cvjs_hiddenUsersList="",cvjs_lockedUsersList="",cvjs_currentTBorder_underbar="TBORDER_",cvjs_currentTBorder_name="unassigned",
cvjs_currentTBorder_id="unassigned",cvjs_currentTBorder_layer="unassigned",cvjs_currentTBorder_group="unassigned",cvjs_currentText_underbar="TEXT_",cvjs_currentText_name="unassigned",cvjs_currentText_id="unassigned",cvjs_currentText_layer="unassigned",cvjs_currentText_group="unassigned",cvjs_currentUrl_underbar="URL_",cvjs_currentUrl_name="unassigned",cvjs_currentUrl_id="unassigned",cvjs_currentUrl_comment="unassigned",cvjs_currentUrl_url="unassigned",cvjs_currentUrl_layer="unassigned",cvjs_currentUrl_group=
"unassigned",cvjs_currentUrl_linked=!0,cvjsStickyNoteBody='<table id="note_table">';cvjsStickyNoteBody+="<tr>";cvjsStickyNoteBody+="<td>";cvjsStickyNoteBody+='<div class="cvjs_stickynotes_text_1" onclick="cvjs_edit_note();">Text NOT initialized!</div>';cvjsStickyNoteBody+="</td>";cvjsStickyNoteBody+="</tr>";cvjsStickyNoteBody+="</table>";
function cvjs_setStickyNoteText(a){cvjsStickyNoteBody='<table id="note_table">';cvjsStickyNoteBody+="<tr>";cvjsStickyNoteBody+="<td>";cvjsStickyNoteBody+='<div class="cvjs_stickynotes_text_1" onclick="cvjs_edit_note();">'+a+"</div>";cvjsStickyNoteBody+="</td>";cvjsStickyNoteBody+="</tr>";cvjsStickyNoteBody+="</table>"}
function cvjs_setStickyNoteEditText(a){cvjsStickyNoteBody='<table id="note_table">';cvjsStickyNoteBody+="<tr>";cvjsStickyNoteBody+="<td>";cvjsStickyNoteBody+='<textarea class="cvjs_stickynotes_edit_text_1" id="sNote_text" cols="33" rows="3">'+a+"</textarea>";cvjsStickyNoteBody+="</td>";cvjsStickyNoteBody+="</tr>";cvjsStickyNoteBody+="</table>"}
jQuery("#stickyNoteSelectIcon").mouseover(function(a){var b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+20).css("top",a.clientY+document.documentElement.scrollTop-20):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+20).css("top",a.clientY-b.top+
document.documentElement.scrollTop-20);tip[cvjs_active_floorplan_div_nr].html(tipText);tip[cvjs_active_floorplan_div_nr].show()});
function cvjs_showIconnoteTip(a,b,c){var d,e="#cvjs_floorPlanInsertImageEncapsulate_"+floorplan_div_Array[cvjs_active_floorplan_div_nr];c=jQuery(e).position();var f=jQuery(e).css("position");cvjs_debug&&console.log("qtip div "+f);cvjs_debug&&console.log("we are here "+a+"  "+StickNoteQtipDiv+" "+e+" "+c.left+" "+c.top);1==b&&(d=jQuery("#imageNoteIcon1").position());2==b&&(d=jQuery("#imageNoteIcon2").position());3==b&&(d=jQuery("#imageNoteIcon3").position());jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position");cvjs_debug&&console.log("iconPosition "+d.left+"  "+d.top+"  "+b);tip[cvjs_active_floorplan_div_nr].css({left:c.left+d.left-(window.pageXOffset||document.documentElement.scrollLeft),top:c.top-25-(window.pageYOffset||document.documentElement.scrollTop),position:"fixed"});tip[cvjs_active_floorplan_div_nr].html(a);tip[cvjs_active_floorplan_div_nr].show()}var StickNoteQtipDiv="";
function cvjs_showStickynoteTip(a,b,c){var d,e="#"+StickNoteQtipDiv;c=jQuery(e).position();var f=jQuery(e).css("position");cvjs_debug&&console.log("qtip div "+f);cvjs_debug&&console.log("we are here "+a+"  "+StickNoteQtipDiv+" "+e+" "+c.left+" "+c.top);1==b&&(d=jQuery("#stickyNoteIcon1").position());2==b&&(d=jQuery("#stickyNoteIcon2").position());3==b&&(d=jQuery("#stickyNoteIcon3").position());4==b&&(d=jQuery("#stickyNoteIcon4").position());jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
e=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position");cvjs_debug&&console.log("iconPosition "+d.left+"  "+d.top+"  "+e);tip[cvjs_active_floorplan_div_nr].css({left:c.left+d.left,top:c.top-25,position:"fixed"});tip[cvjs_active_floorplan_div_nr].html(a);tip[cvjs_active_floorplan_div_nr].show();3==b&&-1==a.indexOf("Inactive")&&jQuery("#stickyNoteIcon3").css("color","#FB5300")}
function noteIconChangeHighlight(a,b){3==a&&jQuery("#stickyNoteIcon3").css("color",b);tip[cvjs_active_floorplan_div_nr].hide()}var StickNoteEditMode=!1;
function cvjs_edit_note(){cvjs_debug_stickynotes&&window.alert("edit note!");var a=cvjs_StickyNoteClicked();for(b in vqStickyNotes)if(a==vqStickyNotes[b].data("node")&&1==vqStickyNotes[b].data("locked")){cvjs_debug&&console.log("StickyNote locked for editing!");return}var b=cvjs_StickyNotes_arrayIndex(a);if(0==StickNoteEditMode){var c=vqStickyNotes[b].data("text");c=c.replace(/(<br>)/gm,"\n");cvjs_setStickyNoteEditText(c);c='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+
vqStickyNotes[b].data("id")+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+vqStickyNotes[b].data("name")+'</td><td class="cvjs_modal_header_sticky_note_info_1_nonselect" id="stickyNoteIcon1" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.Inactive+"',1,"+b+');" ><i class=""></i></td><td class="cvjs_modal_header_sticky_note_info_1_select" id="stickyNoteIcon2" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onclick="cvjs_edit_note();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.SaveNote+"',2,"+b+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1_nonselect" id="stickyNoteIcon3" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.Inactive+"',3,"+b+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2_select" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+
b+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.Cancel+"',4,"+b+');" ><i class="fa fa-times"></i></td></tr></table>';jQuery(vqStickyNotes[b].node).qtip({content:{text:cvjsStickyNoteBody,title:c},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});cvjs_debug_stickynotes&&console.log("2 stickynote show");
jQuery(vqStickyNotes[b].node).qtip("show");StickNoteEditMode=!0;b=document.getElementsByTagName("div");c=0}else tip[cvjs_active_floorplan_div_nr].hide(),c=jQuery("#sNote_text").val(),c=c.replace(/(\r\n|\n|\r)/gm,"<br>"),vqStickyNotes[b].data("text",c),cvjs_setStickyNoteText(c),c='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+vqStickyNotes[b].data("id")+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+
vqStickyNotes[b].data("name")+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="cvjs_move_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MoveNote+"',1,"+b+');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.EditNote+"',2,"+b+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="cvjs_delete_note();" onmouseout="javascript:noteIconChangeHighlight(3,\'#00539B\');" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.DeleteNote+"',3,"+b+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+
b+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MinimizeNote+"',4,"+b+');" ><i class="fa fa-times"></i></td></tr></table>',jQuery(vqStickyNotes[b].node).qtip({content:{text:cvjsStickyNoteBody,title:c},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}),cvjs_debug_stickynotes&&console.log("3 stickynote show"),
jQuery(vqStickyNotes[b].node).qtip("show"),StickNoteEditMode=!1,b=document.getElementsByTagName("div"),c=0;for(;c<b.length;c++)-1<b[c].id.indexOf("qtip-")&&-1==b[c].id.indexOf("-content")&&-1==b[c].id.indexOf("-title")&&(StickNoteQtipDiv=b[c].id);cvjs_graphicalObjectOnChange("Edit","StickyNote",a)}
function cvjs_move_note(){var a=cvjs_StickyNoteClicked();for(b in vqStickyNotes)if(a==vqStickyNotes[b].data("node")&&1==vqStickyNotes[b].data("locked")){cvjs_debug&&console.log("StickyNote locked for editing!");return}var b=cvjs_StickyNotes_arrayIndex(a);cvjs_debug_stickynotes&&console.log("2 stickynote hide");cvjs_debug&&console.log("2 stickynote move");jQuery(vqStickyNotes[b].node).qtip("hide");vqStickyNotes[b].attr({"fill-opacity":"0.1","stroke-opacity":"0.3"});tip[cvjs_active_floorplan_div_nr].hide();
cvjs_addHandleFunc_MoveStickyNote();cvjs_graphicalObjectOnChange("Move","StickyNote",a)}function cvjs_delete_note(){var a=cvjs_StickyNoteClicked();cvjs_debug&&console.log("StickyNote delete "+a);for(var b in vqStickyNotes)if(a==vqStickyNotes[b].data("node")&&1==vqStickyNotes[b].data("locked")){cvjs_debug&&console.log("StickyNote locked for editing!");return}cvjs_setUpStickyNotes_deleteNode(a);cvjs_graphicalObjectOnChange("Delete","StickyNote",a)}
function cvjs_currentMaxNodeId(){var a=0,b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");c=c.substring(5);c=parseInt(c);c>a&&(a=c)}return a}function cvjs_currentMaxSpaceNodeId(){var a=0,b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");c=c.substring(5);c=parseInt(c);c>a&&(a=c)}return a}
function cvjs_addUserIdToHiddenRedlineUsers(a){cvjs_hiddenUsersList=""==cvjs_hiddenUsersList?cvjs_hiddenUsersList+a:cvjs_hiddenUsersList+(";"+a)}function cvjs_addUserIdToLockedRedlineUsers(a){cvjs_lockedUsersList=""==cvjs_lockedUsersList?cvjs_lockedUsersList+a:cvjs_lockedUsersList+(";"+a)}function cvjs_clearAllRedlineHiddenUsers(){cvjs_hiddenUsersList=""}function cvjs_clearAllRedlineLockedUsers(){cvjs_lockedUsersList=""}function cvjs_getRedlineHiddenUsersList(){return cvjs_hiddenUsersList}
function cvjs_getRedlineLockedUsersList(){return cvjs_lockedUsersList}
function cvjs_getAllRedlines_UserIdList(){var a="",b;for(b in a){for(var c in vqStickyNotes)for(var d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&-1==a.indexOf(cvjs_stickyNotesRedlines[d].userid)&&(console.log(" 1 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),a=""==a?cvjs_stickyNotesRedlines[d].userid:a+";"+cvjs_stickyNotesRedlines[d].userid);for(c in vqRedlines)for(d in cvjs_debug&&console.log("snote Red "+c),cvjs_stickyNotesRedlines)cvjs_debug&&
console.log("redNote "+d+"  vqRedlines[snote].data(node) "+vqRedlines[c].data("node")+"  "+cvjs_stickyNotesRedlines[d].node),-1==a.indexOf(cvjs_stickyNotesRedlines[d].userid)&&(console.log(" 2 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),a=""==a?cvjs_stickyNotesRedlines[d].userid:a+";"+cvjs_stickyNotesRedlines[d].userid)}return a}
function cvjs_getAllRedlines_TextList(){var a="",b;for(b in cvjs_stickyNotesRedlines)try{void 0!=cvjs_stickyNotesRedlines[b].text&&"none"!=cvjs_stickyNotesRedlines[b].text&&-1!=cvjs_stickyNotesRedlines[b].text&&(a=""==a?"("+cvjs_stickyNotesRedlines[b].userid+',"'+a.indexOf(cvjs_stickyNotesRedlines[b].redline_text)+'")':a+";("+cvjs_stickyNotesRedlines[b].userid+',"'+a.indexOf(cvjs_stickyNotesRedlines[b].redline_text)+'")')}catch(c){console.log(c)}for(b in cvjs_stickyNotesRedlines)try{void 0!=cvjs_stickyNotesRedlines[b].redline_text&&
"none"!=cvjs_stickyNotesRedlines[b].redline_text&&-1!=cvjs_stickyNotesRedlines[b].redline_text&&(a=""==a?"("+cvjs_stickyNotesRedlines[b].userid+',"'+cvjs_stickyNotesRedlines[b].redline_text+'")':a+";("+cvjs_stickyNotesRedlines[b].userid+',"'+cvjs_stickyNotesRedlines[b].redline_text+'")')}catch(c){console.log(c)}return a}
function cvjs_hideAllRedlines_ExceptUser(a){var b=cvjs_hiddenUsersList="",c;for(c in vqStickyNotes)for(var d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&-1==b.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=a&&(console.log(" 1 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),b=""==b?cvjs_stickyNotesRedlines[d].userid:b+";"+cvjs_stickyNotesRedlines[d].userid);for(c in vqRedlines)for(d in cvjs_debug&&
console.log("snote Red "+c),cvjs_stickyNotesRedlines)cvjs_debug&&console.log("redNote "+d+"  vqRedlines[snote].data(node) "+vqRedlines[c].data("node")+"  "+cvjs_stickyNotesRedlines[d].node),-1==b.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=a&&(console.log(" 2 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),b=""==b?cvjs_stickyNotesRedlines[d].userid:b+";"+cvjs_stickyNotesRedlines[d].userid);cvjs_hiddenUsersList=b;console.log("USER LIST "+b);
cvjs_hideAllRedlines_HiddenUsersList()}
function cvjs_lockAllRedlines_ExceptUser(a){var b=cvjs_lockedUsersList="",c;for(c in vqStickyNotes)for(var d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&-1==b.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=a&&(cvjs_debug&&console.log(" 1 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),b=""==b?cvjs_stickyNotesRedlines[d].userid:b+";"+cvjs_stickyNotesRedlines[d].userid);for(c in vqRedlines)for(d in cvjs_debug&&
console.log("snote Red "+c),cvjs_stickyNotesRedlines)cvjs_debug&&console.log("redNote "+d+"  vqRedlines[snote].data(node) "+vqRedlines[c].data("node")+"  "+cvjs_stickyNotesRedlines[d].node),-1==b.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=a&&(cvjs_debug&&console.log(" 2 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),b=""==b?cvjs_stickyNotesRedlines[d].userid:b+";"+cvjs_stickyNotesRedlines[d].userid);cvjs_lockedUsersList=b;console.log("USER LIST "+
b);cvjs_lockAllRedlines_LockedUsersList()}
function cvjs_hideAllRedlines_ExceptCurrentUser(){var a=cvjs_hiddenUsersList="",b;for(b in a){for(var c in vqStickyNotes)for(var d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&-1==a.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=cvjs_currentRedline_userid&&(cvjs_debug&&console.log(" 1 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),a=""==a?cvjs_stickyNotesRedlines[d].userid:a+";"+cvjs_stickyNotesRedlines[d].userid);
for(c in vqRedlines)for(d in cvjs_debug&&console.log("snote Red "+c),cvjs_stickyNotesRedlines)cvjs_debug&&console.log("redNote "+d+"  vqRedlines[snote].data(node) "+vqRedlines[c].data("node")+"  "+cvjs_stickyNotesRedlines[d].node),-1==a.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=cvjs_currentRedline_userid&&(cvjs_debug&&console.log(" 2 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),a=""==a?cvjs_stickyNotesRedlines[d].userid:a+";"+cvjs_stickyNotesRedlines[d].userid)}cvjs_hiddenUsersList=
a;console.log("USER LIST "+a);cvjs_hideAllRedlines_HiddenUsersList()}
function cvjs_lockAllRedlines_ExceptCurrentUser(){var a=cvjs_lockedUsersList="",b;for(b in a){for(var c in vqStickyNotes)for(var d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&-1==a.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=cvjs_currentRedline_userid&&(cvjs_debug&&console.log(" 1 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),a=""==a?cvjs_stickyNotesRedlines[d].userid:a+";"+cvjs_stickyNotesRedlines[d].userid);
for(c in vqRedlines)for(d in cvjs_debug&&console.log("snote Red "+c),cvjs_stickyNotesRedlines)cvjs_debug&&console.log("redNote "+d+"  vqRedlines[snote].data(node) "+vqRedlines[c].data("node")+"  "+cvjs_stickyNotesRedlines[d].node),-1==a.indexOf(cvjs_stickyNotesRedlines[d].userid)&&cvjs_stickyNotesRedlines[d].userid!=cvjs_currentRedline_userid&&(cvjs_debug&&console.log(" 2 "+cvjs_currentRedline_userid+"  "+cvjs_stickyNotesRedlines[d].userid),a=""==a?cvjs_stickyNotesRedlines[d].userid:a+";"+cvjs_stickyNotesRedlines[d].userid)}cvjs_lockedUsersList=
a;console.log("USER LIST "+a);cvjs_lockAllRedlines_LockedUsersList()}
function cvjs_hideAllRedlines_HiddenUsersList(){var a=cvjs_hiddenUsersList.split(";"),b;for(b in a){cvjs_debug&&console.log("loop "+b+"  "+a[b]);for(var c in vqStickyNotes){cvjs_debug&&console.log("snote "+c);for(var d in cvjs_stickyNotesRedlines)cvjs_debug&&console.log("redNote "+d),cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&(cvjs_debug&&console.log("notes redNote"+d+" "+cvjs_stickyNotesRedlines[d].userid),cvjs_stickyNotesRedlines[d].userid==a[b]&&vqStickyNotes[c].attr(hide))}for(c in vqRedlines)for(d in cvjs_debug&&
console.log("snote Red "+c),cvjs_stickyNotesRedlines)cvjs_debug&&console.log("redNote "+d+"  vqRedlines[snote].data(node) "+vqRedlines[c].data("node")+"  "+cvjs_stickyNotesRedlines[d].node),cvjs_stickyNotesRedlines[d].node==vqRedlines[c].data("node")&&(cvjs_debug&&console.log("redlines redNote"+d+"  "+cvjs_stickyNotesRedlines[d].userid+" "+a[b]+"X  "+c+"  "+(cvjs_stickyNotesRedlines[d].userid==a[b])),cvjs_stickyNotesRedlines[d].userid==a[b]&&vqRedlines[c].attr(hide))}}
function cvjs_lockAllRedlines_LockedUsersList(){var a=cvjs_lockedUsersList.split(";"),b;for(b in a){cvjs_debug&&console.log("loop "+b+"  "+a[b]);for(var c in vqStickyNotes)for(var d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqStickyNotes[c].data("node")&&cvjs_stickyNotesRedlines[d].userid==a[b]&&(vqStickyNotes[c].data("locked",!0),cvjs_debug&&console.log("locked note "+d));for(c in vqRedlines)for(d in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[d].node==vqRedlines[c].data("node")&&
cvjs_stickyNotesRedlines[d].userid==a[b]&&(vqRedlines[c].data("locked",!0),cvjs_debug&&console.log("locked note "+d))}}
function cvjs_setCurrentNodeValues(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r,t,u,v){cvjs_currentNode_underbar=a;cvjs_currentNode_name=b;cvjs_currentNode_id=c;cvjs_currentNode_layer=d;cvjs_currentNode_group=e;cvjs_currentNode_attributes=f;cvjs_currentNode_attributeStatus=g;cvjs_currentNode_type=h;cvjs_currentNode_tags=k;cvjs_currentNode_occupancy=l;cvjs_currentNode_linked=m;cvjs_currentNode_translate_x=p;cvjs_currentNode_translate_y=n;cvjs_currentNode_scale_x=q;cvjs_currentNode_scale_y=r;cvjs_currentNode_rotate=
t;cvjs_currentNode_transform=u;cvjs_currentNode_area=v}
function cvjs_setCurrentSpaceObjectNodeValues(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r,t,u,v){cvjs_currentNode_underbar=a;cvjs_currentNode_name=b;cvjs_currentNode_id=c;cvjs_currentNode_layer=d;cvjs_currentNode_group=e;cvjs_currentNode_attributes=f;cvjs_currentNode_attributeStatus=g;cvjs_currentNode_type=h;cvjs_currentNode_tags=k;cvjs_currentNode_occupancy=l;cvjs_currentNode_linked=m;cvjs_currentNode_translate_x=p;cvjs_currentNode_translate_y=n;cvjs_currentNode_scale_x=q;cvjs_currentNode_scale_y=r;cvjs_currentNode_rotate=
t;cvjs_currentNode_transform=u;cvjs_currentNode_area=v}function cvjs_setCurrentStickyNoteValues(a,b,c,d,e,f,g,h,k){cvjs_currentStickyNote_underbar=a;cvjs_currentStickyNote_name=b;cvjs_currentStickyNote_id=c;cvjs_currentStickyNote_layer=d;cvjs_currentStickyNote_group=e;cvjs_currentStickyNote_text=f;cvjs_currentStickyNote_userid=g;cvjs_currentStickyNote_date=h;cvjs_currentStickyNote_linked=k}
function cvjs_setCurrentStickyNoteValues_All(a,b,c,d,e,f,g,h,k,l,m,p){cvjs_currentStickyNote_underbar=a;cvjs_currentStickyNote_name=b;cvjs_currentStickyNote_id=c;cvjs_currentStickyNote_layer=d;cvjs_currentStickyNote_group=e;cvjs_currentStickyNote_text=f;cvjs_currentStickyNote_userid=g;cvjs_currentStickyNote_date=h;cvjs_currentStickyNote_linked=k;cvjs_currentStickyNote_transform=l;cvjs_currentStickyNote_currentPage=m;cvjs_currentStickyNote_drawingRotation=p}
function cvjs_setCurrentStickyNoteValues_NameUserId(a,b){cvjs_currentStickyNote_name=a;cvjs_currentStickyNote_userid=b}function cvjs_setCurrentStickyNoteValues_NameUserIdDate(a,b,c){cvjs_currentStickyNote_name=a;cvjs_currentStickyNote_userid=b;cvjs_currentStickyNote_date=c}function cvjs_setCurrentRedlineValues_NameUserid(a,b){cvjs_currentRedline_userid=b;cvjs_currentRedline_username=a}function cvjs_setCurrentRedlineValues_Userid(a){cvjs_currentRedline_userid=a}
function cvjs_setCurrentRedlineValues(a,b,c,d,e,f,g,h){cvjs_currentRedline_underbar=a;cvjs_currentRedline_name=b;cvjs_currentRedline_id=c;cvjs_currentRedline_layer=d;cvjs_currentRedline_group=e;cvjs_currentRedline_color=f;cvjs_currentRedline_strokeWidth=g;cvjs_currentRedline_drawingRotation=h}
function cvjs_setCurrentRedlineValues_All(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r,t,u){cvjs_currentRedline_underbar=a;cvjs_currentRedline_name=b;cvjs_currentRedline_id=c;cvjs_currentRedline_layer=d;cvjs_currentRedline_group=e;cvjs_currentRedline_color=f;cvjs_currentRedline_strokeWidth=g;cvjs_currentRedline_fill=h;cvjs_currentRedline_fill_opacity=k;cvjs_currentRedline_transform=l;cvjs_currentRedline_username=m;cvjs_currentRedline_userid=p;cvjs_currentRedline_currentPage=n;cvjs_currentRedline_polypath_arrow=
q;cvjs_currentRedline_triangle_design=r;cvjs_currentRedline_redline_text=t;cvjs_currentRedline_drawingRotation=u}function cvjs_setCurrentRedlineValues_ColorStokeWidth(a,b){cvjs_currentRedline_color=a;cvjs_currentRedline_strokeWidth=b}function cvjs_setCurrentRedlineValues_Color(a){cvjs_currentRedline_color=a}function cvjs_setCurrentRedlineValues_StokeWidth(a){cvjs_currentRedline_strokeWidth=a}function cvjs_setCurrentRedlineValues_StrokeWidth(a){cvjs_currentRedline_strokeWidth=a}
function cvjs_setCurrentNodeValuesFromExistingNode(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node")==a&&(cvjs_currentNode_underbar=a,cvjs_currentNode_name=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name"),cvjs_currentNode_id=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"),cvjs_currentNode_layer=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("layer"),
cvjs_currentNode_group=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group"),cvjs_currentNode_attributes=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributes"),cvjs_currentNode_attributeStatus=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributeStatus"),cvjs_currentNode_type=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type"),cvjs_currentNode_tags=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("tags"),
cvjs_currentNode_occupancy=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("occupancy"),cvjs_currentNode_linked=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("linked"),cvjs_currentNode_translate_x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("translate_x"),cvjs_currentNode_translate_y=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("translate_y"),cvjs_currentNode_scale_x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("scale_x"),
cvjs_currentNode_scale_y=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("scale_y"),cvjs_currentNode_rotate=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("rotate"),cvjs_currentNode_transform=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("transform"))}
function cvjs_overwriteNodeValues(a,b,c,d,e,f,g,h,k,l,m,p){for(var n in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("node")==a)if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("id"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("name"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("layer"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("group"),
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("attributes"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("attributeStatus"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("type"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("tags"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("occupancy"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("linked"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].removeData("area"),
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("area",p),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("id",b),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("name",c),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("layer",d),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("group",e),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("attributes",f),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("attributeStatus",
g),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("type",h),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("tags",k),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("occupancy",l),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("linked",m),1==cvjs_supressPopUpModal)jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].node).qtip("destroy");else{var q=b.replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].data("id_link",q);q='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+q+'">'+c+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+q+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+
h+"</h4></td></tr></table>";var r=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))r=r.replace("my_own_clickmenu1()","my_own_clickmenu1_"+b),r=r.replace("my_own_clickmenu2()","my_own_clickmenu2_"+b),r=r.replace("cvjs_zoomHere()","cvjs_zoomHere_"+b);dual_hbody_flag&&(-1<=parseInt(b)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].node).qtip({content:{text:r,title:q},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].node).qtip({content:{text:hbody_2,title:q},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][n].node).qtip({content:{text:r,title:q},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"})}}function cvjs_addVqRoomsGraphics_newNode_polygon(a,b){a=b.data("node",a);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push(a)}
function cvjs_addVqRoomsGraphics_newNode_circle(a,b){var c=b.toString();b.attr({transform:"S0.001",opacity:"1"});cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(0,0,1,1).attr({stroke:"#000000","stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"});b=c.indexOf(" cx=");b=c.substring(b+5);var d=b.indexOf('"');b=b.substring(0,d);d=c.indexOf(" cy=");d=c.substring(d+5);var e=d.indexOf('"');d=d.substring(0,e);e=c.indexOf(" r=");e=c.substring(e+4);var f=e.indexOf('"');e=e.substring(0,f);
f=c.indexOf("transform=");f=c.substring(f+11);var g=f.indexOf('"');if(-1<f.substring(0,g).indexOf("matrix")){d=c.indexOf("(");c=c.substring(d+1);b=c.indexOf(",");e=c.substring(0,b);for(b=0;4>b;b++)d=c.indexOf(","),c=c.substring(d+1);d=c.indexOf(",");b=c.substring(0,d);c=c.substring(d+1);d=c.indexOf(")");d=c.substring(0,d)}cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push(cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(b,d,e,e).attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999",
"stroke-opacity":"1"}).data("node",a))}function cvjs_addVqStickyNotesGraphics_newNode(a,b){a=b.data("node",a);vqStickyNotes.push(a)}
function cvjs_addVqRedlinesGraphics_newNode(a,b){a=b.data("node",a);vqRedlines.push(a);a=vqRedlines.length-1;0<=a&&(vqRedlines[a].data("name",cvjs_currentRedline_name),vqRedlines[a].data("id",cvjs_currentRedline_id),vqRedlines[a].data("layer",cvjs_currentRedline_layer),vqRedlines[a].data("group",cvjs_currentRedline_group),vqRedlines[a].data("color",cvjs_currentRedline_color),vqRedlines[a].data("strokeWidth",cvjs_currentRedline_strokeWidth),vqRedlines[a].data("fill","#FFF"),vqRedlines[a].data("fill_opacity",
"0.01"),vqRedlines[a].data("transform","none"),vqRedlines[a].data("username",cvjs_currentRedline_username),vqRedlines[a].data("userid",cvjs_currentRedline_userid),vqRedlines[a].data("currentPage",multiPages[cvjs_active_floorplan_div_nr].currentPage),vqRedlines[a].data("triangle_design","none"),vqRedlines[a].data("polypath_arrow","none"),vqRedlines[a].data("redline_text","none"),vqRedlines[a].data("drawingRotation",cvjs_currentRedline_drawingRotation),vqRedlines[a].mousedown(function(a){cvjs_deleteRedlineFlag?
(cvjs_deleteRedlineFlag=!1,a=this.data("node"),cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete","Redline",a)):(a=this.data("id"),cvjs_graphicalObjectOnChange("Click","Redline",a))}),vqRedlines[a].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}),vqRedlines[a].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()}))}
function cvjs_addVqRedlinesGraphics_newNodeFill(a,b,c,d){a=b.data("node",a);vqRedlines.push(a);a=vqRedlines.length-1;0<=a&&(vqRedlines[a].data("name",cvjs_currentRedline_name),vqRedlines[a].data("id",cvjs_currentRedline_id),vqRedlines[a].data("layer",cvjs_currentRedline_layer),vqRedlines[a].data("group",cvjs_currentRedline_group),vqRedlines[a].data("color",cvjs_currentRedline_color),vqRedlines[a].data("strokeWidth",cvjs_currentRedline_strokeWidth),vqRedlines[a].data("fill",c),vqRedlines[a].data("fill_opacity",
d),vqRedlines[a].data("transform","none"),vqRedlines[a].data("username",cvjs_currentRedline_username),vqRedlines[a].data("userid",cvjs_currentRedline_userid),vqRedlines[a].data("currentPage",multiPages[cvjs_active_floorplan_div_nr].currentPage),vqRedlines[a].data("triangle_design","none"),vqRedlines[a].data("polypath_arrow","none"),vqRedlines[a].data("redline_text","none"),vqRedlines[a].data("drawingRotation",cvjs_currentRedline_drawingRotation),vqRedlines[a].mousedown(function(a){cvjs_deleteRedlineFlag?
(cvjs_deleteRedlineFlag=!1,a=this.data("node"),cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete","Redline",a)):(a=this.data("id"),cvjs_graphicalObjectOnChange("Click","Redline",a))}),vqRedlines[a].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}),vqRedlines[a].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()}))}
function cvjs_addVqRedlinesGraphics_newNodeTrans(a,b,c,d,e){a=b.data("node",a);vqRedlines.push(a);a=vqRedlines.length-1;0<=a&&(vqRedlines[a].data("name",cvjs_currentRedline_name),vqRedlines[a].data("id",cvjs_currentRedline_id),vqRedlines[a].data("layer",cvjs_currentRedline_layer),vqRedlines[a].data("group",cvjs_currentRedline_group),vqRedlines[a].data("color",cvjs_currentRedline_color),vqRedlines[a].data("strokeWidth",cvjs_currentRedline_strokeWidth),vqRedlines[a].data("fill","#FFF"),vqRedlines[a].data("fill_opacity",
"0.01"),vqRedlines[a].data("transform",c),vqRedlines[a].data("username",cvjs_currentRedline_username),vqRedlines[a].data("userid",cvjs_currentRedline_userid),vqRedlines[a].data("currentPage",multiPages[cvjs_active_floorplan_div_nr].currentPage),vqRedlines[a].data("triangle_design",d),vqRedlines[a].data("polypath_arrow",e),vqRedlines[a].data("redline_text","none"),vqRedlines[a].data("drawingRotation",cvjs_currentRedline_drawingRotation),vqRedlines[a].mousedown(function(a){cvjs_deleteRedlineFlag?(cvjs_deleteRedlineFlag=
!1,a=this.data("node"),cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete","Redline",a)):(a=this.data("id"),cvjs_graphicalObjectOnChange("Click","Redline",a))}),vqRedlines[a].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==
jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}),vqRedlines[a].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()}))}
function cvjs_addVqRedlinesGraphics_newNodeText(a,b,c,d){a=b.data("node",a);vqRedlines.push(a);a=vqRedlines.length-1;0<=a&&(vqRedlines[a].data("name",cvjs_currentRedline_name),vqRedlines[a].data("id",cvjs_currentRedline_id),vqRedlines[a].data("layer",cvjs_currentRedline_layer),vqRedlines[a].data("group",cvjs_currentRedline_group),vqRedlines[a].data("color",cvjs_currentRedline_color),vqRedlines[a].data("strokeWidth",cvjs_currentRedline_strokeWidth),vqRedlines[a].data("fill","#FFF"),vqRedlines[a].data("fill_opacity",
"0.01"),vqRedlines[a].data("transform",c),vqRedlines[a].data("username",cvjs_currentRedline_username),vqRedlines[a].data("userid",cvjs_currentRedline_userid),vqRedlines[a].data("currentPage",multiPages[cvjs_active_floorplan_div_nr].currentPage),vqRedlines[a].data("triangle_design","none"),vqRedlines[a].data("polypath_arrow","none"),vqRedlines[a].data("redline_text",d),vqRedlines[a].data("drawingRotation",cvjs_currentRedline_drawingRotation),vqRedlines[a].mousedown(function(a){cvjs_deleteRedlineFlag?
(cvjs_deleteRedlineFlag=!1,a=this.data("node"),cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete","Redline",a)):(a=this.data("id"),cvjs_graphicalObjectOnChange("Click","Redline",a))}),vqRedlines[a].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}),vqRedlines[a].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()}))}
function cvjs_setUpVqRooms_currentNode(a,b){floorplan_height=.9*jQuery(window).height();floorplan_width=.9*jQuery(window).width();tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);tip[cvjs_active_floorplan_div_nr].hide().css("left",floorplan_width).css("top",floorplan_height);tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var c="";try{jQuery.fn.qtip.defaults.show.event="click",jQuery.fn.qtip.defaults.hide.event=null}catch(h){}""==layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]&&
(layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]=a.g());try{var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length-1}catch(h){console.log("vqRooms [cvjs_active_floorplan_div_nr] not defined! "+h)}rid=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node");if(b==rid){a=cvjs_currentNode_tags;if("unassigned"==cvjs_currentNode_tags)cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("tags","unassigned");else{b=1;for(var e in a){for(var f="tag"+b,g=a[e];" "==
g.charAt(0);)g=g.substr(1);g=g.replace(/ /gi,"&nbsp;");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data(f,g);b++}}cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("occupancy",cvjs_currentNode_occupancy);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("name",cvjs_currentNode_name);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("type",cvjs_currentNode_type);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("area",cvjs_currentNode_area);
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id",cvjs_currentNode_id);try{cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("defaultcolor","undefined"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("layer",cvjs_currentNode_layer),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("group",cvjs_currentNode_group),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked",cvjs_currentNode_linked),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("translate_x",
cvjs_currentNode_translate_x),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("translate_y",cvjs_currentNode_translate_y),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("rotate",cvjs_currentNode_rotate),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("scale_x",cvjs_currentNode_scale_x),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("scale_y",cvjs_currentNode_scale_y),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("transform",
cvjs_currentNode_transform),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle",""),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("attributes",cvjs_currentNode_attributes),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("attributeStatus",cvjs_currentNode_attributeStatus),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("displaySpaceObject",cvjs_currentNode_displaySpaceObject)}catch(h){console.log(h)}!cvjs_supressPopUpModal||cvjs_standardHighLightColors?
(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node"),e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),jQuery(e).attr(defaultColor)):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked")?(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node"),e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),jQuery(e).attr(defaultColor_linked)):(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node"),e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),
jQuery(e).attr(defaultColor_unlinked));if(1==cvjs_supressPopUpModal)jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip("destroy");else{e=cvjs_currentNode_id.replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id_link",
e);e='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+e+'">'+cvjs_currentNode_name+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+e+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_currentNode_type+"</h4></td></tr></table>";a=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))a=a.replace("my_own_clickmenu1()",
"my_own_clickmenu1_"+cvjs_currentNode_id),a=a.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_currentNode_id),a=a.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_currentNode_id);dual_hbody_flag&&(-1<=parseInt(cvjs_currentNode_id)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:a,title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:hbody_2,
title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].node).qtip({content:{text:a,title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"})}cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].mousedown(function(a){vqRoomMouseSelect=
!0;cvjs_debug&&console.log("A Domousedown");DoMouseDown(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop,cvjs_active_floorplan_div_nr)}).mouseout(function(a){try{jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();var b=findRoom(currentRoomId);if(!vqRoomMouseSelect&&(!cvjs_supressPopUpModal||cvjs_standardHighLightColors))if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("defaultcolor").toString().indexOf("undefined")){var c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),
d="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id");jQuery(d).attr(defaultColor)}else c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),d="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id"),jQuery(d).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("defaultcolor"))}catch(p){cvjs_debug&&console.log("mouseout: "+p)}}).mousemove(function(a){currentRoomId=this.data("id");currentRoomName=this.data("name");if(bMouseDown||bTempMouseDown)DoMouseMove(a.clientX+document.body.scrollLeft,
a.clientY+document.body.scrollTop);else{var b=findRoom(currentRoomId);if(0<=b&&b!=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&cvjs_location_flag){if(tooltipLast[cvjs_active_floorplan_div_nr]!=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&-1!=tooltipLast[cvjs_active_floorplan_div_nr])if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors)try{if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("defaultcolor").toString().indexOf("undefined")){var d=
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("node"),e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id");jQuery(e).attr(defaultColor)}else d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("node"),e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id"),jQuery(e).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("defaultcolor"))}catch(p){console.log("vqRoom mousemove:"+
p)}else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("linked")?(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("node"),e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id"),jQuery(e).attr(defaultColor_linked)):(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[cvjs_active_floorplan_div_nr]].data("node"),e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id"),jQuery(e).attr(defaultColor_unlinked));
!cvjs_supressPopUpModal||cvjs_standardHighLightColors?(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id"),jQuery(e).attr(highlight)):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("linked")?(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id"),jQuery(e).attr(highlight_linked)):(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),
e="#"+jQuery('[cvjs\\:node="'+d+'"]').attr("id"),jQuery(e).attr(highlight_unlinked));tooltipLast[cvjs_active_floorplan_div_nr]=b}c=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");cvjs_customToolTip&&(c=cvjs_displayCustomToolTip(this.data("id")));tip[cvjs_active_floorplan_div_nr].html(c);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}}).mouseup(function(a){if(bPan)DoMouseUp(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);
else try{layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show)}catch(k){}c=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");cvjs_customToolTip&&(c=cvjs_displayCustomToolTip(this.data("id")));tip[cvjs_active_floorplan_div_nr].html(c);bMouseDown=!1;cvjs_clearDrawing();rid=this.data("id");change_space_fixed_location(rid,cvjs_active_floorplan_div_nr);bPan=!1}).touchstart(function(a){DoTouchStart(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).touchend(function(a){if(!bPan&&
!locked){var b=this.data("id");cvjs_change_space(b);c=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");cvjs_customToolTip&&(c=cvjs_displayCustomToolTip(this.data("id")));tip[cvjs_active_floorplan_div_nr].html(c)}DoTouchEnd(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);c=cvjs_supressPopUpModal?this.data("id"):this.data("name");cvjs_customToolTip&&(c=cvjs_displayCustomToolTip(this.data("id")));tip[cvjs_active_floorplan_div_nr].html(c);
bMouseDown=!1;cvjs_clearDrawing();b=this.data("id");change_space_fixed_location(b,cvjs_active_floorplan_div_nr)}).touchmove(function(a){if(!bPan){var b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",
a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(c);cvjs_customToolTip&&(c=cvjs_displayCustomToolTip(this.data("id")))}DoTouchMove(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).dblclick(function(a){a.preventDefault();a.stopPropagation()})}layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].add(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d])}
function cvjs_setUpVqStickyNotes_currentNode_vqIndex(a,b,c,d){floorplan_height=.9*jQuery(window).height();floorplan_width=.9*jQuery(window).width();tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);tip[cvjs_active_floorplan_div_nr].hide().css("left",floorplan_width).css("top",floorplan_height);var e="";try{jQuery.fn.qtip.defaults.show.event="click",jQuery.fn.qtip.defaults.hide.event=null}catch(g){}var f=vqStickyNotes[c].data("node");if(b==f){vqStickyNotes[c].data("name",
cvjs_currentStickyNote_name);vqStickyNotes[c].data("id",cvjs_currentStickyNote_id);vqStickyNotes[c].data("text",cvjs_currentStickyNote_text);try{vqStickyNotes[c].data("layer",cvjs_currentStickyNote_layer),vqStickyNotes[c].data("group",cvjs_currentStickyNote_group),vqStickyNotes[c].data("linked",cvjs_currentStickyNote_linked),vqStickyNotes[c].data("userid",cvjs_currentStickyNote_userid),vqStickyNotes[c].data("date",cvjs_currentStickyNote_date),vqStickyNotes[c].data("currentPage",cvjs_currentStickyNote_currentPage),
vqStickyNotes[c].data("transform",cvjs_currentStickyNote_transform),vqStickyNotes[c].data("drawingRotation",cvjs_currentStickyNote_drawingRotation)}catch(g){console.log(g)}!cvjs_supressPopUpModal||cvjs_standardHighLightColors?vqStickyNotes[c].attr(defaultColor_StickyNotes):vqStickyNotes[c].data("linked")?vqStickyNotes[c].attr(defaultColor_linked):vqStickyNotes[c].attr(defaultColor_unlinked);if(1==cvjs_supressPopUpModal)jQuery(vqStickyNotes[c].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(vqStickyNotes[c].node).qtip("destroy");else for(a='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+cvjs_currentStickyNote_id+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+cvjs_currentStickyNote_name+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="cvjs_move_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.MoveNote+"',1,"+c+');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.EditNote+"',2,"+c+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="cvjs_delete_note();" onmouseout="javascript:noteIconChangeHighlight(3,\'#00539B\');" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.DeleteNote+"',3,"+c+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+c+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MinimizeNote+"',4,"+c+');" ><i class="fa fa-times"></i></td></tr></table>',cvjs_setStickyNoteText(cvjs_currentStickyNote_text),
jQuery(vqStickyNotes[c].node).qtip({content:{text:cvjsStickyNoteBody,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}),a=document.getElementsByTagName("div"),b=0;b<a.length;b++)-1<a[b].id.indexOf("qtip-")&&-1==a[b].id.indexOf("-content")&&-1==a[b].id.indexOf("-title")&&(StickNoteQtipDiv=a[b].id);vqStickyNotes[c].mousedown(function(a){vqRoomMouseSelect=!0;cvjs_debug&&console.log("B Domousedown");DoMouseDown(a.clientX+
document.body.scrollLeft,a.clientY+document.body.scrollTop,cvjs_active_floorplan_div_nr)}).mousemove(function(a){currentStickyNoteId=this.data("id");currentStickyNoteName=this.data("name");if(bMouseDown||bTempMouseDown)DoMouseMove(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else{var b=findStickyNotes(currentStickyNoteId);0<=b&&b!=lastObjStickyNote[cvjs_active_floorplan_div_nr]&&cvjs_location_flag&&(tooltipLastStickyNote!=lastObjStickyNote[cvjs_active_floorplan_div_nr]&&(cvjs_supressPopUpModal?
vqStickyNotes[tooltipLastStickyNote].data("linked")?vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_linked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_unlinked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_StickyNotes)),cvjs_supressPopUpModal?vqStickyNotes[b].data("linked")?vqStickyNotes[b].attr(highlight_linked):vqStickyNotes[b].attr(highlight_unlinked):vqStickyNotes[b].attr(highlight_StickyNotes),tooltipLastStickyNote=b);e="Note #"+this.data("id");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});
tip[cvjs_active_floorplan_div_nr].html(e);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",
a.clientY-b.top+document.documentElement.scrollTop-25)}}).mouseup(function(a){vqRoomMouseSelect=!1;if(bPan)DoMouseUp(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop),e="Note #"+this.data("id"),tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),tip[cvjs_active_floorplan_div_nr].html(e),bMouseDown=!1,cvjs_clearDrawingStickyNotes(),f=this.data("id"),cvjs_debug&&console.log("stickynote 1");else{try{layer_vqstickynotes.attr(show)}catch(h){}e="Note #"+this.data("id");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});
tip[cvjs_active_floorplan_div_nr].html(e);bMouseDown=!1;cvjs_clearDrawingStickyNotes();f=this.data("id");cvjs_debug&&console.log("stickynote 2x")}change_space_fixed_locationStickyNotes(f);bPan=!1}).touchstart(function(a){DoTouchStart(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).touchend(function(a){bPan||locked||(f=this.data("id"),cvjs_change_space(f),e="Note #"+this.data("id"),tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),tip[cvjs_active_floorplan_div_nr].html(e));
DoTouchEnd(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);e=this.data("id");tip[cvjs_active_floorplan_div_nr].html(e);bMouseDown=!1;cvjs_clearDrawingStickyNotes();f=this.data("id");console.log("stickynote 3x");change_space_fixed_locationStickyNotes(f)}).touchmove(function(a){if(!bPan){var b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",
a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(e)}DoTouchMove(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).dblclick(function(a){a.preventDefault();a.stopPropagation()})}}
function cvjs_setUpVqStickyNotes_currentNode_vqIndex_passedInstance(a,b,c,d){floorplan_height=.9*jQuery(window).height();floorplan_width=.9*jQuery(window).width();tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);tip[cvjs_active_floorplan_div_nr].hide().css("left",floorplan_width).css("top",floorplan_height);try{jQuery.fn.qtip.defaults.show.event="click",jQuery.fn.qtip.defaults.hide.event=null}catch(e){}""==layer_vqstickynotes&&(layer_vqstickynotes=
a.g(),layer_vqstickynotes.prepend(cvjs_masterBackground[cvjs_active_floorplan_div_nr]));a=d.data("node");console.log("cvjs_setUpVqStickyNotes_currentNode_vqIndex_passedInstance rid "+a);console.log("rid                       ="+a+"              "+d+" "+(b==a));d.data("name",cvjs_currentStickyNote_name);d.data("id",cvjs_currentStickyNote_id);d.data("text",cvjs_currentStickyNote_text);d.data("layer",cvjs_currentStickyNote_layer);d.data("group",cvjs_currentStickyNote_group);d.data("linked",cvjs_currentStickyNote_linked);
d.data("userid",cvjs_currentStickyNote_userid);d.data("date",cvjs_currentStickyNote_date);d.data("currentPage",cvjs_currentStickyNote_currentPage);d.data("transform",cvjs_currentStickyNote_transform);d.data("drawingRotation",cvjs_currentStickyNote_drawingRotation)}
function cvjs_setUpVqStickyNotes_currentNode(a,b){floorplan_height=.9*jQuery(window).height();floorplan_width=.9*jQuery(window).width();tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);tip[cvjs_active_floorplan_div_nr].hide().css("left",floorplan_width).css("top",floorplan_height);var c="";try{jQuery.fn.qtip.defaults.show.event="click",jQuery.fn.qtip.defaults.hide.event=null}catch(e){}""==layer_vqstickynotes&&(layer_vqstickynotes=a.g(),layer_vqstickynotes.prepend(cvjs_masterBackground[cvjs_active_floorplan_div_nr]));
var d=vqStickyNotes.length-1;rid=vqStickyNotes[d].data("node");if(b==rid){vqStickyNotes[d].data("name",cvjs_currentStickyNote_name);vqStickyNotes[d].data("id",cvjs_currentStickyNote_id);vqStickyNotes[d].data("text",cvjs_currentStickyNote_text);try{vqStickyNotes[d].data("layer",cvjs_currentStickyNote_layer),vqStickyNotes[d].data("group",cvjs_currentStickyNote_group),vqStickyNotes[d].data("linked",cvjs_currentStickyNote_linked),vqStickyNotes[d].data("userid",cvjs_currentStickyNote_userid),vqStickyNotes[d].data("date",
cvjs_currentStickyNote_date),vqStickyNotes[d].data("currentPage",multiPages[cvjs_active_floorplan_div_nr].currentPage),vqStickyNotes[d].data("transform",cvjs_currentStickyNote_transform),vqStickyNotes[d].data("drawingRotation",cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr])}catch(e){console.log(e)}cvjs_supressPopUpModal?vqStickyNotes[d].data("linked")?vqStickyNotes[d].attr(defaultColor_linked):vqStickyNotes[d].attr(defaultColor_unlinked):vqStickyNotes[d].attr(defaultColor_StickyNotes);1==
cvjs_supressPopUpModal?(jQuery(vqStickyNotes[d].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(vqStickyNotes[d].node).qtip("destroy")):(b='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+cvjs_currentStickyNote_id+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+cvjs_currentStickyNote_name+
'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="javascript:cvjs_move_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MoveNote+"',1,"+d+');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="javascript:cvjs_edit_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.EditNote+"',2,"+d+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="javascript:cvjs_delete_note();" onmouseout="javascript:noteIconChangeHighlight(3,\'#00539B\');" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.DeleteNote+"',3,"+d+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="javascript:hideOnlyStickyNote('+
d+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MinimizeNote+"',4,"+d+');" ><i class="fa fa-times"></i></td></tr></table>',isSmartPhoneOrTablet&&(b='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+cvjs_currentStickyNote_id+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >ZZ '+
cvjs_currentStickyNote_name+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" ontap="cvjs_move_note();" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();"><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" ontap="javascript:cvjs_delete_note();" onclick="javascript:cvjs_delete_note();" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" ontap="javascript:hideOnlyStickyNote('+
d+');" onclick="javascript:hideOnlyStickyNote('+d+');" ><i class="fa fa-times"></i></td></tr></table>',b='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+cvjs_currentStickyNote_id+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >ZAZ '+cvjs_currentStickyNote_name+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="window.alert(\'1\');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();"><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="window.alert(\'3\');" onclick="javascript:cvjs_delete_note();" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+
d+');" ><i class="fa fa-times"></i></td></tr></table>'),cvjs_setStickyNoteText(cvjs_currentStickyNote_text),jQuery(vqStickyNotes[d].node).qtip({content:{text:cvjsStickyNoteBody,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));vqStickyNotes[d].mousedown(function(a){vqRoomMouseSelect=!0;cvjs_debug&&console.log("C Domousedown");DoMouseDown(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop,
cvjs_active_floorplan_div_nr)}).mousemove(function(a){currentStickyNoteId=this.data("id");currentStickyNoteName=this.data("name");if(bMouseDown||bTempMouseDown)DoMouseMove(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else{var b=findStickyNotes(currentStickyNoteId);0<=b&&b!=lastObjStickyNote[cvjs_active_floorplan_div_nr]&&cvjs_location_flag&&(tooltipLastStickyNote!=lastObjStickyNote[cvjs_active_floorplan_div_nr]&&(cvjs_supressPopUpModal?vqStickyNotes[tooltipLastStickyNote].data("linked")?
vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_linked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_unlinked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_StickyNotes)),cvjs_supressPopUpModal?vqStickyNotes[b].data("linked")?vqStickyNotes[b].attr(highlight_linked):vqStickyNotes[b].attr(highlight_unlinked):vqStickyNotes[b].attr(highlight_StickyNotes),tooltipLastStickyNote=b);c="Note #"+this.data("id");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});tip[cvjs_active_floorplan_div_nr].html(c);
tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-
25)}}).mouseup(function(a){vqRoomMouseSelect=!1;if(bPan)DoMouseUp(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop),c="Note #"+this.data("id"),tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),tip[cvjs_active_floorplan_div_nr].html(c),bMouseDown=!1,cvjs_clearDrawingStickyNotes(),rid=this.data("id"),cvjs_debug_stickynotes&&console.log("zzxz");else{try{layer_vqstickynotes.attr(show)}catch(f){}c="Note #"+this.data("id");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});
tip[cvjs_active_floorplan_div_nr].html(c);bMouseDown=!1;rid=this.data("id");console.log("stickynote 5x")}change_space_fixed_locationStickyNotes(rid);bPan=!1}).touchstart(function(a){DoTouchStart(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).touchend(function(a){bPan||locked||(rid=this.data("id"),cvjs_change_space(rid),c="Note #"+this.data("id"),tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),tip[cvjs_active_floorplan_div_nr].html(c));DoTouchEnd(a,a.clientX+document.body.scrollLeft,
a.clientY+document.body.scrollTop)}).touchmove(function(a){if(!bPan){var b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",
a.clientY-b.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(c)}DoTouchMove(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).dblclick(function(a){a.preventDefault();a.stopPropagation()})}a.add(vqStickyNotes[d])}
function cvjs_setUpVqStickyNotes_currentNode_PageChange(a,b,c){floorplan_height=.9*jQuery(window).height();floorplan_width=.9*jQuery(window).width();tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);tip[cvjs_active_floorplan_div_nr].hide().css("left",floorplan_width).css("top",floorplan_height);var d="";try{jQuery.fn.qtip.defaults.show.event="click",jQuery.fn.qtip.defaults.hide.event=null}catch(f){}""==layer_vqstickynotes&&(layer_vqstickynotes=a.g(),
layer_vqstickynotes.prepend(cvjs_masterBackground[cvjs_active_floorplan_div_nr]));var e=vqStickyNotes[c].data("node");if(b==e){vqStickyNotes[c].data("name",cvjs_currentStickyNote_name);vqStickyNotes[c].data("id",cvjs_currentStickyNote_id);vqStickyNotes[c].data("text",cvjs_currentStickyNote_text);try{vqStickyNotes[c].data("layer",cvjs_currentStickyNote_layer),vqStickyNotes[c].data("group",cvjs_currentStickyNote_group),vqStickyNotes[c].data("linked",cvjs_currentStickyNote_linked),vqStickyNotes[c].data("userid",
cvjs_currentStickyNote_userid),vqStickyNotes[c].data("date",cvjs_currentStickyNote_date),vqStickyNotes[c].data("currentPage",cvjs_currentStickyNote_currentPage),vqStickyNotes[c].data("transform",cvjs_currentStickyNote_transform),vqStickyNotes[c].data("drawingRotation",cvjs_currentStickyNote_drawingRotation)}catch(f){console.log(f)}!cvjs_supressPopUpModal||cvjs_standardHighLightColors?vqStickyNotes[c].attr(defaultColor_StickyNotes):vqStickyNotes[c].data("linked")?vqStickyNotes[c].attr(defaultColor_linked):
vqStickyNotes[c].attr(defaultColor_unlinked);if(1==cvjs_supressPopUpModal)jQuery(vqStickyNotes[c].node).qtip({content:{text:"",title:""},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"true"}),jQuery(vqStickyNotes[c].node).qtip("destroy");else for(a='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+cvjs_currentStickyNote_id+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+
cvjs_currentStickyNote_name+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="cvjs_move_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MoveNote+"',1,"+c+');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.EditNote+"',2,"+c+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="cvjs_delete_note();" onmouseout="javascript:noteIconChangeHighlight(3,\'#00539B\');" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.DeleteNote+"',3,"+c+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+
c+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MinimizeNote+"',4,"+c+');" ><i class="fa fa-times"></i></td></tr></table>',cvjs_setStickyNoteText(cvjs_currentStickyNote_text),jQuery(vqStickyNotes[c].node).qtip({content:{text:cvjsStickyNoteBody,title:a},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}),
a=document.getElementsByTagName("div"),b=0;b<a.length;b++)-1<a[b].id.indexOf("qtip-")&&-1==a[b].id.indexOf("-content")&&-1==a[b].id.indexOf("-title")&&(StickNoteQtipDiv=a[b].id);vqStickyNotes[c].mousedown(function(a){vqRoomMouseSelect=!0;cvjs_debug&&console.log("E Domousedown");DoMouseDown(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop,cvjs_active_floorplan_div_nr)}).mousemove(function(a){currentStickyNoteId=this.data("id");currentStickyNoteName=this.data("name");if(bMouseDown||
bTempMouseDown)DoMouseMove(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else{var b=findStickyNotes(currentStickyNoteId);if(0<=b&&b!=lastObjStickyNote[cvjs_active_floorplan_div_nr]&&cvjs_location_flag){if(tooltipLastStickyNote!=lastObjStickyNote[cvjs_active_floorplan_div_nr])try{cvjs_supressPopUpModal?vqStickyNotes[tooltipLastStickyNote].data("linked")?vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_linked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_unlinked):
vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_StickyNotes)}catch(h){}cvjs_supressPopUpModal?vqStickyNotes[b].data("linked")?vqStickyNotes[b].attr(highlight_linked):vqStickyNotes[b].attr(highlight_unlinked):vqStickyNotes[b].attr(highlight_StickyNotes);tooltipLastStickyNote=b}d="Note #"+this.data("id");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});tip[cvjs_active_floorplan_div_nr].html(d);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}}).mouseup(function(a){vqRoomMouseSelect=!1;if(bPan)DoMouseUp(a,a.clientX+document.body.scrollLeft,
a.clientY+document.body.scrollTop),d="Note #"+this.data("id"),tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),tip[cvjs_active_floorplan_div_nr].html(d),bMouseDown=!1,cvjs_clearDrawingStickyNotes(),e=this.data("id"),console.log("sticky note up 7x");else{try{layer_vqstickynotes.attr(show)}catch(g){}d="Note #"+this.data("id");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});tip[cvjs_active_floorplan_div_nr].html(d);bMouseDown=!1;cvjs_clearDrawingStickyNotes();e=this.data("id");console.log("2")}change_space_fixed_locationStickyNotes(e);
bPan=!1}).touchstart(function(a){DoTouchStart(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).touchend(function(a){bPan||locked||(e=this.data("id"),cvjs_change_space(e),d="Note #"+this.data("id"),tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),tip[cvjs_active_floorplan_div_nr].html(d));DoTouchEnd(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);d=this.data("id");tip[cvjs_active_floorplan_div_nr].html(d);bMouseDown=!1;cvjs_clearDrawingStickyNotes();
e=this.data("id");console.log("3");change_space_fixed_locationStickyNotes(e)}).touchmove(function(a){if(!bPan){var b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+
10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(d)}DoTouchMove(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).dblclick(function(a){a.preventDefault();a.stopPropagation()})}}function getGroupByName(a){for(var b=document.getElementById("container").getElementsByTagName("g"),c=0;c<b.length;c++)if(b[c].getAttributeNS(null,"name")===a)return b[c];return null}
function cvjs_setUpVqRooms_deleteNode(a){try{var b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");c==a&&(jQuery("#cv_"+c+"_group").remove(),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].splice(b,1),cvjs_clearSpaceLayer())}}catch(d){console.log("DeleteNode err: "+d)}}
function cvjs_setUpStickyNotes_deleteNode(a){var b;for(b in vqStickyNotes){var c=vqStickyNotes[b].data("node");console.log("delete "+a+" "+c+"   "+b);c==a&&(vqStickyNotes[b].data("deleted",!0),cvjs_debug&&console.log("DELETING "+b+"  "+vqStickyNotes[b]),vqStickyNotes[b].attr({transform:"S0.001",opacity:"1"}),hideOnlyStickyNote(b),cvjs_debug&&console.log("AFTER DELETING "+b+"  "+vqStickyNotes[b]),jQuery(vqStickyNotes[b].node).qtip("destroy"),vqStickyNotes.splice(b,1))}}
function cvjs_StickyNotes_arrayIndex(a){var b;for(b in vqStickyNotes){var c=vqStickyNotes[b].data("node");if(c==a)return b}return-1}var firstX_c=0,firstY_c=0,lastX_c=0,lastY_c=0,flag_c=!1,tTransform_c="",tRubberBand_c,myText,delta=0;function cvjs_drawSpaceObject_Circle(){cvjs_addHandleFunc_Circle()}
function cvjs_addHandleFunc_Circle(){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(0,0,1,1).attr({stroke:"#b00000","stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"});handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_create_circle,start_cvjs_create_circle,stop_cvjs_create_circle)}function cvjs_removeHandleFunc_Circle(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_circle=function(){flag_c=!1;tRubberBand_c.attr({stroke:"#b00000","stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"})},move_cvjs_create_circle=function(a,b,c,d){flag_c?(lastX_c=a,lastY_c=b):(firstX_c=c,firstY_c=d,lastX_c=a,lastY_c=b,flag_c=!0);delta=Math.sqrt(a*a+b*b);tTransform_c="t"+(firstX_c-delta_x)/global_scale+","+(firstY_c-delta_y)/global_scale;delta/=global_scale;tTransform_c+="S"+delta;tRubberBand_c.attr({transform:tTransform_c,opacity:"1"})},stop_cvjs_create_circle=
function(){tRubberBand_c.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});var a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(tRubberBand_c).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_circle(cvjs_currentNode_underbar,a);cvjs_removeHandleFunc_Circle();cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectCircle");cvjs_graphicalObjectOnChange("Create",
"SpaceObjectCircle",cvjs_currentNode_id)};function cvjs_drawSpaceObject_RedlineCloud(){cvjs_addHandleFunc_RedlineCloud()}
function cvjs_addHandleFunc_RedlineCloud(){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=
canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(0,0,1,1).attr({stroke:cvjs_currentRedline_color,
"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none","fill-opacity":"0.01",opacity:"0.01"});handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});
handleGroup.drag(move_cvjs_create_redlinecircle,start_cvjs_create_redlinecircle,stop_cvjs_create_redlinecircle)}}function cvjs_removeHandleFunc_RedlineCloud(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var start_cvjs_create_redlinecircle=function(){flag_c=!1;tRubberBand_c.attr({stroke:cvjs_currentRedline_color,"stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"})},move_cvjs_create_redlinecircle=function(a,b,c,d){flag_c?(lastX_c=a,lastY_c=b):(firstX_c=c,firstY_c=d,lastX_c=a,lastY_c=b,flag_c=!0);delta=Math.sqrt(a*a+b*b);tTransform_c="t"+(firstX_c-delta_x)/global_scale+","+(firstY_c-delta_y)/global_scale;delta/=global_scale;tTransform_c+="S"+delta;tRubberBand_c.attr({transform:tTransform_c,
opacity:"1"})},stop_cvjs_create_redlinecircle=function(){tRubberBand_c.attr({"stroke-width":cvjs_currentRedline_strokeWidth/delta*cvjs_redlineThickness_scaleFactor});tRubberBand_c.attr({transform:"S0",opacity:"1"});for(var a=delta,b=(firstX_c-delta_x)/global_scale,c=(firstY_c-delta_y)/global_scale,d=2*Math.PI/20,e=Math.sin(.5*d)*a,f=Math.PI/20,g,h,k="",l="",m=!0,p=0;20>p;p++){g=d*p+.5*d;h=b+a*Math.cos(g);y1=c+a*Math.sin(g);g-=.5*Math.PI;for(var n=0;20>n;n++){var q=h+e*Math.cos(g),r=y1+e*Math.sin(g);
m?(m=!1,k+="M"+q+","+r,l="L"+q+","+r):k+="L"+q+","+r;g+=f}}tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(k+l).attr({"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,stroke:cvjs_currentRedline_color,fill:"#FFF","fill-opacity":"0.01"});cvjs_removeHandleFunc_RedlineCloud();cvjs_addVqRedlinesGraphics_newNode(cvjs_currentRedline_underbar,tRubberBand_r);cvjs_graphicalObjectCreated("RedlineCloud");cvjs_graphicalObjectOnChange("Create","RedlineCloud",cvjs_currentRedline_underbar)};
function cvjs_addRectangleCustomSpaceObject(a,b,c,d,e,f){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();a=cvjs_currentMaxSpaceNodeId();a++;cvjs_setCurrentNodeValues(Node_underbar+a,d,c,f,"none","none","unpopulated",e,"unassigned","unassigned",!1,0,0,1,1,0,"");cvjs_addHandleFunc_CustomRectangle(b,c,d,e)}function cvjs_drawSpaceObject_CustomRectangle(a,b,c,d){cvjs_addHandleFunc_CustomRectangle(a,b,c,d)}
var cvjs_customSvgImagePath="",cvjs_customSpaceObjectId="",cvjs_customSpaceObjectType="",cvjs_customSpaceObjectName="";
function cvjs_addHandleFunc_CustomRectangle(a,b,c,d){cvjs_customSvgImagePath=a;cvjs_customSpaceObjectId=b;cvjs_customSpaceObjectType=d;cvjs_customSpaceObjectName=c;tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=
cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_create_custom_rectangle,start_cvjs_create_custom_rectangle,stop_cvjs_create_custom_rectangle)}
function cvjs_removeHandleFunc_CustomRectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_custom_rectangle=function(){flag_rectangle=!1;tRubberBand_r.attr({stroke:"#b00000",fill:"none"})},move_cvjs_create_custom_rectangle=function(a,b,c,d){flag_rectangle?(lastX_r=a,lastY_r=b):(firstX_r=c,firstY_r=d,lastX_r=a,lastY_r=b,flag_rectangle=!0);tPath_r="M"+(firstX_r-delta_x)/global_scale+","+(firstY_r-delta_y)/global_scale;tPath_r+="h"+lastX_r/global_scale+"v"+lastY_r/global_scale+"h"+-lastX_r/global_scale+"v"+(-lastY_r/global_scale+" Z");tRubberBand_r.attr({path:tPath_r})},
stop_cvjs_create_custom_rectangle=function(){tRubberBand_r.remove();cvjs_removeHandleFunc_CustomRectangle();var a=cvjs_rPaper[cvjs_active_floorplan_div_nr].image(cvjs_customSvgImagePath,(firstX_r-delta_x)/global_scale,(firstY_r-delta_y)/global_scale,Math.abs(lastX_r/global_scale),Math.abs(lastY_r/global_scale)),b=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});b.attr({path:tPath_r});b.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});
b.attr({id:"cv_"+cvjs_currentNode_underbar,"cvjs:node":cvjs_currentNode_underbar,"cvjs:roomId":cvjs_customSpaceObjectId,"cvjs:name":cvjs_customSpaceObjectName,"class":"cvjs_nodes","cvjs:type":cvjs_customSpaceObjectType});a.attr({id:"cv_"+cvjs_currentNode_underbar+"_image"});jQuery("#cv_"+cvjs_currentNode_underbar+"_image").css("pointer-events","none");a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(b,a).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,
a);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectSvgRectangle");cvjs_graphicalObjectOnChange("Create","SpaceObjectSvgRectangle",cvjs_currentNode_id)};lastY_r=lastX_r=firstY_r=firstX_r=0;var flag_first_click_rectangle=flag_rectangle=!1;function cvjs_drawSpaceObject_Rectangle(){cvjs_addHandleFunc_Rectangle()}
function cvjs_addHandleFunc_Rectangle(){tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=
canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(start_cvjs_create_rectangle);handleGroup.mousemove(move_cvjs_create_rectangle);flag_rectangle=flag_first_click_rectangle=!1}
function cvjs_removeHandleFunc_Rectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_rectangle=function(){flag_first_click_rectangle?flag_rectangle&&(stop_cvjs_create_rectangle(),cvjs_removeHandleFunc_Rectangle()):(flag_first_click_rectangle=!0,flag_rectangle=!1)},move_cvjs_create_rectangle=function(a,b,c){flag_first_click_rectangle&&(canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(),canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height(),a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position(),
global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr],global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr],global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y,delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left,delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top,flag_rectangle?
(lastX_r=(b-delta_x)/global_scale,lastY_r=(c-delta_y)/global_scale):(firstX_r=(b-delta_x)/global_scale,firstY_r=(c-delta_y)/global_scale,lastX_r=firstX_r,lastY_r=firstY_r,flag_rectangle=!0),tPath_r="M"+firstX_r+","+firstY_r,tPath_r+="L"+firstX_r+","+lastY_r,tPath_r+="L"+lastX_r+","+lastY_r,tPath_r+="L"+lastX_r+","+firstY_r,tPath_r+="L"+firstX_r+","+firstY_r+" Z",tRubberBand_r.attr({path:tPath_r}))},stop_cvjs_create_rectangle=function(){tRubberBand_r.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999",
"stroke-opacity":"1"});tRubberBand_r.attr({id:"cv_"+cvjs_currentNode_underbar,"cvjs:node":cvjs_currentNode_underbar,"cvjs:roomId":cvjs_customSpaceObjectId,"cvjs:name":cvjs_customSpaceObjectName,"class":"cvjs_nodes","cvjs:type":cvjs_customSpaceObjectType});var a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(tRubberBand_r).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,a);cvjs_removeHandleFunc_Rectangle();cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],
cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectRectangle");cvjs_graphicalObjectOnChange("Create","SpaceObjectRectangle",cvjs_currentNode_id)},firstX_r_redline=0,firstY_r_redline=0,lastX_r_redline=0,lastY_r_redline=0,flag_rectangle_redline=!1,tPath_r_redline,tRubberBand_r_redline;function cvjs_drawSpaceObject_RedlineRectangle(){cvjs_addHandleFunc_RedlineRectangle()}
function cvjs_addHandleFunc_RedlineRectangle(){try{if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;tPath_r_redline="M"+firstX_r_redline+","+firstY_r_redline;tRubberBand_r_redline=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r_redline).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();
canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*
global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});
handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_create_rectangle_redline,start_cvjs_create_rectangle_redline,stop_cvjs_create_rectangle_redline)}}catch(b){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1,console.log("cvjs_addHandleFunc_RedlineRectangle:"+b)}}
function cvjs_removeHandleFunc_RedlineRectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var start_cvjs_create_rectangle_redline=function(){flag_rectangle_redline=!1;tRubberBand_r_redline.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none"})},move_cvjs_create_rectangle_redline=function(a,b,c,d){flag_rectangle_redline?(lastX_r_redline=a,lastY_r_redline=b):(firstX_r_redline=c,firstY_r_redline=d,lastX_r_redline=a,lastY_r_redline=b,flag_rectangle_redline=!0);tPath_r_redline="M"+(firstX_r_redline-delta_x)/global_scale+
","+(firstY_r_redline-delta_y)/global_scale;tPath_r_redline+="h"+lastX_r_redline/global_scale+"v"+lastY_r_redline/global_scale+"h"+-lastX_r_redline/global_scale+"v"+(-lastY_r_redline/global_scale+" Z");tRubberBand_r_redline.attr({path:tPath_r_redline})},stop_cvjs_create_rectangle_redline=function(){tRubberBand_r_redline.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"});cvjs_removeHandleFunc_RedlineRectangle();
cvjs_addVqRedlinesGraphics_newNode(cvjs_currentRedline_underbar,tRubberBand_r_redline);cvjs_graphicalObjectCreated("RedlineRectangle");cvjs_graphicalObjectOnChange("Create","RedlineRectangle",cvjs_currentRedline_underbar)},cvjs_ellipseCloudFlag=!1;function cvjs_drawSpaceObject_RedlineEllipseCloud(){cvjs_ellipseCloudFlag=!0;cvjs_addHandleFunc_RedlineEllipse()}function cvjs_drawSpaceObject_RedlineEllipse(){cvjs_ellipseCloudFlag=!1;cvjs_addHandleFunc_RedlineEllipse()}
function cvjs_addHandleFunc_RedlineEllipse(){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;tPath_r_redline="M"+firstX_r_redline+","+firstY_r_redline;tRubberBand_r_redline=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r_redline).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();
canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*
global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});
handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_create_ellipse_redline,start_cvjs_create_ellipse_redline,stop_cvjs_create_ellipse_redline)}}function cvjs_removeHandleFunc_RedlineEllipse(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var start_cvjs_create_ellipse_redline=function(){flag_rectangle_redline=!1;tRubberBand_r_redline.attr({stroke:"#5D5D5D","stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none"});tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].ellipse(0,0,1,1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none","fill-opacity":"0.01",opacity:"0.01"});tRubberBand_c.attr({stroke:cvjs_currentRedline_color,
"stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"})},move_cvjs_create_ellipse_redline=function(a,b,c,d){flag_rectangle_redline?(lastX_r_redline=a,lastY_r_redline=b):(firstX_r_redline=c,firstY_r_redline=d,lastX_r_redline=a,lastY_r_redline=b,flag_rectangle_redline=!0);tPath_r_redline="M"+(firstX_r_redline-delta_x)/global_scale+","+(firstY_r_redline-delta_y)/global_scale;tPath_r_redline+="h"+lastX_r_redline/global_scale+"v"+lastY_r_redline/global_scale+"h"+-lastX_r_redline/global_scale+
"v"+(-lastY_r_redline/global_scale+" Z");tRubberBand_r_redline.attr({path:tPath_r_redline});c="T"+((firstX_r_redline-delta_x)/global_scale+lastX_r_redline/global_scale/2)+","+((firstY_r_redline-delta_y)/global_scale+lastY_r_redline/global_scale/2)+"S"+lastX_r_redline/global_scale/2+","+lastY_r_redline/global_scale/2;if(cvjs_ellipseCloudFlag){tRubberBand_c.remove();a=2*Math.PI/20;b=lastX_r_redline/global_scale/2*(1/(1+Math.sin(.5*a)));var e=lastY_r_redline/global_scale/2*(1/(1+Math.sin(.5*a)));c=(firstX_r_redline-
delta_x)/global_scale+lastX_r_redline/global_scale/2;d=(firstY_r_redline-delta_y)/global_scale+lastY_r_redline/global_scale/2;for(var f=Math.sin(.5*a)*b,g=Math.sin(.5*a)*e,h=Math.PI/20,k,l,m="",p="",n=!0,q=0;20>q;q++){k=a*q+.5*a;l=c+b*Math.cos(k);y1=d+e*Math.sin(k);k-=.5*Math.PI;for(var r=0;20>r;r++){var t=l+f*Math.cos(k),u=y1+g*Math.sin(k);n?(n=!1,m+="M"+t+","+u,p="L"+t+","+u):m+="L"+t+","+u;k+=h}}tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(m+p).attr({"stroke-width":cvjs_currentRedline_strokeWidth*
cvjs_redlineThickness_scaleFactor,stroke:cvjs_currentRedline_color,fill:"#FFF","fill-opacity":"0.01"})}else tRubberBand_c.attr({transform:c,opacity:"1"})},stop_cvjs_create_ellipse_redline=function(){tRubberBand_c.attr({transform:"T0,0S0.001",opacity:"1"});tRubberBand_c.remove();tPath_r_redline="M0,0";tPath_r_redline+="h0v0h0v0 Z";tRubberBand_r_redline.attr({path:tPath_r_redline});tRubberBand_r_redline.remove();cvjs_removeHandleFunc_RedlineEllipse();if(cvjs_ellipseCloudFlag){for(var a=2*Math.PI/20,
b=lastX_r_redline/global_scale/2*(1/(1+Math.sin(.5*a))),c=lastY_r_redline/global_scale/2*(1/(1+Math.sin(.5*a))),d=(firstX_r_redline-delta_x)/global_scale+lastX_r_redline/global_scale/2,e=(firstY_r_redline-delta_y)/global_scale+lastY_r_redline/global_scale/2,f=Math.sin(.5*a)*b,g=Math.sin(.5*a)*c,h=Math.PI/20,k,l,m="",p="",n=!0,q=0;20>q;q++){k=a*q+.5*a;l=d+b*Math.cos(k);y1=e+c*Math.sin(k);k-=.5*Math.PI;for(var r=0;20>r;r++){var t=l+f*Math.cos(k),u=y1+g*Math.sin(k);n?(n=!1,m+="M"+t+","+u,p="L"+t+","+
u):m+="L"+t+","+u;k+=h}}tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(m+p).attr({"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,stroke:cvjs_currentRedline_color,fill:"#FFF","fill-opacity":"0.01"});cvjs_addVqRedlinesGraphics_newNode(cvjs_currentRedline_underbar,tRubberBand_r);cvjs_graphicalObjectCreated("RedlineEllipseCloud");cvjs_graphicalObjectOnChange("Create","RedlineEllipseCloud",cvjs_currentRedline_underbar)}else tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].ellipse((firstX_r_redline-
delta_x)/global_scale+lastX_r_redline/global_scale/2,(firstY_r_redline-delta_y)/global_scale+lastY_r_redline/global_scale/2,lastX_r_redline/global_scale/2,lastY_r_redline/global_scale/2).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01",opacity:"0.9"}),cvjs_addVqRedlinesGraphics_newNode(cvjs_currentRedline_underbar,tRubberBand_c),cvjs_graphicalObjectCreated("RedlineEllipse"),cvjs_graphicalObjectOnChange("Create",
"RedlineEllipse",cvjs_currentRedline_underbar)};function cvjs_drawSpaceObject_FilledRedlineRectangle(){cvjs_addHandleFunc_FilledRedlineRectangle()}
function cvjs_addHandleFunc_FilledRedlineRectangle(){try{if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;tPath_r_redline="M"+firstX_r_redline+","+firstY_r_redline;tRubberBand_r_redline=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r_redline).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"});
canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*
global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff",
"fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_create_filledrectangle_redline,start_cvjs_create_filledrectangle_redline,stop_cvjs_create_filledrectangle_redline)}}catch(b){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1,console.log("cvjs_addHandleFunc_FilledRedlineRectangle: "+b)}}
function cvjs_removeHandleFunc_FilledRedlineRectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var start_cvjs_create_filledrectangle_redline=function(){flag_rectangle_redline=!1;tRubberBand_r_redline.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"})},move_cvjs_create_filledrectangle_redline=function(a,b,c,d){flag_rectangle_redline?(lastX_r_redline=a,lastY_r_redline=b):(firstX_r_redline=c,firstY_r_redline=d,lastX_r_redline=a,lastY_r_redline=b,flag_rectangle_redline=!0);
tPath_r_redline="M"+(firstX_r_redline-delta_x)/global_scale+","+(firstY_r_redline-delta_y)/global_scale;tPath_r_redline+="h"+lastX_r_redline/global_scale+"v"+lastY_r_redline/global_scale+"h"+-lastX_r_redline/global_scale+"v"+(-lastY_r_redline/global_scale+" Z");tRubberBand_r_redline.attr({path:tPath_r_redline})},stop_cvjs_create_filledrectangle_redline=function(){tRubberBand_r_redline.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,
fill:cvjs_currentRedline_color,"fill-opacity":"0.1"});cvjs_removeHandleFunc_FilledRedlineRectangle();cvjs_addVqRedlinesGraphics_newNodeFill(cvjs_currentRedline_underbar,tRubberBand_r_redline,cvjs_currentRedline_color,.1);cvjs_graphicalObjectCreated("FilledRedlineRectangle");cvjs_graphicalObjectOnChange("Create","FilledRedlineRectangle",cvjs_currentRedline_underbar)},firstX_mr=0,firstY_mr=0,lastX_mr=0,lastY_mr=0,flag_mrectangle=!1,tPath_mr,tRubberBand_mr,x_mr,y_mr,width_mr,height_mr;
function cvjs_addHandleFunc_ModifyRectangle(a){var b;for(d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")==a&&(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d]);a=b.toString();b=b.getBBox();x_mr=b.x;y_mr=b.y;width_mr=b.width;height_mr=b.height;if(-1<a.indexOf("path")){var c=a.indexOf(" d=");c=a.substring(c+4);b=c.indexOf('" ');c=c.substring(0,b)}if(-1<a.indexOf("circle")){b=a.indexOf(" cx=");b=a.substring(b+
5);var d=b.indexOf('"');b.substring(0,d);b=a.indexOf(" cy=");b=a.substring(b+5);d=b.indexOf('"');b.substring(0,d);b=a.indexOf(" r=");a=a.substring(b+4);b=a.indexOf('"');a.substring(0,b)}tPath_mr=c;tRubberBand_mr=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_mr).attr({stroke:"#FF00AA",fill:"none","stroke-width":4});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();c=jQuery("#"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/
2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_modify_rectangle,start_cvjs_modify_rectangle,
stop_cvjs_modify_rectangle)}function cvjs_removeHandleFunc_ModifyRectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_modify_rectangle=function(){flag_mrectangle=!1;tRubberBand_mr.attr({stroke:"#FF00AA",fill:"none","stroke-width":4})},move_cvjs_modify_rectangle=function(a,b,c,d){c=(c-delta_x)/global_scale;d=(d-delta_y)/global_scale;var e=height_mr/2,f=width_mr/2;c<x_mr+f&&d<y_mr+e&&!flag_mrectangle&&(flag_mrectangle=!0,firstX_mr=x_mr+width_mr,firstY_mr=y_mr+height_mr,lastX_mr=-width_mr,lastY_mr=-height_mr);c>=x_mr+f&&d<y_mr+e&&!flag_mrectangle&&(flag_mrectangle=!0,firstX_mr=x_mr,firstY_mr=y_mr+height_mr,
lastX_mr=width_mr,lastY_mr=-height_mr);c<x_mr+f&&d>=y_mr+e&&!flag_mrectangle&&(flag_mrectangle=!0,firstX_mr=x_mr+width_mr,firstY_mr=y_mr,lastX_mr=-width_mr,lastY_mr=height_mr);c>=x_mr+f&&d>=y_mr+e&&!flag_mrectangle&&(flag_mrectangle=!0,firstX_mr=x_mr,firstY_mr=y_mr,lastX_mr=width_mr,lastY_mr=height_mr);tPath_mr="M"+firstX_mr+","+firstY_mr;tPath_mr+="h"+(lastX_mr+a/global_scale)+"v"+(lastY_mr+b/global_scale)+"h"+(-lastX_mr-a/global_scale)+"v"+(-lastY_mr-b/global_scale)+" Z";tRubberBand_mr.attr({path:tPath_mr})},
stop_cvjs_modify_rectangle=function(){},tb_nodeUnderbarIndex=0,tborderIndex=0,quardrant=0,tTransform_tb="",tTransform_tborder="";function cvjs_dynamicResizeTextOnSpaceObject(a){cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject(a)}
function cvjs_dynamicResizeTextOnSpaceObject_Name(a){var b=-1,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("name")==a&&(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node"));cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject(b)}
function cvjs_dynamicResizeTextOnSpaceObject_Id(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject(a)}var cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject_started=!1;
function cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject(a){var b=0,c;for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")==a&&(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("tborderId"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("textId"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].attr(hide),tb_nodeUnderbarIndex=c);cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject_started=
!0;for(var d in vqTBorder)vqTBorder[d].data("node")==b&&(tborderIndex=d,vqTBorder[d].attr({fill:"none","stoke-width":"12.0",stroke:"#ff00dd","stroke-opacity":"1"}),vqTBorder[d].attr(show));tTransform_tb=tTransform_c="";canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];
global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_modify_tbordertext,start_cvjs_modify_tbordertext,stop_cvjs_modify_tbordertext);handleGroup.dblclick(finish_cvjs_modify_tbordertext);oldKeyDown=jQuery(document).keydown().bind({});jQuery(document).keydown(function(a){27==
a.keyCode&&cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject_started&&(cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject_started=!1,finish_cvjs_modify_tbordertext())})}function cvjs_removeHandleFunc_ModifyTBorderWithText(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_addHandleFunc_ModifyTborderWithTextOnSpaceObject_started=!1}
var finish_cvjs_modify_tbordertext=function(){cvjs_removeHandleFunc_ModifyTBorderWithText();cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tb_nodeUnderbarIndex].attr(show);vqTBorder[tborderIndex].attr({fill:"none","stoke-width":"0.1",stroke:"#000000","stroke-opacity":"0.01"})},start_cvjs_modify_tbordertext=function(a,b){flag_mrectangle=!1;x_mr=vqTBorder[tborderIndex].getBBox().x;y_mr=vqTBorder[tborderIndex].getBBox().y;width_mr=vqTBorder[tborderIndex].getBBox().w;height_mr=vqTBorder[tborderIndex].getBBox().h;
a=(a-delta_x)/global_scale;b=(b-delta_y)/global_scale;var c=height_mr/2,d=width_mr/2;a<x_mr+d&&b<y_mr+c&&!flag_mrectangle&&(flag_mrectangle=!0,quardrant=1);a>=x_mr+d&&b<y_mr+c&&!flag_mrectangle&&(flag_mrectangle=!0,quardrant=2);a>=x_mr+d&&b>=y_mr+c&&!flag_mrectangle&&(flag_mrectangle=!0,quardrant=3);a<x_mr+d&&b>=y_mr+c&&!flag_mrectangle&&(flag_mrectangle=!0,quardrant=4)},move_cvjs_modify_tbordertext=function(a,b,c,d){switch(quardrant){case 1:tTransform_c=tTransform_tb+"t"+(+a/global_scale-b/global_scale*
width_mr*.5/height_mr)+","+(+b/global_scale-b/global_scale*height_mr*.5/height_mr);tTransform_c+="S"+(height_mr-b/global_scale)/height_mr;tTransform_tborder="t"+(+a/global_scale-b/global_scale*width_mr*.5/height_mr)+","+(+b/global_scale-b/global_scale*height_mr*.5/height_mr);tTransform_tborder+="S"+(height_mr-b/global_scale)/height_mr;vqTBorder[tborderIndex].attr({transform:tTransform_c,opacity:"1"});break;case 2:tTransform_c=tTransform_tb+"t"+(+a/global_scale+b/global_scale*width_mr*.5/height_mr)+
","+(+b/global_scale-b/global_scale*height_mr*.5/height_mr);tTransform_c+="S"+(height_mr-b/global_scale)/height_mr;tTransform_tborder="t"+(+a/global_scale+b/global_scale*width_mr*.5/height_mr)+","+(+b/global_scale-b/global_scale*height_mr*.5/height_mr);tTransform_tborder+="S"+(height_mr-b/global_scale)/height_mr;vqTBorder[tborderIndex].attr({transform:tTransform_c,opacity:"1"});break;case 3:tTransform_c=tTransform_tb+"t"+(+a/global_scale-b/global_scale*width_mr*.5/height_mr)+","+(+b/global_scale-
b/global_scale*height_mr*.5/height_mr);tTransform_c+="S"+(height_mr+b/global_scale)/height_mr;tTransform_tborder="t"+(+a/global_scale-b/global_scale*width_mr*.5/height_mr)+","+(+b/global_scale-b/global_scale*height_mr*.5/height_mr);tTransform_tborder+="S"+(height_mr+b/global_scale)/height_mr;vqTBorder[tborderIndex].attr({transform:tTransform_c,opacity:"1"});break;case 4:tTransform_c=tTransform_tb+"t"+(+a/global_scale+b/global_scale*width_mr*.5/height_mr)+","+(+b/global_scale-b/global_scale*height_mr*
.5/height_mr);tTransform_c+="S"+(height_mr+b/global_scale)/height_mr;tTransform_tborder="t"+(+a/global_scale+b/global_scale*width_mr*.5/height_mr)+","+(+b/global_scale-b/global_scale*height_mr*.5/height_mr);tTransform_tborder+="S"+(height_mr+b/global_scale)/height_mr;vqTBorder[tborderIndex].attr({transform:tTransform_c,opacity:"1"});break;default:console.log("Default quardrant move")}},stop_cvjs_modify_tbordertext=function(){tTransform_tb+=tTransform_tborder};
function cvjs_resetTextOnSpaceObject(a){var b=0,c=0,d=!1,e;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")==a&&(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("tborderId"));for(var f in vqTBorder)vqTBorder[f].data("node")==b&&(c=f,d=!0);d&&vqTBorder[c].attr({transform:"T0,0S1.0"})}
function cvjs_resetTextOnSpaceObject_Name(a){var b=0,c=0,d=!1,e;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("name")==a&&(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("tborderId"));for(var f in vqTBorder)vqTBorder[f].data("node")==b&&(c=f,d=!0);d&&vqTBorder[c].attr({transform:"T0,0S1.0"})}
function cvjs_resetTextOnSpaceObject_Id(a){var b=!1,c=0,d=0,e;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")==a&&(c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("tborderId"));for(var f in vqTBorder)vqTBorder[f].data("node")==c&&(d=f,b=!0);b&&vqTBorder[d].attr({transform:"T0,0S1.0"})}
var originX_poly=0,originY_poly=0,firstX_poly=0,firstY_poly=0,lastX_poly=400,lastY_poly=300,tPath_poly,tRubberBand_poly,polyPath,tPolygon,draw_poly=!1,first_point_poly=!0;function cvjs_drawSpaceObject_Polygon(){cvjs_addHandleFunc_Polygon()}var cvjs_addHandleFunc_Polygon_started=!1;
function cvjs_addHandleFunc_Polygon(){cvjs_addHandleFunc_Polygon_started=!0;tPath_poly="M"+firstX_poly+","+firstY_poly;tRubberBand_poly=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly).attr({stroke:"#b00000"});polyPath="M"+firstX_poly+","+firstY_poly;tPolygon=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();
var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*
global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly=!1;first_point_poly=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_polygon);
handleGroup.mousemove(mousemove_polygon);handleGroup.dblclick(polygon_finish);oldKeyDown=jQuery(document).keydown().bind({});jQuery(document).keydown(function(a){27==a.keyCode&&cvjs_addHandleFunc_Polygon_started&&(cvjs_addHandleFunc_Polygon_started=!1,polygon_finish())})}function cvjs_removeHandleFunc_Polygon(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var polygon_finish=function(){polyPath+="L"+lastX_poly+","+lastY_poly+"L"+originX_poly+","+originY_poly;tPolygon.attr({path:polyPath});tPolygon.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});tPolygon.attr({id:"cv_"+cvjs_currentNode_underbar,"cvjs:node":cvjs_currentNode_underbar,"cvjs:roomId":cvjs_customSpaceObjectId,"cvjs:name":cvjs_customSpaceObjectName,"class":"cvjs_nodes","cvjs:type":cvjs_customSpaceObjectType});cvjs_removeHandleFunc_Polygon();tRubberBand_poly.attr({path:"M0,0"});
draw_poly=!1;first_point_poly=!0;var a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(tPolygon).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,a);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectPolygon");cvjs_graphicalObjectOnChange("Create","SpaceObjectPolygon",cvjs_currentNode_id)},mousedown_polygon=function(){draw_poly?(polyPath+="L"+
lastX_poly+","+lastY_poly,tPolygon.attr({path:polyPath}),firstX_poly=lastX_poly,firstY_poly=lastY_poly):(polyPath="M"+firstX_poly+","+firstY_poly,tPolygon.attr({path:polyPath}),tPolygon.attr({stroke:"#b00000",fill:"none"}),draw_poly=!0)},mousemove_polygon=function(a,b,c){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly&&
(first_point_poly?(first_point_poly=!1,firstX_poly=(b-delta_x)/global_scale,firstY_poly=(c-delta_y)/global_scale,lastX_poly=(b-delta_x)/global_scale,lastY_poly=(c-delta_y)/global_scale,originX_poly=(b-delta_x)/global_scale,originY_poly=(c-delta_y)/global_scale,polyPath="M"+firstX_poly+","+firstY_poly):(lastX_poly=(b-delta_x)/global_scale,lastY_poly=(c-delta_y)/global_scale),tPath_poly="M"+firstX_poly+","+firstY_poly,tPath_poly+="L"+lastX_poly+","+lastY_poly,tRubberBand_poly.attr({path:tPath_poly}))};
firstY_poly_redline1=firstX_poly_redline1=originY_poly_redline1=originX_poly_redline1=0;lastX_poly_redline1=400;lastY_poly_redline1=300;draw_poly_redline1=!1;first_point_poly_redline1=!0;function cvjs_drawSpaceObject_RedlinePolyline(){cvjs_addHandleFunc_RedlinePolyline()}var cvjs_addHandleFunc_RedlinePolyline_started=!1;
function cvjs_addHandleFunc_RedlinePolyline(){try{if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_addHandleFunc_RedlinePolyline_started=cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tRubberBand_poly_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,
fill:"#FFF","fill-opacity":"0.01"});polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tPolygon_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();
var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*
global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly_redline1=!1;first_point_poly_redline1=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});
handleGroup.mousedown(mousedown_polygon_redline1);handleGroup.mousemove(mousemove_polygon_redline1);handleGroup.dblclick(polygon_finish_redline1);oldKeyDown=jQuery(document).keydown().bind({});jQuery(document).keydown(function(a){27==a.keyCode&&cvjs_addHandleFunc_RedlinePolyline_started&&(cvjs_addHandleFunc_RedlinePolyline_started=!1,polygon_finish_redline1())})}}catch(b){console.log("cvjs_addHandleFunc_RedlinePolyline: "+b),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}}
function cvjs_removeHandleFunc_RedlinePolyline(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var polygon_finish_redline1=function(){polyPath_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale;tPolygon_redline1.attr({path:polyPath_redline1});cvjs_removeHandleFunc_RedlinePolyline();tRubberBand_poly_redline1.attr({path:"M0,0"});draw_poly_redline1=!1;first_point_poly_redline1=!0;cvjs_addVqRedlinesGraphics_newNode(cvjs_currentRedline_underbar,tPolygon_redline1);cvjs_graphicalObjectCreated("RedlinePolyline");cvjs_graphicalObjectOnChange("Create",
"RedlinePolyline",cvjs_currentRedline_underbar)},mousedown_polygon_redline1=function(){draw_poly_redline1?(polyPath_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),firstX_poly_redline1=lastX_poly_redline1,firstY_poly_redline1=lastY_poly_redline1):(polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),
tPolygon_redline1.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"}),draw_poly_redline1=!0)},mousemove_polygon_redline1=function(a,b,c){draw_poly_redline1&&(first_point_poly_redline1?(first_point_poly_redline1=!1,firstX_poly_redline1=b,firstY_poly_redline1=c,lastX_poly_redline1=b,lastY_poly_redline1=c,originX_poly_redline1=b,originY_poly_redline1=c,polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/
global_scale+","+(firstY_poly_redline1-delta_y)/global_scale):(lastX_poly_redline1=b,lastY_poly_redline1=c),tPath_poly_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPath_poly_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,tRubberBand_poly_redline1.attr({path:tPath_poly_redline1}))},lastX_poly_redline_pre,lastY_poly_redline_pre;
function cvjs_drawSpaceObject_RedlineArrowPolyline(){cvjs_addHandleFunc_RedlineArrowPolyline()}var cvjs_addHandleFunc_RedlineArrowPolyline_started=!1;
function cvjs_addHandleFunc_RedlineArrowPolyline(){try{if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_addHandleFunc_RedlineArrowPolyline_started=cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tRubberBand_poly_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,
fill:"none"});polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tPolygon_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/
2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly_redline1=!1;first_point_poly_redline1=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_polygon_redline3);
handleGroup.mousemove(mousemove_polygon_redline3);handleGroup.dblclick(polygon_finish_redline3);oldKeyDown=jQuery(document).keydown().bind({});jQuery(document).keydown(function(a){27==a.keyCode&&cvjs_addHandleFunc_RedlineArrowPolyline_started&&(cvjs_addHandleFunc_RedlineArrowPolyline_started=!1,polygon_finish_redline3())})}}catch(b){console.log("cvjs_addHandleFunc_RedlineArrowPolyline: "+b),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}}
function cvjs_removeHandleFunc_RedlineArrowPolyline(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var polygon_finish_redline3=function(){var a=polyPath_redline1.substring(0,polyPath_redline1.lastIndexOf("L"));a=a.substring(0,a.lastIndexOf("L"));a=a.substring(a.lastIndexOf("L")+1);-1<a.indexOf("M")&&(a=a.substring(a.lastIndexOf("M")+1));a=a.split(",");var b=Number(a[0]),c=Number(a[1]),d=cvjs_currentRedline_strokeWidth;3<cvjs_currentRedline_strokeWidth&&(d=3+(cvjs_currentRedline_strokeWidth-3)/2);d*=cvjs_redlineThickness_scaleFactor;a=-5*d+","+5.5*d+" "+0*d+","+-4.5*d+" "+5*d+","+5.5*d;b=Math.atan2((lastY_poly_redline1-
delta_y)/global_scale-c,(lastX_poly_redline1-delta_x)/global_scale-b)/Math.PI*180;b="T"+((lastX_poly_redline1-delta_x)/global_scale+Math.cos(b/180*Math.PI)*d)+","+(lastY_poly_redline1-delta_y)/global_scale+"r"+(b-270);d=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(a);d.attr({fill:cvjs_currentRedline_color,transform:b});polyPath_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale;tPolygon_redline1.attr({path:polyPath_redline1});cvjs_removeHandleFunc_RedlineArrowPolyline();
tRubberBand_poly_redline1.attr({path:"M0,0"});d=cvjs_rPaper[cvjs_active_floorplan_div_nr].g(d,tPolygon_redline1);draw_poly_redline1=!1;first_point_poly_redline1=!0;cvjs_addVqRedlinesGraphics_newNodeTrans(cvjs_currentRedline_underbar,d,b,a,polyPath_redline1);cvjs_graphicalObjectCreated("RedlineArrowPolyline");cvjs_graphicalObjectOnChange("Create","RedlineArrowPolyline",cvjs_currentRedline_underbar)},mousedown_polygon_redline3=function(){draw_poly_redline1?(firstX_poly_redline1!=lastX_poly_redline1&&
(lastX_poly_redline_pre=lastX_poly_redline1,lastY_poly_redline_pre=lastY_poly_redline1),polyPath_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),firstX_poly_redline1=lastX_poly_redline1,firstY_poly_redline1=lastY_poly_redline1):(polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),tPolygon_redline1.attr({stroke:cvjs_currentRedline_color,
"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"}),draw_poly_redline1=!0)},mousemove_polygon_redline3=function(a,b,c){draw_poly_redline1&&(first_point_poly_redline1?(first_point_poly_redline1=!1,firstX_poly_redline1=b,firstY_poly_redline1=c,lastX_poly_redline1=b,lastY_poly_redline1=c,originX_poly_redline1=b,originY_poly_redline1=c,polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale):
(lastX_poly_redline1=b,lastY_poly_redline1=c),tPath_poly_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPath_poly_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,tRubberBand_poly_redline1.attr({path:tPath_poly_redline1}))};function cvjs_drawSpaceObject_RedlineFilledPolygon(){cvjs_addHandleFunc_RedlineFilledPolygon()}var cvjs_addHandleFunc_RedlineFilledPolygon_started=!1;
function cvjs_addHandleFunc_RedlineFilledPolygon(){try{if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_addHandleFunc_RedlineFilledPolygon_started=cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;tPath_poly_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tRubberBand_poly_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,
fill:cvjs_currentRedline_color,"fill-opacity":"0.1"});polyPath_redline1="M"+firstX_poly_redline1+","+firstY_poly_redline1;tPolygon_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();
var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*
global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly_redline1=!1;first_point_poly_redline1=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});
handleGroup.mousedown(mousedown_polygon_redline2);handleGroup.mousemove(mousemove_polygon_redline2);handleGroup.dblclick(polygon_finish_redline2);oldKeyDown=jQuery(document).keydown().bind({});jQuery(document).keydown(function(a){27==a.keyCode&&cvjs_addHandleFunc_RedlineFilledPolygon_started&&(cvjs_addHandleFunc_RedlineFilledPolygon_started=!1,polygon_finish_redline2())})}}catch(b){console.log("cvjs_addHandleFunc_RedlineFilledPolygon: "+b),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=
!1}}function cvjs_removeHandleFunc_RedlineFilledPolygon(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var polygon_finish_redline2=function(){polyPath_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale+"L"+(originX_poly_redline1-delta_x)/global_scale+","+(originY_poly_redline1-delta_y)/global_scale+"Z";tPolygon_redline1.attr({path:polyPath_redline1});cvjs_removeHandleFunc_RedlineFilledPolygon();tRubberBand_poly_redline1.attr({path:"M0,0"});draw_poly_redline1=!1;first_point_poly_redline1=!0;cvjs_addVqRedlinesGraphics_newNodeFill(cvjs_currentRedline_underbar,
tPolygon_redline1,cvjs_currentRedline_color,.1);cvjs_graphicalObjectCreated("RedlineFilledPolygon");cvjs_graphicalObjectOnChange("Create","RedlineFilledPolygon",cvjs_currentRedline_underbar)},mousedown_polygon_redline2=function(){draw_poly_redline1?(polyPath_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),firstX_poly_redline1=lastX_poly_redline1,firstY_poly_redline1=lastY_poly_redline1):(polyPath_redline1=
"M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPolygon_redline1.attr({path:polyPath_redline1}),tPolygon_redline1.attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:cvjs_currentRedline_color,"fill-opacity":"0.1"}),draw_poly_redline1=!0)},mousemove_polygon_redline2=function(a,b,c){draw_poly_redline1&&(first_point_poly_redline1?(first_point_poly_redline1=!1,firstX_poly_redline1=
b,firstY_poly_redline1=c,lastX_poly_redline1=b,lastY_poly_redline1=c,originX_poly_redline1=b,originY_poly_redline1=c,polyPath_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale):(lastX_poly_redline1=b,lastY_poly_redline1=c),tPath_poly_redline1="M"+(firstX_poly_redline1-delta_x)/global_scale+","+(firstY_poly_redline1-delta_y)/global_scale,tPath_poly_redline1+="L"+(lastX_poly_redline1-delta_x)/global_scale+","+(lastY_poly_redline1-delta_y)/global_scale,
tRubberBand_poly_redline1.attr({path:tPath_poly_redline1}))},originX_poly_red=0,originY_poly_red=0,firstX_poly_red=0,firstY_poly_red=0,lastX_poly_red=400,lastY_poly_red=300,tPath_poly_red,tRubberBand_poly_red,polyPath_red,tPolygon_red,draw_poly_red=!1,first_point_poly_red=!0,scaleRedline_LineSize=1,scaleFactor_RedlineLineSize=200;
function cvjs_addHandleFunc_RedlinePolygonFreehand(){try{if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;scaleRedline_LineSize=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/scaleFactor_RedlineLineSize:(actualURX[cvjs_active_floorplan_div_nr]-
actualLLX[cvjs_active_floorplan_div_nr])/scaleFactor_RedlineLineSize;tPath_poly_red="M"+firstX_poly_red+","+firstY_poly_red;tRubberBand_poly_red=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_poly_red).attr({stroke:cvjs_currentRedline_color,"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"none"});polyPath_red="M"+firstX_poly_red+","+firstY_poly_red;tPolygon_red=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_red).attr({stroke:cvjs_currentRedline_color,
"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];
global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;draw_poly_red=!1;first_point_poly_red=!0;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],
actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_redlinepolygon);handleGroup.mousemove(mousemove_redlinepolygon);handleGroup.mouseup(redlinepolygon_finish)}}catch(b){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1,console.log("cvjs_addHandleFunc_RedlinePolygonFreehand: "+
b)}}function cvjs_removeHandleFunc_RedlinePolygonFreehand(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var redlinepolygon_finish=function(){polyPath_red+="L"+(lastX_poly_red-delta_x)/global_scale+","+(lastY_poly_red-delta_y)/global_scale+"L"+(originX_poly_red-delta_x)/global_scale+","+(originY_poly_red-delta_y)/global_scale;tPolygon_red.attr({path:polyPath_red});cvjs_removeHandleFunc_RedlinePolygonFreehand();tRubberBand_poly_red.attr({path:"M0,0"});draw_poly_red=!1;first_point_poly_red=!0;cvjs_addVqRedlinesGraphics_newNode(cvjs_currentRedline_underbar,tPolygon_red);cvjs_graphicalObjectCreated("RedlineFreehand");
cvjs_graphicalObjectOnChange("Create","RedlineFreehand",cvjs_currentRedline_underbar)};
function cvjs_setUpVqRedlines_currentNode(a,b){for(var c in vqRedlines)vqRedlines[c].data("node")==b&&(vqRedlines[c].data("name",cvjs_currentRedline_name),vqRedlines[c].data("id",cvjs_currentRedline_id),vqRedlines[c].data("layer",cvjs_currentRedline_layer),vqRedlines[c].data("group",cvjs_currentRedline_group),vqRedlines[c].data("color",cvjs_currentRedline_color),vqRedlines[c].data("strokeWidth",cvjs_currentRedline_strokeWidth),vqRedlines[c].data("fill",cvjs_currentRedline_fill),vqRedlines[c].data("fill_opacity",
cvjs_currentRedline_fill_opacity),vqRedlines[c].data("transform",cvjs_currentRedline_transform),vqRedlines[c].data("username",cvjs_currentRedline_username),vqRedlines[c].data("userid",cvjs_currentRedline_userid),vqRedlines[c].data("currentPage",cvjs_currentRedline_currentPage),vqRedlines[c].data("triangle_design",cvjs_currentRedline_triangle_design),vqRedlines[c].data("polypath_arrow",cvjs_currentRedline_polypath_arrow),vqRedlines[c].data("redline_text",cvjs_currentRedline_redline_text),vqRedlines[c].data("drawingRotation",
cvjs_currentRedline_drawingRotation))}
function cvjs_setUpVqRedlines_deleteNode(a){var b;for(b in vqRedlines){var c=vqRedlines[b].data("node");vqRedlines[b].data("locked")?c==a&&(c=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.RedlinesLocked+vqRedlines[b].data("username"),jQuery("#cvjs_informationModalText").html(c),jQuery("#info_messageModal").modal("show")):c==a&&(vqRedlines[b].data("deleted",!0),vqRedlines[b].attr({transform:"S0.001",opacity:"0.01"}),console.log(vqRedlines[b].data("polypath_arrow")),cvjs_debug&&console.log("We transform SMALL: "+
a))}try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(d){console.log("pdf 12: "+d)}}
var mousedown_redlinepolygon=function(a,b,c){b+=document.body.scrollLeft;c+=document.body.scrollTop;draw_poly_red||(polyPath_red="M"+(b-delta_x)/global_scale+","+(c-delta_y)/global_scale,draw_poly_red=!0)},mousemove_redlinepolygon=function(a,b,c){b+=document.body.scrollLeft;c+=document.body.scrollTop;draw_poly_red&&(first_point_poly_red?(first_point_poly_red=!1,firstX_poly_red=b,firstY_poly_red=c,lastX_poly_red=b,lastY_poly_red=c,originX_poly_red=b,originY_poly_red=c):(lastX_poly_red=b,lastY_poly_red=
c),tPath_poly_red="M"+(firstX_poly_red-delta_x)/global_scale+","+(firstY_poly_red-delta_y)/global_scale,tPath_poly_red+="L"+(lastX_poly_red-delta_x)/global_scale+","+(lastY_poly_red-delta_y)/global_scale,tRubberBand_poly_red.attr({path:tPath_poly_red}),Math.sqrt(Math.pow((firstX_poly_red-delta_x)/global_scale-(lastX_poly_red-delta_x)/global_scale,2)+Math.pow((firstY_poly_red-delta_y)/global_scale-(lastY_poly_red-delta_y)/global_scale,2))>scaleRedline_LineSize&&(polyPath_red+="L"+(lastX_poly_red-delta_x)/
global_scale+","+(lastY_poly_red-delta_y)/global_scale,tPolygon_red.attr({path:polyPath_red}),first_point_poly_red=!0))};function cvjs_drawSpaceObject_CopyCircle(){cvjs_addHandleFunc_CopyCircle()}
function cvjs_addHandleFunc_CopyCircle(){try{canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_copycircle)}catch(b){console.log("cvjs_addHandleFunc_CopyCircle: "+b)}}function cvjs_removeHandleFunc_CopyCircle(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var mousedown_copycircle=function(a,b,c){tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(0,0,1,1).attr({stroke:"#b00000","stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"});tTransform_c="t"+(b-delta_x)/global_scale+","+(c-delta_y)/global_scale;tTransform_c+="S"+delta;tRubberBand_c.attr({transform:tTransform_c,opacity:"1"});tRubberBand_c.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(tRubberBand_c).attr({id:"cv_"+
cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_circle(cvjs_currentNode_underbar,a);cvjs_removeHandleFunc_CopyCircle();cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectCopyCircle");cvjs_graphicalObjectOnChange("Create","SpaceObjectCopyCircle",cvjs_currentNode_id)},mouseMoveStickyNote=!1,tRubberBand_sn;function cvjs_drawStickyNoteDirect(){cvjs_addHandleFunc_StickyNote()}
function cvjs_addHandleFunc_StickyNote(){try{canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mouseup(mouseup_stickynote);mouseMoveStickyNote=!1;handleGroup.mousemove(mousemove_stickynote)}catch(b){console.log("cvjs_addHandleFunc_StickyNote: "+b),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}}
function cvjs_removeHandleFunc_StickyNote(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var scaleNote=1,scaleFactorNotes=600,mousemove_stickynote=function(a,b,c){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?
global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;console.log(delta_x+"  "+delta_y);0==mouseMoveStickyNote&&(a=0,10>cvjs_currentStickyNote_id&&(a=3),tRubberBand_sn=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0.01,0.01h20.0v20.0h-20.0v-20.0Z").attr({stroke:"#000000",
"stroke-width":"1.0",fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M7.0,12.0h1.3M9.5,12.0h3.5M11.25,12v5M9.75,12v1.75M12.75,12v1.75M10.5,17h1.5M7,13.5h1.3M7,15.25h3M7,17.0h2.2").attr({stroke:"#000000","stroke-width":"0.5",fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].text(3+a,9,"#"+cvjs_currentStickyNote_id).attr({"font-size":"8px","font-style":"italic",stroke:"#000000","stroke-width":".2",fill:"#000000"})),mouseMoveStickyNote=!0);b+=document.body.scrollLeft;c+=document.body.scrollTop;
scaleNote=1;scaleFactorNotes=600;scaleNote=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/scaleFactorNotes:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/scaleFactorNotes;tTransform_c="T"+((b-delta_x)/global_scale+10*scaleNote)+","+((c+0*scaleNote*global_scale-delta_y)/global_scale+
10*scaleNote);tTransform_c+="S"+scaleNote;tRubberBand_sn.attr({transform:tTransform_c})},mouseup_stickynote=function(a,b,c){mouseMoveStickyNote&&(tTransform_c="t0,0S"+scaleNote/100,tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"}),tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"}),tRubberBand_sn.remove());a=0;10>cvjs_currentStickyNote_id&&(a=3);tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0.01,0.01h20.0v20.0h-20.0v-20.0Z").attr({stroke:"#000000",
"stroke-width":"1.0"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M7,12h1.3M9.5,12h3.5M11.25,12v5M9.75,12v1.75M12.75,12v1.75M10.5,17h1.5M7,13.5h1.3M7,15.25h3M7,17.0h2.2").attr({stroke:"#000000","stroke-width":"0.5"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].text(3+a,9,"#"+cvjs_currentStickyNote_id).attr({"font-size":"8px","font-style":"italic",stroke:"#000000","stroke-width":"0.3",fill:"#000000","fill-opacity":1}));b+=document.body.scrollLeft;c+=document.body.scrollTop;scaleNote=1;scaleFactorNotes=
600;scaleNote=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/scaleFactorNotes:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/scaleFactorNotes;tTransform_c="T"+((b-delta_x)/global_scale+10*scaleNote)+","+((c+-delta_y)/global_scale+10*scaleNote);tTransform_c+="S"+scaleNote;
tRubberBand_c.attr({transform:tTransform_c,opacity:"1"});tRubberBand_c.attr({fill:"#FFF","fill-opacity":"0.8",stroke:"#000","stroke-opacity":"1"});cvjs_currentStickyNote_transform=tTransform_c;cvjs_removeHandleFunc_StickyNote();cvjs_addVqStickyNotesGraphics_newNode(cvjs_currentStickyNote_underbar,tRubberBand_c);cvjs_setUpVqStickyNotes_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentStickyNote_underbar);cvjs_graphicalObjectCreated("StickyNote");cvjs_graphicalObjectOnChange("Create",
"StickyNote",cvjs_currentStickyNote_underbar)},mouseMoveFlagStickyNote=!1;
function cvjs_addHandleFunc_MoveStickyNote(){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});mouseMoveFlagStickyNote=!1;handleGroup.mousemove(mousemove_movestickynote);handleGroup.mousedown(mousedown_movestickynote)}
function cvjs_removeHandleFunc_MoveStickyNote(){handleGroup.selectAll("handler").remove();handleGroup.remove();try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var mousemove_movestickynote=function(a,b,c){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;if(0==mouseMoveFlagStickyNote){a=cvjs_StickyNoteClicked();for(var d in vqStickyNotes){var e=vqStickyNotes[d].data("node");a==e&&vqStickyNotes[d].data("id")}d=0;10>cvjs_currentStickyNote_id&&(d=3);tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0,0h20v20h-20v-20Z").attr({stroke:"#000000",
"stroke-width":"1.0",fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M7,12h1.3M9.5,12h3.5M11.25,12v5M9.75,12v1.75M12.75,12v1.75M10.5,17h1.5M7,13.5h1.3M7,15.25h3M7,17.0h2.2").attr({stroke:"#000000","stroke-width":"0.5",fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].text(3+d,9,"#"+cvjs_currentStickyNote_id).attr({"font-size":"8px","font-style":"italic",stroke:"#000000","stroke-width":".2",fill:"#000000"}));mouseMoveFlagStickyNote=!0}b+=document.body.scrollLeft;c+=document.body.scrollTop;
scaleNote=1;scaleFactorNotes=600;scaleNote=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/scaleFactorNotes:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/scaleFactorNotes;tTransform_c="T"+((b-delta_x)/global_scale+10*scaleNote)+","+((c+0*scaleNote*global_scale-delta_y)/global_scale+
10*scaleNote);tTransform_c+="S"+scaleNote;tRubberBand_c.attr({transform:tTransform_c})},mousedown_movestickynote=function(a,b,c){b+=document.body.scrollLeft;c+=document.body.scrollTop;scaleNote=1;scaleFactorNotes=600;scaleNote=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/scaleFactorNotes:(actualURX[cvjs_active_floorplan_div_nr]-
actualLLX[cvjs_active_floorplan_div_nr])/scaleFactorNotes;tTransform_c="T"+((b-delta_x)/global_scale+10*scaleNote)+","+((c+0*scaleNote*global_scale-delta_y)/global_scale+10*scaleNote);tTransform_c+="S"+scaleNote;a=cvjs_StickyNoteClicked();a=cvjs_StickyNotes_arrayIndex(a);vqStickyNotes[a].attr({transform:tTransform_c,"fill-opacity":"0.8","stroke-opacity":"1"});vqStickyNotes[a].data("transform",tTransform_c);cvjs_removeHandleFunc_MoveStickyNote();tTransform_c+="t0,0S"+scaleNote/100;tRubberBand_c.attr({transform:tTransform_c,
opacity:"0.0"});tRubberBand_c.attr({fill:"#FFF","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"});tRubberBand_c.remove()};function AbsDiff(a,b){return Math.abs(a-b)}
function DoMouseDown(a,b,c){try{cvjs_active_floorplan_div_nr=c;basey=basex=pdy=pdx=0;firstx=a;firsty=b;dy=dx=0;bMouseDown=!0;bPan=bTempMouseDown=!1;thumbsMode=!0;var d=document.getElementsByTagName("svg")[0].getAttribute("viewBox").split(" ");vbx=parseInt(d[0]);vby=parseInt(d[1]);thumb_loaded||(thumb_loaded=!0);cvjs_debug&&console.log("DoMouseDown - setup"+a+" "+b+" firstx "+firstx+"  firsty "+firsty+"  active "+cvjs_active_floorplan_div_nr)}catch(e){console.log("DoMouseDown: "+e)}}
function DoMouseOut(a,b){try{if(bMouseDown&&bPan){dx=a-firstx;dy=b-firsty;pdx=dx*zoomScale;pdy=dy*zoomScale;basex=dx;basey=dy;viewBox[cvjs_active_floorplan_div_nr].X=vbx-pdx;viewBox[cvjs_active_floorplan_div_nr].Y=vby-pdy;var c=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(c);bTempMouseDown=
!0}}catch(d){console.log("DoMouseOut: "+d)}}function DoMouseOver(a,b){if(bTempMouseDown||bMouseDown)bTempMouseDown=!1,bMouseDown=!0}
function DoMouseUp(a,b,c){try{bTempMouseDown=bMouseDown=!1;if(bPan){viewBox[cvjs_active_floorplan_div_nr].X=vbx-pdx;viewBox[cvjs_active_floorplan_div_nr].Y=vby-pdy;var d='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }',e=jQuery.parseJSON(d);cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(e)}if(bPan)try{panWithThumb&&(layers_all.attr(show),layer_thumb.attr(hide)),
layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show)}catch(f){console.log("txx "+f)}else tip[cvjs_active_floorplan_div_nr].show();preventDrag=!0;try{2==totalDragStart&&(a.preventDefault(),a.stopPropagation())}catch(f){bPan=!1}try{2==totalDragStart&&(viewBox[cvjs_active_floorplan_div_nr].X=viewBox_initX[cvjs_active_floorplan_div_nr],viewBox[cvjs_active_floorplan_div_nr].Y=viewBox_initY[cvjs_active_floorplan_div_nr],vBHo=viewBoxHeight_init[cvjs_active_floorplan_div_nr],vBWo=viewBoxWidth_init[cvjs_active_floorplan_div_nr],
viewBoxWidth[cvjs_active_floorplan_div_nr]=viewBoxWidth_init[cvjs_active_floorplan_div_nr],viewBoxHeight[cvjs_active_floorplan_div_nr]=viewBoxHeight_init[cvjs_active_floorplan_div_nr],viewBoxWidth[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase,viewBoxHeight[cvjs_active_floorplan_div_nr]/=deltaDynamic/deltaBase,viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)/2,viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/
2,zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr],d='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }',e=jQuery.parseJSON(d),cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(e))}catch(f){}try{panWithThumb&&(layers_all.attr(show),layer_thumb.attr(hide)),layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(show)}catch(f){console.log(f)}bPan=
!1}catch(f){console.log("DoMouseUp: "+f)}}var basemx=0,basemy=0;
function DoMouseMove(a,b){try{bPan||(basemx=a,basemy=b);if(thumbsMode&&bPan&&0!=basemx-a&&0!=basemy-b)try{thumbsMode=!1,panWithThumb&&(layers_all.attr(hide),layer_thumb.attr(show),all_layer_off_thumb_on())}catch(f){console.log("t1 "+f)}bMouseDown&&!bPan&&(dragInsidePolygon=bPan=!0);try{if(bMouseDown&&2>totalDragStart&&(dx=a-firstx,dy=b-firsty,4<Math.abs(basex-dx)||4<Math.abs(basey-dy))){bPan=!0;var c=viewBoxWidth[cvjs_active_floorplan_div_nr]/jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(),
d=viewBoxHeight[cvjs_active_floorplan_div_nr]/jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=1;a=c>d?c:d;pdx=dx*a;pdy=dy*a;basex=dx;basey=dy;viewBox[cvjs_active_floorplan_div_nr].X=vbx-pdx;viewBox[cvjs_active_floorplan_div_nr].Y=vby-pdy;var e=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(e)}}catch(f){console.log(f)}}catch(f){console.log("DoMouseMove: "+
f)}}
function DoTouchMove(a,b,c){try{try{panWithThumb&&(layers_all.attr(hide),layer_thumb.attr(show))}catch(d){console.log("t2 "+d)}a.stopPropagation();preventDrag&&a.cancelable&&(a.preventDefault(),a.stopPropagation());2==totalDragStart&&(a.cancelable&&(a.preventDefault(),a.stopPropagation()),tip[cvjs_active_floorplan_div_nr].hide(),hideOnlyPop(),hideOnlyStickyNote());2==totalDragStart&&pinch_zoom_two_fingers(a.touches[0].pageX,a.touches[0].pageY,a.touches[1].pageX,a.touches[1].pageY)}catch(d){console.log("DoTouchMove: "+d)}}
function DoTouchStart(a,b,c){try{preventDrag=!0;cvjs_debug&&console.log("DoTouchStart");a.cancelable&&(a.preventDefault(),a.stopPropagation());thumb_loaded||(thumb_loaded=!0);try{firstFingerX=a.touches[0].pageX,firstFingerY=a.touches[0].pageY,totalDragStart=1,preventDrag=!1,firstFingerX1=firstFingerX,firstFingerY1=firstFingerY,firstFingerX1_base=firstFingerX,firstFingerY1_base=firstFingerY,secondFingerX=a.touches[1].pageX,secondFingerY=a.touches[1].pageY,totalDragStart=2,preventDrag=!0,deltaXinit=
secondFingerX-firstFingerX,deltaYinit=secondFingerY-firstFingerY,deltaDynamicPre=deltaBase=Math.sqrt(deltaXinit*deltaXinit+deltaYinit*deltaYinit),viewBox_initX[cvjs_active_floorplan_div_nr]=viewBox[cvjs_active_floorplan_div_nr].X,viewBox_initY[cvjs_active_floorplan_div_nr]=viewBox[cvjs_active_floorplan_div_nr].Y,viewBoxWidth_init[cvjs_active_floorplan_div_nr]=viewBoxWidth[cvjs_active_floorplan_div_nr],viewBoxHeight_init[cvjs_active_floorplan_div_nr]=viewBoxHeight[cvjs_active_floorplan_div_nr],flagOK=
!0}catch(d){console.log(d)}}catch(d){console.log("DoTouchStart: "+d)}}
function DoTouchEnd(a,b,c){try{preventDrag=!0;2==totalDragStart&&(a.cancelable&&(a.preventDefault(),a.stopPropagation()),tip[cvjs_active_floorplan_div_nr].hide(),hideOnlyPop(),hideOnlyStickyNote());try{2==totalDragStart&&pinch_zoom_two_fingers_touchend();var d=jQuery.parseJSON('{"display" : "none" }'),e=jQuery.parseJSON('{"display" : "inline" }');panWithThumb&&(layers_all.attr(e),layer_thumb.attr(d));layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].attr(e)}catch(f){console.log("DoTouchEnd: "+f)}}catch(f){console.log("DoTouchEnd: "+
f)}}var currentRoomId,currentRoomName,tooltipLast=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],currentStickyNoteId,currentStickyNoteName,tooltipLastStickyNote=-1,tooltipLastHyperlink=-1,currentUrlId,currentUrlName;function setRoomAfterPanPC(){tip[cvjs_active_floorplan_div_nr].html(currentRoomName);bMouseDown=!1;cvjs_clearDrawing();change_space_fixed_location(currentRoomId)}function setUpVqStickyNotes(a){}function setUpVqRedlines(a){}
function setUpVqURLs(a){tip[cvjs_active_floorplan_div_nr]=jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]);tip[cvjs_active_floorplan_div_nr].hide().css("left",floorplan_width).css("top",floorplan_height);var b="",c=null;a=null;try{jQuery.fn.qtip.defaults.show.event="click",jQuery.fn.qtip.defaults.hide.event=null}catch(e){}vqBuilding in buildings&&(c=buildings[vqBuilding],vqFloor in c.floors&&(a=c.floors[vqFloor]));layer_hyperlinks=floorplan_div_Array[cvjs_active_floorplan_div_nr].paper.g();
for(var d in vqURLs){c=0;for(bRoom in a.rooms)if(rid=vqURLs[d].data("node"),bRoom==rid){c=1;vqURLs[d].data("name",a.rooms[bRoom].name);-1==a.rooms[bRoom].id?vqURLs[d].data("id",rid):vqURLs[d].data("id",a.rooms[bRoom].id);try{vqURLs[d].data("layer",a.rooms[bRoom].layer),vqURLs[d].data("group",a.rooms[bRoom].group),vqURLs[d].data("url",a.rooms[bRoom].url),void 0!=a.rooms[bRoom].linked?(vqURLs[d].data("linked",a.rooms[bRoom].linked),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][bRoom].data("handle",
a.rooms[bRoom].handle)):vqURLs[d].data("linked",!1),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][bRoom].data("handle",a.rooms[bRoom].handle)}catch(e){console.log(e)}vqURLs[d].attr(defaultColor_Hyperlinks);cvjs_supressHyperlinkColors?vqURLs[d].attr(defaultColor_Hyperlinks_blank):vqURLs[d].attr(defaultColor_Hyperlinks);vqURLs[d].mousedown(function(a){cvjs_debug&&console.log("H Domousedown");vqRoomMouseSelect=!0;DoMouseDown(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop,
cvjs_active_floorplan_div_nr)}).mouseout(function(a){jQuery("#tip_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()}).mousemove(function(a){currentUrlId=this.data("id");currentUrlName=this.data("name");if(bMouseDown||bTempMouseDown)DoMouseMove(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else{var c=findUrl(currentUrlId);0<=c&&c!=lastObjHyperlink[cvjs_active_floorplan_div_nr]&&cvjs_location_flag&&(tooltipLastHyperlink!=lastObjHyperlink[cvjs_active_floorplan_div_nr]&&
(cvjs_supressHyperlinkColors?vqURLs[tooltipLastHyperlink].attr(defaultColor_Hyperlinks_blank):vqURLs[tooltipLastHyperlink].attr(defaultColor_Hyperlinks)),cvjs_supressHyperlinkColors?vqURLs[c].attr(defaultColor_Hyperlinks_blank):vqURLs[c].attr(highlight_Hyperlinks),tooltipLastHyperlink=c);b=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});
c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-c.left+document.documentElement.scrollLeft+10).css("top",a.clientY-c.top+document.documentElement.scrollTop-25)}}).mouseup(function(a){vqRoomMouseSelect=
!1;if(bPan)DoMouseUp(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else try{layer_hyperlinks.attr(show),panWithThumb&&(layers_all.attr(show),layer_thumb.attr(hide))}catch(f){console.log("t6 "+f)}b=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");tip[cvjs_active_floorplan_div_nr].html(b);bMouseDown=!1;cvjs_clearDrawingHyperlinks();rid=this.data("id");bPan=!1}).touchstart(function(a){DoTouchStart(a,a.clientX+document.body.scrollLeft,a.clientY+
document.body.scrollTop)}).touchend(function(a){if(!bPan&&!locked){rid=this.data("id");try{cvjs_change_space(rid)}catch(f){}b=this.data("name");tip[cvjs_active_floorplan_div_nr].html(b)}DoTouchEnd(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);b=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");tip[cvjs_active_floorplan_div_nr].html(b);bMouseDown=!1;rid=this.data("id");a=findUrl(rid);1==totalDragStart&&(a.indexOf("http://"),cvjs_Url_encapsulate_callback&&
cvjs_Url_callback(vqURLs[a].data("url")),change_space_fixed_locationHyperlink(rid))}).touchmove(function(a){if(!bPan){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",
a.clientX-c.left+document.documentElement.scrollLeft+10).css("top",a.clientY-c.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(b)}DoTouchMove(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).dblclick(function(a){2==cvjs_Url_click_control&&(currentUrlId=this.data("id"),currentUrlName=this.data("name"),a=findUrl(currentUrlId),-1==a.indexOf("http://")?cvjs_Url_encapsulate_callback?cvjs_Url_callback(vqURLs[a].data("url")):openHyperlinkInNewWindow?
window.open(current_FileNamePath+vqURLs[a].data("url"),"CADViewerJS","width="+hyperlinkNewWindowWidth+", height="+hyperlinkNewWindowHeight):document.location.href=current_FileNamePath+vqURLs[a].data("url"):cvjs_Url_encapsulate_callback?cvjs_Url_callback(vqURLs[a].data("url")):openHyperlinkInNewWindow?window.open(vqURLs[a].data("url"),"CADViewerJS","width="+hyperlinkNewWindowWidth+", height="+hyperlinkNewWindowHeight):document.location.href=vqURLs[a].data("url"),cvjs_clearDrawingHyperlinks(),rid=this.data("id"),
change_space_fixed_locationHyperlink(rid));vqRoomMouseSelect=!1}).click(function(a){1==cvjs_Url_click_control&&(currentUrlId=this.data("id"),currentUrlName=this.data("name"),a=findUrl(currentUrlId),-1==a.indexOf("http://")?cvjs_Url_encapsulate_callback?cvjs_Url_callback(vqURLs[a].data("url")):openHyperlinkInNewWindow?window.open(current_FileNamePath+vqURLs[a].data("url"),"CADViewerJS","width="+hyperlinkNewWindowWidth+", height="+hyperlinkNewWindowHeight):document.location.href=current_FileNamePath+
vqURLs[a].data("url"):cvjs_Url_encapsulate_callback?cvjs_Url_callback(vqURLs[a].data("url")):openHyperlinkInNewWindow?window.open(vqURLs[a].data("url"),"CADViewerJS","width="+hyperlinkNewWindowWidth+", height="+hyperlinkNewWindowHeight):document.location.href=vqURLs[a].data("url"),cvjs_clearDrawingHyperlinks(),rid=this.data("id"),change_space_fixed_locationHyperlink(rid));vqRoomMouseSelect=!1})}0==c&&(c=vqURLs[d].data("node"),cvjs_debug&&console.log("room not found "+c),vqURLs[d].data("name","undefined"),
vqURLs[d].data("id",c),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("layer","undefined"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("group","undefined"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("url","undefined"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked",!1),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle",""),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("translate_x",
"0"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("translate_y","0"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("scale_x","1"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("scale_y","1"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("rotate","0"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("transform",""));layer_hyperlinks.add(vqURLs[d])}}function cvjs_setCallbackMeasurement(a){cvjs_callbackMeasurement=a}
var tRubberBand_text1,text_move1,text_move1_noscale,tText_redline1,cvjs_text_redline,cvjs_text_redline_size,cvjs_text_insert_x1,cvjs_text_insert_y1,tArr,cvjs_redline_boundingBoxElement,cvjs_redline_Boxwidth,cvjs_redline_Boxheight,cvjs_reference_font_size=40,global_textString,cvjs_current_font_size=40;
function cvjs_insertRedlineText(a,b){cvjs_current_font_size=cvjs_reference_font_size*b/11;global_textString=a;tArr=a.split("\n");cvjs_text_redline=a;try{canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];
global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+c.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+c.top;tRubberBand_text1=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(0,0,tArr).attr({stroke:cvjs_currentRedline_color,fill:cvjs_currentRedline_color,
"font-size":cvjs_current_font_size});for(a=1;a<tArr.length;a++)tRubberBand_text1.selectAll("tspan")[a].attr({x:0,dy:"1em"});cvjs_redline_boundingBoxElement=tRubberBand_text1.getBBox();cvjs_redline_Boxwidth=cvjs_redline_boundingBoxElement.width;cvjs_redline_Boxheight=cvjs_redline_boundingBoxElement.height;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_redline_text);handleGroup.mousemove(mousemove_redline_text)}catch(d){console.log("cvjs_insertRedlineText:"+d),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}}
function cvjs_removeHandleFunc_RedlineText(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var mousedown_redline_text=function(){tRubberBand_text1.remove();tText_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(0,0,tArr).attr({stroke:cvjs_currentRedline_color,fill:cvjs_currentRedline_color,"font-size":cvjs_current_font_size});for(var a=1;a<tArr.length;a++)tText_redline1.selectAll("tspan")[a].attr({x:0,dy:"1em"});tText_redline1.attr({transform:text_move1});cvjs_removeHandleFunc_RedlineText();cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,
"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);a=global_textString.replace(/(\n)/gm,"<br>");cvjs_addVqRedlinesGraphics_newNodeText(cvjs_currentRedline_underbar,tText_redline1,text_move1,a);cvjs_graphicalObjectCreated("RedlineText");cvjs_graphicalObjectOnChange("Create","RedlineText",cvjs_currentRedline_underbar)},mousemove_redline_text=function(a,b,c){try{canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();
canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var d=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*
global_scale+d.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+d.top;var e=-cvjs_redline_Boxwidth/2*(1-cvjs_redlineThickness_scaleFactor);var f=+cvjs_redline_Boxheight/2*(1-cvjs_redlineThickness_scaleFactor);f=e=0;text_move1="T"+((b-delta_x)/global_scale+e)+","+((c-delta_y)/global_scale+f)+"S"+cvjs_redlineThickness_scaleFactor;text_move1_noscale="T"+((b-delta_x)/global_scale+e)+","+((c-delta_y)/global_scale+
f);cvjs_text_insert_x1=(b-delta_x)/global_scale;cvjs_text_insert_y1=(c-delta_y)/global_scale;tRubberBand_text1.attr({transform:text_move1})}catch(g){console.log(g)}},cvjs_currentIconPage=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],cvjs_MaxIconPages=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],cvjs_userControlled_MaxIconPages=[3,3,3,3,3,3,3,3,
3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3];
function cvjs_changeNextIconPage(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_currentIconPage[cvjs_active_floorplan_div_nr]++;cvjs_currentIconPage[cvjs_active_floorplan_div_nr]>cvjs_userControlled_MaxIconPages[cvjs_active_floorplan_div_nr]&&(cvjs_currentIconPage[cvjs_active_floorplan_div_nr]=1);if(pageChangeInterface){if(cvjs_version_3_2_modal){var b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8.png";var c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+
"_8_"+a}else b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3_"+a;jQuery("#gMenu_"+a).html('<img src="'+b+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="276" width="62" class="map" hidefocus="true">')}else pageChangeInterfaceFalse_noIconNavigation?(cvjs_version_3_2_modal?(b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+
"_8.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8_"+a):(b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3_"+a),jQuery("#gMenu_"+a).html('<img src="'+b+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="276" width="62" class="map" hidefocus="true">')):(b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+
"_2.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_"+a,jQuery("#gMenu_"+a).html('<img src="'+b+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="303" width="62" class="map" hidefocus="true">'));console.log("#gMenu_"+a+"  "+jQuery("#gMenu_"+a).html())}
function cvjs_changePreviousIconPage(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_currentIconPage[cvjs_active_floorplan_div_nr]--;1>cvjs_currentIconPage[cvjs_active_floorplan_div_nr]&&(cvjs_currentIconPage[cvjs_active_floorplan_div_nr]=cvjs_userControlled_MaxIconPages[cvjs_active_floorplan_div_nr]);console.log("change page "+a);if(pageChangeInterface){if(cvjs_version_3_2_modal){var b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8.png";var c=
"#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8_"+a}else b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3_"+a;jQuery("#gMenu_"+a).html('<img src="'+b+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="276" width="62" class="map" hidefocus="true">')}else pageChangeInterfaceFalse_noIconNavigation?(cvjs_version_3_2_modal?
(b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8_"+a):(b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3_"+a),jQuery("#gMenu_"+a).html('<img src="'+b+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="276" width="62" class="map" hidefocus="true">')):
(b=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_2.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_"+a,jQuery("#gMenu_"+a).html('<img src="'+b+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="303" width="62" class="map" hidefocus="true">'));console.log("#gMenu_"+a+"  "+jQuery("#gMenu_"+a).html())}
function cvjs_changeToIconPage(a,b){"undefined"===typeof b?cvjs_active_floorplan_div_nr=0:(b.endsWith("_svg")||(b+="_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b));cvjs_currentIconPage[cvjs_active_floorplan_div_nr]=a;if(pageChangeInterface){if(cvjs_version_3_2_modal){a=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8.png";var c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8_"+b}else a=cvjs_imagesLocation+"cvjsToolbar_dra_p"+
cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3_"+b;jQuery("#gMenu_"+b).html('<img src="'+a+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="276" width="62" class="map" hidefocus="true">')}else pageChangeInterfaceFalse_noIconNavigation?(cvjs_version_3_2_modal?(a=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8.png",c="#cvjsToolbarMap_p"+
cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_8_"+b):(a=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_3_"+b),jQuery("#gMenu_"+b).html('<img src="'+a+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="276" width="62" class="map" hidefocus="true">')):(a=cvjs_imagesLocation+"cvjsToolbar_dra_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+
"_2.png",c="#cvjsToolbarMap_p"+cvjs_currentIconPage[cvjs_active_floorplan_div_nr]+"_"+b,jQuery("#gMenu_"+b).html('<img src="'+a+'" style="margin-left: 10px; margin-top: 10px;" usemap="'+c+'" border="0" height="303" width="62" class="map" hidefocus="true">'));console.log("page change  #gMenu_"+b+"  "+jQuery("#gMenu_"+b).html())}
function cvjs_setIconInterfaceControls_ViewingOnly(a){cvjs_active_floorplan_div_nr="undefined"===typeof a?0:cvjs_rPaperIndex(a+"_svg");cvjs_userControlled_MaxIconPages[cvjs_active_floorplan_div_nr]=1}function cvjs_setIconInterfaceControls_SpaceManagement(a){cvjs_active_floorplan_div_nr="undefined"===typeof a?0:cvjs_rPaperIndex(a+"_svg");cvjs_userControlled_MaxIconPages[cvjs_active_floorplan_div_nr]=5;cvjs_loadCurrentLoadedDrawingAsString=!0}
function cvjs_setIconInterfaceControls_ImageInsert(){cvjs_userControlled_MaxIconPages[cvjs_active_floorplan_div_nr]=4}function cvjs_initiateInsertRedlineText(a){var b=jQuery("#redline_text").val(),c=jQuery("#cvjs_redlineFontSizeInput_"+a).val();jQuery("#redlinetextModal_"+a).hide();cvjs_insertRedlineText(b,c)}
var image_encapsulate_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_currentImageLink_id=0,cvjs_currentImageLink_underbar=0,currentImageNoteId,defaultColor_ImageNotes={fill:"#DCCCFF"},highlightColor_ImageNotes={fill:"#DC05FF"};
function cvjs_insertImageLink(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_currentImageLink_id=vqImageNotes.length-1;if(isNaN(cvjs_currentImageLink_id)||0>cvjs_currentImageLink_id)cvjs_currentImageLink_id=0;cvjs_currentImageLink_id=cvjs_currentImageLink_underbar+1;cvjs_addHandleFunc_ImageLink()}
function cvjs_addHandleFunc_ImageLink(){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=
canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_imagelink);mouseMoveStickyNote=!1;handleGroup.mousemove(mousemove_imagelink)}}
function cvjs_removeHandleFunc_ImageLink(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{-1<FileName.indexOf(".pdf")&&cvjs_customPdfFolderFlag&&savepageaspdf(floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(a){console.log("pdf 12: "+a)}}
var mousemove_imagelink=function(a,b,c){0==mouseMoveStickyNote&&(a=0,10>cvjs_currentImageLink_id&&(a=3),tRubberBand_sn=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0.01,0.01h20v20h-20v-20Z").attr({stroke:"#000000","stroke-width":"1.0",fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M4,11h11v8h-11v-8h2 M4,19 8,14 10,16 12.5,15 15,19").attr({stroke:"#000000","stroke-width":"0.5",fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].text(3+
a,9,"#"+cvjs_currentImageLink_id).attr({"font-size":"8px","font-style":"italic",stroke:"#000000","stroke-width":"0.3",fill:"#000000"})),mouseMoveStickyNote=!0);b+=document.body.scrollLeft;c+=document.body.scrollTop;a=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-
actualLLX[cvjs_active_floorplan_div_nr])/600;tTransform_c="T"+((b-delta_x)/global_scale+10*a)+","+((c-delta_y)/global_scale+10*a);tTransform_c+="S"+a;tRubberBand_sn.attr({transform:tTransform_c})},mousedown_imagelink=function(a,b,c){var d=floorplan_div_Array[cvjs_active_floorplan_div_nr];tTransform_c="t0,0S"+e/100;tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"});tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"});tRubberBand_sn.remove();a=0;10>cvjs_currentImageLink_id&&
(a=3);tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0.01,0.01h20v20h-20v-20Z").attr({stroke:"#000000","stroke-width":"1.0"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M4,11h11v8h-11v-8h2").attr({stroke:"#000000","stroke-width":"0.5"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].text(3+a,9,"#"+cvjs_currentImageLink_id).attr({"font-size":"8px","font-style":"italic",stroke:"#000000","stroke-width":"0.3",fill:"#000000","fill-opacity":1}),
cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M4,19 8,14 10,16 12.5,15 15,19").attr({stroke:"#000000","stroke-width":"0.5",fill:"#000000"}));b+=document.body.scrollLeft;c+=document.body.scrollTop;var e=1;e=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/
600;tTransform_c="T"+((b-delta_x)/global_scale+10*e)+","+((c-delta_y)/global_scale+10*e);tTransform_c+="S"+e;tRubberBand_c.attr({transform:tTransform_c,opacity:"1"});tRubberBand_c.attr({fill:"#DCCCFF","fill-opacity":"0.8",stroke:"#000","stroke-opacity":"1"});cvjs_currentStickyNote_transform=tTransform_c;cvjs_removeHandleFunc_ImageLink();b=tRubberBand_c.data("node",cvjs_currentImageLink_underbar);vqImageNotes.push(b);currentImageNoteId=vqImageNotes.length-1;vqImageNotes[currentImageNoteId].data("id",
currentImageNoteId+1);vqImageNotes[currentImageNoteId].data("name","object"+(currentImageNoteId+1));vqImageNotes[currentImageNoteId].data("layer","objectLayer");vqImageNotes[currentImageNoteId].data("group","unassigned");vqImageNotes[currentImageNoteId].data("username",cvjs_currentRedline_username);vqImageNotes[currentImageNoteId].data("userid",cvjs_currentRedline_userid);vqImageNotes[currentImageNoteId].data("currentPage",multiPages[cvjs_active_floorplan_div_nr].currentPage);vqImageNotes[currentImageNoteId].data("imageObject",
"");vqImageNotes[currentImageNoteId].data("imageHeight",450);vqImageNotes[currentImageNoteId].data("imageWidth",600);vqImageNotes[currentImageNoteId].data("transform",tTransform_c);cvjs_graphicalObjectOnChange("Create","ImageLink",vqImageNotes[currentImageNoteId].data("id"));jQuery("#cvjs_floorPlanInsertImage").html("");vqImageNotes[cvjs_currentImageLink_underbar].mousedown(function(a){a=this.data("node");jQuery("#cvjs_imageObject").html("<b>"+languageTable.languages[cvjs_currentLanguage].ImageObjectModal.Header+
(a+1)+"</b>");""==vqImageNotes[a].data("imageObject")?jQuery("#cvjs_floorPlanInsertImage").html(""):(cvjs_buildFolderTree_crossDomain?jQuery("#cvjs_floorPlanInsertImage").html("<img src='"+cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+cvjs_insertImagesRelativePath+"/"+vqImageNotes[a].data("imageObject")+"' height='"+vqImageNotes[a].data("imageHeight")+"' />"):jQuery("#cvjs_floorPlanInsertImage").html("<img src='"+cvjs_insertImagesRelativePath+"/"+vqImageNotes[a].data("imageObject")+
"' height='"+vqImageNotes[a].data("imageHeight")+"' />"),jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+d).css("width",vqImageNotes[a].data("imageWidth")+8),jQuery("#cvjs_floorPlanInsertImage").css("width",vqImageNotes[a].data("imageWidth")),jQuery("#cvjs_floorPlanInsertImageTop").css("width",vqImageNotes[a].data("imageWidth")));image_encapsulate_offset_flag[cvjs_active_floorplan_div_nr]&&(image_encapsulate_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+
d).css({position:"fixed"}),jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+d).offset({left:150+jQuery("#"+d).position().left,top:50+jQuery("#"+d).position().top}));jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+d).show();cvjs_graphicalObjectOnChange("Click","ImageLink",this.data("id"))}).mousemove(function(a){currentImageNoteId=this.data("node");vqImageNotes[currentImageNoteId].attr(highlightColor_ImageNotes)}).mouseout(function(a){currentImageNoteId=this.data("node");vqImageNotes[currentImageNoteId].attr(defaultColor_ImageNotes)}).mouseup(function(a){}).touchstart(function(a){}).touchmove(function(a){}).touchend(function(a){}).dblclick(function(a){});
cvjs_currentImageLink_underbar++},cvjs_quickCountCounter=0,vqQuickCount=[],cvjs_callbackQuickCount=!1;function cvjs_setCallbackQuickCount(a){cvjs_callbackQuickCount=a}
function cvjs_showMeCounts(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_displayInformationModal(a,0==cvjs_quickCountCounter||1==cvjs_quickCountCounter?languageTable.languages[cvjs_currentLanguage].InfoMessageModal.QuickCountSingle+cvjs_quickCountCounter:languageTable.languages[cvjs_currentLanguage].InfoMessageModal.QuickCountMultiple+cvjs_quickCountCounter)}
function cvjs_clearQuickCounts(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);if(0<vqQuickCount.length){for(a=0;a<vqQuickCount.length;a++)vqQuickCount[a].data("deleted",!0),vqQuickCount[a].attr({transform:"S0.001",opacity:"0.01"});vqQuickCount.length=0}cvjs_quickCountCounter=0}
function cvjs_quickCount(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_quickCountCounter=0;if(0<vqQuickCount.length){for(a=0;a<vqQuickCount.length;a++)vqQuickCount[a].data("deleted",!0),vqQuickCount[a].attr({transform:"S0.001",opacity:"0.01"});vqQuickCount.length=0}cvjs_quickCountCounter=cvjs_currentImageLink_underbar=cvjs_currentImageLink_id=0;cvjs_addHandleFunc_QuickCount()}var oldKeyDown,cvjs_quickCount_started=!1;
function cvjs_addHandleFunc_QuickCount(){if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;mouseMoveStickyNote=!1;cvjs_quickCount_started=!0;canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];
global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.dblclick(dblclick_quickcount);handleGroup.mousedown(mousedown_quickcount);handleGroup.mousemove(mousemove_quickcount);handleGroup.mouseup(mouseup_quickcount);oldKeyDown=jQuery(document).keydown().bind({});
jQuery(document).keydown(function(a){27==a.keyCode&&cvjs_quickCount_started&&(tTransform_c="t0,0S0.01",tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"}),tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"}),cvjs_removeHandleFunc_QuickCount())})}}
function cvjs_exitQuickCount(a){tTransform_c="t0,0S0.01";tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"});tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"});cvjs_removeHandleFunc_QuickCount()}
function cvjs_removeHandleFunc_QuickCount(){handleGroup.selectAll("handler").remove();handleGroup.remove();cvjs_quickCount_started=!1;cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;try{cvjs_callbackQuickCount&&cvjs_QuickCountCallback(cvjs_quickCountCounter)}catch(a){console.log(a)}}
var mousemove_quickcount=function(a,b,c){0==mouseMoveStickyNote&&(tRubberBand_sn=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0,-14 4,-10 12,-18 11,-19 4,-12 1,-15 0,-14 4,-10").attr({stroke:"#FF7F27","stroke-width":"0.5",fill:"#FF7F27"})),mouseMoveStickyNote=!0);b+=document.body.scrollLeft;c+=document.body.scrollTop;tTransform_c="t"+(b-delta_x)/global_scale+","+(c-delta_y)/global_scale;tTransform_c+="S"+(actualURX[cvjs_active_floorplan_div_nr]-
actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/600);tRubberBand_sn.attr({transform:tTransform_c})},dblclick_quickcount=function(a,b,c){tTransform_c="t0,0S0.01";tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"});tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",
stroke:"#000","stroke-opacity":"0.0"});cvjs_removeHandleFunc_QuickCount()},mousedown_quickcount=function(a,b,c){},x_quickcount_last=0,y_quickcount_last=0,mouseup_quickcount=function(a,b,c){3>Math.abs(b-x_quickcount_last)&&3>Math.abs(c-y_quickcount_last)||(3==a.which?(tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"}),tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"}),cvjs_removeHandleFunc_QuickCount()):(tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0,-14 4,-10 12,-18 11,-19 4,-12 1,-15 0,-14 4,-10").attr({stroke:"#FF7F27",
"stroke-width":"0.5",fill:"#FF7F27"})),b+=document.body.scrollLeft,c+=document.body.scrollTop,tTransform_c="t"+(b+global_scale-delta_x)/global_scale+","+(c+global_scale-delta_y)/global_scale,tTransform_c+="S"+(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/
600),tRubberBand_c.attr({transform:tTransform_c,opacity:"1"}),tRubberBand_c.attr({fill:"#DCCCFF","fill-opacity":"0.8",stroke:"#000","stroke-opacity":"1"}),cvjs_currentStickyNote_transform=tTransform_c,a=tRubberBand_c.data("node",cvjs_currentImageLink_underbar),vqQuickCount.push(a),cvjs_quickCountCounter++,x_quickcount_last=b,y_quickcount_last=c))};
function cvjs_setSpacePolygonOnLayer(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_findSVGcoordinate_setPolygonOnLayer()}
function cvjs_findSVGcoordinate_setPolygonOnLayer(){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:
global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(mousedown_cvjs_svgCoord_polygonfind)}function onSegment(a,b,c,d,e,f){return c<=Math.max(a,e)&&c>=Math.min(a,e)&&d<=Math.max(b,f)&&d>=Math.min(b,f)?!0:!1}function orientation(a,b,c,d,e,f){a=(d-b)*(e-c)-(c-a)*(f-d);return 0==a?0:0<a?1:2}
function doIntersect(a,b,c,d,e,f,g,h){var k=orientation(a,b,c,d,e,f),l=orientation(a,b,c,d,g,h),m=orientation(e,f,g,h,a,b),p=orientation(e,f,g,h,c,d);return k!=l&&m!=p||0==k&&onSegment(a,b,e,f,c,d)||0==l&&onSegment(a,b,g,h,c,d)||0==m&&onSegment(e,f,a,b,g,h)||0==p&&onSegment(e,f,c,d,g,h)?!0:!1}
function isInside(a,b,c,d,e){if(3>c)return!1;var f=0,g=0;do{var h=(g+1)%c;if(doIntersect(a[g],b[g],a[h],b[h],d,e,1E5,e)){if(0==orientation(a[g],b[g],d,e,a[h],b[h]))return onSegment(a[g],b[g],d,e,a[h],b[h]);f++}g=h}while(0!=g);return f&1}
var mousedown_cvjs_svgCoord_polygonfind=function(a,b,c){a=(b-delta_x)/global_scale;c=(c-delta_y)/global_scale;cvjs_debug&&console.log("SVG coordinates: "+a+"  "+c+" RoomLayer "+cvjs_convertRoomLayer);handleGroup.selectAll("handler").remove();handleGroup.remove();b="";for(var d=0;d<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;d++)-1<layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName.indexOf(cvjs_convertRoomLayer)&&layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName.length==
cvjs_convertRoomLayer.length&&(b=layerTable[cvjs_active_floorplan_div_nr].layers[d].layer.toString(),0==b.indexOf("layer_")&&(b=jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[d].layer).html()));b=b.substring(b.indexOf("<path"));b=b.substring(0,b.indexOf(">"));b=b.substring(b.indexOf(" d=")+4);b=b.substring(0,b.indexOf('"'));d=0;for(cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(a,c,.1).attr({"stroke-width":"0.06"}).attr({fill:"none"}).attr({stroke:"rgb(255,0,0)"});-1<b.indexOf("M");){if(0==
b.indexOf("M")){var e=b=b.substring(1);e="M"+e.substring(0,e.indexOf("M"));for(var f=e.substring(1).split("l"),g=[],h=[],k=0;k<f.length;k++){var l=f[k].split(",");0==k?(g[k]=Number(l[0]),h[k]=Number(l[1])):(g[k]=g[k-1]+Number(l[0]),h[k]=h[k-1]+Number(l[1]));cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(g[k],h[k],.1).attr({"stroke-width":"0.06"}).attr({fill:"none"}).attr({stroke:"rgb(0,255,0)"})}cvjs_rPaper[cvjs_active_floorplan_div_nr].path(e).attr({"stroke-width":"0.01"}).attr({fill:"none"}).attr({stroke:"rgb(255,0,0)"});
f=!1;g=isInside(g,h,g.length,a,c);0!=g&&(cvjs_debug&&console.log("FLAG="+g),f=!0);b=b.substring(b.indexOf("M"));f&&console.log("polyFlag IS NOW TRUE");f&&(g=cvjs_currentMaxSpaceNodeId(),g++,cvjs_setCurrentNodeValues(Node_underbar+g,"unassigned","NODE_"+g,"unassigned","unassigned","unassigned","unpopulated","unassigned","unassigned","unassigned",!1,0,0,1,1,0,""),e=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(e).attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"}),cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,
e),cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar),cvjs_graphicalObjectCreated("SpaceObjectPolygon"),cvjs_graphicalObjectOnChange("Create","SpaceObjectPolygon",cvjs_currentNode_id))}d++}};
function cvjs_combineRoomTextlayer(){cvjs_debug&&console.log("SVG coordinates: 500  500 RoomLayer "+cvjs_convertRoomLayer+" "+cvjs_convertTextLayer);for(var a="",b="",c=0;c<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;c++)-1<layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName.indexOf(cvjs_convertTextLayer)&&layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName.length==cvjs_convertTextLayer.length&&(b=layerTable[cvjs_active_floorplan_div_nr].layers[c].layer.toString());cvjs_debug&&
console.log(b);for(c=0;c<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;c++)-1<layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName.indexOf(cvjs_convertRoomLayer)&&layerTable[cvjs_active_floorplan_div_nr].layers[c].layerName.length==cvjs_convertRoomLayer.length&&(a=layerTable[cvjs_active_floorplan_div_nr].layers[c].layer.toString(),0==a.indexOf("layer_")&&(a=jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[c].layer).html()));a=a.substring(a.indexOf("<path"));a=a.substring(0,
a.indexOf(">"));a=a.substring(a.indexOf(" d=")+4);a=a.substring(0,a.indexOf('"'));c=0;cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(500,500,.1).attr({"stroke-width":"0.06"}).attr({fill:"none"}).attr({stroke:"rgb(255,0,0)"});for(var d=!0;-1<a.indexOf("M");)if(0==a.indexOf("M")){c=a=a.substring(1);var e="M"+c.substring(0,c.indexOf("M"));c=e.substring(1).split("l");for(var f=[],g=[],h=0;h<c.length;h++){var k=c[h].split(",");0==h?(f[h]=Number(k[0]),g[h]=Number(k[1])):(f[h]=f[h-1]+Number(k[0]),g[h]=
g[h-1]+Number(k[1]))}var l=!1;jQuery("text").each(function(a){if(!l){var c="#"+b;a="";a=jQuery(this).parents().find(c).eq(0).attr("id");c=jQuery(this).parents().map(function(){return this.tagName+" "+this.id}).get().join(", ");-1<c.indexOf("Block_")&&(a="NONE");d&&console.log("TEXT:"+jQuery(this).text()+" parent layer "+a+"  all parents "+c);void 0==a&&(a="NONE");if(0==a.indexOf(b)&&(0==jQuery(this).text().indexOf("1W")||0==jQuery(this).text().indexOf("1Z")||0==jQuery(this).text().indexOf("1U")||
0==jQuery(this).text().indexOf("6E")||0==jQuery(this).text().indexOf("6T"))&&(a=jQuery(this).attr("x"),c=jQuery(this).attr("y"),l=isInside(f,g,f.length,a,c))){c=cvjs_currentMaxSpaceNodeId();c++;a=Node_underbar+c;c="NODE_"+c;var h=jQuery(this).text();cvjs_setCurrentNodeValues(a,h,c,"Y","X","1","populated","Door Box","Door Box","Door Box",!1,0,0,1,1,0,"");a=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(e).attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,
a);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjetPolygon");cvjs_graphicalObjectOnChange("Create","SpaceObjectPolygon",cvjs_currentNode_id)}}});a=a.substring(a.indexOf("M"));d=!1}}
var icon_command_active=0,currentLinkId=-1,load_waitflag_files=0,load_waitflag_overlay=0,load_waitflag_cluster=0,load_waitflag_linklist=0,edit_cancel_flag=!1,fArr_Name=[],fArr_Id=[],fArr_PolygonNr=[],fArr_PolygonLayerName=[],fArr_Occupancy=[],fArr_Tags=[],fArr_Type=[],fArr_Layer=[],fArr_Maximo_Datafield1=[],fArr_Maximo_Datafield2=[],fArr_Maximo_Datafield3=[],fArr_Name_fixtures=[],fArr_Id_fixtures=[],fArr_PolygonNr_fixtures=[],fArr_PolygonLayerName_fixtures=[],fArr_Occupancy_fixtures=[],fArr_Tags_fixtures=
[],fArr_Type_fixtures=[],fArr_Layer_fixtures=[],overlay_flag=0,save_drawing_flag=0;fnArr_FileName=[];fnArr_ShortName=[];fnArr_listdirectory_FileName=[];fnArr_listdirectory_ShortName=[];var searchListType=[],searchListOccupancy=[],searchListTags=[],new_linkList="";function cvjs_getSizeOfLinkedObjects(){return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length}
function generate_new_linkList_fixtures(){for(var a="",b=0;b<fArr_Name_fixtures.length;b++)-1==fArr_PolygonNr_fixtures[b]&&(a=a+"<li><a href=\"javascript:change_link_fixtures('"+fArr_Id_fixtures[b]+"')\">"+(""==fArr_Name_fixtures[b]?fArr_Id_fixtures[b]:fArr_Name_fixtures[b])+"</a></li>");jQuery("#fixtures_drawing").html(a)}
function generate_new_linkList(){new_linkList="";cvjs_debug&&console.log("generate_new_linklist ");for(var a=0;a<fArr_Name.length;a++)if(-1==fArr_PolygonNr[a])new_linkList=new_linkList+"<li><a href=\"javascript:change_link_space('"+fArr_Id[a]+"')\">"+fArr_Name[a]+"</a></li>";else{cvjs_debug&&console.log(a+" association! ");for(var b=!0,c=0;c<searchListType.length;c++)searchListType[c]==fArr_Type[a]&&(b=!1);1==b&&searchListType.push(fArr_Type[a]);b=!0;for(c=0;c<searchListOccupancy.length;c++)searchListOccupancy[c]==
fArr_Occupancy[a]&&(b=!1);1==b&&searchListOccupancy.push(fArr_Occupancy[a]);b=!0;for(c=0;c<searchListTags.length;c++)searchListTags[c]==fArr_Tags[a]&&(b=!1);1==b&&searchListTags.push(fArr_Tags[a])}searchListType.sort();searchListOccupancy.sort();searchListTags.sort();load_waitflag_linklist=1;1==load_waitflag_files&&1==load_waitflag_cluster&&1==load_waitflag_overlay&&1==load_waitflag_linklist&&jQuery("#loadpane_small").hide();jQuery("#spaces_drawing").html(new_linkList)}
function reset_color_on_selected_space(){var a=-1;if(0<=selectedLinkUnlinkLayer.indexOf("NODE_")){for(var b=0;b<fArr_Name.length;b++)0<=fArr_PolygonLayerName[b].indexOf(selectedLinkUnlinkLayer)&&(a=b);for(b=0;b<fArr_Name_fixtures.length;b++)0<=fArr_PolygonLayerName_fixtures[b].indexOf(selectedLinkUnlinkLayer)&&(a=b)}-1<a||selectedLinkUnlinkLayer.indexOf("NODE_")}
function cvjs_createSpaceLocationArrays(a,b){for(var c=0,d=0;d<a.length;d++)fArr_Name[c]=a[d],fArr_Id[c]=b[d],fArr_PolygonNr[c]=-1,fArr_PolygonLayerName[c]="none",fArr_Type[c]=-1,fArr_Occupancy[c]=-1,fArr_Tags[c]=-1,c++;for(c=0;c<fArr_Name.length-1;c++)for(d=c+1;d<fArr_Name.length;d++)fArr_Name[c].toLowerCase()>fArr_Name[d].toLowerCase()&&(a=fArr_Name[d],b=fArr_Id[d],fArr_Name[d]=fArr_Name[c],fArr_Id[d]=fArr_Id[c],fArr_Name[c]=a,fArr_Id[c]=b);for(c=0;c<fArr_Name.length;c++){fArr_PolygonNr[c]=-1;fArr_PolygonLayerName[c]=
"none";fArr_Type[c]=-1;fArr_Occupancy[c]=-1;fArr_Tags[c]=-1;for(var e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")==fArr_Id[c]&&(fArr_PolygonNr[c]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("name"),fArr_PolygonLayerName[c]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"),fArr_Layer[c]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("layer"),0<=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("type").indexOf("undefined")||
(fArr_Type[c]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("type")),0<=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("occupancy").indexOf("undefined")||(fArr_Occupancy[c]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("occupancy")),fArr_Tags[c]="")}cvjs_debug&&console.log("generate_new_linkList");generate_new_linkList()}
function change_link_space(a){currentLinkId=a;for(var b=0;b<fArr_Name.length;b++)fArr_Id[b]==a&&jQuery("#drop_link_spaces").html(fArr_Name[b]+'<b class="caret"></b>')}function change_objects_generic(a){window.alert("I have selected this from the list "+a)}var cvjs_dataMapsHeaderArray=null;
function cvjs_createDataMapsHeaders(a){cvjs_dataMapsHeaderArray=a;cvjs_debug&&console.log("cvjs_dataMapsHeaderArray "+cvjs_dataMapsHeaderArray);for(var b='<div class="dropdown-content">',c=0;4>c;c++)b=b+"<li><a href=\"javascript:cvjs_change_datamaps('"+c+"')\">"+a[c]+"</a></li>";b+="</div>";jQuery("#select_datamaps").html(b)}function allocateLayer(a){layers_all_overlay=a}function allocateLayer2(a){layers_all_overlay2=a}var cvjs_fileOverlay=!1,cvjs_firstInLineDrawingContent="",secondLoading=!1;
function cvjs_OnLoadEndCompareDrawings(){cvjs_debug&&console.log("XXXXXXXXXXXX  Compare       "+cvjs_loadCompareDrawingSwitch+"  "+cvjs_fileOverlay+" second drawing "+cvjs_compareDrawingsSecondDrawing+"  first drawing"+cvjs_compareDrawingsFirstDrawing);if(cvjs_loadSecondCompareDrawing){cvjs_loadSecondCompareDrawing=!1;cvjs_compareDrawingsSecondDrawing=current_jsFloorNames;var a=cvjs_compareDrawingsSecondDrawing=cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr];-1<a.lastIndexOf("/")&&(a=
a.substring(a.lastIndexOf("/")+1));-1<a.lastIndexOf("&filename=")&&(a=a.substring(a.lastIndexOf("&filename=")+10));if(cvjs_CompareFiles_CustomFileModalContent_flag)for(var b=0;b<cvjs_CompareFiles_CustomFileModalContent.length;b++)-1<cvjs_CompareFiles_CustomFileModalContent[b].url.indexOf(cvjs_compareDrawingsSecondDrawing)&&(a=cvjs_CompareFiles_CustomFileModalContent[b].filenameText);jQuery("#compareDrawingMenuText2_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(a);cvjs_debug&&console.log(current_jsFloorNames+
"PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP   cvjs_compareDrawingsSecondDrawing="+cvjs_compareDrawingsSecondDrawing)}cvjs_debug&&console.log("YYYYYYYYYYYY cvjs_loadSecondCompareDrawing "+cvjs_loadSecondCompareDrawing+" cvjs_OnLoadEndCompareDrawings "+cvjs_fileOverlay);try{cvjs_changeToIconPage(3)}catch(c){console.log("Page change fails "+c)}cvjs_fileOverlay&&(a="",secondLoading?(a="#main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"_secondfile",secondLoading=!1):a="#main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr],
console.log(a),jQuery(a).find("g").each(function(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)jQuery(this).hasClass(layerTable[cvjs_active_floorplan_div_nr].layers[a].layerClass)&&(firstOverlayCompareFile&&jQuery(this).addClass("firstOverlayCompareFile").removeClass(layerTable[cvjs_active_floorplan_div_nr].layers[a].layerClass),jQuery(this).find("path").each(function(){colorFlag?(jQuery(this).css("stroke","#f00"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill",
"#f00")):(jQuery(this).css("stroke","#00f"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#00f"));jQuery(this).css("opacity","1.0")}),jQuery(this).find("text").each(function(){colorFlag?(jQuery(this).css("stroke","#f00"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#f00")):(jQuery(this).css("stroke","#00f"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#00f"));jQuery(this).css("opacity","1.0")}),jQuery(this).find("circle").each(function(){colorFlag?(jQuery(this).css("stroke",
"#f00"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#f00")):(jQuery(this).css("stroke","#00f"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#00f"));jQuery(this).css("opacity","1.0")}),jQuery(this).find("ellipse").each(function(){colorFlag?(jQuery(this).css("stroke","#f00"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#f00")):(jQuery(this).css("stroke","#00f"),"none"!=jQuery(this).css("fill")&&jQuery(this).css("fill","#00f"));jQuery(this).css("opacity","1.0")}))}));
cvjs_debug&&console.log("TRY AGAIN");!firstOverlayCompareFile&&fileOverlay&&(cvjs_debug&&console.log("add layers_all_overlay"),fileOverlay=!1);1==cvjs_loadCompareDrawingSwitch&&(fileOverlay=!0,allocateLayer(layers_all),cvjs_debug&&console.log(layers_all_overlay),cvjs_setInitMasterBackgroundMode(!1),firstOverlayCompareFile=colorFlag=!1,cvjs_debug&&console.log("XXX1 cvjs_loadCompareDrawingSwitch="+cvjs_loadCompareDrawingSwitch+" cvjs_compareDrawingsSecondDrawing="+cvjs_compareDrawingsSecondDrawing),
cvjs_loadCompareDrawingSwitch=0,secondLoading=!0,cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_compareDrawingsSecondDrawing));2==cvjs_loadCompareDrawingSwitch&&(fileOverlay=!0,allocateLayer(layers_all),cvjs_debug&&console.log(layers_all_overlay),cvjs_setInitMasterBackgroundMode(!1),colorFlag=!0,firstOverlayCompareFile=!1,cvjs_debug&&console.log("XXXX2 cvjs_loadCompareDrawingSwitch="+cvjs_loadCompareDrawingSwitch+" cvjs_compareDrawingsFirstDrawing="+cvjs_compareDrawingsFirstDrawing),
cvjs_loadCompareDrawingSwitch=0,secondLoading=!0,cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_compareDrawingsFirstDrawing));1==cvjs_drawingLoadCounter&&(cvjs_drawingLoadCounter=0,cvjs_debug&&console.log("LLLLLLLLLLLL we have loaded the first file again as js cvjs_compareDrawingsFirstDrawing "+cvjs_compareDrawingsFirstDrawing),colorFlag=!1,cvjs_openFileLoadToServer(floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_loadSecondCompareDrawing=!0);cvjs_debug&&console.log("OnLoadEnd compare drawings rpaper ")}
var cvjs_loadSecondCompareDrawing=!1,cvjs_drawingLoadCounter=0,cvjs_loadSecondCompareDrawingDirect=!1,cvjs_loadSecondCompareDrawingDirect_fileName="../content/drawings/dwg_compare_drawings/hq17-2.dwg";function cvjs_setCompareDrawings_LoadSecondDrawingDirect(a,b){cvjs_loadSecondCompareDrawingDirect=!0;cvjs_loadSecondCompareDrawingDirect_fileName=b;jQuery("#floatCompareDrawingMenu_"+a).show()}function cvjs_setCompareDrawings_StandardModal(a){cvjs_loadSecondCompareDrawingDirect=!1}
function cvjs_compareDrawings_LoadSecondDrawing(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_debug&&console.log("cvjs_compareDrawings_LoadSecondDrawing(");jQuery("#floatCompareDrawingMenu_"+a).show();var b=a;a.lastIndexOf("_svg")==a.length-4&&(b=a.substring(0,a.length-4));var c=jQuery("#"+b).position();b=c.top+jQuery("#"+a).height()-75;c=c.left+jQuery("#"+a).width()-325;jQuery("#floatCompareDrawingMenu_"+a).offset({top:b,left:c});b=cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr];
-1<b.lastIndexOf("/")&&(b=b.substring(b.lastIndexOf("/")+1));-1<b.lastIndexOf("&filename=")&&(b=b.substring(b.lastIndexOf("&filename=")+10));cvjs_debug&&console.log("cvjs_CompareFiles_CustomFileModalContent_flag ="+cvjs_CompareFiles_CustomFileModalContent_flag);if(cvjs_CompareFiles_CustomFileModalContent_flag)for(c=0;c<cvjs_CompareFiles_CustomFileModalContent.length;c++){cvjs_debug&&(console.log(c+" originating file "+cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr]),console.log(c+" Content[jj].url "+
cvjs_CompareFiles_CustomFileModalContent[c].url),console.log(c+" Content[jj].text "+cvjs_CompareFiles_CustomFileModalContent[c].filenameText));var d=cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr].indexOf("/wopi/files");if(0<d){d=cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr].substring(0,d+1);var e=cvjs_CompareFiles_CustomFileModalContent[c].url.substring(cvjs_CompareFiles_CustomFileModalContent[c].url.indexOf("/wopi/files")+1);cvjs_CompareFiles_CustomFileModalContent[c].url=
d+e}cvjs_debug&&console.log(c+"NEW NEW Content[jj].url "+cvjs_CompareFiles_CustomFileModalContent[c].url);-1<cvjs_CompareFiles_CustomFileModalContent[c].url.indexOf(cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr])&&(b=cvjs_CompareFiles_CustomFileModalContent[c].filenameText)}cvjs_debug&&console.log("We have firstFile "+b+"  here before setting cvjs_compareDrawings="+cvjs_compareDrawings);jQuery("#compareDrawingMenuText1_"+a).html(b);jQuery("#compareDrawingMenuText2_"+a).html("");cvjs_compareDrawings?
cvjs_debug&&console.log("exit! currentLoadedDrawingFullName="+currentLoadedDrawingFullName):(cvjs_compareDrawingsFirstDrawing=currentLoadedDrawingFullName,cvjs_compareDrawingsFirstDrawing=cvjs_conversion_originatingFile[cvjs_active_floorplan_div_nr],cvjs_fileOverlay=cvjs_compareDrawings=!0,cvjs_toggleFlag=!1,colorFlag=!0,cvjs_drawingLoadCounter=0,cvjs_debug&&console.log(currentLoadedDrawingFullName),cvjs_OnLoadEndCompareDrawings(),colorFlag=!1,cvjs_loadSecondCompareDrawing=!0,cvjs_debug&&console.log("Here we load the drawing "+
cvjs_loadSecondCompareDrawingDirect_fileName),cvjs_loadSecondCompareDrawingDirect?cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_loadSecondCompareDrawingDirect_fileName):cvjs_openFileLoadToServer(floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_debug&&console.log("here we colour the current drawing blue, have to store the name of current drawing and load in a new drawing, that drawing is colored red"))}
var cvjs_toggleFlag=!1,cvjs_toggeDrawings=!1,cvjs_loadCompareDrawingSwitch=0;
function cvjs_compareDrawings_ToggleDrawingOverlay(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_toggleFlag=!cvjs_toggleFlag;a=cvjs_compareDrawingsFirstDrawing;-1<a.lastIndexOf("/")&&(a=a.substring(a.lastIndexOf("/")+1));-1<a.lastIndexOf("&filename=")&&(a=a.substring(a.lastIndexOf("&filename=")+10));var b=cvjs_compareDrawingsSecondDrawing;-1<b.lastIndexOf("/")&&(b=b.substring(b.lastIndexOf("/")+1));-1<b.lastIndexOf("&filename=")&&(b=b.substring(b.lastIndexOf("&filename=")+
10));if(cvjs_CompareFiles_CustomFileModalContent_flag)for(var c=0;c<cvjs_CompareFiles_CustomFileModalContent.length;c++)-1<cvjs_CompareFiles_CustomFileModalContent[c].url.indexOf(cvjs_compareDrawingsFirstDrawing)&&(a=cvjs_CompareFiles_CustomFileModalContent[c].filenameText);if(cvjs_CompareFiles_CustomFileModalContent_flag)for(c=0;c<cvjs_CompareFiles_CustomFileModalContent.length;c++)-1<cvjs_CompareFiles_CustomFileModalContent[c].url.indexOf(cvjs_compareDrawingsSecondDrawing)&&(b=cvjs_CompareFiles_CustomFileModalContent[c].filenameText);
cvjs_toggleFlag?(jQuery("#compareDrawingMenuText1_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("&darr; "+a),jQuery("#compareDrawingMenuText2_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("&uarr; "+b)):(jQuery("#compareDrawingMenuText1_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("&uarr; "+a),jQuery("#compareDrawingMenuText2_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("&darr; "+b));cvjs_toggleFlag&&(colorFlag=!0,FileName=cvjs_compareDrawingsFirstDrawing,
cvjs_loadCompareDrawingSwitch=1,cvjs_LoadDrawing(floorPlan_div,FileName));cvjs_toggleFlag||(colorFlag=!1,FileName=cvjs_compareDrawingsSecondDrawing,cvjs_loadCompareDrawingSwitch=2,cvjs_LoadDrawing(floorPlan_div,FileName));cvjs_debug&&console.log("here we have to toggle the drawings with overlay in red and blue to see the difference")}
function cvjs_compareDrawings_ToggleDrawings(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);a=cvjs_compareDrawingsFirstDrawing;-1<a.lastIndexOf("/")&&(a=a.substring(a.lastIndexOf("/")+1));-1<a.lastIndexOf("&filename=")&&(a=a.substring(a.lastIndexOf("&filename=")+10));var b=cvjs_compareDrawingsSecondDrawing;-1<b.lastIndexOf("/")&&(b=b.substring(b.lastIndexOf("/")+1));-1<b.lastIndexOf("&filename=")&&(b=b.substring(b.lastIndexOf("&filename=")+10));
if(cvjs_CompareFiles_CustomFileModalContent_flag)for(var c=0;c<cvjs_CompareFiles_CustomFileModalContent.length;c++)-1<cvjs_CompareFiles_CustomFileModalContent[c].url.indexOf(cvjs_compareDrawingsFirstDrawing)&&(a=cvjs_CompareFiles_CustomFileModalContent[c].filenameText);if(cvjs_CompareFiles_CustomFileModalContent_flag)for(c=0;c<cvjs_CompareFiles_CustomFileModalContent.length;c++)-1<cvjs_CompareFiles_CustomFileModalContent[c].url.indexOf(cvjs_compareDrawingsSecondDrawing)&&(b=cvjs_CompareFiles_CustomFileModalContent[c].filenameText);
jQuery("#compareDrawingMenuText1_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(a);jQuery("#compareDrawingMenuText2_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(b);cvjs_loadCompareDrawingSwitch=0;if(cvjs_toggleFlag=!cvjs_toggleFlag)colorFlag=!0,FileName=cvjs_compareDrawingsFirstDrawing,cvjs_LoadDrawing(floorPlan_div,FileName);cvjs_toggleFlag||(colorFlag=!1,FileName=cvjs_compareDrawingsSecondDrawing,cvjs_LoadDrawing(floorPlan_div,FileName))}
function cvjs_exitCompareDrawings(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_debug&&console.log("here we exit the compare drawings methods");cvjs_compareDrawings=cvjs_fileOverlay=!1;firstOverlayCompareFile=!0;cvjs_LoadDrawing(floorPlan_div,cvjs_compareDrawingsFirstDrawing);cvjs_CompareFiles_CustomFileModalContent_flag=!1;jQuery("#floatCompareDrawingMenu_"+a).hide()}
var cvjs_collabServerUrl="../php/collaboration/",cvjs_collabServerFolder="C:\\xampp\\htdocs\\CV-JS_2_4_1\\php\\collaboration\\",cvjs_collabSessionName="session01";function cvjs_setCollaborationSessionName(a){cvjs_collabSessionName=a}function cvjs_setCollaborationServerUrl(a){cvjs_collabServerUrl=a}function cvjs_setCollaborationServerFolder(a){cvjs_collabServerFolder=a}
function cvjs_collab_timer(){cvjs_debug&&console.log("collab_timer");if(cvjs_collab_mode){cvjs_collabPresenter||(cvjs_debug&&console.log("load redline"),cvjs_setStickyNoteRedlineUrl(cvjs_collabServerUrl+"redlines/"+cvjs_collabSessionName+".js"),cvjs_loadStickyNotesRedlines(floorplan_div_Array[cvjs_active_floorplan_div_nr]),jQuery.ajax({url:cvjs_phpPath+cvjs_serverLoadFileController+"?file="+cvjs_collabServerUrl+"viewports/"+cvjs_collabSessionName+".js",type:"post",cache:!1,success:function(a){if(-1!=
a.indexOf("viewBox_X:")){var b=a.substring(a.indexOf("viewBox_X:")+11);b=b.substring(0,b.indexOf(","));viewBox[cvjs_active_floorplan_div_nr].X=parseFloat(b);cvjs_debug&&console.log("XX"+b+"YY");b=a.substring(a.indexOf("viewBox_Y:")+11);b=b.substring(0,b.indexOf(","));cvjs_debug&&console.log("XX"+b+"YY");viewBox[cvjs_active_floorplan_div_nr].Y=parseFloat(b);b=a.substring(a.indexOf("viewBoxWidth[cvjs_active_floorplan_div_nr]:")+14);b=b.substring(0,b.indexOf(","));cvjs_debug&&console.log("XX"+b+"YY");
viewBoxWidth[cvjs_active_floorplan_div_nr]=parseFloat(b);b=a.substring(a.indexOf("viewBoxHeight[cvjs_active_floorplan_div_nr]:")+15);b=b.substring(0,b.indexOf(","));cvjs_debug&&console.log("XX"+b+"YY");viewBoxHeight[cvjs_active_floorplan_div_nr]=parseFloat(b);a=jQuery.parseJSON('{ "viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}}}));
if(cvjs_collabPresenter){cvjs_setCurrentStickyNoteValues_NameUserId(user_name,user_id);cvjs_setCurrentRedlineValues_NameUserid(user_name,user_id);cvjs_debug&&console.log("presenter save redline");cvjs_setStickyNoteSaveRedlineUrl(cvjs_collabServerFolder+"redlines/"+cvjs_collabSessionName+".js");cvjs_saveStickyNotesRedlines(floorplan_div_Array[cvjs_active_floorplan_div_nr]);var a="var cvjs_collaborationViewport = { \n viewBox_X: "+viewBox[cvjs_active_floorplan_div_nr].X+", \n viewBox_Y: "+viewBox[cvjs_active_floorplan_div_nr].Y+
", \n viewBoxWidth[cvjs_active_floorplan_div_nr]: "+viewBoxWidth[cvjs_active_floorplan_div_nr]+", \n viewBoxHeight[cvjs_active_floorplan_div_nr]: "+viewBoxHeight[cvjs_active_floorplan_div_nr]+", \n}";cvjs_debug&&console.log(viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+" "+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y);cvjs_debug&&console.log(a);var b=cvjs_serverHandlersPath+cvjs_serverSaveFileController,c={};c.file=
cvjs_collabServerFolder+"viewports/"+cvjs_collabSessionName+".js";c.file_content=a;cvjs_debug&&console.log(c.file_content+" "+c.file+"  "+b);jQuery.ajax({url:b,type:"post",data:c,success:function(a){}})}1==cvjs_collab_mode&&setTimeout(function(){cvjs_collab_timer()},500)}}var collaboration_start_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_start_collab(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);collaboration_start_offset_flag[cvjs_active_floorplan_div_nr]&&(collaboration_start_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#collabStartModal_"+a).css({position:"fixed"}),jQuery("#collabStartModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}).appendTo("body"));jQuery("#collabStartModal_"+a).show()}
function cvjs_exit_startcollabmodal(a){jQuery("#collabStartModal_"+a).hide()}function cvjs_start_collab_button(a){jQuery("#collabStartModal_"+a).hide();cvjs_collabSessionName=jQuery("#cvjs_collabSessionInput").val();cvjs_collabPresenter=!1;cvjs_collab_mode=!0;cvjs_collab_timer()}
function cvjs_stop_collab(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_collabPresenter=cvjs_collab_mode=!1;cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]);console.log("leaving collab session")}
function cvjs_clear_collab_redline(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_collabPresenter&&(cvjs_debug&&console.log("clear redline"),cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_saveStickyNotesRedlines(floorplan_div_Array[cvjs_active_floorplan_div_nr]))}
function cvjs_make_collab_presenter(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_collabPresenter=!cvjs_collabPresenter}function cvjs_downloadFile(a){window.location.href=a}function cvjs_SVGtoOriginal_X_coord(a,b){var c=Number(cvjs_drawingCoordinates[b].lowerLeft.x);return c+(a-actualLLX[cvjs_active_floorplan_div_nr])/rpWidth[cvjs_active_floorplan_div_nr]*(Number(cvjs_drawingCoordinates[b].upperRight.x)-c)}
function cvjs_SVGtoOriginal_Y_coord(a,b){var c=Number(cvjs_drawingCoordinates[b].lowerLeft.y);return c+(a-actualLLY[cvjs_active_floorplan_div_nr])/rpHeight[cvjs_active_floorplan_div_nr]*(Number(cvjs_drawingCoordinates[b].upperRight.y)-c)}
var cvjs_currentSVGHyperLinkID="",cvjs_currentSVGHyperLinkCSS=[],cvjs_currentSVGHyperLinkClassList=[],cvjs_SVGHyperLinkCSSAll=[],cvjs_SVGHyperLinkCSSAll_Org=[],cvjs_SVGHyperLinkCSSAll_XDrag=0,cvjs_SVGHyperLinkCSSAll_YDrag=0,cvjs_SVGHyperLinkCSSAll_MouseDown=!1,cvjs_SVGHyperLinkCSSAll_MouseMoveFirst=!0,cvjs_SVGHyperLink_firstFingerX=0,cvjs_SVGHyperLink_firstFingerY=0,cvjs_SVGHyperLink_firstFingerX_m=0,cvjs_SVGHyperLink_firstFingerY_m=0,cvjs_SVGHyperLink_secondFingerX=0,cvjs_SVGHyperLink_secondFingerY=
0,cvjs_SVGHyperLink_secondFingerX_m=0,cvjs_SVGHyperLink_secondFingerY_m=0,cvjs_SVGHyperLink_pinch=!1,cvjs_SVGHyperLink_deltaXinit,cvjs_SVGHyperLink_deltaYinit,cvjs_SVGHyperLink_deltaX,cvjs_SVGHyperLink_deltaY,cvjs_SVGHyperLink_deltaBase,cvjs_SVGHyperLink_deltaDynamicPre,cvjs_SVGHyperLink_deltaDynamic,cvjs_SVGHyperLink_viewBoxWidthPre,cvjs_SVGHyperLink_viewBoxHeightPre,cvjs_SVGHyperLink_pinch_touchend=!1,cvjs_SVGHyperLink_vboxX=0,cvjs_SVGHyperLink_vboxY=0,cvjs_SVGHyperLink_moveX=0,cvjs_SVGHyperLink_moveY=
0,cvjs_SVGHyperLink_current=0,cvjs_SVGHyperLink_deltaPinchRedraw=50,cvjs_floorplan_div="";
function cvjs_InitializeSVGHyperlinkClick(a){var b=0;cvjs_SVGHyperLinkCSSAll=[];var c=[];cvjs_floorplan_div=a;cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);isSmartPhoneOrTablet=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Touch/i.test(navigator.userAgent);jQuery("a.hyperlink").each(function(){try{var a=jQuery(this).attr("id"),e=jQuery(this).attr("xlink:href"),f=jQuery(this).children()[0].id;cvjs_SVGHyperLinkCSSAll[b]=[];cvjs_SVGHyperLinkCSSAll[b][0]=f;cvjs_SVGHyperLinkCSSAll[b][1]=jQuery("#"+f).css("fill");
cvjs_SVGHyperLinkCSSAll[b][2]=jQuery("#"+f).css("fill-opacity");cvjs_SVGHyperLinkCSSAll[b][3]=jQuery("#"+f).css("stroke");cvjs_SVGHyperLinkCSSAll[b][4]=jQuery("#"+f).css("stroke-width");cvjs_SVGHyperLinkCSSAll[b][5]=jQuery("#"+f).css("stroke-opacity");cvjs_SVGHyperLinkCSSAll[b][6]=jQuery("#"+f).css("opacity");c[b]=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(jQuery("#"+f).attr("d")).attr({fill:"#FFFFFF",stroke:"#BBBBBB","fill-opacity":"0.01","stroke-opacity":1,"stroke-width":.8*cvjs_redlineThickness_scaleFactor}).data("node",
b);cvjs_SVGHyperLinkCSSAll[b][7]=c[b];cvjs_SVGHyperLinkCSSAll[b][8]=a;cvjs_SVGHyperLinkCSSAll[b][9]=e;cvjs_SVGHyperLinkCSSAll[b][10]=jQuery("#"+f).css("fill");cvjs_SVGHyperLinkCSSAll[b][11]=jQuery("#"+f).css("fill-opacity");cvjs_SVGHyperLinkCSSAll[b][12]=!1;cvjs_SVGHyperLinkCSSAll[b][7].mousedown(function(a){console.log("mousedown");cvjs_SVGHyperLinkCSSAll_Drag||isSmartPhoneOrTablet||(cvjs_SVGHyperLinkCSSAll_Drag=!0,cvjs_SVGHyperLinkCSSAll_XDrag=a.pageX,cvjs_SVGHyperLinkCSSAll_YDrag=a.pageY,cvjs_SVGHyperLink_vboxX=
viewBox[cvjs_active_floorplan_div_nr].X,cvjs_SVGHyperLink_vboxY=viewBox[cvjs_active_floorplan_div_nr].Y)}).mouseover(function(a){console.log("mouseover");cvjs_SVGHyperLink_current=this.data("node");cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][7].attr({fill:highlight_Hyperlinks.fill,"fill-opacity":"0.8"});for(var b=0;b<cvjs_SVGHyperLinkCSSAll.size;b++)cvjs_SVGHyperLink_current!=b&&(cvjs_SVGHyperLinkCSSAll[b][12]?cvjs_SVGHyperLinkCSSAll[b][7].attr({fill:cvjs_SVGHyperLinkCSSAll[b][10],"fill-opacity":cvjs_SVGHyperLinkCSSAll[b][11]}):
cvjs_SVGHyperLinkCSSAll[b][7].attr({fill:"#FFFFFF","fill-opacity":"0.01"}));cvjs_SVGHyperLink_pinch_touchend&&(cvjs_SVGHyperLink_pinch_touchend=!1,cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][7].attr({fill:"#FFFFFF","fill-opacity":"0.01"}));b=cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][8];tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var c=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?
tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-c.left+document.documentElement.scrollLeft+10).css("top",a.clientY-c.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show()}).mouseout(function(a){console.log("mouseout");a=this.data("node");cvjs_SVGHyperLinkCSSAll[a][12]?
cvjs_SVGHyperLinkCSSAll[a][7].attr({fill:cvjs_SVGHyperLinkCSSAll[a][10],"fill-opacity":cvjs_SVGHyperLinkCSSAll[a][11]}):cvjs_SVGHyperLinkCSSAll[a][7].attr({fill:"#FFFFFF","fill-opacity":"0.01"});tip[cvjs_active_floorplan_div_nr].hide()}).mousemove(function(a){if(cvjs_SVGHyperLinkCSSAll_Drag&&!isSmartPhoneOrTablet){console.log("dragging this component");var b="drag "+a.clientX+" "+a.clientY+"  "+cvjs_SVGHyperLinkCSSAll_XDrag+" "+cvjs_SVGHyperLinkCSSAll_YDrag;console.log(b);b=viewBoxWidth[cvjs_active_floorplan_div_nr]/
jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();var c=viewBoxHeight[cvjs_active_floorplan_div_nr]/jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();b=b>c?b:c;pdx=(a.clientX-cvjs_SVGHyperLinkCSSAll_XDrag)*b;pdy=(a.clientY-cvjs_SVGHyperLinkCSSAll_YDrag)*b;viewBox[cvjs_active_floorplan_div_nr].X=cvjs_SVGHyperLink_vboxX-pdx;viewBox[cvjs_active_floorplan_div_nr].Y=cvjs_SVGHyperLink_vboxY-pdy;a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+
" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}console.log("mousemove")}).mouseup(function(a){console.log("mouseup");cvjs_SVGHyperLinkCSSAll_Drag=!1;isSmartPhoneOrTablet||(a=Math.sqrt(Math.pow(a.clientX-cvjs_SVGHyperLinkCSSAll_XDrag,2)+Math.pow(a.clientY-cvjs_SVGHyperLinkCSSAll_YDrag,2)),4>a&&!isSmartPhoneOrTablet&&(a=this.data("node"),cvjs_OnHyperlinkClick(cvjs_SVGHyperLinkCSSAll[a][9])));
if(isSmartPhoneOrTablet)if(a=Math.sqrt(Math.pow(cvjs_SVGHyperLink_moveX-cvjs_SVGHyperLinkCSSAll_XDrag,2)+Math.pow(cvjs_SVGHyperLink_moveY-cvjs_SVGHyperLinkCSSAll_YDrag,2)),4>a){a=this.data("node");for(var b=0;b<cvjs_SVGHyperLinkCSSAll.length;b++)a!=b&&(cvjs_SVGHyperLinkCSSAll[b][12]?cvjs_SVGHyperLinkCSSAll[b][7].attr({fill:cvjs_SVGHyperLinkCSSAll[b][10],"fill-opacity":cvjs_SVGHyperLinkCSSAll[b][11]}):cvjs_SVGHyperLinkCSSAll[b][7].attr({fill:"#FFFFFF","fill-opacity":"0.01"}));cvjs_OnHyperlinkClick(cvjs_SVGHyperLinkCSSAll[a][9]);
cvjs_SVGHyperLink_current=a}else a=this.data("node"),a!=cvjs_SVGHyperLink_current&&(cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][12]?cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][7].attr({fill:cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][10],"fill-opacity":cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][11]}):cvjs_SVGHyperLinkCSSAll[cvjs_SVGHyperLink_current][7].attr({fill:"#FFFFFF","fill-opacity":"0.01"}),cvjs_SVGHyperLink_current=a)}).touchstart(function(a){cvjs_SVGHyperLink_moveX=
a.touches[0].pageX;cvjs_SVGHyperLink_moveY=a.touches[0].pageY;cvjs_SVGHyperLink_firstFingerX=a.touches[0].pageX;cvjs_SVGHyperLink_firstFingerY=a.touches[0].pageY;try{cvjs_SVGHyperLink_secondFingerX=a.touches[1].pageX,cvjs_SVGHyperLink_secondFingerY=a.touches[1].pageY,cvjs_SVGHyperLink_pinch=!0,cvjs_SVGHyperLink_deltaXinit=cvjs_SVGHyperLink_secondFingerX-cvjs_SVGHyperLink_firstFingerX,cvjs_SVGHyperLink_deltaYinit=cvjs_SVGHyperLink_secondFingerY-cvjs_SVGHyperLink_firstFingerY,cvjs_SVGHyperLink_deltaDynamicPre=
cvjs_SVGHyperLink_deltaBase=Math.sqrt(cvjs_SVGHyperLink_deltaXinit*cvjs_SVGHyperLink_deltaXinit+cvjs_SVGHyperLink_deltaYinit*cvjs_SVGHyperLink_deltaYinit),cvjs_SVGHyperLink_viewBoxWidthPre=viewBoxWidth[cvjs_active_floorplan_div_nr],cvjs_SVGHyperLink_viewBoxHeightPre=viewBoxHeight[cvjs_active_floorplan_div_nr],cvjs_SVGHyperLink_vboxX=viewBox[cvjs_active_floorplan_div_nr].X,cvjs_SVGHyperLink_vboxY=viewBox[cvjs_active_floorplan_div_nr].Y}catch(k){cvjs_SVGHyperLink_pinch=!1}cvjs_SVGHyperLinkCSSAll_Drag||
(cvjs_SVGHyperLinkCSSAll_Drag=!0,cvjs_SVGHyperLinkCSSAll_XDrag=cvjs_SVGHyperLink_firstFingerX,cvjs_SVGHyperLinkCSSAll_YDrag=cvjs_SVGHyperLink_firstFingerY,cvjs_SVGHyperLink_vboxX=viewBox[cvjs_active_floorplan_div_nr].X,cvjs_SVGHyperLink_vboxY=viewBox[cvjs_active_floorplan_div_nr].Y);a="touchstart hyperlink "+cvjs_SVGHyperLink_firstFingerX+" "+cvjs_SVGHyperLink_firstFingerY+"  "+cvjs_SVGHyperLinkCSSAll_Drag;cvjs_debug&&console.log(a);a=this.data("node");cvjs_SVGHyperLinkCSSAll[a][7].attr({fill:highlight_Hyperlinks.fill,
"fill-opacity":"0.8"});a=cvjs_SVGHyperLinkCSSAll[a][8];tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",cvjs_SVGHyperLink_firstFingerX+document.documentElement.scrollLeft+10).css("top",cvjs_SVGHyperLink_firstFingerY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",
cvjs_SVGHyperLink_firstFingerX-b.left+document.documentElement.scrollLeft+10).css("top",cvjs_SVGHyperLink_firstFingerY-b.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(a);tip[cvjs_active_floorplan_div_nr].show()}).touchend(function(a){tip[cvjs_active_floorplan_div_nr].hide();cvjs_SVGHyperLink_firstFingerX_m=a.touches[0].pageX;cvjs_SVGHyperLink_firstFingerY_m=a.touches[0].pageY;if(cvjs_SVGHyperLink_pinch)for(cvjs_SVGHyperLink_pinch=!1,cvjs_SVGHyperLink_pinch_touchend=
!0,a=0;a<cvjs_SVGHyperLinkCSSAll.length;a++)cvjs_SVGHyperLinkCSSAll[a][12]?cvjs_SVGHyperLinkCSSAll[a][7].attr({fill:cvjs_SVGHyperLinkCSSAll[a][10],"fill-opacity":cvjs_SVGHyperLinkCSSAll[a][11]}):cvjs_SVGHyperLinkCSSAll[a][7].attr({fill:"#FFFFFF","fill-opacity":"0.01"});console.log("touchend")}).touchmove(function(a){cvjs_SVGHyperLink_firstFingerX_m=a.touches[0].pageX;cvjs_SVGHyperLink_firstFingerY_m=a.touches[0].pageY;cvjs_SVGHyperLink_moveX=a.touches[0].pageX;cvjs_SVGHyperLink_moveY=a.touches[0].pageY;
try{cvjs_SVGHyperLink_secondFingerX_m=a.touches[1].pageX,cvjs_SVGHyperLink_secondFingerY_m=a.touches[1].pageY,cvjs_SVGHyperLink_pinch=!0,a.stopPropagation(),a.preventDefault()}catch(k){}console.log("touchmove");if(cvjs_SVGHyperLinkCSSAll_Drag){if(cvjs_SVGHyperLink_pinch)cvjs_SVGHyperLink_deltaX=cvjs_SVGHyperLink_secondFingerX_m-cvjs_SVGHyperLink_firstFingerX_m,cvjs_SVGHyperLink_deltaY=cvjs_SVGHyperLink_secondFingerY_m-cvjs_SVGHyperLink_firstFingerY_m,cvjs_SVGHyperLink_deltaDynamicPre=cvjs_SVGHyperLink_deltaDynamic=
Math.sqrt(cvjs_SVGHyperLink_deltaX*cvjs_SVGHyperLink_deltaX+cvjs_SVGHyperLink_deltaY*cvjs_SVGHyperLink_deltaY),viewBox[cvjs_active_floorplan_div_nr].X=cvjs_SVGHyperLink_vboxX,viewBox[cvjs_active_floorplan_div_nr].Y=cvjs_SVGHyperLink_vboxY,vBHo=cvjs_SVGHyperLink_viewBoxHeightPre,vBWo=cvjs_SVGHyperLink_viewBoxWidthPre,viewBoxWidth[cvjs_active_floorplan_div_nr]=cvjs_SVGHyperLink_viewBoxWidthPre,viewBoxHeight[cvjs_active_floorplan_div_nr]=cvjs_SVGHyperLink_viewBoxHeightPre,viewBoxWidth[cvjs_active_floorplan_div_nr]/=
cvjs_SVGHyperLink_deltaDynamic/cvjs_SVGHyperLink_deltaBase,viewBoxHeight[cvjs_active_floorplan_div_nr]/=cvjs_SVGHyperLink_deltaDynamic/cvjs_SVGHyperLink_deltaBase,viewBox[cvjs_active_floorplan_div_nr].X-=(viewBoxWidth[cvjs_active_floorplan_div_nr]-vBWo)/2,viewBox[cvjs_active_floorplan_div_nr].Y-=(viewBoxHeight[cvjs_active_floorplan_div_nr]-vBHo)/2,zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr],a='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+
viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }',a=jQuery.parseJSON(a);else{console.log("dragging this component");a="drag "+cvjs_SVGHyperLink_firstFingerX_m+" "+cvjs_SVGHyperLink_firstFingerY_m+"  "+cvjs_SVGHyperLinkCSSAll_XDrag+" "+cvjs_SVGHyperLinkCSSAll_YDrag;console.log(a);a=viewBoxWidth[cvjs_active_floorplan_div_nr]/jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();var b=viewBoxHeight[cvjs_active_floorplan_div_nr]/
jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=a>b?a:b;pdx=(cvjs_SVGHyperLink_firstFingerX_m-cvjs_SVGHyperLinkCSSAll_XDrag)*a;pdy=(cvjs_SVGHyperLink_firstFingerY_m-cvjs_SVGHyperLinkCSSAll_YDrag)*a;viewBox[cvjs_active_floorplan_div_nr].X=cvjs_SVGHyperLink_vboxX-pdx;viewBox[cvjs_active_floorplan_div_nr].Y=cvjs_SVGHyperLink_vboxY-pdy;a='{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+
" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }';a=jQuery.parseJSON(a)}cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a)}});cvjs_SVGHyperLinkCSSAll_Org[b]=[];cvjs_SVGHyperLinkCSSAll_Org[b][0]=f;cvjs_SVGHyperLinkCSSAll_Org[b][1]=jQuery("#"+f).css("fill");cvjs_SVGHyperLinkCSSAll_Org[b][2]=jQuery("#"+f).css("fill-opacity");cvjs_SVGHyperLinkCSSAll_Org[b][3]=jQuery("#"+f).css("stroke");cvjs_SVGHyperLinkCSSAll_Org[b][4]=jQuery("#"+f).css("stroke-width");cvjs_SVGHyperLinkCSSAll_Org[b][5]=jQuery("#"+
f).css("stroke-opacity");cvjs_SVGHyperLinkCSSAll_Org[b][6]=jQuery("#"+f).css("opacity");b++}catch(g){console.log(g)}});cvjs_LayerOff("URLs")}
function cvjs_colorSingleSVGHyperlink(a,b,c){jQuery("a.hyperlink").each(function(){var d=jQuery(this).attr("id");if(0==d.indexOf(a)&&a.length==d.length){var e=jQuery(this).children()[0].id;for(var f=-1,g=0;g<cvjs_SVGHyperLinkCSSAll.length;g++)cvjs_SVGHyperLinkCSSAll[g][0]==e&&(f=g,cvjs_SVGHyperLinkCSSAll[f][7].attr({fill:b,"fill-opacity":c}),cvjs_SVGHyperLinkCSSAll[f][10]=b,cvjs_SVGHyperLinkCSSAll[f][11]=c,cvjs_SVGHyperLinkCSSAll[f][12]=!0);cvjs_SVGHyperLinkCSSAll[f][1]=b;cvjs_SVGHyperLinkCSSAll[f][2]=
c;cvjs_SVGHyperLinkCSSAll[f][3]=b;cvjs_SVGHyperLinkCSSAll[f][5]=c;cvjs_SVGHyperLinkCSSAll[f][6]=c;cvjs_debug&&console.log("path_id "+e+" mypos "+f);cvjs_currentSVGHyperLinkID=e;e="#"+e;jQuery(e).css("fill",b);jQuery(e).css("fill-opacity",c);jQuery(e).css("stroke",b);jQuery(e).css("stroke-opacity",c);jQuery(e).css("opacity",c);cvjs_debug&&console.log(d+"  "+e+" "+b+"  "+c)}})}
function cvjs_resetSVGHyperlinkColors(){var a=0;jQuery("a.hyperlink").each(function(){try{var b=jQuery(this).children()[0].id;cvjs_SVGHyperLinkCSSAll[a][1]=cvjs_SVGHyperLinkCSSAll_Org[a][1];cvjs_SVGHyperLinkCSSAll[a][2]=cvjs_SVGHyperLinkCSSAll_Org[a][2];cvjs_SVGHyperLinkCSSAll[a][3]=cvjs_SVGHyperLinkCSSAll_Org[a][3];cvjs_SVGHyperLinkCSSAll[a][4]=cvjs_SVGHyperLinkCSSAll_Org[a][4];cvjs_SVGHyperLinkCSSAll[a][5]=cvjs_SVGHyperLinkCSSAll_Org[a][5];cvjs_SVGHyperLinkCSSAll[a][6]=cvjs_SVGHyperLinkCSSAll_Org[a][6];
cvjs_SVGHyperLinkCSSAll[a][7].attr({fill:"FFFFFF","fill-opacity":.01});cvjs_SVGHyperLinkCSSAll[a][12]=!1;jQuery("#"+b).css("fill",cvjs_SVGHyperLinkCSSAll[a][1]);jQuery("#"+b).css("fill-opacity",cvjs_SVGHyperLinkCSSAll[a][2]);jQuery("#"+b).css("stroke",cvjs_SVGHyperLinkCSSAll[a][3]);jQuery("#"+b).css("stroke-width",cvjs_SVGHyperLinkCSSAll[a][4]);jQuery("#"+b).css("stroke-opacity",cvjs_SVGHyperLinkCSSAll[a][5]);jQuery("#"+b).css("opacity",cvjs_SVGHyperLinkCSSAll[a][6]);a++}catch(c){console.log(c)}})}
function cvjs_makeLegendUpperRightDiv(a,b,c,d,e,f,g,h,k,l,m,p,n,q){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(n+"_svg");cvjs_makeLegendUpperRight(a,b,c,d,e,f,g,h,k,l,m,p,q)}
function cvjs_makeLegendUpperRight(a,b,c,d,e,f,g,h,k,l,m,p,n){a=actualLLX[cvjs_active_floorplan_div_nr]+rpWidth[cvjs_active_floorplan_div_nr]*(1+a);b=actualLLY[cvjs_active_floorplan_div_nr]+rpHeight[cvjs_active_floorplan_div_nr]*b;d*=rpHeight[cvjs_active_floorplan_div_nr];e=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(a-rpHeight[cvjs_active_floorplan_div_nr]*h[0]*1.6,b,e).attr(f);c.add(e);e.attr({"font-size":d});e.attr({fill:g});b+=1.01*d;g=JSON.stringify(n);g=g.toString();e=g.split(",");g=.5;for(n=
0;n<e.length;n++)f=e[n],-1<f.indexOf('"fill-opacity"')&&(g=f.substring(f.indexOf(":")+1),-1<g.indexOf("}")&&(g=g.substring(0,g.indexOf("}"))));g=g.substring(1);g=g.substring(0,g.length-1);g=Number(g);for(n=0;n<k.length;n++)d=rpHeight[cvjs_active_floorplan_div_nr]*h[n],0<n&&(b+=1.05*d),e=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(a,b,k[n]).attr(l[n]),c.add(e),e.attr({"font-size":d}),e.attr({fill:m[n]}),e=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(a-1.5*d,b-.75*d,.8*d,.8*d).attr({fill:p[n],
"fill-opacity":g}),c.add(e);cvjs_addedObjectsToExtents=!0;cvjs_resetZoomPan()}
function cvjs_changeText_On_BlockHandle(a,b){var c={};jQuery(".cvjs_block").each(function(){var a=jQuery(this).attr("id");c[a]||(c[a]=!0)});for(var d in c)try{var e="#"+d,f="";jQuery(e).each(function(){jQuery.each(this.attributes,function(){if(this.specified&&(f="cvjs:handle"==this.name.toString().toLowerCase()?this.value:"",0==f.indexOf(a)))for(var c=jQuery(e).html(),d=0;-1<c.indexOf("id=");){var k=c.substring(c.indexOf("id=")+4);k="#"+k.substring(0,k.indexOf('"'));jQuery(k).text(b[d]);jQuery(k).css("visibility",
"visible");c=c.substring(c.indexOf("id=")+4);d++;if(d==b.length)break}})})}catch(g){console.log(g)}}
function cvjs_changeText_On_BlockHandleDiv(a,b,c){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c+"_svg");var d=!1,e={};jQuery(".cvjs_block").each(function(){var a=jQuery(this).attr("id"),b="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]";jQuery("#"+a).parents(b).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(e[a]||(e[a]=!0))});for(var f in e)try{var g="#"+f,h="";jQuery(g).each(function(){jQuery.each(this.attributes,function(){if(this.specified&&(h="cvjs:handle"==this.name.toString().toLowerCase()?
this.value:"",0==h.indexOf(a))){for(var c=jQuery(g).html(),e=0;-1<c.indexOf("id=");){var f=c.substring(c.indexOf("id=")+4);f="#"+f.substring(0,f.indexOf('"'));jQuery(f).text(b[e]);jQuery(f).css("visibility","visible");c=c.substring(c.indexOf("id=")+4);e++;d=!0;if(e==b.length)return!0}return d=!0}})})}catch(k){console.log(k)}return d?!0:!1}
function cvjs_makeStampUpperRightDiv(a,b,c,d,e,f,g,h,k,l,m,p,n){n+="_svg";cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(n);window.alert(n+" "+cvjs_active_floorplan_div_nr);cvjs_makeStampUpperRight(a,b,c,d,e,f,g,h,k,l,m,p)}var cvjs_customLayerContentAdded=!1,cvjs_customLayerContent;
function cvjs_makeStampUpperRight(a,b,c,d,e,f,g,h,k,l,m,p){var n=actualLLX[cvjs_active_floorplan_div_nr]+rpWidth[cvjs_active_floorplan_div_nr]*(1+a),q=actualLLY[cvjs_active_floorplan_div_nr]+rpHeight[cvjs_active_floorplan_div_nr]*b,r=actualLLY[cvjs_active_floorplan_div_nr]+rpHeight[cvjs_active_floorplan_div_nr]*b;if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]){var t=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox();n=t.x+t.width*(1+a);q=t.y+t.height*b;r=t.y+t.height*b}b=rpHeight[cvjs_active_floorplan_div_nr]*
d;t=rpHeight[cvjs_active_floorplan_div_nr]*d;a=.1*t;cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]&&(t=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox(),b=t.height*d,t=t.height*d);for(var u=0;u<e.length;u++){var v=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(n,q,e[u]).attr(f);c.add(v);v.attr({"font-size":.95*b});v.attr({fill:g});q+=1.05*t}d=b/d;for(u=0;u<k.length;u++)for(t=d*h[u],0<u&&(q+=1.05*t),f=0;f<k[u].length;f++)v=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(n+5*t*f,q,k[u][f]).attr(l[u]),
c.add(v),v.attr({"font-size":.95*t}),v.attr({fill:m[u]});q=c.getBBox();m=q.x-.02*q.width;n=q.y-.02*q.height;l=1.04*q.width;f=1.04*q.height;q=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(m,n,l,f).attr({stroke:p,"fill-opacity":"0.1",fill:"none","stroke-width":a});c.add(q);q=r;for(u=0;u<e.length;u++)t=b,r=cvjs_rPaper[cvjs_active_floorplan_div_nr].line(m,q+.15*t,m+l,q+.15*t).attr({stroke:p,"fill-opacity":"0.1",fill:"none","stroke-width":a}),c.add(r),q+=1.05*t;e=q-1.05*t;for(u=0;u<k.length-1;u++)t=d*
h[u],0<u&&(q+=1.05*t),r=cvjs_rPaper[cvjs_active_floorplan_div_nr].line(m,q+.15*t,m+l,q+.15*t).attr({stroke:p,"fill-opacity":"0.1",fill:"none","stroke-width":a}),c.add(r);1==k.length&&(t=d*h[0]);r=cvjs_rPaper[cvjs_active_floorplan_div_nr].line(m+5*t,e+.15*t,m+5*t,n+f).attr({stroke:p,"fill-opacity":"0.1",fill:"none","stroke-width":a});c.add(r);cvjs_customLayerContentAdded=!0;cvjs_customLayerContent=cvjs_rPaper[cvjs_active_floorplan_div_nr].g();cvjs_customLayerContent.add(c);cvjs_addedObjectsToExtents=
!0;cvjs_resetZoomPan()}function cvjs_saveStamp(a,b,c){cvjs_saveCustomSVGLayer(a,b,c)}
function cvjs_saveCustomSVGLayer(a,b,c,d){void 0==d&&(d="");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);b=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();b='<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"'+(' width="'+b.width+'" height="'+
b.height+'" viewbox="'+b.x+" "+b.y+" "+b.width+" "+b.height+'"');var e=cvjs_serverHandlersPath+cvjs_serverSaveFileController,f={};f.file=a;f.file_content=b+' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >'+c+"</svg>";f.custom_content=d;jQuery.ajax({url:e,type:"post",data:f,success:function(a){},error:function(a){console.log("Error "+a)}})}var cvjs_serverSVGtoPDFConverterController="convert-svg-to-pdf.php";
function cvjs_saveFloorplanAsPDF(a,b,c){void 0==c&&(c="");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);var d=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();d='<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"'+(' width="'+d.width+'" height="'+
d.height+'" viewbox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'"');d+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);b=d+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>";d=cvjs_serverHandlersPath+cvjs_serverSaveFileController;var e={},f=a.lastIndexOf("."),g=a.substring(0,f)+".svg";e.file=g;e.file_content=b;e.custom_content=c;cvjs_debug&&
console.log("make pdf "+g+"  "+d);jQuery.ajax({url:d,type:"post",data:e,success:function(b){cvjs_debug&&console.log("Save floorplan: "+b);b=cvjs_serverHandlersPath+cvjs_serverSVGtoPDFConverterController;var c={};c.pdf_file=a;c.svg_file=g;jQuery.ajax({url:b,type:"post",data:c,success:function(a){cvjs_debug&&console.log("PDF file is now created: "+a)}})},error:function(a){console.log("Error "+a)}})}
function cvjs_saveFloorplanAsPDFtoSharePoint(a,b,c,d,e){void 0==e&&(e="");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);var f=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();f='<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"'+(' width="'+
f.width+'" height="'+f.height+'" viewbox="'+f.x+" "+f.y+" "+f.width+" "+f.height+'"');f+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);b=f+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>";f=cvjs_serverHandlersPath+cvjs_serverSaveFileController;var g={},h=a.lastIndexOf("."),k=a.substring(0,h)+".svg";g.file=k;g.file_content=b;g.custom_content=
e;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Thumbnails+"</div></td></tr></table>");cvjs_setLooperPosition();
jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(100);cvjs_debug&&console.log("make pdf "+k+"  "+f);jQuery.ajax({url:f,type:"post",data:g,success:function(b){console.log("Save floorplan: "+b);b=cvjs_serverHandlersPath+cvjs_serverSVGtoPDFConverterController;var e={};e.pdf_file=a;e.svg_file=k;jQuery.ajax({url:b,type:"post",data:e,success:function(b){cvjs_debug&&console.log("PDF created on server: "+b);b=cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadfile.php";var e=
{};e.localfilename=a;e.targetUrl=c;e.user_name=d;jQuery.ajax({url:b,type:"post",data:e,success:function(a){cvjs_debug&&console.log("PDF file is now uploaded to SharePoint server: "+a);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();window.location.reload()}})}})},error:function(a){console.log("Error "+a)}})}
function getByteLen(a){a=String(a);for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);b+=128>d?1:2048>d?2:65536>d?3:2097152>d?4:67108864>d?5:-2147483648>d?6:Number.NaN}return b}
function cvjs_saveFloorplanAsSVG(a,b,c){void 0==c&&(c="");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);var d=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();d='<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"'+(' width="'+d.width+'" height="'+
d.height+'" viewbox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'"');d+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);b=d+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>";d=cvjs_serverHandlersPath+cvjs_serverSaveFileController;var e={};e.file=a;e.file_content=b;e.custom_content=c;jQuery.ajax({url:d,type:"post",data:e,success:function(a){},
error:function(a){console.log("Error "+a)}})}
function cvjs_mergePDFwithRedlines(a,b,c,d){d=cvjs_serverHandlersPath+cvjs_serverMergePHPFileController;var e={};e.filePath=a;e.fileName=c;jQuery.ajax({url:d,type:"post",data:e,success:function(a){a=b+"/"+c+"_merged.pdf";var d=b+"/"+c+"_merged.pdf";-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");var e=window.open("","CADViewer - Print","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize);
e.document.write('<!DOCTYPE html><html><title>CADViewer - Print</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');e.document.write('<script type="text/javascript">');e.document.write("jQuery(window).on('beforeunload', function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+d+"', cache: false, success: function(html){}});  }); jQuery(window).on('unload', function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+
"/"+cvjs_serverDeleteFileController+"?file="+d+"', cache: false, success: function(html){}})  }); window.onbeforeunload = function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+d+"', cache: false, success: function(html){}}) }; \x3c/script>");e.document.write('</head><body><div id="pdf">');e.document.write('<object width="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+'" height="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize*2339/
1654+'" type="application/pdf" data="'+a+'" id="pdf_content"><p>Please install a PDF viewer, the CADViewer batch file PDF cannot be displayed.</p></object></div></body></html>');e.document.close();e.focus()},error:function(a){console.log("Error "+a)}})}function cvjs_loadStamp(a,b,c){cvjs_customLayerContentAdded=!0;cvjs_customLayerContent=cvjs_rPaper[cvjs_active_floorplan_div_nr].g();cvjs_customLayerContent.add(c);cvjs_loadCustomSVGLayer(a,b,c)}
function cvjs_loadCustomSVGLayer(a,b,c){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);var d=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox(),e="";e=cvjs_bitmapFileNameIsServerPath_flag?cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+a:a;cvjs_rPaper[cvjs_active_floorplan_div_nr].svg(0,0,d.width,d.height);Snap.load(e,function(a){try{c.add(a),cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox(),cvjs_addedObjectsToExtents=!0,cvjs_resetZoomPan(b)}catch(g){window.alert(g)}})}
function cvjs_LoadDrawingAborted(a,b){console.log("Return call from LoadDrawing, another drawing is currently being loaded, so we wait 1.0 seconds....");setTimeout(function(){cvjs_LoadDrawing(a,b)},1E3)}function cvjs_hideNavigationMenu(a){a="#floatNavigationMenu_"+a+"_svg";jQuery(a).is(":visible")&&jQuery(a).hide()}function cvjs_checkRoomHandleDiv(a,b){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b+"_svg");return-1!=findFixtureIndex(a)?!0:!1}
function cvjs_checkBlockHandleDiv(a,b){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b+"_svg");var c=!1,d={};jQuery(".cvjs_block").each(function(){var a=jQuery(this).attr("id"),b="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]";jQuery("#"+a).parents(b).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(d[a]||(d[a]=!0))});for(var e in d)try{var f="";jQuery("#"+e).each(function(){jQuery.each(this.attributes,function(){if(this.specified&&(f="cvjs:handle"==this.name.toString().toLowerCase()?
this.value:"",0==f.indexOf(a)))return c=!0})})}catch(g){console.log(g)}return c?!0:!1}
function cvjs_getStickyNoteInfo(){for(var a="",b=0;b<vqStickyNotes.length;b++)0<b&&(a+="\n"),a=a+"<StickyNote><UserId>"+vqStickyNotes[b].data("userid")+"</UserId><Id>"+vqStickyNotes[b].data("id")+"</Id><Name>"+vqStickyNotes[b].data("name")+"</Name><Date>"+vqStickyNotes[b].data("date")+"</Date><Text>"+vqStickyNotes[b].data("text")+"</Text><Page>"+vqStickyNotes[b].data("currentPage")+"</Page></StickyNote>";return a}
function cvjs_saveStickyNoteInfo(a,b,c){void 0==c&&(c="");b="";for(var d=0;d<vqStickyNotes.length;d++)0<d&&(b+="\n"),b=b+"<StickyNote><UserId>"+vqStickyNotes[d].data("userid")+"</UserId><Id>"+vqStickyNotes[d].data("id")+"</Id><Name>"+vqStickyNotes[d].data("name")+"</Name><Date>"+vqStickyNotes[d].data("date")+"</Date><Text>"+vqStickyNotes[d].data("text")+"</Text><Page>"+vqStickyNotes[d].data("currentPage")+"</Page></StickyNote>";d=cvjs_serverHandlersPath+cvjs_serverSaveFileController;var e={};e.file=
a;e.file_content=b;e.custom_content=c;jQuery.ajax({url:d,type:"post",data:e,success:function(a){},error:function(a){console.log("Error "+a)}})}function cvjs_publishPDF(a){cvjs_setPublishPDF(a)}function cvjs_mergeDXFDWG(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_mergeDXFDWG_downloadMode?cvjs_saveScreenAsMergedDXF(a,4):cvjs_setMergeDXF(a)}
function cvjs_mergeDXFViaButton(a){1==radioButton_mergeAsDXF&&(cvjs_saveScreenAsMergedDXF(a,1),cvjs_mergeDXF_modal_hide(a));2==radioButton_mergeAsDXF&&(cvjs_mailServerSetup?(cvjs_to_mail=jQuery("#cvjs_publishPDFemailrecipient_"+a).val(),cvjs_mail_title=jQuery("#cvjs_publishPDFemailtitle_"+a).val(),cvjs_mail_message=jQuery("#pdfmail_text").val(),cvjs_saveScreenAsMergedDXF(a,2),cvjs_mergeDXF_modal_hide(a)):window.alert("Please set up e-mail server."));3==radioButton_mergeAsDXF&&(cvjs_saveScreenAsMergedDXF(a,
3),cvjs_mergeDXF_modal_hide(a))}
function cvjs_saveScreenAsMergedDXF(a,b,c){void 0==c&&(c="");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.MergeDWG+"</div></td></tr></table>");
cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(10);var d="merge_"+Math.random().toString().substring(2,5)+".xml";cvjs_setStickyNoteSaveRedlineUrl(cvjs_ServerLocation+"/converters/files/merged/"+d);var e="";e=cvjs_getStickyNotesRedlineXML(!1);console.log(e);var f=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;-1<cvjs_StickyNoteSaveRedlineUrl.indexOf("\\")||(cvjs_StickyNoteSaveRedlineUrl=encodeURIComponent(cvjs_StickyNoteSaveRedlineUrl));
var g={};g.file=cvjs_StickyNoteSaveRedlineUrl;g.file_content=e;g.custom_content=c;jQuery.ajax({url:f,type:"post",data:g,success:function(c){var e="",f="",g="";c=new Date;var h="y"+c.getFullYear()+"_m"+(c.getMonth()+1)+"_d"+c.getDate()+"_h"+c.getHours()+"_m"+c.getMinutes()+"_s"+c.getSeconds();h="jan";var n=c.getHours();10>n&&(n="0"+n);switch(c.getMonth()){case 0:h="Jan";break;case 1:h="Feb";break;case 2:h="Mar";break;case 3:h="Apr";break;case 4:h="May";break;case 5:h="Jun";break;case 6:h="Jul";break;
case 7:h="Aug";break;case 8:h="Sep";break;case 9:h="Oct";break;case 10:h="Nov";break;case 11:h="Dec";break;default:h="Jan"}h=h+"_"+c.getDate()+"_H"+n+"_"+c.getMinutes();cvjs_fileLoadingFromSharePointServer?(-1==cvjs_currentFileFromJSTreeFolder.indexOf("/")?(e="",f=cvjs_currentFileFromJSTreeFolder):(e=cvjs_currentFileFromJSTreeFolder.substring(0,cvjs_currentFileFromJSTreeFolder.lastIndexOf("/")),f=cvjs_currentFileFromJSTreeFolder.substring(cvjs_currentFileFromJSTreeFolder.lastIndexOf("/")+1)),cvjs_fileLoadingFromSharePointServer||
(f=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1)),console.log(f+" "+e),g=f,c=f.substring(f.lastIndexOf(".")),f=f.substring(0,f.lastIndexOf(".")),f=f+"_red_"+h+c,console.log("download file: "+g+" upload file: "+f),console.log("XML redline saved, download original file from sharepoint server   "),h=cvjs_serverHandlersPath+cvjs_serverDownloadSharepointController,c={},c.content_location=e+"/"+g,c.local_path=
cvjs_ServerLocation+"/converters/files/merged/"+g,c.content_username=cvjs_sharepoint_UserName,jQuery.ajax({url:h,type:"post",data:c,success:function(c){console.log(c);console.log("downloaded from Sharepoint!");c=cvjs_serverHandlersPath+cvjs_serverMergeDWGController;var h={};h.base_file=cvjs_ServerLocation+"/converters/files/merged/"+g;h.merge_file=cvjs_ServerLocation+"/converters/files/merged/"+d;h.out_file=cvjs_ServerLocation+"/converters/files/merged/"+f;jQuery.ajax({url:c,type:"post",data:h,success:function(c){console.log(c);
if(1==b){c=cvjs_serverHandlersPath+cvjs_serverLoadFileController;var d={};d.file=cvjs_ServerLocation+"/converters/files/merged/"+f;jQuery.ajax({url:c,type:"post",data:d,success:function(a){download_link(f,a);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()},error:function(a){console.log("Error "+a)}})}2==b&&(c={},c.pdf_file=cvjs_ServerLocation+"/converters/files/merged/"+f,c.pdf_file_name=f,c.from_name=cvjs_from_name,c.from_mail=cvjs_from_mail,c.cc_mail=cvjs_cc_mail,
c.replyto=cvjs_replyto,cvjs_to_mail=cvjs_to_mail.replace(/,/g,";"),cvjs_to_mail=jQuery("#cvjs_mergeDXFemailrecipient_"+a).val(),cvjs_mail_title=jQuery("#cvjs_mergeDXFemailtitle_"+a).val(),cvjs_mail_message=jQuery("#mergedxfmail_text").val(),c.to_mail=cvjs_to_mail,c.mail_title=cvjs_mail_title,c.mail_message=cvjs_mail_message,console.log(c.pdf_file+"  "+c.pdf_file_name+" "+c.to_mail+" "+c.mail_message),jQuery.ajax({url:cvjs_serverHandlersPath+cvjs_serverSendPDFEmailController,type:"post",data:c,success:function(a){jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();window.alert("e-mail sent!  "+a)}}));3==b&&(d=cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadfile2.php",c={},c.localfilename=cvjs_ServerLocation+"/converters/files/merged/"+f,c.targetUrl=e,c.user_name=cvjs_sharepoint_UserName,c.file_name=f,console.log("  "+e+"  "+cvjs_sharepoint_UserName+"  "+f),jQuery.ajax({url:d,type:"post",data:c,success:function(a){cvjs_debug&&console.log("PDF file is now uploaded to SharePoint server: "+a);jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();window.location.reload()}}))},error:function(a){console.log("Error "+a)}})},error:function(a){console.log("Error "+a)}})):(g=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1),f=g.substring(0,g.lastIndexOf("."))+"_red_"+h+g.substring(g.lastIndexOf(".")),4==b?(h=cvjs_serverHandlersPath+cvjs_serverMergeDWGController,c={},c.base_file=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],
""==cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]&&(c.base_file=currentLoadedDrawingFullName),c.merge_file=cvjs_ServerLocation+"/converters/files/merged/"+d,c.out_file=cvjs_ServerLocation+"/converters/files/merged/"+f,cvjs_debug&&console.log(c.base_file+"  "+c.merge_file+"  "+c.out_file),c.zip_output="false",c.QR_code="false",jQuery.ajax({url:h,type:"post",data:c,success:function(b){cvjs_debug&&console.log("callback from merge:"+b);cvjs_debug&&console.log("mode 4");var c=cvjs_ServerUrl+
"/converters/files/merged/"+f,d=f;-1<d.indexOf("/")&&(d=d.substring(d.lastIndexOf("/")+1));-1<b.indexOf("<customoutfilename>")&&(b=b.substring(b.indexOf("<customoutfilename>")+19),b=b.substring(0,b.indexOf("</customoutfilename>")),0==b.indexOf("http")?(c=b,d=b.substring(b.lastIndexOf("/")+1)):(d=b,c=cvjs_ServerUrl+"/converters/files/merged/"+d),cvjs_debug&&console.log("XXXX"+b+"XXX"));jQuery("#topDownloadButtonPane_"+a).show();cvjs_topDownloadButtonPane=!0;jQuery("#downloadrow").show();jQuery("#downloadbutton").html('<a href="'+
c+'" download="'+d+'"><button class="btn" style="width:70%"><i class="fa fa-download"></i> Download: <i><b>'+d+"</b></i> - with Redlines</button></a>");jQuery("#downloadbutton").click(function(){jQuery("#topDownloadButtonPane_"+a).hide();cvjs_topDownloadButtonPane=!1;cvjs_resizeWindow_position("floorPlan");cvjs_resizeWindow_position("floorPlan");cvjs_mergeOnOff=!1});cvjs_resizeWindow_position("floorPlan");cvjs_resizeWindow_position("floorPlan");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()},
error:function(a){console.log("Error "+a)}})):(c=cvjs_serverHandlersPath+cvjs_serverCopyFileController,h={},h.localfilename=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr],h.localdestination=cvjs_ServerLocation+"/converters/files/merged/"+g,console.log("fileName "+h.localfilename+"  "+h.localdestination),jQuery.ajax({url:c,type:"post",data:h,success:function(c){cvjs_debug&&console.log("Drawing file is now copied: "+c);c=cvjs_serverHandlersPath+cvjs_serverMergeDWGController;var e={};e.base_file=
cvjs_ServerLocation+"/converters/files/merged/"+g;e.merge_file=cvjs_ServerLocation+"/converters/files/merged/"+d;e.out_file=cvjs_ServerLocation+"/converters/files/merged/"+f;jQuery.ajax({url:c,type:"post",data:e,success:function(c){console.log("callback from merge servlet:"+c);if(1==b){c=cvjs_serverHandlersPath+cvjs_serverLoadFileController;var d={};d.file=cvjs_ServerLocation+"/converters/files/merged/"+f;jQuery.ajax({url:c,type:"post",data:d,success:function(a){download_link_dwg(f);jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()},error:function(a){console.log("Error "+a)}})}4==b&&(cvjs_debug&&console.log("mode 4"),c=cvjs_ServerUrl+"/converters/files/merged/"+f,d=f,-1<d.indexOf("/")&&(d=d.substring(d.lastIndexOf("/")+1)),jQuery("#topDownloadButtonPane_"+a).show(),cvjs_topDownloadButtonPane=!0,jQuery("#downloadrow").show(),jQuery("#downloadbutton").html('<a href="'+c+'" download="'+d+'"><button class="btn" style="width:70%"><i class="fa fa-download"></i> Download: <i><b>'+
d+"</b></i> - with Redlines</button></a>"),jQuery("#downloadbutton").click(function(){jQuery("#topDownloadButtonPane_"+a).hide();cvjs_topDownloadButtonPane=!1;cvjs_resizeWindow_position("floorPlan");cvjs_resizeWindow_position("floorPlan");cvjs_mergeOnOff=!1}),cvjs_resizeWindow_position("floorPlan"),cvjs_resizeWindow_position("floorPlan"),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide());2==b&&(c={},c.pdf_file=cvjs_ServerLocation+"/converters/files/merged/"+f,c.pdf_file_name=
f,c.from_name=cvjs_from_name,c.from_mail=cvjs_from_mail,c.cc_mail=cvjs_cc_mail,c.replyto=cvjs_replyto,cvjs_to_mail=cvjs_to_mail.replace(/,/g,";"),cvjs_to_mail=jQuery("#cvjs_mergeDXFemailrecipient_"+a).val(),cvjs_mail_title=jQuery("#cvjs_mergeDXFemailtitle_"+a).val(),cvjs_mail_message=jQuery("#mergedxfmail_text").val(),c.to_mail=cvjs_to_mail,c.mail_title=cvjs_mail_title,c.mail_message=cvjs_mail_message,console.log(c.pdf_file+"  "+c.pdf_file_name+" "+c.to_mail+" "+c.mail_message),jQuery.ajax({url:cvjs_serverHandlersPath+
cvjs_serverSendPDFEmailController,type:"post",data:c,success:function(a){jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();window.alert("e-mail sent!  "+a)}}));3==b&&(d=cvjs_serverHandlersPath+cvjs_serverCopyFileController,c={},c.localfilename=cvjs_ServerLocation+"/converters/files/merged/"+f,c.localdestination=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(0,cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1)+
f,jQuery.ajax({url:d,type:"post",data:c,success:function(a){cvjs_debug&&console.log("Merged DWG file is now moved: "+a);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()}}))},error:function(a){console.log("Error "+a)}})}})))},error:function(a){console.log("Error "+a)}})}function cvjs_saveScreenAsMergedDXF_email(a){window.alert("save Redline as XML");window.alert("make Merge document");window.alert("email document")}
function cvjs_saveScreenAsMergedDXF_uploadServer(a){window.alert("save Redline as XML");window.alert("make Merge document");window.alert("upload to sharepoint server")}
function cvjs_publishPDFViaButton(a){if(1==radioButton_publishAsPDF)if(cvjs_makePDFEntireDoc)if(0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_customPdfFolderFlag){var b=cvjs_last_FileName_PDF,c=cvjs_ServerLocation+"/converters/files/pdf/custom_"+cvjs_customPdfFolderName,d=cvjs_ServerUrl+"/converters/files/pdf/custom_"+cvjs_customPdfFolderName,e=b;b.substring(b.lastIndexOf(".")+1);e=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));cvjs_mergePDFwithRedlines(c,
d,e+"_red","floorPlan1")}else cvjs_saveScreenAsPDF("landscape","A4","300"),cvjs_publishPDF_modal_hide(a);else cvjs_saveScreenAsPDF("landscape","A4","300"),cvjs_publishPDF_modal_hide(a);2==radioButton_publishAsPDF&&(cvjs_mailServerSetup?(cvjs_to_mail=jQuery("#cvjs_publishPDFemailrecipient_"+a).val(),cvjs_mail_title=jQuery("#cvjs_publishPDFemailtitle_"+a).val(),cvjs_mail_message=jQuery("#pdfmail_text").val(),cvjs_saveScreenAsPDF_email("landscape","A4","300",a),cvjs_publishPDF_modal_hide(a)):window.alert("Please set up e-mail server."));
3==radioButton_publishAsPDF&&(cvjs_saveScreenAsPDF_uploadServer("landscape","A4","300",a),cvjs_publishPDF_modal_hide(a))}
function cvjs_saveScreenAsPDF_uploadServer(a,b,c,d){cvjs_setPrintPaperSize(b);cvjs_setPrintOrientation(a);cvjs_setPrintResolutionDpi(c);cvjs_setPrintPaperSize(b);cvjs_setPrintOrientation(a);cvjs_setPrintResolutionDpi(c);d=Math.random().toString().substring(2,5);var e="screendump_"+d+".png";cvjs_singleDrawingFile="screendump_"+d;cvjs_singlePageOrientation=a;cvjs_singlePageSize=b;cvjs_singlePageResolution=c;cvjs_serverSavePrintModeController=5;5==cvjs_serverSavePrintModeController&&(jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Printing+"</div></td></tr></table>"),cvjs_setLooperPosition(),jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1500));cvjs_saveScreenAsImage(cvjs_ServerLocation+"/converters/files/",e)}
function cvjs_saveScreenAsPDF_email(a,b,c,d){cvjs_setPrintPaperSize(b);cvjs_setPrintOrientation(a);cvjs_setPrintResolutionDpi(c);d=Math.random().toString().substring(2,5);var e="screendump_"+d+".png";cvjs_singleDrawingFile="screendump_"+d;cvjs_singlePageOrientation=a;cvjs_singlePageSize=b;cvjs_singlePageResolution=c;cvjs_serverSavePrintModeController=4;4==cvjs_serverSavePrintModeController&&(jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+
floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.Printing+"</div></td></tr></table>"),cvjs_setLooperPosition(),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1500));cvjs_saveScreenAsImage(cvjs_ServerLocation+"/converters/files/",e)}
function cvjs_printSavedBitmapToPDF_uploadServer(){cvjs_phpImagesUrlController=cvjs_serverHandlersPath+cvjs_screenToPDF_Controller;var a=cvjs_ServerLocation+"/converters/files/";cvjs_serverSave_php_controllerArray={numberOfFiles:1};cvjs_serverSave_php_controllerArray.serverPath=a;cvjs_serverSave_php_controllerArray.fileName_0=cvjs_singleDrawingFile;cvjs_serverSave_php_controllerArray.rotation_0=cvjs_singlePageOrientation;cvjs_serverSave_php_controllerArray.page_format_0=cvjs_singlePageSize;cvjs_serverSave_php_controllerArray.page_resolution_0=
cvjs_singlePageResolution;cvjs_serverSave_php_controllerArray.org_fileName_0=cvjs_FileNameNoExtension;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_5" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+
languageTable.languages[cvjs_currentLanguage].WaitModal.BatchPDF+"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1E3);jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_serverSavePrintModeController=0;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();var b=new Date,d="y"+b.getFullYear()+"_m"+(b.getMonth()+
1)+"_d"+b.getDate()+"_h"+b.getHours()+"_m"+b.getMinutes()+"_s"+b.getSeconds(),e="jan";d=b.getHours();10>d&&(d="0"+d);switch(b.getMonth()){case 0:e="Jan";break;case 1:e="Feb";break;case 2:e="Mar";break;case 3:e="Apr";break;case 4:e="May";break;case 5:e="Jun";break;case 6:e="Jul";break;case 7:e="Aug";break;case 8:e="Sep";break;case 9:e="Oct";break;case 10:e="Nov";break;case 11:e="Dec";break;default:e="Jan"}d=e+"_"+b.getDate()+"_H"+d+"_"+b.getMinutes();b=e="";-1==cvjs_currentFileFromJSTreeFolder.indexOf("/")?
(e="",b=cvjs_currentFileFromJSTreeFolder):(e=cvjs_currentFileFromJSTreeFolder.substring(0,cvjs_currentFileFromJSTreeFolder.lastIndexOf("/")),b=cvjs_currentFileFromJSTreeFolder.substring(cvjs_currentFileFromJSTreeFolder.lastIndexOf("/")+1));cvjs_fileLoadingFromSharePointServer||(b=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1));b=b.substring(0,b.lastIndexOf("."));b=b+"_red_"+d+".pdf";fileName=cvjs_ServerLocation+
"/converters/files/"+a;fileName=fileName.substring(0,fileName.indexOf(".html"))+".pdf";cvjs_fileLoadingFromSharePointServer?(a=cvjs_serverHandlersPath+"CV-JS_sharepoint_uploadfile2.php",d={},d.localfilename=fileName,d.targetUrl=e,d.user_name=cvjs_sharepoint_UserName,d.file_name=b,console.log("fileName "+fileName+"  "+e+"  "+cvjs_sharepoint_UserName+"  "+b),jQuery.ajax({url:a,type:"post",data:d,success:function(a){cvjs_debug&&console.log("PDF file is now uploaded to SharePoint server: "+a);jQuery("#cvjs_wait_looper_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();window.location.reload()}})):(a=cvjs_serverHandlersPath+cvjs_serverCopyFileController,d={},e=cvjs_filepathServer+cvjs_getCurrentMultiPage_FileName()+b,e=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(0,cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1)+cvjs_getCurrentMultiPage_FileName()+b,d.localfilename=fileName,d.localdestination=e,console.log("fileName "+fileName+"  "+e),jQuery.ajax({url:a,
type:"post",data:d,success:function(a){cvjs_debug&&console.log("PDF file is now moved: "+a);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()}}))},error:function(a){console.log("Error "+a)}})}
function cvjs_printSavedBitmapToPDF_email(){cvjs_phpImagesUrlController=cvjs_serverHandlersPath+cvjs_screenToPDF_Controller;var a=cvjs_ServerLocation+"/converters/files/";cvjs_serverSave_php_controllerArray={numberOfFiles:1};cvjs_serverSave_php_controllerArray.serverPath=a;cvjs_serverSave_php_controllerArray.fileName_0=cvjs_singleDrawingFile;cvjs_serverSave_php_controllerArray.rotation_0=cvjs_singlePageOrientation;cvjs_serverSave_php_controllerArray.page_format_0=cvjs_singlePageSize;cvjs_serverSave_php_controllerArray.page_resolution_0=
cvjs_singlePageResolution;cvjs_serverSave_php_controllerArray.org_fileName_0=cvjs_FileNameNoExtension;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_5" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+
languageTable.languages[cvjs_currentLanguage].WaitModal.BatchPDF+"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1E3);jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_serverSavePrintModeController=0;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();var b=new Date,d="y"+b.getFullYear()+"_m"+(b.getMonth()+
1)+"_d"+b.getDate()+"_h"+b.getHours()+"_m"+b.getMinutes()+"_s"+b.getSeconds();d="jan";var e=b.getHours();10>e&&(e="0"+e);switch(b.getMonth()){case 0:d="Jan";break;case 1:d="Feb";break;case 2:d="Mar";break;case 3:d="Apr";break;case 4:d="May";break;case 5:d="Jun";break;case 6:d="Jul";break;case 7:d="Aug";break;case 8:d="Sep";break;case 9:d="Oct";break;case 10:d="Nov";break;case 11:d="Dec";break;default:d="Jan"}d=d+"_"+b.getDate()+"_H"+e+"_"+b.getMinutes();b="";b=-1==cvjs_currentFileFromJSTreeFolder.indexOf("/")?
cvjs_currentFileFromJSTreeFolder:cvjs_currentFileFromJSTreeFolder.substring(cvjs_currentFileFromJSTreeFolder.lastIndexOf("/")+1);cvjs_fileLoadingFromSharePointServer||(b=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1));b=b.substring(0,b.lastIndexOf("."));e={};e.pdf_file=cvjs_ServerLocation+"/converters/files/"+a;e.pdf_file_name=b+"_red_"+d+".pdf";e.from_name=cvjs_from_name;e.from_mail=cvjs_from_mail;
e.cc_mail=cvjs_cc_mail;e.replyto=cvjs_replyto;cvjs_to_mail=cvjs_to_mail.replace(/,/g,";");e.to_mail=cvjs_to_mail;e.mail_title=cvjs_mail_title;e.mail_message=cvjs_mail_message;jQuery.ajax({url:cvjs_serverHandlersPath+cvjs_serverSendPDFEmailController,type:"post",data:e,success:function(a){window.alert("e-mail sent!  "+a)}})},error:function(a){console.log("Error "+a)}})}
function savepageaspdf(a){var b=cvjs_ServerLocation+"/converters/files/pdf/custom_"+cvjs_customPdfFolderName,c=cvjs_last_FileName_PDF;c=c.substring(c.lastIndexOf("/")+1,c.lastIndexOf("."));var d=cvjs_getCurrentPage();b=b+"/"+c+"_red_"+d+".pdf";cvjs_zoomExtents(a);cvjs_saveFloorplanAsPDF(b,a)}
function saveDrawingWithAnnotationsAsPDF(a,b,c){" GRC_Project2/GRC_Punch List 3/GRC_Michigan.dwg";var d=new Date;d.getFullYear();d.getMonth();d.getDate();d.getHours();d.getMinutes();d.getSeconds();var e=d.getHours();10>e&&(e="0"+e);switch(d.getMonth()){case 0:var f="Jan";break;case 1:f="Feb";break;case 2:f="Mar";break;case 3:f="Apr";break;case 4:f="May";break;case 5:f="Jun";break;case 6:f="Jul";break;case 7:f="Aug";break;case 8:f="Sep";break;case 9:f="Oct";break;case 10:f="Nov";break;case 11:f="Dec";
break;default:f="Jan"}f=f+"_"+d.getDate()+"_H"+e+"_"+d.getMinutes();-1==a.indexOf("/")?d="":(d=a.substring(0,a.lastIndexOf("/")),a=a.substring(a.lastIndexOf("/")+1));cvjs_fileLoadingFromSharePointServer||(a=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].substring(cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr].lastIndexOf("/")+1));a=a.substring(0,a.lastIndexOf("."));a=c?a+"_red_"+f+".pdf":a+"_red.pdf";c=cvjs_ServerLocation+a;console.log("saveDrawingWithAnnotationsAsP "+c+
"  "+a+"  "+d);cvjs_saveFloorplanAsPDFtoSharePoint(c,"floorPlan",d,b)}
function cvjs_printScreenAsPDFwithRedlines(a,b){void 0==b&&(b="");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var c=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();c='<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"'+(' width="'+c.width+
'" height="'+c.height+'" viewbox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'"');c+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);a=c+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>";var d=cvjs_serverHandlersPath+cvjs_serverSaveFileController,e={};c=new Date;var f="y"+c.getFullYear()+"_m"+(c.getMonth()+1)+"_d"+c.getDate()+"_h"+c.getHours()+
"_m"+c.getMinutes()+"_s"+c.getSeconds();f="jan";var g=c.getHours();10>g&&(g="0"+g);switch(c.getMonth()){case 0:f="Jan";break;case 1:f="Feb";break;case 2:f="Mar";break;case 3:f="Apr";break;case 4:f="May";break;case 5:f="Jun";break;case 6:f="Jul";break;case 7:f="Aug";break;case 8:f="Sep";break;case 9:f="Oct";break;case 10:f="Nov";break;case 11:f="Dec";break;default:f="Jan"}f=f+"_"+c.getDate()+"_H"+g+"_"+c.getMinutes();var h=cvjs_FileNameNoExtension+"_"+f+".pdf",k=cvjs_FileNameNoExtension+"_"+f+".html",
l=cvjs_ServerLocation+h;c=l.lastIndexOf(".");var m=l.substring(0,c)+".svg";e.file=m;e.file_content=a;e.custom_content=b;cvjs_debug&&console.log("make pdf "+m+"  "+d);jQuery.ajax({url:d,type:"post",data:e,success:function(a){cvjs_debug&&console.log("Save floorplan: "+a);a=cvjs_serverHandlersPath+cvjs_serverSVGtoPDFConverterController;var c={};c.pdf_file=l;c.svg_file=m;jQuery.ajax({url:a,type:"post",data:c,success:function(a){cvjs_debug&&console.log("PDF file is now created: "+a);a=cvjs_ServerUrl+"/"+
h;var c=cvjs_ServerUrl+"/"+h,f=cvjs_ServerLocation+"/"+k,g=cvjs_ServerUrl+"/"+k;-1<navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident");var l='<!DOCTYPE html><html><title>CADViewer - Print</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>';l=l+"<script type=\"text/javascript\">jQuery(window).on('beforeunload', function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+c+"', cache: false, success: function(html){}});  }); jQuery(window).on('unload', function (){ jQuery.ajax({url:'"+
cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+c+"', cache: false, success: function(html){}})  }); window.onbeforeunload = function (){ jQuery.ajax({url:'"+cvjs_serverHandlersPath+"/"+cvjs_serverDeleteFileController+"?file="+c+"', cache: false, success: function(html){}}) }; \x3c/script>";l=l+'</head><body><div id="pdf"><object width="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+'" height="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize*2339/1654+'" type="application/pdf" data="'+
a+'" id="pdf_content"><p>Please install a PDF viewer, the CADViewer batch file PDF cannot be displayed.</p></object></div></body></html>';e.file=f;e.file_content=l;e.custom_content=b;jQuery.ajax({url:d,type:"post",data:e,success:function(a){window.open(g,"CADViewer - Print","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize).focus()}})}})},error:function(a){console.log("Error "+a)}})}
function cvjs_initializeFileSelector(){jQuery("#attention_bitmap").hide();cvjs_loadServerFileList(1)}
function cvjs_setModalSingleFileItems(a){var b="#1floor"+a;jQuery(b).mouseover(function(){jQuery(b+"_1").css("color","#29BBEB");jQuery("#cvjs_serverFileLoadModal").draggable({disabled:!0})});jQuery(b).mouseout(function(){jQuery(b+"_1").css("color","#333333");jQuery("#cvjs_serverFileLoadModal").draggable({disabled:!1})});jQuery(b+"_1").mousedown(function(){var c=jQuery(b+"_2").text();current_selected_filename=c;current_selected_shortname=jQuery(b+"_1").text();jQuery("#display_floorplan_name").html(current_selected_shortname);
cvjs_callServerForDataOverlayProcessing();cvjs_loadFileWithDataOverlays(c,a);jQuery(b+"_1").css("color","#333333")});jQuery(b+"_2").mousedown(function(){var c=jQuery(b+"_2").text();current_selected_filename=c;current_selected_shortname=jQuery(b+"_1").text();jQuery("#display_floorplan_name").html(current_selected_shortname);cvjs_callServerForDataOverlayProcessing();cvjs_loadFileWithDataOverlays(c,a)});var c="#2floor"+a;jQuery(c+"_3").click(function(){1!=active_modal&&(jQuery("#delete_form").fadeIn(1E3),
delete_filename=jQuery(c+"_4").text(),delete_floor=jQuery(c+"_1").text(),hidefield_name1=c,hidefield_name2=b,positionPopup())});jQuery(c+"_3").mouseover(function(){jQuery(c+"_3_image").attr("src",""+cvjs_imagesLocation+"tools/Trash_Over_3.png")});jQuery(c+"_3").mouseout(function(){jQuery(c+"_3_image").attr("src",""+cvjs_imagesLocation+"tools/Trash_Up_1.png")});jQuery(c+"_2").mouseover(function(){});jQuery(c+"_2").mousedown(function(){try{if(1!=active_modal){0==edit_nametag_flag?edit_nametag_flag=
1:(1==edit_nametag_flag&&(fnArr_ShortName[edit_nametag_flag-1]=jQuery("#floor_name_tag").val()),edit_nametag_flag=0);if(1==edit_nametag_flag){jQuery(c+"_2").css("color","#02C226");jQuery(c+"_2_2").css("color","#E85656");jQuery(c+"_2_3").css("color","#E85656");var a='<input id="floor_name_tag" type="text3" class="name_tags2" value="'+jQuery(c+"_1").text()+'">';jQuery(c+"_1").html(a);jQuery("#sortable").sortable({disabled:!0})}if(0==edit_nametag_flag){jQuery(c+"_2").css("color","#026DD9");jQuery(c+
"_2_2").css("color","#026DD9");jQuery(c+"_2_3").css("color","#026DD9");var e=jQuery("#floor_name_tag").val();jQuery(c+"_1").html(e);jQuery(b+"_1").html(e);save_filename_list();jQuery("#sortable").sortable({disabled:!1})}}}catch(f){console.log("Err 1: "+f)}});jQuery(c+"_2_2").mousedown(function(){1!=active_modal&&(jQuery("#unlink_form").fadeIn(1E3),delete_filename=jQuery("#2floor1_4").text(),positionPopupUnlink())});jQuery(c+"_2_3").mousedown(function(){1!=active_modal&&(jQuery("#clear_form").fadeIn(1E3),
delete_filename=jQuery("#2floor1_4").text(),positionPopupClear())})}
function cvjs_initializeAllFileSelectorDivs(a){jQuery("#button2-no_upload_redline").click(function(){jQuery("#addRedlineTable").hide()});jQuery("#button1-upload_redline").click(function(){var b=!0;for(var d=0,e=cvjs_redlinesRelativePath;b;)0==e.indexOf("../")?(e=e.substring(3),d++):b=!1;b=!0;d=0;for(e=cvjs_phpPath;b;)0==e.indexOf("../")?(e=e.substring(3),d++):b=!1;cvjs_openSpaceObjectSaveModal_flag?(1<d&&cvjs_spaceObjectsRelativePath.substring(3*(d-1)),b=cvjs_spaceObjectsAbsolutePathOnly?cvjs_filepathServerSpaceObjects:
cvjs_spaceObjectsRelativePath,cvjs_saveSpaceObjects(a,b+jQuery("#uploadredline_name_tag").val())):(b=1<d?cvjs_redlinesRelativePath.substring(3*(d-1)):cvjs_redlinesRelativePath,cvjs_debug&&console.log("cvjs_initializeAllFileSelectorDivs cvjs_saveStickyNotesRedlines f_path="+b),cvjs_redlinesAbsolutePathOnly&&(b=cvjs_filepathServerRedlines),cvjs_debug&&console.log("2 cvjs_initializeAllFileSelectorDivs cvjs_saveStickyNotesRedlines fpath="+b),cvjs_setStickyNoteSaveRedlineUrl(b+jQuery("#uploadredline_name_tag").val()),
cvjs_saveStickyNotesRedlines(a))});for(var b=1;b<cvjs_maxfiles;b++)cvjs_setModalSingleFileItems(b);jQuery("#select_file").click(function(){jQuery("#cvjs_upfile").click()});jQuery("#select_file").mouseover(function(){jQuery("#cvjs_serverFileLoadModal").draggable({disabled:!0})});jQuery("#select_file").mouseout(function(){jQuery("#cvjs_serverFileLoadModal").draggable({disabled:!1})});jQuery("#CloseAttentionBitmap").click(function(){jQuery("#attention_bitmap").hide()});jQuery("#done_editing").click(function(){if(1!=
active_modal){if(0<edit_nametag_flag){var a="#2floor"+edit_nametag_flag+"_1",b="#1floor"+edit_nametag_flag+"_1";jQuery("#2floor"+edit_nametag_flag+"_2").css("color","#00539B");var e=jQuery("#floor_name_tag").val();jQuery(a).html(e);jQuery(b).html(e);save_filename_list();edit_nametag_flag=0}jQuery("#SelectFloorPlanPanel").show();jQuery("#SelectFloorPlan").show();jQuery("#SelectFloorPlanPanelEdit").hide();jQuery("#SelectFloorPlanEdit").hide()}});jQuery("#editing").click(function(){save_filename_list();
jQuery("#SelectFloorPlanPanel").hide();jQuery("#SelectFloorPlan").hide();jQuery("#SelectFloorPlanPanelEdit").show();jQuery("#SelectFloorPlanEdit").show()});jQuery("#delete_modal_cancel_image").mouseover(function(){jQuery("#delete_modal_cancel_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Over_2.png")});jQuery("#delete_modal_cancel_image").mouseout(function(){jQuery("#delete_modal_cancel_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Inactive_4.png")});jQuery("#delete_modal_proceed_image").mouseover(function(){jQuery("#delete_modal_proceed_image").attr("src",
""+cvjs_imagesLocation+"tools/Proceed_111x28_Over.png")});jQuery("#delete_modal_proceed_image").mouseout(function(){jQuery("#delete_modal_proceed_image").attr("src",""+cvjs_imagesLocation+"tools/Proceed_111x28_Up.png")});jQuery("#unlink_modal_cancel_image").mouseover(function(){jQuery("#unlink_modal_cancel_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Over_2.png")});jQuery("#unlink_modal_cancel_image").mouseout(function(){jQuery("#unlink_modal_cancel_image").attr("src",""+cvjs_imagesLocation+
"tools/Cancel_Inactive_4.png")});jQuery("#unlink_modal_proceed_image").mouseover(function(){jQuery("#unlink_modal_proceed_image").attr("src",""+cvjs_imagesLocation+"tools/Proceed_111x28_Over.png")});jQuery("#unlink_modal_proceed_image").mouseout(function(){jQuery("#unlink_modal_proceed_image").attr("src",""+cvjs_imagesLocation+"tools/Proceed_111x28_Up.png")});jQuery("#clear_modal_cancel_image").mouseover(function(){jQuery("#clear_modal_cancel_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Over_2.png")});
jQuery("#clear_modal_cancel_image").mouseout(function(){jQuery("#clear_modal_cancel_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Inactive_4.png")});jQuery("#clear_modal_proceed_image").mouseover(function(){jQuery("#clear_modal_proceed_image").attr("src",""+cvjs_imagesLocation+"tools/Proceed_111x28_Over.png")});jQuery("#clear_modal_proceed_image").mouseout(function(){jQuery("#clear_modal_proceed_image").attr("src",""+cvjs_imagesLocation+"tools/Proceed_111x28_Up.png")});jQuery("#button2-nodelete").click(function(){active_modal=
0;jQuery("#delete_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0")});jQuery("#button1-delete").click(function(){active_modal=0;jQuery("#delete_form").fadeOut(500);delete_file_and_overlay(delete_filename);jQuery(hidefield_name1).hide();jQuery(hidefield_name2).hide();jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0")});jQuery("#button1-unlink").click(function(){active_modal=
0;jQuery("#unlink_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0");unlink_flag=1;unlink_file=delete_filename});jQuery("#button2-nounlink").click(function(){active_modal=0;jQuery("#unlink_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0");unlink_flag=0;unlink_file=""});jQuery("#unlink_modal_close_cross").click(function(){active_modal=
0;jQuery("#unlink_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0");jQuery("#unlink_modal_close_cross").css("filter","alpha(opacity=100)");jQuery("#unlink_modal_close_cross").css("opacity","1.0");unlink_flag=0;unlink_file=""});jQuery("#unlink_modal_close_cross").mouseover(function(){jQuery("#unlink_modal_close_cross").css("filter","alpha(opacity=70)");jQuery("#unlink_modal_close_cross").css("opacity",
"0.7")});jQuery("#unlink_modal_close_cross").mouseout(function(){jQuery("#unlink_modal_close_cross").css("filter","alpha(opacity=100)");jQuery("#unlink_modal_close_cross").css("opacity","1.0")});jQuery("#button1-clear").click(function(){active_modal=0;jQuery("#clear_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0")});jQuery("#button2-noclear").click(function(){active_modal=0;jQuery("#clear_form").fadeOut(500);
jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0")});jQuery("#clear_modal_close_cross").click(function(){active_modal=0;jQuery("#clear_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0");jQuery("#clear_modal_close_cross").css("filter","alpha(opacity=100)");jQuery("#clear_modal_close_cross").css("opacity","1.0")});jQuery("#clear_modal_close_cross").mouseover(function(){jQuery("#clear_modal_close_cross").css("filter",
"alpha(opacity=70)");jQuery("#clear_modal_close_cross").css("opacity","0.7")});jQuery("#clear_modal_close_cross").mouseout(function(){jQuery("#clear_modal_close_cross").css("filter","alpha(opacity=100)");jQuery("#clear_modal_close_cross").css("opacity","1.0")});jQuery("#modal_close_cross").click(function(){active_modal=0;jQuery("#delete_form").fadeOut(500);jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=100)");jQuery("#SelectFloorPlanPanelEdit").css("opacity","1.0");jQuery("#modal_close_cross").css("filter",
"alpha(opacity=100)");jQuery("#modal_close_cross").css("opacity","1.0")});jQuery("#modal_close_cross").mouseover(function(){jQuery("#modal_close_cross").css("filter","alpha(opacity=70)");jQuery("#modal_close_cross").css("opacity","0.7")});jQuery("#modal_close_cross").mouseout(function(){jQuery("#modal_close_cross").css("filter","alpha(opacity=100)");jQuery("#modal_close_cross").css("opacity","1.0")});jQuery("#uploadredline_modal_cancel_image").mouseover(function(){jQuery("#uploadredline_modal_cancel_image").attr("src",
""+cvjs_imagesLocation+"tools/Cancel_Over_2.png")});jQuery("#uploadredline_modal_cancel_image").mouseout(function(){jQuery("#uploadredline_modal_cancel_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Inactive_4.png")});jQuery("#uploadredline_modal_proceed_image").mouseover(function(){jQuery("#uploadredline_modal_proceed_image").attr("src",""+cvjs_imagesLocation+"tools/Proceed_111x28_Over.png")});jQuery("#uploadredline_modal_proceed_image").mouseout(function(){jQuery("#uploadredline_modal_proceed_image").attr("src",
""+cvjs_imagesLocation+"tools/Proceed_111x28_Up.png")})}var active_modal=0,edit_nametag_flag=0,filesonserver=0,cvjs_floorplansRelativePath="../drawings/floorplans/",cvjs_filepathServer="home/myserver/",cvjs_floorplanUrl="http://myserver.com",cvjs_filename_list_status=1;
function save_filename_list(){cvjs_debug&&console.log("save_filename_list  cvjs_filename_list_status "+cvjs_filename_list_status);var a="";a="(RW-2)|"+filesonserver+"|";for(var b=0;b<filesonserver;b++)a=a+fnArr_FileName[b]+";";a+="|";for(b=0;b<filesonserver;b++)a=a+fnArr_ShortName[b]+";";a+="|";b=cvjs_phpPath+"save-file.php";b=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;var c={};if(1==cvjs_filename_list_status){var d="";d=!0;for(var e=0,f=cvjs_floorplansRelativePath;d;)0==f.indexOf("../")?
(f=f.substring(3),e++):d=!1;d=!0;e=0;for(f=cvjs_phpPath;d;)0==f.indexOf("../")?(f=f.substring(3),e++):d=!1;d=1<e?cvjs_floorplansRelativePath.substring(3*(e-1)):cvjs_floorplansRelativePath;cvjs_fileLocationAbsolutePathsOnly&&(d=cvjs_filepathServer);c.file=encodeURIComponent(d+filenames_data_url_name)}if(2==cvjs_filename_list_status){d="";d=!0;e=0;for(f=cvjs_redlinesRelativePath;d;)0==f.indexOf("../")?(f=f.substring(3),e++):d=!1;d=!0;e=0;for(f=cvjs_phpPath;d;)0==f.indexOf("../")?(f=f.substring(3),e++):
d=!1;d=1<e?cvjs_redlinesRelativePath.substring(3*(e-1)):cvjs_redlinesRelativePath;cvjs_redlinesAbsolutePathOnly&&(d=cvjs_filepathServerRedlines);c.file=encodeURIComponent(d+filenames_data_url_name)}cvjs_debug&&console.log("save_filename_list   "+c.file);cvjs_debug&&console.log("save_filename_list   "+a);cvjs_debug&&console.log("save_filename_list   "+b);c.file_content=a;jQuery.ajax({url:b,type:"post",data:c,success:function(a){cvjs_directFileLoad&&cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],
cvjs_directFileLoadPath)}})}function getFiles(){for(var a=document.getElementById("myfiles"),b=0;b<a.files.length;b++)document.getElementById("display").innerHTML+="<br/>"+a.files[b].name}
function cvjs_add_file_object(a){for(var b=document.getElementById(a),c=0;c<b.files.length;c++)cvjs_debug&&console.log(b.files[c].name);c=b.value.split("\\");var d=c[c.length-1],e=0,f=b.files;f||(f=[],f.push({name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)}),b.files=f);f=0;var g="",h="";try{f=b.files[0].size,g=b.files[0].name,h=b.files[0].path,cvjs_debug&&console.log(f+"  "+g+"  "+h)}catch(l){console.log(l)}if(-1<d.indexOf("+")||-1<d.indexOf("%"))e=
1;if(1==e)jQuery("#attention_1").html("Attention: Illegal character!"),jQuery("#attention_2").html("Illegal character in file name! Please rename and try again."),jQuery("#attention_bitmap").show();else{var k=c[c.length-1].split(".");if(-1==".dwf|.dxf|.dwg|.png|.gif|.jpg|.tif|.tiff|.svg|.svgz|.js|.pdf|.dgn|.pcf|.json".indexOf(k[k.length-1].toLowerCase()))jQuery("#attention_1").html("Attention: Format not supported!"),jQuery("#attention_2").html("CADViewer supports the following: <br> AutoCAD Formats: DWG, DXF, DWF <br> MicroStation Formats: DGN, PCF <br>Bitmap Formats: JPG, GIF, PNG, TIFF <br>Scalable Vector Graphics: SVG and SVGZ. <br>Adobe Acrobat: PDF<br>CADViewer: .JS JavaScript files.<br>LinkList/DwgMerge: .JSON files. "),
jQuery("#attention_bitmap").show();else{cvjs_fileLoadTrialMode&&(filesonserver=0);for(c=e=0;c<filesonserver;c++)0==fnArr_FileName[c].indexOf(d)&&(e=1,e=0);if(1==e)jQuery("#attention_1").html("Attention:"),jQuery("#attention_2").html(d+" has already been uploaded! "),jQuery("#attention_bitmap").show();else{".png|.gif|.jpg".indexOf(k[k.length-1].toLowerCase());jQuery("#SelectFloorPlanPanelEdit").hide();jQuery("#SelectFloorPlanPanel").show();filesonserver++;for(c=filesonserver-1;0<c;c--)fnArr_FileName[c]=
fnArr_FileName[c-1],fnArr_ShortName[c]=fnArr_ShortName[c-1],e="#1floor"+(c+1),jQuery(e).show(),e="#1floor"+(c+1)+"_2",jQuery(e).html(fnArr_FileName[c]),e="#2floor"+(c+1),jQuery(e).show(),e="#2floor"+(c+1)+"_4",jQuery(e).html(fnArr_FileName[c]),e=d.split("."),e="#2floor"+(c+1)+"_1",jQuery(e).html(fnArr_ShortName[c]),e="#1floor"+(c+1)+"_1",jQuery(e).html(fnArr_ShortName[c]);fnArr_FileName[0]=d;fnArr_ShortName[0]=d;jQuery("#1floor1").show();jQuery("#1floor1_2").html(d);jQuery("#2floor1").show();jQuery("#2floor1_4").html(d);
e=d.split(".");jQuery("#2floor1_1").html(e[0]);e="#1floor1_1";jQuery(e).html("");c="";c=externalServerPhpUpload?cvjs_phpUploadPath:cvjs_phpPath;jQuery(e).axuploader({url:c+cvjs_serverUploadController,finish:function(a,b){a={};if(0<=k[k.length-1].indexOf("pdf")||0<=k[k.length-1].indexOf("PDF"))a.file=d,jQuery.ajax({url:cvjs_floorplansRelativePath+"load-header.php",type:"post",data:a,success:function(a){a=a.substring(0,8);0<=a.indexOf("PDF-1.2")||0<=a.indexOf("PDF-1.3")||0<=a.indexOf("PDF-1.4")||0<=
a.indexOf("PDF-1.5")||0<=a.indexOf("PDF-1.6")||(cvjs_debug&&console.log("The PDF version is currently unsupported, please use a PDF tool to save the file as Acrobat 7 (PDF 1.6) or below."),a="#1floor"+filesonserver,jQuery(a).hide(),a="#2floor"+filesonserver,jQuery(a).hide(),filesonserver--,a=cvjs_phpPath+"delete-file.php?file="+encodeURIComponent(cvjs_floorplansRelativePath+d),jQuery.ajax({url:a,cache:!1,success:function(a){}}))}});try{jQuery("#tree").jstree(!0).refresh(!0)}catch(p){console.log("we do not have a folder tree to update...:  "+
p)}},enable:!0,fileObject:b,remotePath:function(){cvjs_debug&&console.log("file upload "+cvjs_filepathServer+" file_and_ext"+d);cvjs_directFileLoad&&(cvjs_directFileLoadPath=cvjs_filepathServer+d);document.getElementById(a).value="";return cvjs_filepathServer}})}}}}var cvjs_fileLocationAbsolutePathsOnly=!1;
function cvjs_setServerFileLocation(a,b,c,d,e){cvjs_floorplansRelativePath=b;cvjs_filepathServer=a;cvjs_floorplanUrl=c;rest_contentUserName=d;rest_contentPassword=e;cvjs_fileLocationAbsolutePathsOnly=!1}function cvjs_setServerFileLocation_AbsolutePaths(a,b,c,d){cvjs_floorplansRelativePath="";cvjs_filepathServer=a;cvjs_floorplanUrl=b;rest_contentUserName=c;rest_contentPassword=d;cvjs_fileLocationAbsolutePathsOnly=!0}
function cvjs_exitServerFileLoadModal(){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#cvjs_serverFileLoadModal").hide();jQuery("#cvjs_serverFileLoadModal_table").hide()}function cvjs_callServerForDataOverlayProcessing(){}
function cvjs_loadFileWithDataOverlays(a,b){fileExtensionLower=a.substring(a.lastIndexOf(".")+1).toLowerCase();var c=0==fileExtensionLower.indexOf("dwg")||0==fileExtensionLower.indexOf("dwf")||0==fileExtensionLower.indexOf("dxf")||0==fileExtensionLower.indexOf("dgn")||0==fileExtensionLower.indexOf("pcf")?cvjs_floorplanUrl+a:cvjs_fileLocationAbsolutePathsOnly?cvjs_floorplanUrl+a:cvjs_floorplansRelativePath+a;cvjs_CompareFiles_CustomFileModalContent_flag&&(c=cvjs_CompareFiles_CustomFileModalContent[b-
1].url);if(cvjs_fileLoadTrialMode)for(filesonserver=0,b=cvjs_maxfiles;1<b;b--){var d="2floor"+b;jQuery("#1floor"+b).hide();jQuery("#"+d).hide()}1==cvjs_filename_list_status&&(cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]),rest_nname[cvjs_active_floorplan_div_nr].length=0,cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],c));if(2==cvjs_filename_list_status){cvjs_clearDrawingStickyNotes();cvjs_StickyNoteRedlineUrl=cvjs_redlinesRelativePath+a;if(0==cvjs_loadMultipleRedlinesStickyNotes){for(b=
0;b<vqRedlines.length;b++)cvjs_debug&&console.log(b+" remove red"+vqRedlines[b]),vqRedlines[b].remove();for(b=0;b<vqStickyNotes.length;b++)cvjs_debug&&console.log(b+"  "+vqStickyNotes[b]+" remove note"),vqStickyNotes[b].remove();cvjs_stickyNotesRedlines=[];cvjs_stickyNotesRedlines.length=0;cvjs_debug&&console.log("cvjs_stickynote "+cvjs_stickynote);cvjs_deleteAllStickyNotes();cvjs_deleteAllRedlines();vqRedlines.length=0;vqStickyNotes.length=0}cvjs_loadStickyNotesRedlines(floorplan_div_Array[cvjs_active_floorplan_div_nr])}3==
cvjs_filename_list_status&&(cvjs_SpaceObjectUrl=cvjs_spaceObjectsRelativePath+a,cvjs_debug&&console.log("loading "+cvjs_SpaceObjectUrl),cvjs_loadSpaceObjects(floorplan_div_Array[cvjs_active_floorplan_div_nr]));cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#cvjs_serverFileLoadModal").hide();jQuery("#cvjs_serverFileLoadModal_table").hide()}var fileload_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],cvjs_fileLoadToServer=!1;
function cvjs_loadBitmapsViaServerPath(a){cvjs_bitmapFileNameIsServerPath_flag=a}
function cvjs_openFileLoadToServer(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4)),a.lastIndexOf("_svg"),cvjs_convertSpaceObject=!1,cvjs_filename_list_status=1,filesonserver=0,cvjs_fileLoadToServer?(fileload_offset_flag[cvjs_active_floorplan_div_nr]&&(fileload_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_serverFileLoadModal").css({position:"fixed"}),
jQuery("#cvjs_serverFileLoadModal").offset({left:150+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().left,top:50+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top})),jQuery("#SelectFloorPlan").hide(),jQuery("#SelectFloorPlanPanel").hide(),jQuery("#SelectFloorPlanEdit").hide(),jQuery("#SelectFloorPlanPanelEdit").hide(),jQuery("#cvjs_cvRoomTextLayersOnLoad").html(""),jQuery("#serverFileModalName").html(languageTable.languages[cvjs_currentLanguage].FileLoadModal.Header),
jQuery("#addFloorPlanTable").show(),jQuery("#add_br_not_addFloorPlanTable").show(),jQuery("#addRedlineTable").hide(),jQuery("#infoFileModalNameDrawing").html(languageTable.languages[cvjs_currentLanguage].FileLoadModal.DrawingFilename),jQuery("#editFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].FileLoadModal.EditFloorplanInfo),jQuery("#infoFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].FileLoadModal.DrawingFilename),cvjs_initializeFileSelector()):cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
languageTable.languages[cvjs_currentLanguage].InfoMessageModal.FileLoadThroughApp))}var cvjs_fileLoadTrialMode=!1;function cvjs_setFileLoadTrialMode(a){cvjs_fileLoadTrialMode=a}var filenames_data_url_name="filenames.rw";
function cvjs_loadServerFileList(a){if(cvjs_CompareFiles_CustomFileModalContent_flag){for(var b=filesonserver=0;b<cvjs_CompareFiles_CustomFileModalContent.length;b++)fnArr_listdirectory_ShortName[b]=cvjs_CompareFiles_CustomFileModalContent[b].filenameText,fnArr_listdirectory_FileName[b]=cvjs_CompareFiles_CustomFileModalContent[b].filename;for(b=0;b<fnArr_listdirectory_FileName.length;b++){fnArr_ShortName[b]=fnArr_listdirectory_ShortName[b];fnArr_FileName[b]=fnArr_listdirectory_FileName[b];var c=b+
1,d="1floor"+c+"_2",e="2floor"+c+"_4",f="1floor"+c+"_1";c="2floor"+c+"_1";jQuery("#"+d).html(fnArr_listdirectory_FileName[b]);jQuery("#"+e).html(fnArr_listdirectory_FileName[b]);jQuery("#"+f).html(fnArr_listdirectory_ShortName[b]);jQuery("#"+c).html(fnArr_listdirectory_ShortName[b]);filesonserver++}for(b=0;b<filesonserver;b++)c=b+1,d="1floor"+c,e="2floor"+c,jQuery("#"+d).show(),jQuery("#"+e).show();for(b=cvjs_maxfiles;b>filesonserver;b--)d="1floor"+b,e="2floor"+b,jQuery("#"+d).hide(),jQuery("#"+e).hide();
console.log("cvjs_CompareFiles_CustomFileModalContent_flag before show!");jQuery("#SelectFloorPlan").show();jQuery("#SelectFloorPlanPanel").show();jQuery("#cvjs_serverFileLoadModal").show();jQuery("#cvjs_serverFileLoadModal_table").show()}else{d=e="";1==a&&(d=cvjs_floorplansRelativePath);2==a&&(d=d=cvjs_redlinesRelativePath);3==a&&(d=cvjs_spaceObjectsRelativePath);e="";e=!0;for(f=0;e;)0==d.indexOf("../")?(d=d.substring(3),f++):e=!1;e=!0;f=0;for(d=cvjs_phpPath;e;)0==d.indexOf("../")?(d=d.substring(3),
f++):e=!1;1==a&&(e=1<f?cvjs_floorplansRelativePath.substring(3*(f-1)):cvjs_floorplansRelativePath,cvjs_fileLocationAbsolutePathsOnly&&(e=cvjs_floorplanUrl),b=cvjs_phpPath+cvjs_serverLoadFileController+"?file="+e+filenames_data_url_name,cvjs_loadFileControllerFlag&&(b=cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+e+filenames_data_url_name));2==a&&(e=1<f?cvjs_redlinesRelativePath.substring(3*(f-1)):cvjs_redlinesRelativePath,cvjs_debug&&console.log("phpPath="+cvjs_phpPath+" 1 cvjs_loadServerFileList fpath="+
e),e=cvjs_redlinesAbsolutePathOnly?cvjs_filepathServerRedlines:cvjs_redlinesRelativePath,cvjs_debug&&console.log("ZZ"+cvjs_redlinesAbsolutePathOnly+"  "+cvjs_redlinesRelativePath+"  "+cvjs_filepathServerRedlines),cvjs_debug&&console.log(" 2 cvjs_loadServerFileList fpath="+e),b=cvjs_phpPath+cvjs_serverLoadFileController+"?file="+e+filenames_data_url_name,cvjs_loadRedlinesFileControllerFlag&&(b=cvjs_serverHandlersPath+cvjs_serverLoadFileControllerRedlines+"?file="+e+filenames_data_url_name));3==a&&
(e=1<f?cvjs_spaceObjectsRelativePath.substring(3*(f-1)):cvjs_spaceObjectsRelativePath,cvjs_debug&&console.log("phpPath="+cvjs_phpPath+" 1 cvjs_loadServerFileList fpath="+e),e=cvjs_spaceObjectsAbsolutePathOnly?cvjs_filepathServerSpaceObjects:cvjs_spaceObjectsRelativePath,cvjs_debug&&console.log("ZZ"+cvjs_spaceObjectsAbsolutePathOnly+"  "+cvjs_spaceObjectsRelativePath+"  "+cvjs_filepathServerSpaceObjects),cvjs_debug&&console.log(" 2 cvjs_loadServerFileList fpath="+e),b=cvjs_phpPath+cvjs_serverLoadFileController+
"?file="+e+filenames_data_url_name,cvjs_loadRedlinesFileControllerFlag&&(b=cvjs_serverHandlersPath+cvjs_serverLoadFileControllerRedlines+"?file="+e+filenames_data_url_name));cvjs_debug&&console.log(" cvjs_loadServerFileList "+b);jQuery.ajax({url:b,type:"post",cache:!1,success:function(b){var c=b.substring(0,6);fnArr_FileName.length=0;fnArr_ShortName.length=0;cvjs_debug&&console.log("loaded from server RW-2 200 characters:"+b.substring(0,200));if(0<=c.indexOf("RW")){b=b.split("|");c=b[1];var d=b[2].replace(/&amp;/g,
"&");d=d.split(";");for(var e=0;e<c;e++)fnArr_FileName[e]=d[e].replace(/&/g,"&amp;");d=b[3].replace(/&amp;/g,"&");d=d.split(";");for(e=0;e<c;e++)fnArr_ShortName[e]=d[e].replace(/&/g,"&amp;")}b="";c={};1==a&&(b=cvjs_serverHandlersPath+cvjs_serverListDirectoryController,c.directory=cvjs_filepathServer,c.directoryurl=cvjs_floorplansRelativePath);2==a&&(b=cvjs_serverHandlersPath+cvjs_serverListDirectoryControllerRedlines,c.directory=cvjs_filepathServerRedlines,c.directoryurl=cvjs_redlinesRelativePath);
3==a&&(b=cvjs_serverHandlersPath+cvjs_serverListDirectoryControllerRedlines,c.directory=cvjs_filepathServerSpaceObjects,c.directoryurl=cvjs_spaceObjectsRelativePath);cvjs_debug&&console.log("file list call:"+b);jQuery.ajax({url:b,type:"post",data:c,success:function(b){var c=b.split("<br>");filesonserver=0;b="";for(var d=0;d<fnArr_FileName.length;d++)b=b+" "+fnArr_FileName[d];cvjs_debug&&console.log("This is empty if there is no .rw file on server test_str(200)="+b.substring(0,200));fnArr_listdirectory_FileName=
[];fnArr_listdirectory_ShortName=[];if(2<=c.length)for(cvjs_debug&&console.log("n.length="+c.length),b=0;b<c.length-1;b++)fnArr_listdirectory_FileName[b]=c[b+1],d=c[b+1].split("."),fnArr_listdirectory_ShortName[b]=d[0];for(b=0;b<fnArr_listdirectory_FileName.length;b++)for(c=0;c<fnArr_FileName.length;c++)d=fnArr_listdirectory_FileName[b].replace(/&/g,"&amp;"),0<=d.indexOf(fnArr_FileName[c])&&d.length==fnArr_FileName[c].length&&(fnArr_listdirectory_ShortName[b]=fnArr_ShortName[c]);for(b=0;b<fnArr_listdirectory_FileName.length;b++){fnArr_ShortName[b]=
fnArr_listdirectory_ShortName[b];fnArr_FileName[b]=fnArr_listdirectory_FileName[b];c=b+1;d="1floor"+c+"_2";var e="2floor"+c+"_4",f="1floor"+c+"_1";c="2floor"+c+"_1";jQuery("#"+d).html(fnArr_listdirectory_FileName[b]);jQuery("#"+e).html(fnArr_listdirectory_FileName[b]);jQuery("#"+f).html(fnArr_listdirectory_ShortName[b]);jQuery("#"+c).html(fnArr_listdirectory_ShortName[b]);filesonserver++}cvjs_fileLoadTrialMode&&1==a&&(filesonserver=0,jQuery("#1floor1_1").html("xxxxxxxxxxx"),jQuery("#1floor1_2").html("xxx"),
jQuery("#2floor1_1").html("yyyyy"),jQuery("#2floor1_4").html("yyyyyyyyyyy"),jQuery("#1floor1").show(),jQuery("#2floor1").show());for(b=0;b<filesonserver;b++)c=b+1,d="1floor"+c,e="2floor"+c,jQuery("#"+d).show(),jQuery("#"+e).show();for(b=cvjs_maxfiles;b>filesonserver;b--)d="1floor"+b,e="2floor"+b,jQuery("#"+d).hide(),jQuery("#"+e).hide();cvjs_fileLoadTrialMode&&1==a&&(filesonserver=0,jQuery("#1floor1_1").html(""),jQuery("#1floor1_2").html(""),jQuery("#2floor1_1").html(""),jQuery("#2floor1_4").html(""),
jQuery("#1floor1").show(),jQuery("#2floor1").show());jQuery("#SelectFloorPlan").show();jQuery("#SelectFloorPlanPanel").show()},error:function(a){console.log("Error "+a)}});jQuery("#cvjs_serverFileLoadModal").show();jQuery("#cvjs_serverFileLoadModal_table").show()}})}}
function positionPopupUnlink(){1!=active_modal&&(active_modal=1,jQuery("#unlink_form").is(":visible")&&(jQuery("#unlink_form").css({left:225,top:150,position:"absolute"}),jQuery("#unlink_Modal_header").html(languageTable.languages[cvjs_currentLanguage].UnlinkModal.Header),jQuery("#unlink_modal_file").html(languageTable.languages[cvjs_currentLanguage].UnlinkModal.Text1+" <strong>"+delete_filename+"</strong>. "+languageTable.languages[cvjs_currentLanguage].UnlinkModal.Text2),jQuery("#SelectFloorPlanPanelEdit").css("filter",
"alpha(opacity=40)"),jQuery("#SelectFloorPlanPanelEdit").css("opacity","0.40")))}
function positionPopupClear(){1!=active_modal&&(active_modal=1,jQuery("#clear_form").is(":visible")&&(jQuery("#clear_form").css({left:225,top:150,position:"absolute"}),jQuery("#clear_Modal_header").html(languageTable.languages[cvjs_currentLanguage].ClearModal.Header),jQuery("#clear_modal_file").html(languageTable.languages[cvjs_currentLanguage].ClearModal.Text1+" <strong>"+delete_filename+"</strong>."),jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=40)"),jQuery("#SelectFloorPlanPanelEdit").css("opacity",
"0.40")))}
function positionPopup(){1!=active_modal&&(active_modal=1,jQuery("#delete_form").is(":visible")&&(jQuery("#delete_form").css({left:225,top:150,position:"absolute"}),jQuery("#delete_Modal_header").html(languageTable.languages[cvjs_currentLanguage].DeleteModal.Header),jQuery("#delete_modal_file_name1").html(languageTable.languages[cvjs_currentLanguage].DeleteModal.Text1+" <strong>"+delete_filename+"</strong> "+languageTable.languages[cvjs_currentLanguage].DeleteModal.Text2),jQuery("#SelectFloorPlanPanelEdit").css("filter","alpha(opacity=40)"),
jQuery("#SelectFloorPlanPanelEdit").css("opacity","0.40")))}
function delete_file_and_overlay(a){if(1==cvjs_filename_list_status){var b="";b=!0;for(var c=0,d=cvjs_floorplansRelativePath;b;)0==d.indexOf("../")?(d=d.substring(3),c++):b=!1;b=!0;c=0;for(d=cvjs_phpPath;b;)0==d.indexOf("../")?(d=d.substring(3),c++):b=!1;b=1<c?cvjs_floorplansRelativePath.substring(3*(c-1)):cvjs_floorplansRelativePath;cvjs_fileLocationAbsolutePathsOnly&&(b=cvjs_filepathServer);b=cvjs_phpPath+"delete-file.php?file="+encodeURIComponent(b+a)}if(2==cvjs_filename_list_status){b="";b=!0;
c=0;for(d=cvjs_redlinesRelativePath;b;)0==d.indexOf("../")?(d=d.substring(3),c++):b=!1;b=!0;c=0;for(d=cvjs_phpPath;b;)0==d.indexOf("../")?(d=d.substring(3),c++):b=!1;b=1<c?cvjs_redlinesRelativePath.substring(3*(c-1)):cvjs_redlinesRelativePath;cvjs_redlinesAbsolutePathOnly&&(b=cvjs_filepathServerRedlines);b=cvjs_phpPath+"delete-file.php?file="+encodeURIComponent(b+a)}jQuery.ajax({url:b,cache:!1,success:function(a){}});for(b=0;b<filesonserver;){if(0==a.indexOf(fnArr_FileName[b])&&a.length==fnArr_FileName[b].length){for(;b<
filesonserver-1;b++)fnArr_FileName[b]=fnArr_FileName[b+1],fnArr_ShortName[b]=fnArr_ShortName[b+1];b=filesonserver;filesonserver--}b++}save_filename_list()}var cvjs_redlinesAbsolutePathOnly=!1;function cvjs_setRedlinesRelativePath(a,b){cvjs_filepathServerRedlines=b;cvjs_redlinesRelativePath=a;cvjs_redlinesAbsolutePathOnly=!1}function cvjs_setRedlinesAbsolutePath(a,b){cvjs_filepathServerRedlines=b;cvjs_redlinesRelativePath=a;cvjs_redlinesAbsolutePathOnly=!0}var cvjs_openSpaceObjectSaveModal_flag=!1;
function cvjs_openSpaceObjectSaveModal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_openSpaceObjectSaveModal_flag=cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_filename_list_status=2,filesonserver=0,fileload_offset_flag[cvjs_active_floorplan_div_nr]&&(fileload_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_serverFileLoadModal").css({position:"fixed"}),jQuery("#cvjs_serverFileLoadModal").offset({left:150+jQuery("#"+a).position().left,top:50+
jQuery("#"+a).position().top})),jQuery("#attention_bitmap").hide(),jQuery("#SelectFloorPlan").hide(),jQuery("#SelectFloorPlanPanel").hide(),jQuery("#SelectFloorPlanEdit").hide(),jQuery("#SelectFloorPlanPanelEdit").hide(),jQuery("#cvjs_cvRoomTextLayersOnLoad").html(""),jQuery("#serverFileModalName").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.HeaderSpace),jQuery("#addFloorPlanTable").hide(),jQuery("#add_br_not_addFloorPlanTable").hide(),jQuery("#addRedlineTable").show(),jQuery("#infoFileModalNameDrawing").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.SpaceFilename),
jQuery("#editFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.EditSpaceInfo),jQuery("#infoFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.SpaceFilename),jQuery("#inputRedlineFileName").html('<input id="uploadredline_name_tag" type="text3_red" class="name_tags2_red" value="spaceobject-01.json">'),cvjs_debug&&console.log("cvjs_openRedlineSaveModal cvjs_loadServerFileList(3)"),cvjs_loadServerFileList(3))}
function cvjs_openRedlineSaveModal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log("cvjs_openRedlineSaveModal"),cvjs_openSpaceObjectSaveModal_flag=!1,cvjs_fileSaverRedlineMode=!0,cvjs_filename_list_status=2,filesonserver=0,fileload_offset_flag[cvjs_active_floorplan_div_nr]&&(fileload_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_serverFileLoadModal").css({position:"fixed"}),jQuery("#cvjs_serverFileLoadModal").offset({left:150+
jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#attention_bitmap").hide(),jQuery("#SelectFloorPlan").hide(),jQuery("#SelectFloorPlanPanel").hide(),jQuery("#SelectFloorPlanEdit").hide(),jQuery("#SelectFloorPlanPanelEdit").hide(),jQuery("#cvjs_cvRoomTextLayersOnLoad").html(""),jQuery("#serverFileModalName").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.Header),jQuery("#addFloorPlanTable").hide(),jQuery("#add_br_not_addFloorPlanTable").hide(),jQuery("#addRedlineTable").show(),
jQuery("#infoFileModalNameDrawing").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.RedlineFilename),jQuery("#editFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.EditRedlineInfo),jQuery("#infoFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.RedlineFilename),jQuery("#inputRedlineFileName").html('<input id="uploadredline_name_tag" type="text3_red" class="name_tags2_red" value="redline-01.js">'),cvjs_debug&&
console.log("cvjs_openRedlineSaveModal cvjs_loadServerFileList(2)"),cvjs_loadServerFileList(2))}
function cvjs_openRedlineLoadModal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log("cvjs_openRedlineLoadModal "),cvjs_fileLoaderRedlineMode=!0,cvjs_filename_list_status=2,filesonserver=0,fileload_offset_flag[cvjs_active_floorplan_div_nr]&&(fileload_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_serverFileLoadModal").css({position:"fixed"}),jQuery("#cvjs_serverFileLoadModal").offset({left:150+
jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#attention_bitmap").hide(),jQuery("#SelectFloorPlan").hide(),jQuery("#SelectFloorPlanPanel").hide(),jQuery("#SelectFloorPlanEdit").hide(),jQuery("#SelectFloorPlanPanelEdit").hide(),jQuery("#cvjs_cvRoomTextLayersOnLoad").html(""),jQuery("#serverFileModalName").html(languageTable.languages[cvjs_currentLanguage].OpenRedlineModal.Header),jQuery("#addFloorPlanTable").hide(),jQuery("#add_br_not_addFloorPlanTable").hide(),jQuery("#addRedlineTable").hide(),
jQuery("#infoFileModalNameDrawing").html(languageTable.languages[cvjs_currentLanguage].OpenRedlineModal.RedlineFilename),jQuery("#editFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].OpenRedlineModal.EditRedlineInfo),jQuery("#infoFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].OpenRedlineModal.RedlineFilename),cvjs_debug&&console.log("cvjs_openRedlineLoadModal cvjs_loadServerFileList(2)"),cvjs_loadServerFileList(2))}
var blackwhiteMode=0,cvjs_original_background="";
function cvjs_toggleBlackWhite(a){cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");var b=currentLoadedDrawingFullName.slice(-2);blackwhiteMode++;if(1>blackwhiteMode||3<blackwhiteMode)blackwhiteMode=1;0<b.indexOf("js")?(1==blackwhiteMode&&(cvjs_original_background=cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr].toString(),cvjs_colorAllLayersInDrawing_InvertBackground("000000",a)),2==blackwhiteMode&&cvjs_colorAllLayersInDrawing_InvertBackground("FFFFFF",
a),3==blackwhiteMode&&(cvjs_setBackgroundColorHex(cvjs_original_background,a),cvjs_LoadDrawing(a,currentLoadedDrawingFullName))):(1==blackwhiteMode&&(cvjs_original_background=cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr].toString(),cvjs_colorAllLayersInDrawing_InvertBackground_SVG("000000",blackwhiteMode,a)),2==blackwhiteMode&&cvjs_colorAllLayersInDrawing_InvertBackground_SVG("FFFFFF",blackwhiteMode,a),3==blackwhiteMode&&cvjs_colorAllLayersInDrawing_OriginalColor_SVG(a))}
function cvjs_colorAllLayersInDrawing_OriginalColor_SVG(a){var b={};jQuery("*[id]").each(function(){try{var c=jQuery(this).attr("id"),d="[id^="+a+"]";jQuery("#"+c).parents(d).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(b[c]||(b[c]=!0))}catch(g){}});for(var c in b)try{var d="#"+c;0==jQuery(d).attr("id").indexOf("cv_")&&(jQuery(d).css("stroke",cvjs_SVGLineColorArray[c]),jQuery(d).css("fill",cvjs_SVGFillColorArray[c]))}catch(e){}cvjs_setBackgroundColorHex(cvjs_original_background,
a)}var cvjs_SVGLineColorArray={},cvjs_SVGFillColorArray={},oArr={};
function cvjs_colorAllLayersInDrawing_InvertBackground_SVG(a,b,c){if(1==b){cvjs_setBackgroundColorHex("FFFFFF",c);cvjs_SVGFillColorArray={};cvjs_SVGLineColorArray={};var d="#"+a;oArr={};jQuery("*[id]").each(function(){try{var a=jQuery(this).attr("id"),b="[id^="+c+"]";jQuery("#"+a).parents(b).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(oArr[a]||(oArr[a]=!0))}catch(k){}});for(var e in oArr)try{var f="#"+e;0==jQuery(f).attr("id").indexOf("cv_")&&(cvjs_SVGLineColorArray[e]=jQuery(f).css("stroke"),
cvjs_SVGFillColorArray[e]=jQuery(f).css("fill"),"none"!=cvjs_SVGLineColorArray[e]&&jQuery(f).css("stroke",d),"none"!=cvjs_SVGFillColorArray[e]&&jQuery(f).css("fill",d))}catch(g){}}if(2==b)for(e in cvjs_setBackgroundColorHex("000000",c),d="#"+a,oArr)try{f="#"+e,0==jQuery(f).attr("id").indexOf("cv_")&&("none"!=cvjs_SVGLineColorArray[e]&&jQuery(f).css("stroke",d),"none"!=cvjs_SVGFillColorArray[e]&&jQuery(f).css("fill",d))}catch(g){}}
function cvjs_storeFillColors(){cvjs_SVGFillColorArray={};oArr={};jQuery("*[id]").each(function(){var a=jQuery(this).attr("id");oArr[a]||(oArr[a]=!0)});for(var a in oArr)try{var b="#"+a;0==jQuery(b).attr("id").indexOf("cv_")&&(cvjs_SVGFillColorArray[a]=jQuery(b).css("fill"))}catch(c){}}function cvjs_colorAllLayersInDrawing(a,b){cvjs_colorAllLayersInDrawing_InvertBackground(b,a)}
function cvjs_colorAllLayersInDrawing_InvertBackground(a,b){var c="";c=-1<a.indexOf("#")?a:"#"+a;jQuery("g[stroke]",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr])).each(function(a,b){b=jQuery(b);try{b.attr("stroke",c)}catch(f){}});jQuery("g[fill]",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr])).each(function(a,b){b=jQuery(b);try{"none"!=b.attr("fill")&&b.attr("fill",c)}catch(f){}});try{cvjs_setBackgroundColorHex(invertHex(a),b)}catch(d){}}
function invertHex(a){if(6!=a.length)return cvjs_debug&&console.log("error hexnum "+a),console.error("Hex color must be six hex numbers in length."),!1;a=a.toUpperCase();a=a.split("");var b="",c="FEDCBA9876".split(""),d=[];d.A="5";d.B="4";d.C="3";d.D="2";d.E="1";d.F="0";for(var e=0;6>e;e++)if(isNaN(a[e]))if(d[a[e]])b+=d[a[e]];else return console.error("Hex colors must only include hex numbers 0-9, and A-F"),!1;else b+=c[a[e]];return b}
var cvjs_filepathServerInsertImages="",cvjs_insertImagesRelativePath="../drawings/inserted_image_objects/",cvjs_insertimagesAbsolutePathOnly=!1;function cvjs_setInsertImageObjectsRelativePath(a,b){cvjs_filepathServerInsertImages=b;cvjs_insertImagesRelativePath=a;cvjs_imageObjectServerName=b+"imageObjects.js";cvjs_imageObjectUrl=a+"imageObjects.js";cvjs_insertimagesAbsolutePathOnly=!1}
function cvjs_setInsertImageObjectsAbsolutePath(a,b){cvjs_filepathServerInsertImages=b;cvjs_insertImagesRelativePath=a;cvjs_imageObjectServerName=b+"imageObjects.js";cvjs_imageObjectUrl=a+"imageObjects.js";cvjs_insertimagesAbsolutePathOnly=!0}
function cvjs_setInsertImageObjectsAbsolutePath_FileName(a,b,c){cvjs_filepathServerInsertImages=b;cvjs_insertImagesRelativePath=a;c=c.replace(/ /g,"_");cvjs_imageObjectServerName=b+"/imageObjects_"+c+".js";cvjs_imageObjectUrl=a+"/imageObjects_"+c+".js";cvjs_insertimagesAbsolutePathOnly=!0}function cvjs_add_image(){document.getElementById("upfile_image").click()}
function add_file_object_image(a){var b=a.value,c=floorplan_div_Array[cvjs_active_floorplan_div_nr];try{var d=a.files[0].size;var e=a.files[0].name;var f=a.files[0].path;cvjs_debug&&console.log(d+"  "+e+"  "+f)}catch(h){console.log(h);return}b=b.split("\\");var g=b[b.length-1];d=0;if(-1<g.indexOf("+")||-1<g.indexOf("%"))d=1;if(1==d)jQuery("#attention_1").html("Attention: Illegal character!"),jQuery("#attention_2").html("Illegal character in file name! Please rename and try again."),jQuery("#attention_bitmap").show();
else if(b=b[b.length-1].split("."),-1==".dwf|.dxf|.dwg|.png|.gif|.jpg|.tif|.tiff|.svg|.svgz|.js|.pdf|.dgn|.pcf".indexOf(b[b.length-1].toLowerCase()))jQuery("#attention_1").html("Attention: Format not supported!"),jQuery("#attention_2").html("CADViewer supports the following: <br> AutoCAD Formats: DWG, DXF, DWF <br> MicroStation Formats: DGN, PCF <br>Bitmap Formats: JPG, GIF, PNG, TIFF <br>Scalable Vector Graphics: SVG and SVGZ. <br>Acrobat: PDF<br>CADViewer: .JS JavaScript files. "),jQuery("#attention_bitmap").show();
else{cvjs_fileLoadTrialMode&&(filesonserver=0);for(d=b=0;d<filesonserver;d++)0==fnArr_FileName[d].indexOf(g)&&(b=1);1==b?(jQuery("#attention_1").html("Attention:"),jQuery("#attention_2").html(g+" has already been uploaded! "),jQuery("#attention_bitmap").show()):(b="",b=externalServerPhpUpload?cvjs_phpUploadPath:cvjs_phpPath,jQuery("#1floor1").html(""),jQuery("#1floor1").axuploader({url:b+cvjs_serverUploadController,finish:function(a,b){vqImageNotes[currentImageNoteId].data("imageObject",g);cvjs_buildFolderTree_crossDomain?
jQuery("#cvjs_floorPlanInsertImage").html("<img src='"+cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+cvjs_insertImagesRelativePath+"/"+vqImageNotes[currentImageNoteId].data("imageObject")+"' height='"+vqImageNotes[currentImageNoteId].data("imageHeight")+"' />"):jQuery("#cvjs_floorPlanInsertImage").html("<img src='"+cvjs_insertImagesRelativePath+"/"+vqImageNotes[currentImageNoteId].data("imageObject")+"' height='"+vqImageNotes[currentImageNoteId].data("imageHeight")+"' />");jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+
c).css("width",vqImageNotes[currentImageNoteId].data("imageWidth")+8);jQuery("#cvjs_floorPlanInsertImage").css("width",vqImageNotes[currentImageNoteId].data("imageWidth"));jQuery("#cvjs_floorPlanInsertImageTop").css("width",vqImageNotes[currentImageNoteId].data("imageWidth"))},enable:!0,fileObject:a,remotePath:function(){return cvjs_filepathServerInsertImages}}))}}
var cvjs_insertImageObjects,imageObjects_loaded=!1,current_image_js_initialized=0,cvjs_imageObjectUrl="../drawings/demo/inserted_image_objects/imageObjects.js",cvjs_imageObjectServerName="../drawings/demo/inserted_image_objects/imageObjects.js",cvjs_imageObjectName;
function cvjs_loadAllImageLinks(a,b){void 0==b&&(b="");a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);imageObjects_loaded=!1;a=cvjs_serverHandlersPath+cvjs_serverLoadFileControllerRedlines;cvjs_debug&&console.log("brach 2 "+a+"  file="+cvjs_imageObjectUrl);var c={};c.file=cvjs_imageObjectUrl;c.custom_content=b;jQuery.ajax({url:a,type:"post",data:c,success:function(a){cvjs_debug&&console.log("Load redlines: "+a);cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]);
cvjs_addInlineScript(a);imageObjects_loaded=!0;cvjs_loadImageObjectTimer()},error:function(a){console.log("Error "+a)}})}
function cvjs_loadImageObjectTimer(){if(imageObjects_loaded){cvjs_currentImageLink_id=load_failures=0;if(0<vqImageNotes.length){for(var a=0;a<vqImageNotes.length;a++)vqImageNotes[a].data("deleted",!0),vqImageNotes[a].attr({transform:"S0.001",opacity:"0.01"});vqImageNotes.length=0}cvjs_currentImageLink_underbar=cvjs_currentImageLink_id=0;for(var b in cvjs_insertImageObjects)make_imageIcon(cvjs_currentImageLink_id,cvjs_insertImageObjects[b].transform,cvjs_insertImageObjects[b].imageObject,cvjs_insertImageObjects[b].currentPage,
cvjs_insertImageObjects[b].username,cvjs_insertImageObjects[b].userid),cvjs_currentImageLink_id++,cvjs_currentImageLink_underbar++}else 80>load_failures?setTimeout(function(){cvjs_loadImageObjectTimer()},256):cvjs_debug&&console.log("Object load failed! - please check if imageObject Url is set correct: ")}
function make_imageIcon(a,b,c,d,e,f){var g=floorplan_div_Array[cvjs_active_floorplan_div_nr],h=0;10>a+1&&(h=3);tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M0,0h20v20h-20v-20Z").attr({stroke:"#000000","stroke-width":"1.0"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M4,11h11v8h-11v-8h2").attr({stroke:"#000000","stroke-width":"0.5"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].text(3+h,9,"#"+(a+1)).attr({"font-size":"8px","font-style":"italic",
stroke:"#000000","stroke-width":"0.3",fill:"#000000","fill-opacity":1}),cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M4,19 8,14 10,16 12.5,15 15,19").attr({stroke:"#000000","stroke-width":"0.5",fill:"#000000"}));tRubberBand_c.attr({transform:b,opacity:"1"});tRubberBand_c.attr({fill:"#DCCCFF","fill-opacity":"0.8",stroke:"#000","stroke-opacity":"1"});cvjs_currentStickyNote_transform=b;h=tRubberBand_c.data("node",cvjs_currentImageLink_underbar);vqImageNotes.push(h);currentImageNoteId=vqImageNotes.length-
1;vqImageNotes[a].data("id",a+1);vqImageNotes[a].data("name","object"+(a+1));vqImageNotes[a].data("layer","objectLayer");vqImageNotes[a].data("group","unassigned");vqImageNotes[a].data("username",e);vqImageNotes[a].data("userid",f);vqImageNotes[a].data("currentPage",d);vqImageNotes[a].data("imageObject",c);vqImageNotes[a].data("imageHeight",450);vqImageNotes[a].data("imageWidth",600);vqImageNotes[a].data("transform",b);jQuery("#cvjs_floorPlanInsertImage").html("");vqImageNotes[currentImageNoteId].mousedown(function(a){currentImageNoteId=
this.data("node");jQuery("#cvjs_imageObject").html("<b>"+languageTable.languages[cvjs_currentLanguage].ImageObjectModal.Header+(currentImageNoteId+1)+"</b>");""==vqImageNotes[currentImageNoteId].data("imageObject")?jQuery("#cvjs_floorPlanInsertImage").html(""):(cvjs_buildFolderTree_crossDomain?jQuery("#cvjs_floorPlanInsertImage").html("<img src='"+cvjs_serverHandlersPath+cvjs_serverLoadFileController+"?file="+cvjs_insertImagesRelativePath+"/"+vqImageNotes[currentImageNoteId].data("imageObject")+"' height='"+
vqImageNotes[currentImageNoteId].data("imageHeight")+"' />"):jQuery("#cvjs_floorPlanInsertImage").html("<img src='"+cvjs_insertImagesRelativePath+"/"+vqImageNotes[currentImageNoteId].data("imageObject")+"' height='"+vqImageNotes[currentImageNoteId].data("imageHeight")+"' />"),jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+g).css("width",vqImageNotes[currentImageNoteId].data("imageWidth")+8),jQuery("#cvjs_floorPlanInsertImage").css("width",vqImageNotes[currentImageNoteId].data("imageWidth")),jQuery("#cvjs_floorPlanInsertImageTop").css("width",
vqImageNotes[currentImageNoteId].data("imageWidth")));cvjs_graphicalObjectOnChange("Click","ImageLink",this.data("id"));jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+g).show()}).mousemove(function(a){currentImageNoteId=this.data("node");vqImageNotes[currentImageNoteId].attr(highlightColor_ImageNotes)}).mouseout(function(a){currentImageNoteId=this.data("node");vqImageNotes[currentImageNoteId].attr(defaultColor_ImageNotes)}).mouseup(function(a){}).touchstart(function(a){}).touchmove(function(a){}).touchend(function(a){}).dblclick(function(a){})}
function cvjs_addInlineScript(a){jQuery(function(){jQuery("<script>").attr("type","text/javascript").text(a).appendTo("head")})}
function cvjs_saveAllImageLinks(a,b){void 0==b&&(b="");a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);if(!(1>vqImageNotes.length)){var c=0;a="var cvjs_insertImageObjects = {\n";for(var d in vqImageNotes)1!=vqImageNotes[d].data("deleted")&&(0==c?c=1:a+="\t\t\t\t\t\t,\n",a=a+"\t\t\t\t\tOBJECT_"+(vqImageNotes[d].data("node")+1)+": {\n",a=a+'\t\t\t\t\t\tname: "'+vqImageNotes[d].data("name")+'",\n',a=a+'\t\t\t\t\t\tid: "'+vqImageNotes[d].data("id")+'",\n',
a=a+'\t\t\t\t\t\tlayer: "'+vqImageNotes[d].data("layer")+'",\n',a=a+'\t\t\t\t\t\tgroup: "'+vqImageNotes[d].data("group")+'",\n',a=a+'\t\t\t\t\t\tusername: "'+vqImageNotes[d].data("username")+'",\n',a=a+'\t\t\t\t\t\tuserid: "'+vqImageNotes[d].data("userid")+'",\n',a=a+"\t\t\t\t\t\tcurrentPage: "+vqImageNotes[d].data("currentPage")+",\n",a=a+'\t\t\t\t\t\timageObject: "'+vqImageNotes[d].data("imageObject")+'",\n',a=a+'\t\t\t\t\t\timageHeight: "'+vqImageNotes[d].data("imageHeight")+'",\n',a=a+'\t\t\t\t\t\timageWidth: "'+
vqImageNotes[d].data("imageWidth")+'",\n',a=a+'\t\t\t\t\t\ttransform: "'+vqImageNotes[d].data("transform")+'"\n',a+="\t\t\t\t\t}\n");d=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;c={};c.file=cvjs_imageObjectServerName;c.file_content=a+"}\n\n\njQuery(document).ready(function() { \n\timageObjects_loaded = true; \n}); \nimageObjects_loaded = true; \n";c.custom_content=b;jQuery.ajax({url:d,type:"post",data:c,success:function(a){var b="Save Image Notes: "+a;a&&0!==a.length||(b="Image Icons Saved");
cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],b);if(0<vqImageNotes.length){for(a=0;a<vqImageNotes.length;a++)vqImageNotes[a].data("deleted",!0),vqImageNotes[a].attr({transform:"S0.001",opacity:"0.01"});vqImageNotes.length=0}cvjs_currentImageLink_underbar=cvjs_currentImageLink_id=0}})}}
function cvjs_clearAllImageLinks(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);if(0<vqImageNotes.length){for(a=0;a<vqImageNotes.length;a++)vqImageNotes[a].data("deleted",!0),vqImageNotes[a].attr({transform:"S0.001",opacity:"0.01"});vqImageNotes.length=0}cvjs_currentImageLink_underbar=cvjs_currentImageLink_id=0}
function cvjs_loadDrawingsWithSpaceObjects(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_filename_list_status=1,filesonserver=0,cvjs_convertSpaceObject=!1,cvjs_fileLoadToServer?(fileload_offset_flag[cvjs_active_floorplan_div_nr]&&(fileload_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_serverFileLoadModal").offset({left:150+
jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().left,top:50+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top})),jQuery("#SelectFloorPlan").hide(),jQuery("#SelectFloorPlanPanel").hide(),jQuery("#SelectFloorPlanEdit").hide(),jQuery("#SelectFloorPlanPanelEdit").hide(),jQuery("#serverFileModalName").html(languageTable.languages[cvjs_currentLanguage].FileLoadSpaceModal.Header),jQuery("#cvjs_cvRoomTextLayersOnLoad").html('<canvas id="dummy" width="36" height="12"></canvas>'+
languageTable.languages[cvjs_currentLanguage].FileLoadSpaceModal.BuildRoomTextHyperlinks+'<canvas id="dummy" width="10" height="10"></canvas><input type="checkbox" id="cvjs_convert_RL_TL_checkbox" value="conversion_status"><br><canvas id="dummy" width="16" height="8">'),jQuery("#cvjs_convert_RL_TL_checkbox").change(function(){cvjs_convertSpaceObject=jQuery(this).is(":checked")?!0:!1}),jQuery("#addFloorPlanTable").show(),jQuery("#add_br_not_addFloorPlanTable").hide(),jQuery("#addRedlineTable").hide(),
jQuery("#infoFileModalNameDrawing").html(languageTable.languages[cvjs_currentLanguage].FileLoadSpaceModal.DrawingFilename),jQuery("#editFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].FileLoadSpaceModal.EditFloorplanInfo),jQuery("#infoFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].FileLoadSpaceModal.DrawingFilename),cvjs_initializeFileSelector()):cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.FileLoadThroughApp))}
function cvjs_conversion_cleanFilesDirectory(){var a=JSON.stringify({action:"clear_files_folder"});tms_rest_api_url=tms_rest_api_url1+rest_php_version;cvjs_debug&&console.log(" index of"+tms_rest_api_url1.indexOf("tms-restful-api"));-1<tms_rest_api_url1.indexOf("tms-restful-api")&&(cvjs_passwordProtected=!0,cvjs_isLicensed&&(cvjs_usr="tms",cvjs_pwd="restful"),cvjs_debug&&console.log(cvjs_isLicensed+" "+cvjs_usr+" "+cvjs_pwd));if(cvjs_passwordProtected){var b=tms_rest_api_url.indexOf("//");var c=tms_rest_api_url.substring(0,
b+2);b=tms_rest_api_url.substring(b+2);c=c+cvjs_usr+":"+cvjs_pwd+"@"+b}else c=tms_rest_api_url;b="";b=cvjs_encodeURIcall_server?c+"?json="+encodeURIComponent(a):c+"?json="+a;cvjs_debug&&console.log(c+" in makeConversion  request="+encodeURIComponent(a)+"  non encoded request: "+a);cvjs_jsonp_handshake&&(cvjs_debug&&console.log("before ajax call to php "),jQuery.ajax({url:b,jsonp:"tms_restful_api",dataType:"jsonp",success:function(a){cvjs_debug&&console.log("jsonP Conversion success: "+a)},error:function(a,
b,c){-10<c.toString().indexOf("Files Deleted!")||console.log("1 jsonp getEngines error="+a.responseText+" status="+b+" error="+c)}}));cvjs_servlet_handshake&&(cvjs_debug&&console.log("2: before ajax call to Servlet"),b={},b.request=a,cvjs_debug&&console.log("before ajax call to Servlet filelist_data['request'] "+b.request),jQuery.ajax({url:c,type:"post",data:b,success:function(a){cvjs_debug&&console.log("json delete success: "+a)},error:function(a){-1<a.toString().indexOf("Files Deleted!")||console.log("2 json getEngines error="+
a)}}));cvjs_post_handshake&&(cvjs_debug&&console.log("before ajax post call"),b={},b.json_data=a,jQuery.ajax({url:c,type:"POST",data:b,success:function(a){cvjs_debug&&console.log("post delete: "+a)},error:function(a){-1<a.toString().indexOf("Files Deleted!")||console.log("3 jsonp getEngines error="+a)}}))}var cvjs_spaceObjectUserMode=!1;function cvjs_setSpaceObjectUserMode(a){cvjs_spaceObjectUserMode=a}var cvjs_newList,cvjs_addSpaceObjectType=0;
function cvjs_addRectangleSpaceObject(a){cvjs_addSpaceObjectType=2;jQuery("#cvjs_spaceobjectsettingsTextHeader").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.ModalRect);"unassigned"==jQuery("#cvjs_spaceobjectLayerFromModal").val()&&jQuery("#cvjs_spaceobjectLayerFromModal").val("cvjs_SpaceLayer");var b=cvjs_currentMaxSpaceNodeId();b++;jQuery("#cvjs_spaceobjectIdFromModal").val(b);cvjs_spaceObjectsInitSettingsModal(a)}
function cvjs_addRectangleSpaceObjectCore(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();var b=cvjs_currentMaxSpaceNodeId();b++;a=Node_underbar+b;cvjs_currentNode_layer=jQuery("#cvjs_spaceobjectLayerFromModal").val();var c,d=jQuery("#cvjs_spaceobjectIdFromModal").val();""!=d?b=c=d:c=b;d=cvjs_currentNode_layer;var e="Space",f=jQuery("#cvjs_spaceobjectTypeFromModal").val();""!=f&&(e=f);cvjs_setCurrentNodeValues(a,b,c,d,"","","",e,"unassigned",
"",!1,0,0,1,1,0,"");cvjs_addHandleFunc_Rectangle()}function cvjs_addPolygonSpaceObject(a){cvjs_addSpaceObjectType=1;jQuery("#cvjs_spaceobjectsettingsTextHeader").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.ModalPoly);"unassigned"==jQuery("#cvjs_spaceobjectLayerFromModal").val()&&jQuery("#cvjs_spaceobjectLayerFromModal").val("cvjs_SpaceLayer");var b=cvjs_currentMaxSpaceNodeId();b++;jQuery("#cvjs_spaceobjectIdFromModal").val(b);cvjs_spaceObjectsInitSettingsModal(a)}
function cvjs_addPolygonSpaceObjectCore(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();var b=cvjs_currentMaxSpaceNodeId();b++;a=Node_underbar+b;cvjs_currentNode_layer=jQuery("#cvjs_spaceobjectLayerFromModal").val();var c,d=jQuery("#cvjs_spaceobjectIdFromModal").val();""!=d?b=c=d:c=b;d=cvjs_currentNode_layer;var e="Space",f=jQuery("#cvjs_spaceobjectTypeFromModal").val();""!=f&&(e=f);cvjs_setCurrentNodeValues(a,b,c,d,"","","",e,"unassigned",
"",!1,0,0,1,1,0,"");cvjs_addHandleFunc_Polygon()}function cvjs_addCircleSpaceObject(a){cvjs_addSpaceObjectType=3;jQuery("#cvjs_spaceobjectsettingsTextHeader").html(languageTable.languages[cvjs_currentLanguage].InitSpaceObjects.ModalCircle);"unassigned"==jQuery("#cvjs_spaceobjectLayerFromModal").val()&&jQuery("#cvjs_spaceobjectLayerFromModal").val("cvjs_SpaceLayer");var b=cvjs_currentMaxSpaceNodeId();b++;jQuery("#cvjs_spaceobjectIdFromModal").val(b);cvjs_spaceObjectsInitSettingsModal(a)}
function cvjs_addCircleSpaceObjectCore(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();var b=cvjs_currentMaxSpaceNodeId();b++;a=Node_underbar+b;cvjs_currentNode_layer=jQuery("#cvjs_spaceobjectLayerFromModal").val();var c,d=jQuery("#cvjs_spaceobjectIdFromModal").val();""!=d?b=c=d:c=b;d=cvjs_currentNode_layer;var e="Space",f=jQuery("#cvjs_spaceobjectTypeFromModal").val();""!=f&&(e=f);cvjs_setCurrentNodeValues(a,b,c,d,"","","",e,"unassigned",
"",!1,0,0,1,1,0,"");cvjs_addHandleFunc_Circle()}function cvjs_copyCircleSpaceObject(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();a=cvjs_currentMaxSpaceNodeId();a++;cvjs_setCurrentNodeValues(Node_underbar+a,a,a,cvjs_currentNode_layer,"","","","Space","unassigned","",!1,0,0,1,1,0,"");cvjs_addHandleFunc_CopyCircle()}
function cvjs_clearSpaceObjects(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);try{for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var c="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node")+"_group";jQuery(c).remove()}cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length=0;cvjs_clearSpaceLayer()}catch(d){console.log("DeleteNode err: "+d)}}var cvjs_displayModalAlreadyCalled=!1;
function cvjs_deleteSpaceObject(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_supressPopUpModal=!0;cvjs_creationInputType=2;cluster_host_flag=1;a=cvjs_getSpaceObjectIdList();for(spc in a)cvjs_highlightSpace(a[spc],cvjs_highlight_colorgrade_delete);cvjs_supressPopUpModal?icon_command_active=3:cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.NotSpaceMode)}
function xcvjs_ObjectSelected(a){if(cvjs_spaceObjectUserMode)jQuery("#drop_locations").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][findRoom(a)].data("name")+'<span class="caret"></span>');else{cvjs_lastObj[cvjs_active_floorplan_div_nr]=findRoom(a);cvjs_debug&&console.log("object clicked "+a+" command active: "+icon_command_active);cvjs_debug&&console.log(a+"  "+findRoom(a)+" "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][findRoom(a)]);if(10==icon_command_active){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==
a){var c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("layer");cvjs_LayerOff(c)}icon_command_active=6}else if(3==icon_command_active){try{for(b in cvjs_debug&&console.log("delete node icon_command_active "+icon_command_active),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a){var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id");
cvjs_setUpVqRooms_deleteNode(d);CADViewer_floorplan_methods(d);cvjs_debug&&console.log("HERE 1");try{jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip("destroy")}catch(g){console.log("check destroy: "+g)}}}catch(g){console.log("active command 3 "+g)}cvjs_debug&&console.log("HERE 2");icon_command_active=-1;try{cvjs_graphicalObjectOnChange("Delete","SpaceObject",c)}catch(g){console.log(g)}cvjs_displayModalAlreadyCalled||(cvjs_setCreationMode(!cvjs_supressPopUpModal,!0,a),cvjs_displayModalAlreadyCalled=
!1);cvjs_clearSpaceLayer();cvjs_standardHighLightColors=!0}if(33==icon_command_active)for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a){d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");cvjs_setUpVqRooms_deleteNode(d);CADViewer_floorplan_methods(d);console.log("Delete Space Image - the node is: "+d);c="#cv_"+d+"_image";try{jQuery(c).remove()}catch(g){console.log(g)}cvjs_supressPopUpModal=
!1;cvjs_standardHighLightColors=!0;for(var e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")!=d){c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id_link",c);c='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+c+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("name")+
'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+c+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("type")+"</h4></td></tr></table>";var f=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))f=f.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")),
f=f.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")),f=f.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id"));dual_hbody_flag&&(-1<=parseInt(cvjs_currentNode_id)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].node).qtip({content:{text:f,title:c},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},
hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].node).qtip({content:{text:hbody_2,title:c},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].node).qtip({content:{text:f,title:c},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},
hideOnHTMLClick:"false"})}hideOnlyPop();cvjs_clearDrawing()}if(34==icon_command_active){cvjs_debug&&console.log("IN 34 rmid "+a);try{for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a&&(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),cvjs_debug&&console.log("node "+d),CADViewer_floorplan_methods_2(a),cvjs_supressPopUpModal=!1,cvjs_standardHighLightColors=!0,cvjs_clearSpaceLayer(),cvjs_addHandleFunc_ResizeDragSpace(d,
a,b))}catch(g){console.log("ResizeDrag Space loop "+g)}}else for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a&&(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),CADViewer_floorplan_methods(d))}currentSelectedId=a}var cvjs_displayModal=!1;
function cvjs_changeSpaceObjectDisplayMode(a,b){try{if(void 0==b&&(b=!0),a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a),cvjs_changeSpaceObject_ManualCreationMode){cvjs_debug&&console.log("cvjs_changeSpaceObjectDisplayMode here - generic handling");cluster_host_flag=1;for(var c=0,d=0;100>d;d++)fArr_Name[c]="",fArr_Id[c]="",fArr_PolygonNr[c]=-1,fArr_PolygonLayerName[c]="none",fArr_Type[c]=-1,fArr_Occupancy[c]=-1,fArr_Tags[c]=-1,c++;cvjs_supressPopUpModal=
!0;cvjs_creationInputType=2;1==cvjs_supressPopUpModal&&(cvjs_setCreationMode(cvjs_supressPopUpModal,!0),cvjs_clearDrawing(),cvjs_draw_space_object_names_on_spaces(),b&&(cvjs_spaceObjectsChangeSettingsModal(a),cvjs_displayModalAlreadyCalled=b))}else 0==cluster_host_flag?cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ConnectToHostFirst):(hideOnlyPop(),cvjs_clearDrawing(),(cvjs_supressPopUpModal=!cvjs_supressPopUpModal)?
cvjs_showCreationModeModal(a):jQuery("#IconMenuPanel").hide())}catch(e){console.log("cvjs_changeSpaceObjectDisplayMode: "+e)}}function setLocationMode(){}function cvjs_setLastObj(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a){cvjs_lastObj[cvjs_active_floorplan_div_nr]=b;break}}
function cvjs_change_space(a){if(cvjs_spaceObjectUserMode)if(cvjs_debug&&console.log("change space "+a),hidePop(),setLocationMode(),0==a)jQuery("#drop_locations").html('All Spaces<span class="caret"></span>');else{var b=cvjs_highlightRoomImmediate(a,!0);if(0<=b){spaceId=a;cvjs_lastObj[cvjs_active_floorplan_div_nr]=findRoom(a);jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip("show");a=!1;try{a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("qtip")}catch(c){console.log(c+
" QTIP not defined")}a||(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("qtip",!0),jQuery("#hideOnlyPop_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){hideOnlyPop()}),jQuery("#cvjs_popupTitleClick_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){cvjs_popupTitleClick(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&
0!=cvjs_frontEndHandlerType.indexOf("angular"))||(jQuery("#my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){my_own_clickmenu1(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),jQuery("#my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){my_own_clickmenu2(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),jQuery("#cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",
function(){cvjs_zoomHere()}));cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id");jQuery("#drop_locations").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name")+'<span class="caret"></span>')}}}function sortByColumn(a,b){a.sort(function(a,d){return a[b]===d[b]?0:a[b]<d[b]?-1:1});return a}
function cvjs_displaySpaceObjectsStructure(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_displaySpaceObjectsStructureInternal(a,"","","","")}
function cvjs_displaySpaceObjectsStructureInternal(a,b,c,d,e){-1<a.indexOf("_svg")&&(a=a.substring(0,a.indexOf("_svg")));console.log("cvjs_displaySpaceObjectsStructure:  "+a);cvjs_setCreationMode(!1,!0);hideOnlyPop();cvjs_clearDrawing();cvjs_debug&&console.log("1 display Space Object Structure");"undefined"!==typeof id_supress_call_cluster_host&&1==id_supress_call_cluster_host||call_cluster_host();cvjs_setSpaceObjectUserMode(!0);cvjs_debug&&console.log("2 display Space Object Structure");jQuery("<link/>",
{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/topbar.css"}).appendTo("head");jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/navbar.css"}).appendTo("head");jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/headerbar.css"}).appendTo("head");jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/legend.css"}).appendTo("head");
jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/tempbar.css"}).appendTo("head");jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/wizards.css"}).appendTo("head");jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/font-awesome.css"}).appendTo("head");jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/modal_01.css"}).appendTo("head");
jQuery("<link/>",{rel:"stylesheet",type:"text/css",href:cvjs_applicationFolder+"/user_resources/css/combined-floorplan.css"}).appendTo("head");cvjs_displayTopMenuIconBar(!1,a);jQuery("#topIconMenu_placeholder_1_"+a+"_svg").hide();jQuery("#floatNavigationMenu_"+a+"_svg").hide();cvjs_hideNavigationMenu(a);jQuery("#cvjs_spaceObjectUserDisplay").load(cvjs_ServerUrl+"/app/cv/cv-pro/space/html/nav_user_SpaceObjects_A_3_3_01.html",function(){jQuery("#searchModal").hide();jQuery("#searchModal").draggable();
jQuery("#searchModal").css({position:"absolute"});jQuery("#searchModal").css({left:300,top:100});jQuery("#searchModalCloseButton").on("click",function(){jQuery("#searchModal").hide()});jQuery("#site_name").html(cvjs_FileNameNoExtension);var a="<img src='"+cvjs_imagesLocation+"menu_cv_search_right.png'>";jQuery("#iconSearch").html(a);a="<img src='"+cvjs_imagesLocation+"logo_cv_d.png'>";jQuery("#user_logoCV").html(a);a="<img src='"+cvjs_imagesLocation+"menu_cv_right.png'>";jQuery("#dropdownMenu1").append(a);
void 0==b||""==b?jQuery("#site_name").html(cvjs_FileNameNoExtension):jQuery("#site_name").html(b);if(void 0==c||""==c)if(1<=multiPages[cvjs_active_floorplan_div_nr].currentPage&&jQuery("#drop_floor").html(multiPages[cvjs_active_floorplan_div_nr].pages[multiPages[cvjs_active_floorplan_div_nr].currentPage-1].pageName+'<span class="caret"></span>'),a="",1==id_main_data_dropfloor_single_drawing)for(var g=0;1>g;g++)a=a+"<li><a href=\"javascript:change_drawing('"+g+"')\">"+multiPages[cvjs_active_floorplan_div_nr].pages[g].pageName+
"</a></li>";else for(g=0;g<multiPages[cvjs_active_floorplan_div_nr].multiPages;g++)a=a+"<li><a href=\"javascript:change_drawing('"+g+"')\">"+multiPages[cvjs_active_floorplan_div_nr].pages[g].pageName+"</a></li>";else for(jQuery("#drop_floor").html(c+'<span class="caret"></span>'),a="",g=0;g<d.length;g++)a=a+"<li><a href=\"javascript:change_drawing('"+g+"')\">"+d[g]+"</a></li>";jQuery("#floors_list").html(a);""==id_main_data_layer?(jQuery("#locations_sensors_list").html("<li><a href=\"javascript:change_objects_generic('0')\">"+
languageTable.languages[cvjs_currentLanguage].HeaderObjectLayers.ObjectLayer[0]+"</a></li><li><a href=\"javascript:change_objects_generic('1')\">"+languageTable.languages[cvjs_currentLanguage].HeaderObjectLayers.ObjectLayer[1]+"</a></li>"),jQuery("#drop_locations_sensors").html(languageTable.languages[cvjs_currentLanguage].HeaderObjectLayers.ObjectLayer[0]+' <span class="caret"></span>')):(jQuery("#locations_sensors_list").html("<li><a href=\"javascript:change_objects_generic('0')\">"+id_main_data_layer+
"</a></li>"),jQuery("#drop_locations_sensors").html(id_main_data_layer+' <span class="caret"></span>'));jQuery("#drop_locations").html('All Spaces<span class="caret"></span>');jQuery("#drop_floor").mouseenter(function(a){cvjs_displayInformationModal("floorPlan_svg","Changes layout of the drawing, in case multiple layouts for the current drawing is available.",110,jQuery("#drop_floor").offset().left+100,jQuery("#drop_floor").offset().top+20)});jQuery("#drop_floor").mouseleave(function(a){cvjs_hideInformationModal("floorPlan")});
jQuery("#drop_locations_sensors").mouseenter(function(a){cvjs_displayInformationModal("floorPlan_svg","Selects the data-layer(s) with interactive content if multiple layers are available, as default this is cvjs_Data_Layer.",110,jQuery("#drop_locations_sensors").offset().left+100,jQuery("#drop_locations_sensors").offset().top+20)});jQuery("#drop_locations_sensors").mouseleave(function(a){cvjs_hideInformationModal("floorPlan")});jQuery("#drop_locations").mouseenter(function(a){cvjs_displayInformationModal("floorPlan_svg",
"Drop-down access to all interactive content in the current drawing displayed. Select the object by it's ID.",110,jQuery("#drop_locations").offset().left+100,jQuery("#drop_locations").offset().top+20)});jQuery("#drop_locations").mouseleave(function(a){cvjs_hideInformationModal("floorPlan")});jQuery("#dropdown_custom_1").hide();jQuery("#dropdown_custom_2").hide();jQuery("#dropdown_custom_3").hide();jQuery("#dropdown_custom_4").hide();jQuery("#dropdown_custom_5").hide();jQuery("#dropdown_custom_6").hide();
try{""!=id_custom_1_dropdown_name&&(jQuery("#dropmenu_custom_1").html(id_custom_1_dropdown_name+' <span class="caret"></span>'),cvjs_buildCustom_1_dropdownMenu(),jQuery("#dropdown_custom_1").show())}catch(k){console.log("1"+k)}try{""!=id_custom_2_dropdown_name&&(jQuery("#dropmenu_custom_2").html(id_custom_2_dropdown_name+' <span class="caret"></span>'),cvjs_buildCustom_2_dropdownMenu(),jQuery("#dropdown_custom_2").show())}catch(k){console.log("2"+k)}""!=id_custom_3_dropdown_name&&(jQuery("#dropmenu_custom_3").html(id_custom_3_dropdown_name+
' <span class="caret"></span>'),cvjs_buildCustom_3_dropdownMenu(),jQuery("#dropdown_custom_3").show());""!=id_custom_4_dropdown_name&&(jQuery("#dropmenu_custom_4").html(id_custom_4_dropdown_name+' <span class="caret"></span>'),cvjs_buildCustom_4_dropdownMenu(),jQuery("#dropdown_custom_4").show());""!=id_custom_5_dropdown_name&&(jQuery("#dropmenu_custom_5").html(id_custom_5_dropdown_name+' <span class="caret"></span>'),cvjs_buildCustom_5_dropdownMenu(),jQuery("#dropdown_custom_5").show());""!=id_custom_6_dropdown_name&&
(jQuery("#dropmenu_custom_6").html(id_custom_6_dropdown_name+' <span class="caret"></span>'),cvjs_buildCustom_6_dropdownMenu(),jQuery("#dropdown_custom_6").show());"undefined"!==typeof id_supress_standard_dropdown_menus&&0!=id_supress_standard_dropdown_menus&&(jQuery("#drop_locations").html(""),jQuery("#drop_floor").html(""),jQuery("#drop_locations_sensors").html(""));jQuery("#selections_list").html('<li><a href="javascript:display_maps()">Data Maps</a></li><li role="presentation" class="divider"></li><li><a href="javascript:display_info()">Site Info</a></li>');
cvjs_newList="<li><a href=\"javascript:cvjs_change_space('0')\">All Spaces</a></li>";a=[];g=0;for(var h in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])a[g]=[],a[g][0]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][h].data("id"),a[g][1]=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][h].data("name"),g++;a=sortByColumn(a,0);for(h in a)cvjs_newList=""==e||void 0==e?cvjs_newList+"<li><a href=\"javascript:cvjs_change_space('"+a[h][0]+"')\">"+a[h][1]+"</a></li>":cvjs_newList+'<li><a href="javascript:'+
e+"('"+a[h][0]+"')\">"+a[h][1]+"</a></li>";jQuery("#locations").html(cvjs_newList);jQuery(".siteInfo").click(function(){cvjs_debug&&console.log("Site Info")});jQuery(".mapData").click(function(){jQuery("#mapDataModal").modal("show")});jQuery("#iconSearch").click(function(){jQuery("#SearchQuantity").html("");jQuery("#SearchResultsList").html("");jQuery("#searchfield_tag").val("");cvjs_hidePop();jQuery("#drop_locations").html('All Spaces<span class="caret"></span>');jQuery("#searchfield_tag").val("");
buildSearchList(e);jQuery("#searchModal").show()});jQuery("#iconSearch").mouseover(function(){jQuery("#iconSearch").css("cursor","pointer")});jQuery("#searchfield_tag").on("change keyup paste",function(){buildSearchList(e)});jQuery("#searchfield_tag").submit(function(){});jQuery("#searchModal").submit(function(){buildSearchList(e)});jQuery("#search_button").click(function(){buildSearchList(e)});jQuery("#searchfield_tag").click(function(){buildSearchList(e)})});cvjs_displayMapsStatus=!0;jQuery("#datamaps_form").show();
jQuery("#cvjs_displayData_switch").prop("checked")?jQuery("#datamaps_form").css("left",40).css("top",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height()-197):jQuery("#datamaps_form").css("left",40).css("top",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height()-120);custom_host_parser_PopUpMenu()}
var seachInObjArrFlag=0,seachInObjArrCounter=0;
function buildSearchList(a){var b=jQuery("#searchfield_tag").val();seachInObjArrCounter=seachInObjArrFlag=0;b=searchInObjArray(vqRooms,b.toLowerCase());if(1==seachInObjArrFlag||0==seachInObjArrCounter)jQuery("#SearchQuantity").html("0 item(s)"),jQuery("#SearchResultsList").html("");else{jQuery("#SearchQuantity").html(b.length+" item(s)");jQuery("#SearchResultsList").html("");for(var c=0;c<b.length;c++){var d=""==a||void 0==a?'<div class="searchItem row"><div class="searchSubItem col-md-12" onmouseup="search_pick_space(\''+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b[c]].data("id")+
"')\"onmouseover=\"search_highlight_space('"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b[c]].data("id")+'\');" onmouseout="search_highlight_mouseout();">':'<div class="searchItem row"><div class="searchSubItem col-md-12" onmouseup="'+a+"('"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b[c]].data("id")+"')\"onmouseover=\"search_highlight_space('"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b[c]].data("id")+'\');" onmouseout="search_highlight_mouseout();">';var e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b[c]].data("type");
0<e.indexOf("<br>")&&(e=e.replace(/<br>/g,"   -   "));d=d+'<div class="searchItem-name">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b[c]].data("name")+'</div><div class="searchItem-type"><small>'+e+"</small></div>";jQuery("#SearchResultsList").append(d)}}return!1}function getUnique(a){var b=[a[0]],c,d;for(c=1;c<a.length;c++){var e=1;for(d=0;d<b.length;d++)if(a[c]==b[d]){e=0;break}e&&b.push(a[c])}return b}
function searchInObjArray(a,b){a=[];try{for(var c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])-1!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("name").toLowerCase().indexOf(b)?(seachInObjArrCounter=1,a.push(c)):-1!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("type").toLowerCase().indexOf(b)&&(seachInObjArrCounter=1,a.push(c));b=b.replace(/ /gi,"&nbsp;");b=b.replace(/\u00A0/gi,"&nbsp;");for(c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])for(var d=
1,e="tag1",f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data(e);void 0!=f;)-1!=f.toLowerCase().indexOf(b)&&(seachInObjArrCounter=1,a.push(c)),e="tag"+ ++d,f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data(e)}catch(g){seachInObjArrFlag=1,console.log("Err C "+g)}return getUnique(a)}var mouseout_flag=!0;function search_highlight_mouseout(){mouseout_flag?cvjs_clearAllDrawing():mouseout_flag=!0}function search_highlight_space(a){cvjs_highlightRoomImmediate(a,!0)}
function search_pick_space(a){cvjs_pick_space(a);mouseout_flag=!1;jQuery("#searchModal").hide()}var settings_changes=0;
function cvjs_spaceObjectSettings(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);settings_changes=0;jQuery("#cvjs_spaceObjectAdminSettings_"+a).show();jQuery("#cvjs_spaceObjectAdminSettings_"+a).load(cvjs_ServerUrl+"/app/cv/cv-pro/space/html/nav_admin_SpaceObjects_B_1_05.html",function(){jQuery("#SettingsPanel").draggable();jQuery("#cancel_settings_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Inactive_4.png");jQuery("#save_settings_image").attr("src",
""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Inactive.png");jQuery("#CloseSettingsX").append('<img src="'+cvjs_imagesLocation+'CrossX.png">');0==settings_changes&&(jQuery("#id_api_proxy_url").val(api_proxy_url),jQuery("#id_usr").val(usr),jQuery("#id_pwd").val(pwd),jQuery("#id_building_name").val(building_name),jQuery("#id_company").val(company),jQuery("#id_address").val(address),jQuery("#id_city").val(city),jQuery("#id_zipcode").val(zipcode),jQuery("#id_state").val(state),jQuery("#id_country").val(country),
jQuery("#id_FacMgr").val(FacMgr_name),jQuery("#id_FacMgr_title").val(FacMgr_title),jQuery("#id_FacMgr_email").val(FacMgr_email),jQuery("#id_FacMgr_phone").val(FacMgr_phone),jQuery("#id_refresh_rate").val(refresh_rate),jQuery("#id_data_connector").val(id_data_connector),jQuery("#id_data_parser").val(id_data_parser),jQuery("#id_publish_location").val(id_publish_location),jQuery("#id_main_data_layer").val(id_main_data_layer),jQuery("#id_datafield1_name").val(id_datafield1_name),jQuery("#id_datafield1_value").val(id_datafield1_value),
jQuery("#id_datafield2_name").val(id_datafield2_name),jQuery("#id_datafield2_value").val(id_datafield2_value),jQuery("#id_datalayer1_name").val(id_datalayer1_name),jQuery("#id_datalayer1_value").val(id_datalayer1_value),jQuery("#id_datalayer2_name").val(id_datalayer2_name),jQuery("#id_datalayer2_value").val(id_datalayer2_value),jQuery("#cv_link10_id_datalayer_name").val(id_datalayer2_name));jQuery("#cancel_settings").mouseover(function(){jQuery("#cancel_settings_image").attr("src",""+cvjs_imagesLocation+
"tools/Cancel_Over_2.png")});jQuery("#cancel_settings").mouseout(function(){jQuery("#cancel_settings_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Inactive_4.png")});jQuery("#cancel_settings").mousedown(function(){jQuery("#cancel_settings_image").attr("src",""+cvjs_imagesLocation+"tools/Cancel_Down_3.png");jQuery("#id_api_proxy_url").val(api_proxy_url);jQuery("#id_usr").val(usr);jQuery("#id_pwd").val(pwd);jQuery("#id_building_name").val(building_name);jQuery("#id_company").val(company);
jQuery("#id_address").val(address);jQuery("#id_city").val(city);jQuery("#id_zipcode").val(zipcode);jQuery("#id_state").val(state);jQuery("#id_country").val(country);jQuery("#id_FacMgr").val(FacMgr_name);jQuery("#id_FacMgr_title").val(FacMgr_title);jQuery("#id_FacMgr_email").val(FacMgr_email);jQuery("#id_FacMgr_phone").val(FacMgr_phone);jQuery("#id_refresh_rate").val(refresh_rate);jQuery("#id_data_connector").val(id_data_connector);jQuery("#id_data_parser").val(id_data_parser);jQuery("#id_publish_location").val(id_publish_location);
jQuery("#id_main_data_layer").val(id_main_data_layer);jQuery("#id_datafield1_name").val(id_datafield1_name);jQuery("#id_datafield1_value").val(id_datafield1_value);jQuery("#id_datafield2_name").val(id_datafield2_name);jQuery("#id_datafield2_value").val(id_datafield2_value);jQuery("#id_datalayer1_name").val(id_datalayer1_name);jQuery("#id_datalayer1_value").val(id_datalayer1_value);jQuery("#id_datalayer2_name").val(id_datalayer2_name);jQuery("#id_datalayer2_value").val(id_datalayer2_value);jQuery("#Settings").hide();
jQuery("#SettingsPanel").hide();jQuery("#settings_image").attr("src",""+cvjs_imagesLocation+"Settings_Up_1.png");jQuery("#settings div").css("color","#DDDDDD")});jQuery("#id_api_proxy_url").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_usr").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_pwd").click(function(){settings_changes=
1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_data_connector").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_data_parser").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_publish_location").click(function(){settings_changes=1;
jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_main_data_layer").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datafield1_name").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datafield1_value").click(function(){settings_changes=
1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datafield2_name").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datafield2_value").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datalayer1_name").click(function(){settings_changes=
1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datalayer1_value").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datalayer2_name").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_datalayer2_value").click(function(){settings_changes=
1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_building_name").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_company").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_address").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",
""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_city").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_state").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_zipcode").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});
jQuery("#id_country").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_FacMgr").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_FacMgr_title").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_FacMgr_email").click(function(){settings_changes=
1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#id_FacMgr_phone").click(function(){settings_changes=1;jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#save_settings").mouseover(function(){1==settings_changes&&jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Over.png")});jQuery("#save_settings").mouseout(function(){0==settings_changes&&
jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Inactive.png");1==settings_changes&&jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Up.png")});jQuery("#save_settings").mousedown(function(){if(1==settings_changes){refresh_rate=jQuery("#id_refresh_rate").val();var a=parseInt(refresh_rate,10);0>a?(console.log("Refresh Rate value must be between 1 and 3600."),refresh_rate=-a):3601>a&&0<a?refresh_rate=a:(console.log("Refresh Rate value must be between 1 and 3600."),
refresh_rate=30);jQuery("#id_refresh_rate").val(refresh_rate);jQuery("#save_settings_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_111x28_Down.png");settings_changes=0;api_proxy_url=jQuery("#id_api_proxy_url").val();usr=jQuery("#id_usr").val();pwd=jQuery("#id_pwd").val();building_name=jQuery("#id_building_name").val();company=jQuery("#id_company").val();address=jQuery("#id_address").val();city=jQuery("#id_city").val();zipcode=jQuery("#id_zipcode").val();state=jQuery("#id_state").val();
country=jQuery("#id_country").val();FacMgr_name=jQuery("#id_FacMgr").val();FacMgr_title=jQuery("#id_FacMgr_title").val();FacMgr_email=jQuery("#id_FacMgr_email").val();FacMgr_phone=jQuery("#id_FacMgr_phone").val();refresh_rate=jQuery("#id_refresh_rate").val();id_data_connector=jQuery("#id_data_connector").val();id_data_parser=jQuery("#id_data_parser").val();id_publish_location=jQuery("#id_publish_location").val();id_main_data_layer=jQuery("#id_main_data_layer").val();id_datafield1_name=jQuery("#id_datafield1_name").val();
id_datafield1_value=jQuery("#id_datafield1_value").val();id_datafield2_name=jQuery("#id_datafield2_name").val();id_datafield2_value=jQuery("#id_datafield2_value").val();id_datalayer1_name=jQuery("#id_datalayer1_name").val();id_datalayer1_value=jQuery("#id_datalayer1_value").val();id_datalayer2_name=jQuery("#id_datalayer2_name").val();id_datalayer2_value=jQuery("#id_datalayer2_value").val();a='var usr = "'+usr+'";\n';a=a+'var pwd = "'+pwd+'";\n';a=a+'var api_proxy_url = "'+api_proxy_url+'";\n';a=a+
'var building_name = "'+building_name+'";\n';a=a+'var company = "'+company+'";\n';a=a+'var address = "'+address+'";\n';a=a+'var city = "'+city+'";\n';a=a+'var zipcode = "'+zipcode+'";\n';a=a+'var state = "'+state+'";\n';a=a+'var country = "'+country+'";\n';a=a+'var FacMgr_name = "'+FacMgr_name+'";\n';a=a+'var FacMgr_title = "'+FacMgr_title+'";\n';a=a+'var FacMgr_email = "'+FacMgr_email+'";\n';a=a+'var FacMgr_phone = "'+FacMgr_phone+'";\n';a=a+'var refresh_rate = "'+refresh_rate+'";\n';a=a+'var id_data_connector = "'+
id_data_connector+'";\n';a=a+'var id_data_parser = "'+id_data_parser+'";\n';a=a+'var id_publish_location = "'+id_publish_location+'";\n';a=a+'var id_main_data_layer = "'+id_main_data_layer+'";\n';a=a+'var id_datafield1_name = "'+id_datafield1_name+'";\n';a=a+'var id_datafield1_value = "'+id_datafield1_value+'";\n';a=a+'var id_datafield2_name = "'+id_datafield2_name+'";\n';a=a+'var id_datafield2_value = "'+id_datafield2_value+'";\n';a=a+'var id_datalayer1_name = "'+id_datalayer1_name+'";\n';a=a+'var id_datalayer1_value = "'+
id_datalayer1_value+'";\n';a=a+'var id_datalayer2_name = "'+id_datalayer2_name+'";\n';a=a+'var id_datalayer2_value = "'+id_datalayer2_value+'";\n';var c=cvjs_serverHandlersPath+cvjs_serverSaveFileController,d={file:"../app/js/space/custom_settings.js"};d.file_content=a;cvjs_debug&&console.log(a+" "+d.file+"  "+c);jQuery.ajax({url:c,type:"post",data:d,success:function(a){}})}"undefined"!==typeof id_supress_call_cluster_host&&1==id_supress_call_cluster_host||call_cluster_host();jQuery("#Settings").hide();
jQuery("#SettingsPanel").hide();jQuery("#settings_image").attr("src",""+cvjs_imagesLocation+"Settings_Up_1.png");jQuery("#settings div").css("color","#DDDDDD")});jQuery("#CloseSettingsX").click(function(){jQuery("#Settings").hide();jQuery("#SettingsPanel").hide()})})}var cluster_host_flag=0;
function call_cluster_host(){cvjs_debug&&console.log("CALL CLUSTER HOST");var a=cvjs_ServerUrl+id_data_connector,b={};b.url=api_proxy_url;b.usr=usr;b.pwd=pwd;b.id_datafield1_name=id_datafield1_value;b.id_datafield1_value=id_datafield1_value;b.id_datafield2_name=id_datafield2_value;b.id_datafield2_value=id_datafield2_value;b.id_datalayer1_name=id_datalayer1_name;b.id_datalayer1_value=id_datalayer1_value;b.id_datalayer2_name=id_datalayer2_name;b.id_datalayer2_value=id_datalayer2_value;cluster_host_flag=
1;cvjs_debug&&console.log("CALL CLUSTER HOST finalUrl="+a);jQuery.ajax({url:a,type:"post",data:b,success:function(a){cvjs_debug&&console.log("host_response="+a+"XXX");""==a||-1<a.indexOf("Error 500:")?(cluster_host_flag=0,cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ErrorConnectingToHost)):(cluster_host_flag=1,cvjs_debug&&console.log("id_data_parser="+id_data_parser),jQuery.getScript(id_data_parser).done(function(a,
b){console.log("status="+b)}).fail(function(a,b,c){console.log("Triggered ajaxError handler. "+a+" "+b+"  "+c)}),cvjs_debug&&console.log("after getScript1"),jQuery.getScript(id_data_parser,function(b,c,f){cvjs_customHostParser(a)}))},failure:function(a){cluster_host_flag=0;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.ErrorConnectingToHost)}})}var Node_underbar="NODE_";icon_command_active=0;
var selectedLinkUnlinkLayer="",space_object_input_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];save_drawing_flag=0;var space_object_edit_mode=!1;edit_cancel_flag=!1;
function cvjs_spaceObjectInputPanel(a,b){void 0==b&&(b="");jQuery("#cvjs_spaceObjectInputPanel_"+a).show();jQuery("#cvjs_spaceObjectInputPanel_"+a).load(cvjs_ServerUrl+"/app/cv/cv-pro/space/html/nav_admin_SpaceObjects_C_1_06.html",function(){jQuery("#IconMenuPanel").draggable();jQuery("#CloseObjectMenuX").append('<img src="'+cvjs_imagesLocation+'CrossX.png">');jQuery("#save_drawing_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_240x22_Inactive.png");jQuery("#cv_link10_id_datalayer_name").html(id_datalayer2_name);
jQuery("#layer_tag").val(id_main_data_layer);jQuery("#type_tag").val(id_main_data_template_type);jQuery("#spaces_drawing").html(new_linkList);jQuery("#spaces_manual_tag").click(function(){jQuery("#done_editing_location").css("color","#0096d7")});jQuery("#c").click(function(){jQuery("#done_editing_location").css("color","#0096d7")});jQuery("#spaces_drawing").click(function(){jQuery("#done_editing_location").css("color","#0096d7")});jQuery("#type_tag").click(function(){jQuery("#done_editing_location").css("color",
"#0096d7")});jQuery("#layer_tag").click(function(){jQuery("#done_editing_location").css("color","#0096d7")});jQuery("#occupancy_tag").click(function(){jQuery("#done_editing_location").css("color","#0096d7")});jQuery("#other_tags").click(function(){jQuery("#done_editing_location").css("color","#0096d7")});space_object_input_offset_flag[cvjs_active_floorplan_div_nr]&&(space_object_input_offset_flag[cvjs_active_floorplan_div_nr]=!0,jQuery("#IconMenuPanel").css({position:"fixed"}),jQuery("#IconMenuPanel").offset({left:600+
jQuery("#"+a).position().left,top:150+jQuery("#"+a).position().top}));jQuery("#IconMenuPanel").show();jQuery("#IconMenuPanel").height(140);jQuery("#location_text_static").hide();jQuery("#location_text_dynamic").hide();jQuery("#CloseObjectMenuX").css("cursor","pointer");jQuery("#CloseObjectMenuX").click(function(){jQuery("#IconMenuPanel").hide();cvjs_setCreationMode(!cvjs_supressPopUpModal,!0);hideOnlyPop();cvjs_clearDrawing()});save_drawing_flag=1;jQuery("#save_drawing").mouseover(function(){1==save_drawing_flag&&
jQuery("#save_drawing_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_240x22_Over.png")});jQuery("#save_drawing").mouseout(function(){1==save_drawing_flag&&jQuery("#save_drawing_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_240x22_Up.png")});jQuery("#save_drawing").mousedown(function(){if(1==save_drawing_flag){jQuery("#IconMenuPanel").css("filter","alpha(opacity=20)");jQuery("#IconMenuPanel").css("opacity","0.20");jQuery("#savepane_small").fadeIn(500);jQuery("#savepane_small").show();
var a=jQuery(window).width()/2,d=(jQuery(window).height()-14)/2;d=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();var e=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?(a=d.left+a/2-86,d=d.top+e/2-14):(a=a/2-86,d=e/2-14);jQuery("#savepane_small").css({left:a,top:d,position:"absolute"});jQuery("#save_drawing_image").attr("src",
""+cvjs_imagesLocation+"tools/SaveChanges_240x22_Down.png");save_drawing_flag=0;reset_color_on_selected_space();a=id_publish_location.substring(id_publish_location.lastIndexOf("/")+1);var f=a.substring(0,a.lastIndexOf(".")),g=id_publish_location;a="";d=!1;""==cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]&&(console.log("Source file not DWG!"),d=!0);a=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr];d&&(a=currentLoadedDrawingFullName);-1<a.indexOf("/")&&(a=a.substring(a.lastIndexOf("/")+
1));a=a.substring(0,a.lastIndexOf("."));g=cvjs_filepathServerSpaceObjects+"space_"+a+".js";handleUpdates=0;var h=dataHandleString="";h="";h=cvjs_changeSpaceObject_ManualCreationMode?cvjs_createSpaceOutput_JSfile():cvjs_createSpaceOutput_JSfile_Legacy();var k=cvjs_serverHandlersPath+cvjs_serverSaveFileController;k=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;-1<g.indexOf("\\")||(g=encodeURIComponent(g));a={};a.file=g;a.file_content=h;a.custom_content=b;cvjs_debug&&console.log(k+" tempstr="+
g+" dataUrl="+h);jQuery.ajax({url:k,type:"post",data:a,success:function(a){cvjs_debug&&console.log("succes html "+a);jQuery("#save_drawing_image").attr("src",""+cvjs_imagesLocation+"tools/SaveChanges_240x22_Inactive.png");save_drawing_flag=0;jQuery("#IconMenuPanel").css("filter","alpha(opacity=100)");jQuery("#IconMenuPanel").css("opacity","1");jQuery("#savepane_small").fadeOut(500);jQuery("#savepane_small").hide();dataHandleString="<cvjsAddXdataToHandle>\n<totalUpdateHandles>"+handleUpdates+"</totalUpdateHandles>\n"+
dataHandleString+"</cvjsAddXdataToHandle>";console.log(dataHandleString+"  "+f+" "+id_publish_location);a=id_publish_location.substring(0,id_publish_location.lastIndexOf("."))+".xml";var c={};c.file=encodeURIComponent(a);c.file_content=dataHandleString;c.custom_content=b;cvjs_debug&&console.log(k+" tempstr="+g+" dataUrl="+h);jQuery.ajax({url:k,type:"post",data:c,success:function(a){}})}})}});jQuery("#done_editing_location").mousedown(function(){var a=currentLinkId,b="";if(1==cvjs_creationInputType){cvjs_debug&&
console.log("done_editing_location linkID="+currentLinkId+" link unlink layer "+selectedLinkUnlinkLayer);for(var e=0;e<fArr_Name.length;e++)if(fArr_Id[e]==currentLinkId){fArr_PolygonNr[e]=a;fArr_PolygonLayerName[e]=selectedLinkUnlinkLayer;b=fArr_Name[e];cvjs_debug&&console.log("index in array:"+e+" fArr_PolygonNr[i] "+fArr_PolygonNr[e]+" fArr_PolygonLayerName[i] "+fArr_PolygonLayerName[e]+" "+b);fArr_Type[e]=jQuery("#type_tag").val();fArr_Occupancy[e]=jQuery("#occupancy_tag").val();fArr_Layer[e]=
jQuery("#layer_tag").val();for(var f in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("id")==fArr_Id[e]&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].removeData("layer"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("layer",jQuery("#layer_tag").val()),jQuery("#layer_s").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("layer")));fArr_Tags[e]=jQuery("#other_tags").val();jQuery("#location_s").html(fArr_Name[e]);
jQuery("#type_s").html(fArr_Type[e]);jQuery("#occupancy_s").html(fArr_Occupancy[e]);jQuery("#tags_s").html(fArr_Tags[e]);jQuery("#layer_s").html(fArr_Layer[e])}for(e=0;e<fArr_Name_fixtures.length;e++)if(fArr_Id_fixtures[e]==currentLinkId){fArr_PolygonNr_fixtures[e]=a;fArr_PolygonLayerName_fixtures[e]=selectedLinkUnlinkLayer;b=""==fArr_Name_fixtures[e]?fArr_Id_fixtures[e]:fArr_Name_fixtures[e];fArr_Type_fixtures[e]=jQuery("#type_tag").val();fArr_Layer_fixtures[e]=jQuery("#layer_tag").val();for(f in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("id")==
fArr_Id_fixtures[e]&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].removeData("layer"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("layer",jQuery("#layer_tag").val()),jQuery("#layer_s").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("layer")));fArr_Occupancy_fixtures[e]=jQuery("#occupancy_tag").val();fArr_Tags_fixtures[e]=jQuery("#other_tags").val();""==fArr_Name_fixtures[e]?jQuery("#location_s").html(fArr_Id_fixtures[e]):jQuery("#location_s").html(fArr_Name_fixtures[e]);
jQuery("#type_s").html(fArr_Type_fixtures[e]);jQuery("#occupancy_s").html(fArr_Occupancy_fixtures[e]);jQuery("#tags_s").html(fArr_Tags_fixtures[e])}generate_new_linkList();generate_new_linkList_fixtures()}else b=currentLinkId=jQuery("#spaces_manual_tag").val(),console.log("currentLinkId "+currentLinkId+" "+a+"  "+currentSelectedId),jQuery("#location_s").html(currentLinkId),jQuery("#type_s").html(jQuery("#type_tag").val()),jQuery("#occupancy_s").html(jQuery("#occupancy_tag").val()),jQuery("#tags_s").html(jQuery("#other_tags").val()),
jQuery("#layer_s").html(jQuery("#layer_tag").val());for(f in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("id")==currentSelectedId&&(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].data("node"),cvjs_setCurrentNodeValuesFromExistingNode(a),console.log(" before cvjs_overwriteNodeValues "+a+" "+currentLinkId+" "+b+" "+jQuery("#layer_tag").val()),console.log(" before cvjs_overwriteNodeValues "+cvjs_currentNode_group+
" unpopulated "+cvjs_currentNode_attributes),cvjs_overwriteNodeValues(a,currentLinkId,b,jQuery("#layer_tag").val(),cvjs_currentNode_group," ","unpopulated",jQuery("#type_tag").val()," ",jQuery("#occupancy_tag").val(),!0,""),cvjs_redrawPop());jQuery("#unlink_location").html("Unlink Location");jQuery("#unlink_location").css("color","#0096d7");jQuery("#done_editing_location").html("");jQuery("#edit_cancel_location").html("Edit Fields");edit_cancel_flag=!1;jQuery("#location_text_static").show();jQuery("#location_text_dynamic").hide();
save_drawing_flag=1;jQuery("#save_drawing_image").attr("src","../app/images/tools/SaveChanges_240x22_Up.png");for(e=0;e<fArr_Name.length;e++)fArr_PolygonLayerName[e].indexOf("NODE_");for(e=0;e<fArr_Name_fixtures.length;e++)fArr_PolygonLayerName_fixtures[e].indexOf("NODE_");cvjs_draw_space_object_names_on_spaces()});jQuery("#unlink_location").mousedown(function(){for(var a=0;a<fArr_Name.length;a++)fArr_PolygonLayerName[a]==selectedLinkUnlinkLayer&&(fArr_PolygonNr[a]=-1,fArr_PolygonLayerName[a]="none",
fArr_Type[a]=-1,fArr_Occupancy[a]=-1,fArr_Tags[a]=-1);for(a=0;a<fArr_Name_fixtures.length;a++)fArr_PolygonLayerName_fixtures[a]==selectedLinkUnlinkLayer&&(fArr_PolygonNr_fixtures[a]=-1,fArr_PolygonLayerName_fixtures[a]="none",fArr_Type_fixtures[a]=-1,fArr_Occupancy_fixtures[a]=-1,fArr_Tags_fixtures[a]=-1);generate_new_linkList();generate_new_linkList_fixtures();selectedLinkUnlinkLayer.substring(5);for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==
currentSelectedId){a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");cvjs_debug&&console.log("node="+a);var e=a.substring(a.lastIndexOf("NODE_")+5);cvjs_overwriteNodeValues(a,a,"unassigned_"+e,"unassigned","unassigned","unassigned","unassigned","unassigned","unassigned",!1,"");cvjs_redrawPop()}for(a=0;a<fArr_Name.length;a++)fArr_PolygonLayerName[a].indexOf("NODE_");for(a=0;a<fArr_Name_fixtures.length;a++)fArr_PolygonLayerName_fixtures[a].indexOf("NODE_");cvjs_debug&&console.log("done unlink!");
jQuery("#unlink_location").css("color","#999999");jQuery("#drop_link_spaces").html('None Selected<b class="caret"></b>');jQuery("#drop_link_fixtures").html('None Selected<b class="caret"></b>');jQuery("#type_tag").val(" ");jQuery("#type_tag").val(id_main_data_template_type);jQuery("#layer_tag").val(" ");jQuery("#layer_tag").val(id_main_data_layer);jQuery("#occupancy_tag").val(" ");jQuery("#other_tags").val(" ");jQuery("#location_s").html("None Selected");jQuery("#type_s").html("-");jQuery("#occupancy_s").html("-");
jQuery("#tags_s").html("-");jQuery("#layer_s").html("-");jQuery("#maximoid1_s").html("-");jQuery("#maximoid2_s").html("-");jQuery("#maximoid3_s").html("-");jQuery("#maximo_df_1").html("-");jQuery("#maximo_df_2").html("-");jQuery("#maximo_df_3").html("-");jQuery("#save_drawing_image").attr("src","../app/images/tools/SaveChanges_240x22_Up.png");save_drawing_flag=1});jQuery("#edit_cancel_location").mousedown(function(){if(0==edit_cancel_flag)-1==cvjs_lastObj?cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],
languageTable.languages[cvjs_currentLanguage].InfoMessageModal.NoObjectSelected):(jQuery("#edit_cancel_location").html("Cancel"),jQuery("#done_editing_location").html("Done Editing"),jQuery("#unlink_location").html(""),jQuery("#location_text_static").hide(),jQuery("#location_text_dynamic").show(),jQuery("#IconMenuPanel").height(370),edit_cancel_flag=!0);else{jQuery("#edit_cancel_location").html("Edit Fields");jQuery("#done_editing_location").html("");jQuery("#unlink_location").html("Unlink Location");
jQuery("#location_text_static").show();jQuery("#location_text_dynamic").hide();jQuery("#IconMenuPanel").height(240);for(var a=0;a<fArr_Name.length;a++)fArr_PolygonLayerName[a].indexOf("NODE_");for(a=0;a<fArr_Name_fixtures.length;a++)fArr_PolygonLayerName_fixtures[a].indexOf("NODE_");cvjs_debug&&console.log("edit_cancel_location");edit_cancel_flag=!1}});1==cvjs_creationInputType?(jQuery("#cv_link11").show(),jQuery("#cv_link11_B2").hide(),jQuery("#cv_link11_B3").show()):(jQuery("#cv_link11").hide(),
jQuery("#cv_link11_B2").show(),jQuery("#cv_link11_B3").hide())})}function CADViewer_floorplan_methods(a){cvjs_debug&&console.log("CADViewer_floorplan_methods parameter1="+a+" icon_command_active="+icon_command_active);CADViewer_floorplan_methods_newVersion()}
function cvjs_addCircleAccessPointObject(){cvjs_hidePop();var a=cvjs_currentMaxSpaceNodeId();a++;cvjs_setCurrentNodeValues(Node_underbar+a,"unassigned","NODE_"+a,"unassigned","unassigned","unassigned","unpopulated","unassigned","unassigned","unassigned",!1,0,0,1,1,0,"");cvjs_addHandleFunc_CircleAccessPoint()}var AP_diameter=400;
function cvjs_addHandleFunc_CircleAccessPoint(){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;
delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(0,0,1,1).attr({stroke:"#b00000","stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"});handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.mousedown(mousedown_copycircle_ap)}function cvjs_removeHandleFunc_CircleAccessPoint(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_circle_ap=function(){flag_c=!1;tRubberBand_c.attr({stroke:"#b00000","stroke-width":"0.01",fill:"none","fill-opacity":"0.01",opacity:"0.01"})},move_cvjs_create_circle_ap=function(a,b,c,d){flag_c?(lastX_c=a,lastY_c=b):(firstX_c=c,firstY_c=d,lastX_c=a,lastY_c=b,flag_c=!0);delta=Math.sqrt(a*a+b*b);tTransform_c="t"+(firstX_c-delta_x)/global_scale+","+(firstY_c-delta_y)/global_scale;delta/=global_scale;tTransform_c+="S"+delta;tRubberBand_c.attr({transform:tTransform_c,opacity:"1"})},
stop_cvjs_create_circle_ap=function(){tRubberBand_c.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});tRubberBand_c.attr({fill:"#00ff99","fill-opacity":"0.5",stroke:"#009999","stroke-opacity":"1"});var a=cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("r(0.5, 0.5, 0.5 )#CD9A97-#F8FD96-#99FEC5");cvjs_debug&&console.log(a);tRubberBand_c.attr({fill:a,"fill-opacity":.8,"stroke-opacity":.8});cvjs_debug&&console.log(tRubberBand_c);var b=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(1200,
1E3,800);b.attr({fill:"#bada55",stroke:"#000",strokeWidth:5});b.attr({fill:a,"fill-opacity":.8,"stroke-opacity":.8})},mousedown_copycircle_ap=function(a,b,c){tRubberBand_c=cvjs_rPaper[cvjs_active_floorplan_div_nr].circle((b-delta_x)/global_scale,(c-delta_y)/global_scale,AP_diameter,AP_diameter);a=cvjs_rPaper[cvjs_active_floorplan_div_nr].gradient("r(0.5, 0.5, 0.5 )#CD9A97-#F8FD96-#99FEC5");tRubberBand_c.attr({fill:a,"fill-opacity":.8,"stroke-opacity":.8});a=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M -500 0 L 3000 0 L 3000 3000 L 0 3000 zM567.37,1717.21H738.34l0,19.47h1.95l0,34.66H567.29l0.07,-54.14M448.9,1594.53H329.53L329.53,1773.29h40.5l0,-19.08h78.87L448.9,1594.53M567.29,1473.8h-97.37L469.93,1773.29h97.37L567.29,1473.8M738.34,1477.69H567.37L567.37,1647.89H738.34L738.34,1477.69").data("node",
"NODE_70");a.attr({fill:"#F8FD96","fill-opacity":.8});cvjs_rPaper[cvjs_active_floorplan_div_nr].path("").data("node","NODE_85");cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M 50 50 L 50 150 L 150 150 L 150 50 z M 75 75 L 125 75 L 125 125 L 75 125 z").attr("fill","#00ff00");tRubberBand_c.attr({clip:a,"clip-rule":"evenodd"});cvjs_removeHandleFunc_CircleAccessPoint()};function cvjs_setLanguageIndexIncrement(){cvjs_setLanguageIndex(cvjs_currentLanguage+1)}
function cvjs_setLanguageIndex(a){a>=languageTable.numberOfLanguages&&(a=0);0>a&&(a=languageTable.numberOfLanguages-1);cvjs_currentLanguage=a}function cvjs_ajaxPostCallbackVariable_thumbNails(a){cvjs_ajaxPostStatus_thumbNails=a}var cvjs_serverSendPDFEmailController="mail-pdf-redline.php",cvjs_mailServerSetup=!1,cvjs_from_name="",cvjs_from_mail="",cvjs_cc_mail="",cvjs_replyto="",cvjs_to_mail="",cvjs_mail_title="",cvjs_mail_message="";
function cvjs_emailSettings_PDF_publish(a,b,c,d){cvjs_mailServerSetup=!0;cvjs_from_name=a;cvjs_from_mail=b;cvjs_cc_mail=c;cvjs_replyto=d}
function cvjs_emailScreenAsPDFwithRedlines(a,b){void 0==b&&(b="");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var c=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();c='<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"'+(' width="'+c.width+
'" height="'+c.height+'" viewbox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'"');c+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);a=c+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>";c=cvjs_serverHandlersPath+cvjs_serverSaveFileController;var d={},e=new Date,f="y"+e.getFullYear()+"_m"+(e.getMonth()+1)+"_d"+e.getDate()+"_h"+e.getHours()+"_m"+
e.getMinutes()+"_s"+e.getSeconds();f="jan";var g=e.getHours();10>g&&(g="0"+g);switch(e.getMonth()){case 0:f="Jan";break;case 1:f="Feb";break;case 2:f="Mar";break;case 3:f="Apr";break;case 4:f="May";break;case 5:f="Jun";break;case 6:f="Jul";break;case 7:f="Aug";break;case 8:f="Sep";break;case 9:f="Oct";break;case 10:f="Nov";break;case 11:f="Dec";break;default:f="Jan"}f=f+"_"+e.getDate()+"_H"+g+"_"+e.getMinutes();var h=cvjs_ServerLocation+(cvjs_FileNameNoExtension+"_"+f+".pdf");e=h.lastIndexOf(".");
var k=h.substring(0,e)+".svg";d.file=k;d.file_content=a;d.custom_content=b;cvjs_debug&&console.log("make pdf "+k+"  "+c);jQuery.ajax({url:c,type:"post",data:d,success:function(a){cvjs_debug&&console.log("Save floorplan: "+a);a=cvjs_serverHandlersPath+cvjs_serverSVGtoPDFConverterController;var b={};b.pdf_file=h;b.svg_file=k;jQuery.ajax({url:a,type:"post",data:b,success:function(a){cvjs_debug&&console.log("PDF file is now created: "+a);a={};a.pdf_file=h;a.from_name=cvjs_from_name;a.from_mail=cvjs_from_mail;
a.cc_mail=cvjs_cc_mail;a.replyto=cvjs_replyto;cvjs_to_mail=cvjs_to_mail.replace(/,/g,";");a.to_mail=cvjs_to_mail;a.mail_title=cvjs_mail_title;a.mail_message=cvjs_mail_message;jQuery.ajax({url:cvjs_serverHandlersPath+cvjs_serverSendPDFEmailController,type:"post",data:a,success:function(a){window.alert("e-mail sent!  "+a)}})}})},error:function(a){console.log("Error "+a)}})}
function cvjs_dragBackgroundToFront_SVG(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_masterBackground[cvjs_active_floorplan_div_nr].before(cvjs_SVGGroup[cvjs_active_floorplan_div_nr])}function cvjs_dragBackgroundToBack_SVG(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_SVGGroup[cvjs_active_floorplan_div_nr].before(cvjs_masterBackground[cvjs_active_floorplan_div_nr])}
function cvjs_saveAsSVG(a){try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();var b='<?xml version="1.0" encoding="utf-8" ?>';b+=' <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var c=""+cvjs_rPaper[cvjs_active_floorplan_div_nr];c=c.substring(c.indexOf("<svg")+4);c=c.substring(c.indexOf("<svg")+4);
c=c.substring(c.indexOf("<svg"));c=b+c;cvjs_NodeJSserver&&(c=c.replace(/xlink:href=["]assets[/]cadviewer/g,'xlink:href="'+cvjs_ServerUrl+"files?file="));var d=c.indexOf("<desc>Created with Snap</desc>");if(-1<d){var e=c.substring(0,d),f=c.substring(d+46),g=f.indexOf("transform=");if(-1<g){var h=f.substring(0,g),k=f.substring(g+14),l=k.indexOf('"');k=k.substring(l+1);f=h+k}c=e+f}var m=new Date,p="y"+m.getFullYear()+"_m"+(m.getMonth()+1)+"_d"+m.getDate()+"_h"+m.getHours()+"_m"+m.getMinutes()+"_s"+m.getSeconds();
a="jan";var n=m.getHours();10>n&&(n="0"+n);switch(m.getMonth()){case 0:a="Jan";break;case 1:a="Feb";break;case 2:a="Mar";break;case 3:a="Apr";break;case 4:a="May";break;case 5:a="Jun";break;case 6:a="Jul";break;case 7:a="Aug";break;case 8:a="Sep";break;case 9:a="Oct";break;case 10:a="Nov";break;case 11:a="Dec";break;default:a="Jan"}p=a+"_"+m.getDate()+"_H"+n+"_"+m.getMinutes();download(cvjs_FileNameNoExtension+"_"+p+".svg",c)}catch(q){console.log("cvjs_saveAsSVG: "+q)}}
function download(a,b){var c=this.document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(b));c.setAttribute("download",a);this.document.createEvent?(a=this.document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),c.dispatchEvent(a)):c.click()}
function downloadFile(a,b){var c=this.document.createElement("a");c.setAttribute("href",b);c.setAttribute("download",a);this.document.createEvent?(a=this.document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),c.dispatchEvent(a)):c.click()}
function downloadBinary(a,b){b=btoa(unescape(encodeURIComponent(b)));window.alert("filenames "+a+"  "+b);b=this.document.createElement("a");b.setAttribute("href",cvjs_ServerUrl+"/converters/files/merged/"+a);b.setAttribute("download",a);this.document.createEvent?(a=this.document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),b.dispatchEvent(a)):b.click()}
function download_link_dwg(a){printWindow=window.open("","CADViewer - Download","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize);printWindow.document.write('<!DOCTYPE html><html><title>CADViewer - Print</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script><script src="'+cvjs_defaultJSPath+'/popper.js" type="text/javascript">\x3c/script><script src="'+cvjs_defaultJSPath+
'/bootstrap.min.js" type="text/javascript">\x3c/script><link href="'+cvjs_defaultJSPath+'../css/bootstrap.min.css" rel="stylesheet">\x3c/script>');printWindow.document.write('<link href="'+cvjs_defaultJSPath+'../css/font-awesome.min.css" rel="stylesheet">\x3c/script>');printWindow.document.write("<style>.btn {  background-color: DodgerBlue;  border: none;  color: white;  padding: 12px 30px;  cursor: pointer;  font-size: 20px;} /* Darker background on mouse-over */ .btn:hover {  background-color: RoyalBlue;} </style>");
printWindow.document.write('<script type="text/javascript">');var b=cvjs_ServerUrl+"/converters/files/merged/"+a;printWindow.document.write("jQuery(document).ready(function(){\tjQuery('#downloadbutton').click(function (e) { \t\tvar element = document.createElement('a'); \t\telement.setAttribute('href', '"+b+"'); \t\telement.setAttribute('download', '"+a+"'); \t\tdocument.body.appendChild(element); \t\telement.click(); \t\tdocument.body.removeChild(element); \t\t\t});});\x3c/script>");printWindow.document.write("</head><body>");
printWindow.document.write('<button id="downloadbutton" class="btn" style="width:100%"><i class="fa fa-download"></i> Download: '+a+"</button> <br>");printWindow.document.write('<div id="dwg"><object width="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+'" height="'+window.screen.width*cvjs_print_to_pdf_windowRelativeSize*2339/1654+'" type="application/dwg" data="'+b+'" id="dwg_content"><p></p></object></div></body></html>');printWindow.document.close();printWindow.focus()}
function download_link(a,b){printWindow=window.open("","CADViewer - Download","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*cvjs_print_to_pdf_windowRelativeSize);b="";printWindow.document.write('<!DOCTYPE html><html><title>CADViewer - Download</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');b=b+'<!DOCTYPE html><html><title>CADViewer - Download</title><head><script src="'+cvjs_defaultJSPath+
'/jquery-2.2.3.js" type="text/javascript">\x3c/script>';printWindow.document.write('<script type="text/javascript">');b+='<script type="text/javascript">';var c=cvjs_ServerUrl+"/converters/files/merged/"+a;printWindow.document.write('\x3c/script></head><body><div id="dwg">');b+='\x3c/script></head><body><div id="dwg">';printWindow.document.write('<a href="'+c+'">Download '+a+"</a></div></body></html>");console.log(b+'<a href="'+c+'">Download '+a+"</a></div></body></html>");printWindow.document.close();
printWindow.focus()}
function cvjs_download_link(a,b){console.log(" in download "+a+"  "+b);printWindow=window.open("","CADViewer - Download","width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height=40px");var c="";printWindow.document.write('<!DOCTYPE html><html><title>CADViewer - Download</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>');c=c+'<!DOCTYPE html><html><title>CADViewer - Download</title><head><script src="'+cvjs_defaultJSPath+'/jquery-2.2.3.js" type="text/javascript">\x3c/script>';
printWindow.document.write('<script type="text/javascript">');c+='<script type="text/javascript">';printWindow.document.write('\x3c/script></head><body><div id="dwg">');c+='\x3c/script></head><body><div id="dwg">';printWindow.document.write('<br><div style="width:100%;background:#B9EAFF;color:#000000;border:1px black"><a style="width:100%;color:#000000;left:50px;border:1px black" href="'+b+'" download="'+a+'">Download '+a+"</a></div>");c=c+'<a href="'+b+'" download="'+a+'">Download '+a+"</a></div></body></html>";
printWindow.document.write("</div></body></html>");console.log("before focus incomplete text: "+c);printWindow.document.close();printWindow.focus()}
function cvjs_saveAsSVGOnServer(a,b,c){void 0==c&&(c="");try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var d=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox(),e='<?xml version="1.0" encoding="utf-8" ?>';e+=' <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';e+='<svg contentScriptType="text/ecmascript" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet"';
e+=' width="'+d.width+'" height="'+d.height+'" viewbox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'"';e+=' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:cvjs="http://www.tailormade.com/" stroke-linecap="butt" stroke-linejoin="round" fill-rule="evenodd" >';cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var f=e+cvjs_rPaper[cvjs_active_floorplan_div_nr]+"</svg>",g=new Date,h="y"+g.getFullYear()+"_m"+(g.getMonth()+1)+"_d"+g.getDate()+"_h"+g.getHours()+"_m"+g.getMinutes()+"_s"+g.getSeconds();a=
"jan";var k=g.getHours();10>k&&(k="0"+k);switch(g.getMonth()){case 0:a="Jan";break;case 1:a="Feb";break;case 2:a="Mar";break;case 3:a="Apr";break;case 4:a="May";break;case 5:a="Jun";break;case 6:a="Jul";break;case 7:a="Aug";break;case 8:a="Sep";break;case 9:a="Oct";break;case 10:a="Nov";break;case 11:a="Dec";break;default:a="Jan"}h=a+"_"+g.getDate()+"_H"+k+"_"+g.getMinutes();var l=cvjs_FileNameNoExtension+"_"+h+".svg"}catch(m){console.log(m)}g=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;
h={};h.file=b+l;h.file_content=f;h.custom_content=c;jQuery.ajax({url:g,type:"post",data:h,success:function(a){console.log("saved "+a);a=b.substring(b.indexOf(cvjs_ServerLocation)+cvjs_ServerLocation.length);downloadFile(l,cvjs_ServerUrl+a+l)},error:function(a){console.log("Error "+a)}});download(l,f)}
function cvjs_getStickyNotesRedlineXML(a){var b="",c=0;b+="<cvjs_RedlinesStickyNotes>\n";var d=0,e=0,f;for(f in vqRedlines)1!=vqRedlines[f].data("deleted")&&e++;b=b+" \t\t\t\t\t<totalRedlines>"+e+"</totalRedlines>\n";e=0;for(f in vqStickyNotes)1!=vqStickyNotes[f].data("deleted")&&e++;b=b+" \t\t\t\t\t<totalStickyNotes>"+e+"</totalStickyNotes>\n";for(f in vqRedlines)if(1==vqRedlines[f].data("deleted"))cvjs_debug&&console.log("file.js deleted node "+vqRedlines[f].data("node"));else{0==c&&(c=1);b+="\t\t\t\t\t<Redline>\n";
b=b+"\t\t\t\t\t\t<index>"+f+"</index>\n";b=b+'\t\t\t\t\t\t<node>"'+vqRedlines[f].data("node")+'"</node>\n';b=b+'\t\t\t\t\t\t<name>"'+vqRedlines[f].data("name")+'"</name>\n';b=b+'\t\t\t\t\t\t<id>"'+vqRedlines[f].data("id")+'"</id>\n';b=b+'\t\t\t\t\t\t<layer>"'+vqRedlines[f].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[f].data("currentPage")-1].pageName+'"</layer>\n';b=b+'\t\t\t\t\t\t<group>"'+vqRedlines[f].data("group")+'"</group>\n';b=b+'\t\t\t\t\t\t<color>"'+vqRedlines[f].data("color")+
'"</color>\n';b=b+'\t\t\t\t\t\t<strokeWidth>"'+vqRedlines[f].data("strokeWidth")+'"</strokeWidth>\n';b=b+'\t\t\t\t\t\t<fill>"'+vqRedlines[f].data("fill")+'"</fill>\n';b=b+'\t\t\t\t\t\t<fillOpacity>"'+vqRedlines[f].data("fill_opacity")+'"</fillOpacity>\n';b=b+'\t\t\t\t\t\t<username>"'+vqRedlines[f].data("username")+'"</username>\n';b=b+'\t\t\t\t\t\t<userid>"'+vqRedlines[f].data("userid")+'"</userid>\n';b=b+"\t\t\t\t\t\t<currentPage>"+vqRedlines[f].data("currentPage")+"</currentPage>\n";b=b+'\t\t\t\t\t\t<currentPageName>"'+
multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[f].data("currentPage")-1].pageName+'"</currentPageName>\n';b=b+'\t\t\t\t\t\t<triangle_design>"'+vqRedlines[f].data("triangle_design")+'"</triangle_design>\n';b=b+'\t\t\t\t\t\t<polypath_arrow>"'+vqRedlines[f].data("polypath_arrow")+'"</polypath_arrow>\n';e=vqRedlines[f].data("redline_text").replace("<br>","<br/>");b=b+'\t\t\t\t\t\t<redline_text>"'+e+'"</redline_text>\n';b=b+'\t\t\t\t\t\t<fill_opacity>"'+vqRedlines[f].data("fill_opacity")+'"</fill_opacity>\n';
b=b+'\t\t\t\t\t\t<transform>"'+vqRedlines[f].data("transform")+'"</transform>\n';b=b+"\t\t\t\t\t\t<drawingRotation>"+vqRedlines[f].data("drawingRotation")+"</drawingRotation>\n";b+="\t\t\t\t\t\t<graphics>\n";var g=vqRedlines[f].toString();if(-1<g.indexOf("polyline")){g=g.substring(g.indexOf("points=")+8);g=g.substring(0,g.indexOf('"'));var h=g.split(" ");g=vqRedlines[f].toString();g=g.substring(g.indexOf("matrix(")+8);g=g.substring(0,g.indexOf(")"));e=vqRedlines[f].data("transform");e=e.substring(1,
e.indexOf("r"));e=e.split(",");g.substring(g.indexOf("r")+1);g=cvjs_getAutoCADColor(vqRedlines[f].data("color"));d++;d.toString(16);b+="\t\t\t\t\t\t<LWPOLYLINE>\n";b+="\t\t\t\t\t\t\t<isHatched>false</isHatched>\n";b+="\t\t\t\t\t\t\t<isFilled>true</isFilled>\n";g=cvjs_getAutoCADColor(vqRedlines[f].data("color"));b=b+"\t\t\t\t\t\t\t<autoCADColor>"+g+"</autoCADColor>\n";vqRedlines[f].data("layer");vqRedlines[f].data("currentPage");b=b+"\t\t\t\t\t\t\t<dxf_90>"+(h.length+1)+"</dxf_90>\n\t\t\t\t\t\t\t<dxf_70>1</dxf_70>\n";
g=cvjs_get_dwg_scaled_value(vqRedlines[f].data("strokeWidth")*cvjs_redlineThickness_scaleFactor,vqRedlines[f].data("currentPage"));b=b+"\t\t\t\t\t\t\t<dxf_40>"+g+"</dxf_40>\n\t\t\t\t\t\t\t<dxf_41>"+g+"</dxf_41>\n";for(g=0;g<h.length;g++){var k=h[g].split(",");b=b+"\t\t\t\t\t\t\t<pt>\n\t\t\t\t\t\t\t\t<dxf_10>"+cvjs_get_dwg_x_coord(Number(e[0])+Number(k[0]),vqRedlines[f].data("currentPage"))+"</dxf_10>\n\t\t\t\t\t\t\t\t<dxf_20>"+cvjs_get_dwg_y_coord(Number(e[1])+Number(k[1]),vqRedlines[f].data("currentPage"))+
"</dxf_20>\n\t\t\t\t\t\t\t</pt>\n"}k=h[0].split(",");b=b+"\t\t\t\t\t\t\t<pt>\n\t\t\t\t\t\t\t\t<dxf_10>"+cvjs_get_dwg_x_coord(Number(e[0])+Number(k[0]),vqRedlines[f].data("currentPage"))+"</dxf_10>\n\t\t\t\t\t\t\t\t<dxf_20>"+cvjs_get_dwg_y_coord(Number(e[1])+Number(k[1]),vqRedlines[f].data("currentPage"))+"</dxf_20>\n\t\t\t\t\t\t\t</pt>\n";b+="\t\t\t\t\t\t</LWPOLYLINE>\n";d++;d.toString(16);vqRedlines[f].data("layer");vqRedlines[f].data("currentPage");for(g=0;g<h.length-1;g++)h[g].split(","),h[g+1].split(",");
h[h.length-1].split(",");h[0].split(",");g=vqRedlines[f].toString();g=g.substring(g.indexOf("d=")+3);g=g.substring(0,g.indexOf('"'));k=g.indexOf("Z");e=!1;-1<k&&(e=!0);e||(g+="Z");k=new PathConverter.Outline;(new PathConverter.SVGParser(k)).parse(g);g=cvjs_getAutoCADColor(vqRedlines[f].data("color"));d++;d.toString(16);g=cvjs_get_dwg_scaled_value(vqRedlines[f].data("strokeWidth")*cvjs_redlineThickness_scaleFactor,vqRedlines[f].data("currentPage"));var l=0;k.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,
a.left,a.right].forEach(function(a){a&&l++})})});e||l--;b+="\t\t\t\t\t\t<LWPOLYLINE>\n";b+="\t\t\t\t\t\t\t<isHatched>false</isHatched>\n";b+="\t\t\t\t\t\t\t<isFilled>false</isFilled>\n";g=cvjs_getAutoCADColor(vqRedlines[f].data("color"));b=b+"\t\t\t\t\t\t\t<autoCADColor>"+g+"</autoCADColor>\n";vqRedlines[f].data("layer");vqRedlines[f].data("currentPage");g=0;e&&(g=1);b=b+"\t\t\t\t\t\t\t<dxf_90>"+(h.length+1)+"</dxf_90>\n\t\t\t\t\t\t\t<dxf_70>"+g+"</dxf_70>\n";g=cvjs_get_dwg_scaled_value(vqRedlines[f].data("strokeWidth")*
cvjs_redlineThickness_scaleFactor,vqRedlines[f].data("currentPage"));var m=0;b=b+"\t\t\t\t\t\t\t<dxf_40>"+g+"</dxf_40>\n\t\t\t\t\t\t\t<dxf_41>"+g+"</dxf_41>\n";k.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&(m<l&&(b=b+"\t\t\t\t\t\t\t<pt>\n\t\t\t\t\t\t\t\t<dxf_10>"+cvjs_get_dwg_x_coord(a.x,vqRedlines[f].data("currentPage"))+"</dxf_10>\n\t\t\t\t\t\t\t\t<dxf_20>"+cvjs_get_dwg_y_coord(a.y,vqRedlines[f].data("currentPage"))+"</dxf_20>\n\t\t\t\t\t\t\t</pt>\n"),
m++)})})});b+="\t\t\t\t\t\t</LWPOLYLINE>\n"}else if(-1<g.indexOf("text")){h=vqRedlines[f].data("transform");e=h.substring(1,h.indexOf("S"));e=e.split(",");h=h.substring(h.indexOf("S")+1).split(",");g=cvjs_getAutoCADColor(vqRedlines[f].data("color"));d++;d.toString(16);k=vqRedlines[f].data("redline_text");g=k.split("<br>");for(var p=1,n=0;n<g.length;n++)g[n].length>p&&(p=g[n].length);n=(k.match(/<br>/g)||[]).length+1;k="{"+k+"}";k=k.replace(/<br>/g,"\\P");b+="\t\t\t\t\t\t<MTEXT>\n";g=cvjs_getAutoCADColor(vqRedlines[f].data("color"));
b=b+"\t\t\t\t\t\t\t<autoCADColor>"+g+"</autoCADColor>\n";vqRedlines[f].data("layer");vqRedlines[f].data("currentPage");b=b+"\t\t\t\t\t\t\t<dxf_10>"+cvjs_get_dwg_x_coord(e[0],vqRedlines[f].data("currentPage"))+"</dxf_10>\n";b=b+"\t\t\t\t\t\t\t<dxf_20>"+cvjs_get_dwg_y_coord(e[1],vqRedlines[f].data("currentPage"))+"</dxf_20>\n";b+="\t\t\t\t\t\t\t<dxf_30>0</dxf_30>\n";b=b+"\t\t\t\t\t\t\t<dxf_40>"+cvjs_get_dwg_scaled_value(cvjs_reference_font_size*h[0],vqRedlines[f].data("currentPage"))+"</dxf_40>\n";
b=b+"\t\t\t\t\t\t\t<dxf_41>"+cvjs_get_dwg_scaled_value(Number(e[1])+Number(n)*Number(cvjs_reference_font_size)*Number(h[0]),vqRedlines[f].data("currentPage"))+"</dxf_41>\n";b=b+"\t\t\t\t\t\t\t<text>"+k+"</text>\n";e=cvjs_get_dwg_scaled_value(cvjs_reference_font_size*h[0]*.8*p,vqRedlines[f].data("currentPage"));b+="\t\t\t\t\t\t\t<ACAD_MTEXT_DEFINED_HEIGHT>\n";b=b+"\t\t\t\t\t\t\t<dxf_1070>"+e+"</dxf_1070>\n";b=b+"\t\t\t\t\t\t\t<dxf_1040>"+cvjs_get_dwg_scaled_value(n*cvjs_reference_font_size*h[0],vqRedlines[f].data("currentPage"))+
"</dxf_1040>\n";b+="\t\t\t\t\t\t\t</ACAD_MTEXT_DEFINED_HEIGHT>\n";b+="\t\t\t\t\t\t</MTEXT>\n"}else-1<g.indexOf("path")&&(e=g.substring(g.indexOf("fill-opacity")+13),e=e.substring(0,e.indexOf(";")),h=.02<Number(e),g=g.substring(g.indexOf("d=")+3),g=g.substring(0,g.indexOf('"')),k=g.indexOf("Z"),e=!1,-1<k&&(e=!0),e||(g+="Z"),k=new PathConverter.Outline,(new PathConverter.SVGParser(k)).parse(g),g=cvjs_getAutoCADColor(vqRedlines[f].data("color")),d++,d.toString(16),g=vqRedlines[f].data("strokeWidth")*
cvjs_redlineThickness_scaleFactor,l=0,k.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&l++})})}),e||l--,b+="\t\t\t\t\t\t<LWPOLYLINE>\n",b=h&&e?b+"\t\t\t\t\t\t\t<isHatched>true</isHatched>\n":b+"\t\t\t\t\t\t\t<isHatched>false</isHatched>\n",b+="\t\t\t\t\t\t\t<isFilled>false</isFilled>\n",g=cvjs_getAutoCADColor(vqRedlines[f].data("color")),b=b+"\t\t\t\t\t\t\t<autoCADColor>"+g+"</autoCADColor>\n",vqRedlines[f].data("layer"),vqRedlines[f].data("currentPage"),
g=0,e&&(g=1),b=b+"\t\t\t\t\t\t\t<dxf_90>"+l+"</dxf_90>\n\t\t\t\t\t\t\t<dxf_70>"+g+"</dxf_70>\n",g=vqRedlines[f].data("strokeWidth")*cvjs_redlineThickness_scaleFactor,b=b+"\t\t\t\t\t\t\t<dxf_40>"+cvjs_get_dwg_scaled_value(g,vqRedlines[f].data("currentPage"))+"</dxf_40>\n\t\t\t\t\t\t\t<dxf_41>"+cvjs_get_dwg_scaled_value(g,vqRedlines[f].data("currentPage"))+"</dxf_41>\n",cvjs_debug&&(e=cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox(),console.log(" bbox.x "+e.x+"  bbox.y "+e.y+"  bbox.width "+e.width+
" bbox.height "+e.height)),m=0,k.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&(m<l&&(cvjs_debug&&console.log(" pt.x "+a.x+"  pt.y "+a.y),b=b+"\t\t\t\t\t\t\t<pt>\n\t\t\t\t\t\t\t\t<dxf_10>"+cvjs_get_dwg_x_coord(a.x,vqRedlines[f].data("currentPage"))+"</dxf_10>\n\t\t\t\t\t\t\t\t<dxf_20>"+cvjs_get_dwg_y_coord(a.y,vqRedlines[f].data("currentPage"))+"</dxf_20>\n\t\t\t\t\t\t\t</pt>\n"),m++)})})}),b+="\t\t\t\t\t\t</LWPOLYLINE>\n",console.log("dataURL TOTAL "+
b+" dataURL TOTAL "));b+="\t\t\t\t\t\t</graphics>\n";b+="\t\t\t\t\t</Redline>\n"}c=0;if(a)for(f in vqStickyNotes)1!=vqStickyNotes[f].data("deleted")&&(0==c?c=1:b+="\t\t\t\t\t\t,\n",a=parseInt(f)+vqRedlines.length,b+="\t\t\t\t\t<StickyNote>\n",b=b+"\t\t\t\t\t\t<index>"+a+"</index>\n",b=b+'\t\t\t\t\t\t<node>"'+vqStickyNotes[f].data("node")+'"</node>\n',b=b+'\t\t\t\t\t\t<name>"'+vqStickyNotes[f].data("name")+'"</name>\n',b=b+'\t\t\t\t\t\t<id>"'+vqStickyNotes[f].data("id")+'"</id>\n',b=b+'\t\t\t\t\t\t<layer>"'+
vqStickyNotes[f].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[f].data("currentPage")-1].pageName+'"</layer>\n',b=b+'\t\t\t\t\t\t<group>"'+vqStickyNotes[f].data("group")+'"</group>\n',b=b+'\t\t\t\t\t\t<text>"'+vqStickyNotes[f].data("text")+'"</text>\n',b=b+'\t\t\t\t\t\t<userid>"'+vqStickyNotes[f].data("userid")+'"</userid>\n',b=b+"\t\t\t\t\t\t<currentPage>"+vqStickyNotes[f].data("currentPage")+"</currentPage>\n",b=b+'\t\t\t\t\t\t<currentPageName>"'+multiPages[cvjs_active_floorplan_div_nr].pages[vqStickyNotes[f].data("currentPage")-
1].pageName+'"</currentPageName>\n',b=b+'\t\t\t\t\t\t<date>"'+vqStickyNotes[f].data("date")+'"<date>\n',b=b+"\t\t\t\t\t\t<linked>"+vqStickyNotes[f].data("linked")+"<linked>\n",b=b+'\t\t\t\t\t\t<transform>"'+vqStickyNotes[f].data("transform")+'"</transform>\n',b=b+"\t\t\t\t\t\t<drawingRotation>"+vqStickyNotes[f].data("drawingRotation")+"</drawingRotation>\n",a=0,10>vqStickyNotes[f].data("id")&&(a=3),a='paper.group(paper.path("M0,0h20v20h-20v-20Z").attr({stroke: "#000000", "stroke-width" : "1.0"}),paper.path("M7,12h1.3M9.5,12h3.5M11.25,12v5M9.75,12v1.75M12.75,12v1.75M10.5,17h1.5M7,13.5h1.3M7,15.25h3M7,17.0h2.2").attr({stroke: "#000000", "stroke-width" : "0.5"}),paper.text('+
(3+a)+',9,"#'+vqStickyNotes[f].data("id")+'").attr({"font-size": "8px", "font-style": "italic", stroke: "#000000", "stroke-width" : "0.3", "stroke" : "0.3", "fill" : "#000000", "fill-opacity" : 1.0}))',a+='.attr({\'transform\': "t0,0S0.01" , "opacity" : "0.1"})',a+=".attr({\tfill: '#FFF', \"fill-opacity\": \"0.8\", stroke: '#000', 'stroke-opacity': \"1\" })",b+="\t\t\t\t\t\t<graphics>\n",b=b+"\t\t\t\t\t\t<stickyNoteTemplate>"+a+"</stickyNoteTemplate>\n",b+="\t\t\t\t\t\t</graphics>\n",b+="\t\t\t\t\t</StickyNote>\n");
return b+="</cvjs_RedlinesStickyNotes>\n\n"}function cvjs_getCurrentMeasurementUnit(){return cvjs_units[cvjs_active_floorplan_div_nr]}function cvjs_getSvgToWorldUnits(){return cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]}function cvjs_setCurrentMeasurementUnits(a,b,c){cvjs_svgToWorldUnits[cvjs_rPaperIndex(a)]=c;cvjs_units[cvjs_rPaperIndex(a)]=b;cvjs_calibratedMeasurement=!0}
function cvjs_resetInitialization_FloorplanDiv(){floorplans_divs_Initialized="                                             ".split(" ")}function cvjs_setDragBackgroundOnTop(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_SVGGroup[cvjs_active_floorplan_div_nr].add(cvjs_masterBackground[cvjs_active_floorplan_div_nr])}
function cvjs_setDragBackgroundToBack(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_masterBackground[cvjs_active_floorplan_div_nr].add(cvjs_SVGGroup[cvjs_active_floorplan_div_nr])}var cvjs_creationInputType=1,creation_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_creation_modal_show(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);jQuery("#creationModeModal_"+a).hide();1==cvjs_supressPopUpModal&&(cvjs_setCreationMode(cvjs_supressPopUpModal,!0),hideOnlyPop(),cvjs_clearDrawing(),cvjs_draw_space_object_names_on_spaces(),cvjs_spaceObjectInputPanel(a))}function cvjs_creation_modal_hide(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);jQuery("#creationModeModal_"+a).hide();cvjs_supressPopUpModal=!1}
function cvjs_showCreationModeModal(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(creation_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(creation_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#creationModeModal_"+a).css({position:"fixed"}),jQuery("#creationModeModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#creationModeModal_"+a).show())}
var cvjs_ellipseRedlineType=1,ellipse_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_drawEllipseViaButton(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);1==cvjs_ellipseRedlineType&&cvjs_drawSpaceObject_RedlineEllipse(a);2==cvjs_ellipseRedlineType&&cvjs_drawSpaceObject_RedlineEllipseCloud(a);jQuery("#ellipseModal_"+a).hide()}
function cvjs_ellipse_modal_hide(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);jQuery("#ellipseModal_"+a).hide()}
function cvjs_drawRedlineEllipseCloud(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(ellipse_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(ellipse_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#ellipseModal_"+a).css({position:"fixed"}),jQuery("#ellipseModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#ellipseModal_"+
a).show())}
function cvjs_buildFolderTree(a,b,c){cvjs_buildFolderTree_crossDomain=!0;c=a.slice(-1);"/"!=c&&"\\"!=c&&(a+="/");c=cvjs_serverHandlersPath+cvjs_serverLoadFileController;var d={};d.file=myLocation+"/CV-JS_foldertree_settings.php";jQuery.ajax({url:c,type:"post",data:d,success:function(c){cvjs_debug&&console.log("Load php: "+c);var d=c.lastIndexOf("$FolderTreeLocation"),e=c.substring(0,d);c=c.substring(d+19);d=c.indexOf("=");d=c.substring(d+1);c=d.substring(0,d.indexOf(";")).trim();d=d.substring(d.indexOf(";")+1);
c=c.replace(/['"]+/g,"");if(0!=a.indexOf(c)||a.length!=c.length)c=e+' $FolderTreeLocation = "'+a+'";'+d,e=cvjs_serverHandlersPath+cvjs_serverSaveFileController,d={},d.file=b+"/CV-JS_foldertree_settings.php",d.file_content=c,jQuery.ajax({url:e,type:"post",data:d,success:function(a){window.location.reload()}})},error:function(a){console.log("Error "+a)}});return a}
function cvjs_CleanLayout(a){for(a=0;a<rest_nname[cvjs_active_floorplan_div_nr].length;a++)"layout"==rest_nname[cvjs_active_floorplan_div_nr][a]&&(rest_nname[cvjs_active_floorplan_div_nr][a]="",rest_vvalue[cvjs_active_floorplan_div_nr][a]="")}function cvjs_selectPageFromList(a){}var cvjs_jsTreeSelectionCurrentData="",cvjs_jsTreeSelectionCurrentDataLength=0;function cvjs_custom_jsTreeSelection(a,b){cvjs_jsTreeSelectionCurrentData=a;cvjs_jsTreeSelectionCurrentDataLength=b}
function cvjs_conversion_setApplicationServiceParameters(a,b,c,d,e){rest_serviceCall=!0;rest_applicationPlatform=a;rest_applicationPlatformUsername=b;rest_applicationPlatformUserID=c;rest_ServiceToken=d;rest_leaveStreamOnServer=e}
function cvjs_update_done_edit_location_fields(a){jQuery("#location_s").html("");jQuery("#type_s").html("");jQuery("#occupancy_s").html("");jQuery("#tags_s").html("");jQuery("#type_tag").val("");jQuery("#type_tag").val(id_main_data_template_type);jQuery("#layer_tag").val(id_main_data_layer);jQuery("#occupancy_tag").val("");jQuery("#other_tags").val("");jQuery("#drop_link_spaces").html('None Selected<b class="caret"></b>');if(1==cvjs_creationInputType)for(var b=0;b<fArr_Name.length;b++)fArr_Id[b]==
a&&(jQuery("#location_s").html(fArr_Name[b]),jQuery("#type_s").html(fArr_Type[b]),jQuery("#occupancy_s").html(fArr_Occupancy[b]),jQuery("#tags_s").html(fArr_Tags[b]),jQuery("#type_tag").val(fArr_Type[b]),jQuery("#layer_tag").val(fArr_Layer[b]),jQuery("#occupancy_tag").val(fArr_Occupancy[b]),jQuery("#other_tags").val(fArr_Tags[b]),jQuery("#drop_link_spaces").html(fArr_Name[b]+'<b class="caret"></b>'));else for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==
a&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),jQuery("#location_s").html(a),jQuery("#type_s").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type")),jQuery("#occupancy_s").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("occupancy")),jQuery("#tags_s").html(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("tags")),jQuery("#spaces_manual_tag").val(a),jQuery("#type_tag").val(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type")),
jQuery("#occupancy_tag").val(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("occupancy")),jQuery("#other_tags").val(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("tags")))}
function cvjs_draw_space_object_names_on_spaces(){textLayer1=cvjs_clearTextLayer(textLayer1);var a=cvjs_getSpaceObjectIdList(),b=cvjs_getSpaceObjectNamesList(),c;for(c in a)cvjs_AddTextAndTBorderOnSpaceObjectId(textLayer1,a[c],.05,Array(b[c]),Array(text_style_arial_9pt_normal),["0.15"],["#AB5500"],!1,!0)}
function cvjs_connectTextInstances(a,b,c,d,e,f){var g=0,h=0,k=0,l=0,m=0;jQuery("text").each(function(c){-1<jQuery(this).text().toLowerCase().indexOf(a.toLowerCase())&&(m++,m==b&&(g=jQuery(this).attr("x"),h=jQuery(this).attr("y"),cvjs_svgWidthHeight100percent||""==cvjs_svgTransX||""==cvjs_svgTransX||(g=(cvjs_svgTransX+Number(g))*cvjs_svgScale,h=(cvjs_svgTransY+Number(h))*cvjs_svgScale)))});m=0;jQuery("text").each(function(a){-1<jQuery(this).text().toLowerCase().indexOf(c.toLowerCase())&&(m++,m==d&&
(k=jQuery(this).attr("x"),l=jQuery(this).attr("y"),cvjs_svgWidthHeight100percent||""==cvjs_svgTransX||""==cvjs_svgTransX||(k=(cvjs_svgTransX+Number(k))*cvjs_svgScale,l=(cvjs_svgTransY+Number(l))*cvjs_svgScale)))});cvjs_debug&&console.log(g+" "+h+"  "+k+"  "+l);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);
var p=g,n=h,q=cvjs_currentRedline_strokeWidth;3<cvjs_currentRedline_strokeWidth&&(q=3+(cvjs_currentRedline_strokeWidth-3)/2);q*=cvjs_redlineThickness_scaleFactor;var r=-5*q+","+5.5*q+" "+0*q+","+-4.5*q+" "+5*q+","+5.5*q,t=parseFloat(k)-parseFloat(p),u=parseFloat(l)-parseFloat(n),v=Math.atan2(u,t)/Math.PI*180;t=Math.sqrt(t*t+u*u);g=parseFloat(p)+parseFloat(Math.cos(v/180*Math.PI)*t*e/100);h=parseFloat(n)+parseFloat(Math.sin(v/180*Math.PI)*t*e/100);k=parseFloat(p)+parseFloat(Math.cos(v/180*Math.PI)*
t*(1-f/100));l=parseFloat(n)+parseFloat(Math.sin(v/180*Math.PI)*t*(1-f/100));cvjs_debug&&console.log(r+" degrees "+v);e="r"+(v-270)+" T"+p+Math.cos(v/180*Math.PI)*q+","+n;cvjs_debug&&console.log(e);f=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(r);f.attr({fill:cvjs_currentRedline_color,transform:e});polyPath_redline1="M "+g+", "+h+" L "+k+","+l;cvjs_debug&&console.log(polyPath_redline1);tPolygon_redline1=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(polyPath_redline1).attr({stroke:cvjs_currentRedline_color,
"stroke-width":cvjs_currentRedline_strokeWidth*cvjs_redlineThickness_scaleFactor,fill:"#FFF","fill-opacity":"0.01"});tPolygon_redline1.attr({path:polyPath_redline1});f=cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(r);cvjs_debug&&console.log(tPolygon_redline1+"  "+polyPath_redline1);p=cvjs_rPaper[cvjs_active_floorplan_div_nr].g(f,tPolygon_redline1);cvjs_addVqRedlinesGraphics_newNodeTrans(cvjs_currentRedline_underbar,p,e,r,polyPath_redline1);cvjs_graphicalObjectCreated("RedlineArrowPolyline");
cvjs_graphicalObjectOnChange("Create","RedlineArrowPolyline",cvjs_currentRedline_underbar);f.attr({fill:cvjs_currentRedline_color,transform:"M0,09S0"})}var spaceInsertion_x=0,spaceInsertion_y=0,spaceLL_x=0,spaceLL_y=0,spaceUL_x=0,spaceUL_y=0,spaceLR_x=0,spaceLR_y=0,spaceUR_x=0,spaceUR_y=0,space_fill_arr=[],space_rows=1E3,space_columns=3,spaceArrayCounter=0;function fill2DimensionsArray(a,b,c){for(var d=0;d<b;d++){a.push([0]);for(var e=0;e<c;e++)a[d][e]=0}}
function find_borders(a,b){a<=spaceLL_x&&(spaceLL_x=a);b<=spaceLL_y&&(spaceLL_y=b);a<=spaceUL_x&&(spaceUL_x=a);b>=spaceUL_y&&(spaceUL_y=b);a>=spaceUR_x&&(spaceUR_x=a);b>=spaceUR_y&&(spaceUR_y=b);a>=spaceLR_x&&(spaceLR_x=a);b<=spaceLR_y&&(spaceLR_y=b)}function getPixel(a,b,c){if(0>b||0>c||b>=a.width||c>=a.height)return[-1,-1,-1,-1];b=4*(c*a.width+b);return a.data.slice(b,b+4)}function setPixel(a,b,c,d){b=4*(c*a.width+b);a.data[b+0]=d[0];a.data[b+1]=d[1];a.data[b+2]=d[2];a.data[b+3]=d[0]}
function colorsMatch(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function colorsMatch_3fields(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}var cvjs_ctx_helper;
function floodFill(a,b,c,d,e,f){c=Math.round(c);d=Math.round(d);spaceInsertion_x=c;spaceInsertion_y=d;spaceLL_x=spaceInsertion_x;spaceLL_y=spaceInsertion_y;spaceUL_x=spaceInsertion_x;spaceUL_y=spaceInsertion_y;spaceLR_x=spaceInsertion_x;spaceLR_y=spaceInsertion_y;spaceUR_x=spaceInsertion_x;spaceUR_y=spaceInsertion_y;var g=a.getImageData(0,0,a.canvas.width,a.canvas.height),h=b.getImageData(0,0,a.canvas.width,a.canvas.height),k=getPixel(g,c,d);console.log("First: targetColor "+k[0]+" "+k[1]+" "+k[2]+
" "+k[3]+"x="+c+" y="+d);if(-1==k[0])console.log(" this is not working, return");else if(!colorsMatch(k,e)){for(c=[c,d];0<c.length;){d=c.pop();var l=c.pop(),m=getPixel(g,l,d);colorsMatch(m,k)?(setPixel(g,l,d,e),find_borders(l,d),c.push(l+1,d),c.push(l-1,d),c.push(l,d+1),c.push(l,d-1)):colorsMatch_3fields(m,e)||setPixel(h,l,d,f)}a.putImageData(g,0,0);b.putImageData(h,0,0)}}
var cvjs_spaceFloodFill=!1,cvjs_spacePolygonFillLayer="layer_PolygonLayer",cvjs_spaceIDLayer="None Selected",paint_room_id=!1,canv_width_global=1,canv_height_global=1,base_adjust=1,drawing_aspect_ratio,canvas_aspect_ratio;
function cvjs_floodfill(a,b,c,d,e){fill2DimensionsArray(space_fill_arr,space_rows,space_columns);canv_width_global=b;canv_height_global=c;jQuery("#tempCanvas_space").height(c);jQuery("#tempCanvas_space").width(b);cvjs_ctx_helper=jQuery("#tempCanvas_space")[0].getContext("2d");cvjs_ctx_helper.beginPath();cvjs_ctx_helper.strokeStyle="white";cvjs_ctx_helper.fillStyle="white";cvjs_ctx_helper.rect(0,0,b,c);cvjs_ctx_helper.fill();var f=viewBoxWidth[cvjs_active_floorplan_div_nr],g=viewBoxHeight[cvjs_active_floorplan_div_nr];
console.log("BEFORE "+cvjs_spaceIDLayer+"  ");d=a.canvas.clientWidth;e=a.canvas.clientHeight;drawing_aspect_ratio=g/f;canvas_aspect_ratio=e/d;var h={};jQuery("."+cvjs_spaceIDLayer).find("[id^=cv_]").each(function(){var a=jQuery(this).attr("id");try{var b="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]";jQuery("#"+a).parents(b).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(h[a]||(h[a]=!0))}catch(r){console.log(r)}});for(var k in h)try{f="#"+k;var l=jQuery(f).html(),m=
jQuery(f).attr("x"),p=jQuery(f).attr("y");space_fill_arr[spaceArrayCounter][0]=m;space_fill_arr[spaceArrayCounter][1]=p;space_fill_arr[spaceArrayCounter][2]=l;spaceArrayCounter++;cvjs_floodfillWrapper(m,p,l,b,c,a,d,e)}catch(n){console.log(n)}for(k=0;k<vqRedlines.length;k++)console.log("redline "+k),"none"!=vqRedlines[k].data("redline_text")&&(console.log("we have a redline ID! "+vqRedlines[k].data("redline_text")),console.log(vqRedlines[k].data("transform")),console.log(vqRedlines[k].data("redline_text")),
l=vqRedlines[k].data("transform").substring(1,vqRedlines[k].data("transform").indexOf("S")),console.log(l),space_fill_arr[spaceArrayCounter][0]=Math.floor(l.substring(0,l.indexOf(","))),space_fill_arr[spaceArrayCounter][1]=Math.floor(l.substring(l.indexOf(",")+1)),space_fill_arr[spaceArrayCounter][2]=vqRedlines[k].data("redline_text"),console.log(space_fill_arr[spaceArrayCounter][0]+" "+space_fill_arr[spaceArrayCounter][1]+" "+space_fill_arr[spaceArrayCounter][2]),cvjs_floodfillWrapper(space_fill_arr[spaceArrayCounter][0],
space_fill_arr[spaceArrayCounter][1],space_fill_arr[spaceArrayCounter][2],b,c,a,d,e),spaceArrayCounter++);b=cvjs_ctx_helper.getImageData(0,0,cvjs_ctx_helper.canvas.width,cvjs_ctx_helper.canvas.height);a.putImageData(b,0,0)}
function cvjs_floodfillWrapper(a,b,c,d,e,f,g,h){a-=actualLLX[cvjs_active_floorplan_div_nr];b-=actualLLY[cvjs_active_floorplan_div_nr];drawing_aspect_ratio<=canvas_aspect_ratio?(a=a/rpWidth[cvjs_active_floorplan_div_nr]*d,d*=b/rpWidth[cvjs_active_floorplan_div_nr],base_adjust=(h-drawing_aspect_ratio*g)/2,paint_room_id&&(cvjs_ctx_helper.strokeStyle="green",cvjs_ctx_helper.strokeStyle="blue",cvjs_ctx_helper.beginPath(),cvjs_ctx_helper.arc(Math.round(a),Math.round(d+base_adjust),4,0,2*Math.PI),cvjs_ctx_helper.stroke()),
floodFill(f,cvjs_ctx_helper,Math.round(a),Math.round(d+base_adjust),[10,10,0,0],[255,0,0,255])):(a=a/rpHeight[cvjs_active_floorplan_div_nr]*e,d=b/rpHeight[cvjs_active_floorplan_div_nr]*e,base_adjust=(g-h/drawing_aspect_ratio)/2,floodFill(f,cvjs_ctx_helper,Math.round(a+base_adjust),Math.round(d),[10,10,0,0],[255,0,0,255]))}
function cvjs_pngForSVG(a){jQuery("#floorPlanCanvasObject_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();console.log(a);a=a.substring(a.lastIndexOf("/")+1);console.log(a);var b=a.substring(0,a.lastIndexOf("."));console.log(b);var c=cvjs_serverHandlersPath+"convert_base64.php",d={};d.input_file=cvjs_ServerLocation+"php/"+cvjs_printObjectPath+a;d.output_file=cvjs_ServerLocation+"php/"+cvjs_printObjectPath+b;jQuery.ajax({url:c,type:"post",data:d,success:function(a){console.log("we have converted to png: "+
a);ImageTracer.imageToSVG(cvjs_serverHandlersPath+cvjs_printObjectPath+b,function(a){var b=cvjs_serverSavePrintModeController=0,c=1E5,d=a.split("<path"),e=d.length;for(a=1;a<e;a++)if(-1<d[a].indexOf('d="M 0 0'))d[a]="<path></path>";else{d[a]="<path "+d[a].substring(0,d[a].indexOf(" Z"))+' Z "></path>';var f=d[a].indexOf("rgb(");d[a].substring(0,f+4);var p=d[a].substring(0,f);f=d[a].indexOf(")",f);d[a].substring(f);f=d[a].substring(f+2);c++;b++;d[a]=p+'rgb(220,220,220)" id="cv_'+c+'" class=" sHB cvjs_handles" cvjs:node=\'NODE_'+
b+"' cvjs:handle='"+b+'\' cvjs:area="not calculated" '+f;var n=d[a].substring(d[a].indexOf(" d=")+4);n=n.substring(0,n.lastIndexOf('"'));p=n.split(" ");f=p.length;n=!0;for(var q=0;q<f;q++){var r=p[q];r=r.toString();r=parseFloat(r);isNaN(r)||(n?(p[q]=drawing_aspect_ratio<=canvas_aspect_ratio?r/canv_width_global*rpWidth[cvjs_active_floorplan_div_nr]:(r-base_adjust)/canv_height_global*rpHeight[cvjs_active_floorplan_div_nr],console.log(r+" x transform: "+p[q]+" canv_width_global "+canv_width_global+" rpWidth "+
rpWidth[cvjs_active_floorplan_div_nr])):p[q]=drawing_aspect_ratio<=canvas_aspect_ratio?(r-base_adjust)/canv_width_global*rpWidth[cvjs_active_floorplan_div_nr]:r/canv_height_global*rpHeight[cvjs_active_floorplan_div_nr],n=!n)}n="";for(q=0;q<f;q++)n=n+" "+p[q];q=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(n).attr({stroke:"#b00000",fill:"none"});q.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#00ff00","stroke-opacity":"0.7"});cvjs_currentNode_underbar="NODE_"+a;cvjs_currentNode_id="NODE_"+a;cvjs_currentNode_name=
"NewSpace_"+a;cvjs_currentNode_layer="SpaceLayer";cvjs_currentNode_attributes=cvjs_currentNode_group="unassigned";cvjs_currentNode_attributeStatus="unpopulated";cvjs_currentNode_type="A new Space";cvjs_currentNode_tags="unassigned";cvjs_currentNode_linked=!0;cvjs_currentNode_translate_y=cvjs_currentNode_translate_x=0;cvjs_currentNode_scale_y=cvjs_currentNode_scale_x=1;cvjs_currentNode_rotate=0;cvjs_currentNode_transform="";console.log("CURRENT NODE: "+cvjs_currentNode_underbar);n=[];r=[];var t=0;
area_vertices=[];for(var u=0;u<f;u++)if("M"==p[u]||"L"==p[u]||"Q"==p[u])n[t]=p[u+1],r[t]=p[u+2],area_vertices[t]=[],area_vertices[t]={x:n[t],y:r[t]},t++;area_vertices[t]=[];area_vertices[t]={x:n[0],y:r[0]};console.log("AREA:    "+calcPolygonArea(area_vertices)+"   cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr] "+cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]);p=(calcPolygonArea(area_vertices)*cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]).toFixed(2);
for(f=0;f<spaceArrayCounter;f++)isInside(n,r,n.length,space_fill_arr[f][0],space_fill_arr[f][1])&&(console.log("MATCH polygon "+f+"   "+space_fill_arr[f][2]),cvjs_currentNode_id=space_fill_arr[f][2],cvjs_currentNode_name=space_fill_arr[f][2],cvjs_currentNode_type="mm"==cvjs_units[cvjs_active_floorplan_div_nr]?"Space<br>"+(p/1E3/1E3).toFixed(2)+" m2":"cm"==cvjs_units[cvjs_active_floorplan_div_nr]?"Space<br>"+(p/100/100).toFixed(2)+" m2":"Space<br>"+p.toFixed(2)+" "+cvjs_units[cvjs_active_floorplan_div_nr]+
"2",f=spaceArrayCounter);cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,q);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar)}jQuery("#tempCanvas_space").hide();printDebugFlag=cvjs_spaceFloodFill=!1;cvjs_LayerOn(cvjs_spaceIDLayer);for(a=0;a<vqRedlines.length;a++)console.log("redline "+a),"none"!=vqRedlines[a].data("redline_text")&&(b=vqRedlines[a].data("transform"),vqRedlines[a].attr({transform:b,opacity:"1"}));document.getElementById("cvjs_overlay").style.display=
"none";try{custom_host_parser_PopUpMenu()}catch(v){console.log(v)}cvjs_resetZoomPan("floorPlan")},{ltres:4,qtres:4,scale:1,strokewidth:1,roundcoords:1})},error:function(a){console.log("Error "+a)}})}
function cvjs_addPinMarker(a,b,c,d,e){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();a=cvjs_currentMaxSpaceNodeId();a++;cvjs_setCurrentNodeValues(Node_underbar+a,c,b,e,"none","none","unpopulated",d,"unassigned","unassigned",!1,0,0,1,1,0,"");cvjs_addHandleFunc_PinMarker(b,c,d)}function cvjs_drawSpaceObject_PinMarker(a,b,c){cvjs_addHandleFunc_PinMarker(a,b,c)}
cvjs_customSpaceObjectName=cvjs_customSpaceObjectType=cvjs_customSpaceObjectId=cvjs_customSvgImagePath="";var cvjs_mouseMoveSVGCustomImage=!1,cvjs_scaleFactorPin=2400;
function cvjs_addHandleFunc_PinMarker(a,b,c){cvjs_customSpaceObjectId=a;cvjs_customSpaceObjectType=c;cvjs_customSpaceObjectName=b;tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=
cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mouseup(stop_cvjs_create_custom_svg_image);cvjs_mouseMoveSVGCustomImage=!1;handleGroup.mousemove(move_cvjs_create_custom_svg_image)}
function cvjs_removeHandleFunc_CustomSVGImage(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_custom_svg_image=function(){flag_rectangle=!1;tRubberBand_r.attr({stroke:"#b00000",fill:"none"})},tTransform_pin="",move_cvjs_create_custom_svg_image=function(a,b,c){canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];
global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;console.log(delta_x+"  "+delta_y);b+=document.body.scrollLeft;c+=document.body.scrollTop;
scaleNote=1;scaleNote=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/cvjs_scaleFactorPin:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/cvjs_scaleFactorPin;0==cvjs_mouseMoveSVGCustomImage&&(cvjs_mouseMoveSVGCustomImage=!0,tRubberBand_sn=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M38.55 127.89 c-5.55 -0.44 -10.43 -1.76 -15.30 -4.14 -14.57 -7.12 -23.70 -22.23 -23.22 -38.40 0.19 -6.05 1.52 -11.55 4.06 -16.80 1.09 -2.25 1.83 -3.53 3.31 -5.75 0.65 -0.96 8.56 -13.69 17.60 -28.27 9.03 -14.59 16.46 -26.53 16.50 -26.53 0.04 0 7.47 11.94 16.50 26.52 9.04 14.59 16.95 27.32 17.60 28.28 1.48 2.22 2.22 3.50 3.31 5.75 4.21 8.69 5.20 18.69 2.79 28.21 -2.44 9.58 -8.22 17.95 -16.40 23.71 -6.96 4.91 -15.51 7.59 -24.04 7.52 -0.94 -0.01 -2.16 -0.05 -2.71 -0.10z m6.35 -17.64 c4.40 -0.80 8.13 -2.71 11.20 -5.75 7.69 -7.61 8.25 -19.80 1.30 -28.12 -3.35 -4.02 -8.17 -6.63 -13.44 -7.28 -1.14 -0.14 -3.78 -0.14 -4.92 0 -8.53 1.05 -15.50 7.15 -17.64 15.44 -1.41 5.45 -0.52 11.36 2.43 16.13 3.30 5.31 8.62 8.76 14.97 9.68 1.30 0.19 4.81 0.13 6.10 -0.10z").attr({stroke:"#ff2222",
"stroke-width":"1.0",fill:"#ff0000"}));tTransform_pin="T"+((b-delta_x)/global_scale-50*scaleNote)+","+((c+0*scaleNote*global_scale-delta_y)/global_scale-150*scaleNote);tTransform_pin+="S"+scaleNote;tTransform_pin+="R180";tRubberBand_sn.attr({transform:tTransform_pin});flag_rectangle?(lastX_r=dx,lastY_r=dy):(firstX_r=b,firstY_r=c,lastX_r=dx,lastY_r=dy,flag_rectangle=!0);tPath_r="M"+(firstX_r-delta_x)/global_scale+","+(firstY_r-delta_y)/global_scale;tPath_r+="h"+lastX_r/global_scale+"v"+lastY_r/global_scale+
"h"+-lastX_r/global_scale+"v"+(-lastY_r/global_scale+" Z");tRubberBand_r.attr({path:tPath_r})},stop_cvjs_create_custom_svg_image=function(){cvjs_removeHandleFunc_CustomSVGImage();cvjs_mouseMoveSVGCustomImage&&(tTransform_c="t0,0S"+scaleNote/100,tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"}),tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"}),tRubberBand_sn.remove());var a=cvjs_rPaper[cvjs_active_floorplan_div_nr].path("M38.55 127.89 c-5.55 -0.44 -10.43 -1.76 -15.30 -4.14 -14.57 -7.12 -23.70 -22.23 -23.22 -38.40 0.19 -6.05 1.52 -11.55 4.06 -16.80 1.09 -2.25 1.83 -3.53 3.31 -5.75 0.65 -0.96 8.56 -13.69 17.60 -28.27 9.03 -14.59 16.46 -26.53 16.50 -26.53 0.04 0 7.47 11.94 16.50 26.52 9.04 14.59 16.95 27.32 17.60 28.28 1.48 2.22 2.22 3.50 3.31 5.75 4.21 8.69 5.20 18.69 2.79 28.21 -2.44 9.58 -8.22 17.95 -16.40 23.71 -6.96 4.91 -15.51 7.59 -24.04 7.52 -0.94 -0.01 -2.16 -0.05 -2.71 -0.10z m6.35 -17.64 c4.40 -0.80 8.13 -2.71 11.20 -5.75 7.69 -7.61 8.25 -19.80 1.30 -28.12 -3.35 -4.02 -8.17 -6.63 -13.44 -7.28 -1.14 -0.14 -3.78 -0.14 -4.92 0 -8.53 1.05 -15.50 7.15 -17.64 15.44 -1.41 5.45 -0.52 11.36 2.43 16.13 3.30 5.31 8.62 8.76 14.97 9.68 1.30 0.19 4.81 0.13 6.10 -0.10z").attr({stroke:"#ff0000",
"stroke-width":"1.0",fill:"#ff2222"});a.attr({transform:tTransform_pin});a.attr({id:"cv_"+cvjs_currentNode_underbar+"_image"});var b=a.getBBox();tPath_r="M"+b.x+","+b.y;tPath_r+="h"+b.width+"v"+b.height+"h"+-b.width+"v"+-b.height+" Z";b=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});b.attr({path:tPath_r});b.attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});b.attr({id:"cv_"+cvjs_currentNode_underbar,"cvjs:node":cvjs_currentNode_underbar,
"cvjs:roomId":cvjs_customSpaceObjectId,"cvjs:name":cvjs_customSpaceObjectName,"class":"cvjs_nodes","cvjs:type":cvjs_customSpaceObjectType});a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(b,a).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,a);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectSvgRectangle");cvjs_graphicalObjectOnChange("Create",
"SpaceObjectSvgRectangle",cvjs_currentNode_id);jQuery("#cv_"+cvjs_currentNode_underbar+"_image").insertBefore("#cv_"+cvjs_currentNode_underbar)},varPunchList=0,varPunchListArray=[],varPunchList_Populated_Array=[];function cvjs_PinMarker(){varPunchList++;varPunchListArray[varPunchList-1]="P_"+varPunchList;varPunchList_Populated_Array[varPunchList-1]=!1;cvjs_supressPopUpModal_callback_JS=!0;cvjs_addPinMarker("floorPlan_svg","P_"+varPunchList,"PunchList_"+varPunchList,"List Item")}
var cvjs_PercentXFromLowerLeft=87,cvjs_PercentYFromLowerLeft=15,cvjs_widthPercent=10,cvjs_mergeOnOff=!1;function makeCode(a){qrcode.makeCode(a)}var waitforQRCodeVar=!0,waitforCounter=0;function waitforQRCode(a){console.log("In waitforQRCodeVar.. ");waitforCounter++;try{jQuery("#cvjs_qrcode_"+a).html().split(";base64,"),waitforQRCodeVar=!1}catch(b){console.log(b),waitforQRCodeVar=!0}5==waitforCounter&&(waitforQRCodeVar=!1)}
function cvjs_mergeQR(a,b){void 0==b&&(b="");waitforQRCodeVar=!0;var c=a;-1==c.indexOf("_svg")&&(a=c+"_svg");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_4" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+
'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.MergeDWG+"</div></td></tr></table>");cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(10);qrcode=new QRCode(document.getElementById("cvjs_qrcode_"+a),{width:200,height:200});cvjs_mergeOnOff=!cvjs_mergeOnOff;var d=!1;if(cvjs_mergeOnOff){""==cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]&&(console.log("Source file not DWG!"),d=!0);var e=Math.random().toString().substring(2,
5),f=cvjs_ServerLocation+"/converters/files/merged/mergeQR_"+e+".xml",g=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr];d&&(g=currentLoadedDrawingFullName);-1<g.indexOf("/")&&(g=g.substring(g.lastIndexOf("/")+1));c=cvjs_serverHandlersPath+cvjs_serverGetQRCodeController;var h={};h.file=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr];d&&(h.file=currentLoadedDrawingFullName);jQuery.ajax({url:c,type:"post",data:h,success:function(c){var h=!1;cvjs_debug&&console.log("this is the code we program into the drawing "+
c);if(-1<c.indexOf("<no_QR_code_available>"))return cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.NoQRCode),jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),cvjs_mergeOnOff=!cvjs_mergeOnOff,!0;-1<c.indexOf("<use_as_QR_code_bitmap>")&&(console.log("QR is the file!!!!"),h=!0,use_as_QR_code_bitmap_filname=c.substring(0,c.indexOf("<use_as_QR_code_bitmap>")));jQuery("#cvjs_qrcode_"+
a).show();cvjs_debug&&console.log("before qrcode ");makeCode(c);cvjs_debug&&console.log("before body");jQuery("body").on("DOMSubtreeModified","#cvjs_qrcode_"+a,function(){console.log("now QRcode is changed!"+jQuery("#cvjs_qrcode_"+a).html());waitforQRCode(a);if(!waitforQRCodeVar){var c=cvjs_ServerLocation+"/converters/files/merged/mergeQR_"+e+".png";1==h&&(c=use_as_QR_code_bitmap_filname);c="<cvjs_RedlinesStickyNotes>\n<totalRedlines>0</totalRedlines>\n<totalStickyNotes>0</totalStickyNotes>\n<totalBitmaps>1</totalBitmaps>\n<Bitmap>\n<index>0</index>\n<name>QRcode_01</name>\n<layer>cvjs_QRcodeLayer</layer>\n<currentPageName>ModelSpace</currentPageName>\n<filename>"+
c+"</filename>\n<location>\n<PercentXFromLowerLeft>"+cvjs_PercentXFromLowerLeft+"</PercentXFromLowerLeft>\n<PercentYFromLowerLeft>"+cvjs_PercentYFromLowerLeft+"</PercentYFromLowerLeft>\n<widthPercent>"+cvjs_widthPercent+"</widthPercent>\n</location>\n</Bitmap>\n</cvjs_RedlinesStickyNotes>\n";var k=cvjs_serverHandlersPath+cvjs_serverSaveFileController,l={};l.file=f;l.file_content=c;l.custom_content=b;jQuery.ajax({url:k,type:"post",data:l,success:function(c){c=jQuery("#cvjs_qrcode_"+a).html().split(";base64,");
var l=c[1].substring(0,c[1].indexOf('"'));jQuery("#cvjs_qrcode_"+a).hide();if(h){l=cvjs_serverHandlersPath+cvjs_serverMergeDWGController;c={};c.base_file=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr];d&&(c.base_file=currentLoadedDrawingFullName);c.merge_file=f;c.out_file=cvjs_ServerLocation+"/converters/files/merged/"+g;c.zip_output="true";c.QR_code="true";console.log("base: "+c.base_file+" merge: "+c.merge_file+" out: "+c.out_file);console.log("zip_output: "+c.zip_output+" QR_code: "+
c.QR_code);var n="";jQuery.ajax({url:l,type:"post",data:c,success:function(b){cvjs_debug&&console.log(b);n=cvjs_ServerUrl+"/converters/files/merged/"+g;-1<b.indexOf("<customoutfilename>")&&(b=b.substring(b.indexOf("<customoutfilename>")+19),b=b.substring(0,b.indexOf("</customoutfilename>")),0==b.indexOf("http")?(n=b,g=b.substring(b.lastIndexOf("/")+1)):(g=b,n=cvjs_ServerUrl+"/converters/files/merged/"+g),cvjs_debug&&console.log("XXXX"+b+"XXX"));jQuery("#topDownloadButtonPane_"+a).show();cvjs_topDownloadButtonPane=
!0;jQuery("#downloadrow").show();jQuery("#downloadbutton").html('<a href="'+n+'" download="'+g+'"><button class="btn" style="width:70%"><i class="fa fa-download"></i> Download: <i><b>'+g+"</b></i> - with QR code</button></a>");jQuery("#downloadbutton").click(function(){jQuery("#topDownloadButtonPane_"+a).hide();cvjs_topDownloadButtonPane=!1;cvjs_gMenu_pos_y-=50;cvjs_resizeWindow_position("floorPlan");cvjs_resizeWindow_position("floorPlan");cvjs_mergeOnOff=!1});cvjs_gMenu_pos_y+=50;cvjs_resizeWindow_position("floorPlan");
cvjs_resizeWindow_position("floorPlan");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()},error:function(a){console.log("Error Merge "+a)}})}else c={},c.file=cvjs_ServerLocation+"/converters/files/merged/mergeQR_"+e+".png",c.file_content=l,c.custom_content=b,c.base64=1,jQuery.ajax({url:k,type:"post",data:c,success:function(b){b=cvjs_serverHandlersPath+cvjs_serverMergeDWGController;var c={};c.base_file=cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr];
d&&(c.base_file=currentLoadedDrawingFullName);c.merge_file=f;c.out_file=cvjs_ServerLocation+"/converters/files/merged/"+g;c.zip_output="true";c.QR_code="true";console.log("base: "+c.base_file+" merge: "+c.merge_file+" out: "+c.out_file);console.log("zip_output: "+c.zip_output+" QR_code: "+c.QR_code);var e="";jQuery.ajax({url:b,type:"post",data:c,success:function(b){cvjs_debug&&console.log(b);e=cvjs_ServerUrl+"/converters/files/merged/"+g;-1<b.indexOf("<customoutfilename>")&&(b=b.substring(b.indexOf("<customoutfilename>")+
19),b=b.substring(0,b.indexOf("</customoutfilename>")),0==b.indexOf("http")?(e=b,g=b.substring(b.lastIndexOf("/")+1)):(g=b,e=cvjs_ServerUrl+"/converters/files/merged/"+g),cvjs_debug&&console.log("XXXX"+b+"XXX"));jQuery("#topDownloadButtonPane_"+a).show();cvjs_topDownloadButtonPane=!0;jQuery("#downloadrow").show();jQuery("#downloadbutton").html('<a href="'+e+'" download="'+g+'"><button class="btn" style="width:70%"><i class="fa fa-download"></i> Download: <i><b>'+g+"</b></i> - with QR code</button></a>");
jQuery("#downloadbutton").click(function(){jQuery("#topDownloadButtonPane_"+a).hide();cvjs_topDownloadButtonPane=!1;cvjs_gMenu_pos_y-=50;cvjs_resizeWindow_position("floorPlan");cvjs_resizeWindow_position("floorPlan");cvjs_mergeOnOff=!1});cvjs_gMenu_pos_y+=50;cvjs_resizeWindow_position("floorPlan");cvjs_resizeWindow_position("floorPlan");jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide()},error:function(a){console.log("Error Merge "+a)}})},error:function(a){console.log("Error Merge "+
a)}})},error:function(a){console.log("Error Save "+a)}})}})},error:function(a){console.log("Error Save "+a)}})}else jQuery("#topDownloadButtonPane_"+a).hide(),cvjs_topDownloadButtonPane=!1,cvjs_resizeWindow_position("floorPlan"),cvjs_resizeWindow_position("floorPlan")}
function cvjs_CompareFiles_setFileModalContent(a,b){cvjs_CompareFiles_CustomFileModalContent_flag=!0;cvjs_CompareFiles_CustomFileModalContent=a;cvjs_debug&&console.log("cvjs_CompareFiles_setFileModalContent "+cvjs_CompareFiles_CustomFileModalContent_flag+"  "+cvjs_CompareFiles_CustomFileModalContent);b=a.length;if(0<b){var c=a[0].url;var d=a[0].path;c=c.substring(0,c.lastIndexOf("/"));d=d.substring(0,d.lastIndexOf("/"));cvjs_debug&&console.log(b+"  "+a[0].url+"  "+a[0].path);cvjs_debug&&console.log(" url  "+
c+" serverpath "+d);cvjs_setServerFileLocation_AbsolutePaths(d+"/",c+"/","","")}}
function setUpVqRoomsGeneric(){vqBuilding="BUILDING_NAME_GOES_HERE";var a=id_publish_location.substring(id_publish_location.lastIndexOf("/")+1);vqFloor=a.substring(0,a.lastIndexOf("."));cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]=[];console.log("before "+cvjs_active_floorplan_div_nr+" called!");buildings=drawPathsGeneric(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_active_floorplan_div_nr,vqRooms,buildings);console.log("length "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length);
console.log("buildings "+buildings.BUILDING_NAME_GOES_HERE.floors.current_selected_shortname);console.log("buildings "+buildings.BUILDING_NAME_GOES_HERE.FacMgr);cvjs_setUpSpaceObjects(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_active_floorplan_div_nr)}var currentSelectedId=-1,cvjs_changeSpaceObject_ManualCreationMode=!0;
function cvjs_createSpaceOutput_JSfile_Legacy(){var a=id_publish_location.substring(id_publish_location.lastIndexOf("/")+1),b=a.substring(0,a.lastIndexOf("."));var c=cvjs_currentLoadedDrawingAsString.substring(0,cvjs_currentLoadedDrawingAsString.indexOf("var buildings"))+"\n var buildings = {\n";c=c+' \t BUILDING_NAME_GOES_HERE: {\n\t\tname: "'+building_name+'",\n';c=c+'\t\tcompany: "'+company+'",\n';c=c+'\t\taddress: "'+address+'",\n';c=c+'\t\tcity: "'+city+'",\n';c=c+'\t\tstate: "'+state+'",\n';
c=c+'\t\tzipcode: "'+zipcode+'",\n';c=c+'\t\tcountry: "'+country+'",\n';c=c+'\t\tFacMgr: "'+FacMgr_name+'",\n';c=c+'\t\tFacMgr_title: "'+FacMgr_title+'",\n';c=c+'\t\tFacMgr_email: "'+FacMgr_email+'",\n';c=c+'\t\tFacMgr_phone: "'+FacMgr_phone+'",\n';c+="\t\tfloors: {\n";var d=("space_"+b).replace(/[\|&;\$%@"<>\(\)\+?#,.]/g,"_");d=d.replace(/ /g,"_");d=d.replace(/-/g,"_");cvjs_debug&&console.log("vqfloor_name "+d);c=c+"\t\t\t"+d+' : {\n\t\t\t\tname: "'+b+'",\n';c=c+'\t\t\t\tfile: "'+a+'",\n';c+="\t\t\t\trooms: {\n";
a=0;for(var e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("deleted"))cvjs_debug&&console.log("file.js deleted node "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"));else{0==a?a=1:c+="\t\t\t\t\t\t,\n";c=c+"\t\t\t\t\t"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")+": {\n";c=c+'\t\t\t\t\t\tname: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("name")+'",\n';
c=isNaN(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id"))?c+'\t\t\t\t\t\tid: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")+'",\n':c+"\t\t\t\t\t\tid: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")+",\n";c=c+'\t\t\t\t\t\tlayer: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("layer")+'",\n';c=c+'\t\t\t\t\t\tgroup: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("group")+'",\n';c=c+'\t\t\t\t\t\toccupancy: "'+
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("occupancy")+'",\n';c=c+'\t\t\t\t\t\tarea: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("area")+'",\n';c=c+'\t\t\t\t\t\ttype: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("type")+'",\n';b="{ ";for(var f=1,g=!0;10>f;){var h="tag"+f;"undefined"!==typeof cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data(h)&&-1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data(h).toString().indexOf("undefined")&&
(g?(b=b+" "+f+': "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data(h)+'"',g=!1):b=b+" ,"+f+': "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data(h)+'"');f++}b+=" }";c=c+"\t\t\t\t\t\ttags:  "+b+", \n";c+="\t\t\t\t\t\tattributes: [],\n";c=1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("linked")||0==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("linked")?c+"\t\t\t\t\t\tlinked: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("linked")+
",\n":c+"\t\t\t\t\t\tlinked: false, \n";try{cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("handle")&&(c=c+"\t\t\t\t\t\thandle: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("handle")+"\n"),""!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("handle")&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("handle")!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")&&(handleUpdates++,dataHandleString=dataHandleString+"<updateHandle>\n<handle>"+
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("handle")+"</handle>\n<altName>"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")+"</altName>\n</updateHandle>\n")}catch(k){console.log(k)}c+="\t\t\t\t\t}\n"}c+="\t\t\t\t\t}\n";c+="\t\t\t\t}\n";c+="\t\t\t}\n";c+="\t\t}\n";c+="\t}\n\n";c+='var vqBuilding = "BUILDING_NAME_GOES_HERE";\n';c=c+'var vqFloor = "'+d+'";\nvar vqRooms = new Array(); \n';c+="var vqTBorder = new Array(); \n";c+="var vqText = new Array(); \n";c+=
"var vqURLs = new Array(); \n";c+="function drawPaths (paper){ \n";c+="\n";c+="vqRooms.length = 0;\n";c+="vqTBorder.length = 0;\n";c+="vqText.length = 0;\n";c+="vqURLs.length = 0;\n";c+="\n";d=0;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("deleted")?cvjs_debug&&console.log(" -nodes.js deleted node "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")):(d++,a="uItem"+d,b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].toString(),
-1<b.indexOf("path")?(b=b.substring(b.indexOf("d=")+3),b=b.substring(0,b.indexOf('"')),c=c+"var "+a+'= paper.path("',c=c+b+' ")\n.data("node","'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")+'");\n',c=c+"cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push("+a+");\n\n"):-1<b.indexOf("circle")?(f=b.indexOf(" cx="),f=b.substring(f+5),g=f.indexOf('"'),f=f.substring(0,g),g=b.indexOf(" cy="),g=b.substring(g+5),h=g.indexOf('"'),g=g.substring(0,h),h=b.indexOf(" r="),b=b.substring(h+
4),h=b.indexOf('"'),b=b.substring(0,h),c=c+"var "+a+"= paper.circle("+f+","+g+","+b+","+b+")",c=c+'\n.data("node","'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")+'");\n',c=c+"cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push("+a+");\n\n"):-1<b.indexOf("ellipse")?(f=b.indexOf(" cx="),f=b.substring(f+5),g=f.indexOf('"'),f=f.substring(0,g),g=b.indexOf(" cy="),g=b.substring(g+5),h=g.indexOf('"'),g=g.substring(0,h),h=b.indexOf(" r="),b=b.substring(h+4),h=b.indexOf('"'),
b=b.substring(0,h),c=c+"var "+a+"= paper.circle("+f+","+g+","+b+","+b+")",c=c+'\n.data("node","'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node")+'");\n',c=c+"cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push("+a+");\n\n"):cvjs_debug&&console.log("note: not path, not circle, ..save not implemented! "+b));0<d&&(c+="}\n");e=cvjs_currentLoadedDrawingAsString.substring(cvjs_currentLoadedDrawingAsString.indexOf("var layer_thumb;"));return c+=e}
function cvjs_createSpaceOutput_JSfile(){var a=id_publish_location.substring(id_publish_location.lastIndexOf("/")+1),b=a.substring(0,a.lastIndexOf("."));a='function drawPathsGeneric(paper, cvjs_active_floorplan_div_nr, vqRooms, buildings){ \n\n\n var buildings = {\n \t BUILDING_NAME_GOES_HERE: {\n\t\tname: "'+building_name+'",\n';a=a+'\t\tcompany: "'+company+'",\n';a=a+'\t\taddress: "'+address+'",\n';a=a+'\t\tcity: "'+city+'",\n';a=a+'\t\tstate: "'+state+'",\n';a=a+'\t\tzipcode: "'+zipcode+'",\n';
a=a+'\t\tcountry: "'+country+'",\n';a=a+'\t\tFacMgr: "'+FacMgr_name+'",\n';a=a+'\t\tFacMgr_title: "'+FacMgr_title+'",\n';a=a+'\t\tFacMgr_email: "'+FacMgr_email+'",\n';a=a+'\t\tFacMgr_phone: "'+FacMgr_phone+'",\n';a+="\t\tfloors: {\n";var c=b.replace(/[\|&;\$%@"<>\(\)\+?#,.]/g,"_");c=c.replace(/ /g,"_");c=c.replace(/-/g,"_");cvjs_debug&&console.log("vqfloor_name "+c);a=a+"\t\t\t"+c+' : {\n\t\t\t\tname: "'+b+'",\n';a=a+'\t\t\t\tfile: "'+b+'.js",\n';a+="\t\t\t\trooms: {\n";b=0;for(var d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(1==
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("deleted"))cvjs_debug&&console.log("file.js deleted node "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node"));else{0==b?b=1:a+="\t\t\t\t\t\t,\n";a=a+"\t\t\t\t\t"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")+": {\n";a=a+'\t\t\t\t\t\tname: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("name")+'",\n';a=isNaN(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id"))?
a+'\t\t\t\t\t\tid: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")+'",\n':a+"\t\t\t\t\t\tid: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")+",\n";a=a+'\t\t\t\t\t\tlayer: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("layer")+'",\n';a=a+'\t\t\t\t\t\tgroup: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("group")+'",\n';a=a+'\t\t\t\t\t\toccupancy: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("occupancy")+
'",\n';a=a+'\t\t\t\t\t\tarea: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("area")+'",\n';a=a+'\t\t\t\t\t\ttype: "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("type")+'",\n';c="{ ";for(var e=1,f=!0;10>e;){var g="tag"+e;"undefined"!==typeof cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data(g)&&-1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data(g).toString().indexOf("undefined")&&(f?(c=c+" "+e+': "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data(g)+
'"',f=!1):c=c+" ,"+e+': "'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data(g)+'"');e++}c+=" }";a=a+"\t\t\t\t\t\ttags:  "+c+", \n";a+="\t\t\t\t\t\tattributes: [],\n";a=1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked")||0==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked")?a+"\t\t\t\t\t\tlinked: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked")+",\n":a+"\t\t\t\t\t\tlinked: false, \n";try{cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle")&&
(a=a+"\t\t\t\t\t\thandle: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle")+"\n"),""!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle")&&cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle")!=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")&&(handleUpdates++,dataHandleString=dataHandleString+"<updateHandle>\n<handle>"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("handle")+"</handle>\n<altName>"+
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("id")+"</altName>\n</updateHandle>\n")}catch(k){console.log(k)}a+="\t\t\t\t\t}\n"}a+="\t\t\t\t\t}\n";a+="\t\t\t\t}\n";a+="\t\t\t}\n";a+="\t\t}\n";a+="\t}\n\n";a+="\n";b=0;for(d in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(1==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("deleted"))cvjs_debug&&console.log(" -nodes.js deleted node "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node"));
else if(b++,c="uItem"+b,e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].toString(),-1<e.indexOf("path"))e=e.substring(e.indexOf("d=")+3),e=e.substring(0,e.indexOf('"')),a=a+"var "+c+'= paper.path("',a=a+e+' ")\n.data("node","'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")+'");\n',a=a+"cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push("+c+");\n\n";else if(-1<e.indexOf("circle")){f=e.indexOf(" cx=");f=e.substring(f+5);g=f.indexOf('"');f=f.substring(0,g);
g=e.indexOf(" cy=");g=e.substring(g+5);var h=g.indexOf('"');g=g.substring(0,h);h=e.indexOf(" r=");e=e.substring(h+4);h=e.indexOf('"');e=e.substring(0,h);a=a+"var "+c+"= paper.circle("+f+","+g+","+e+","+e+")";a=a+'\n.data("node","'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")+'");\n';a=a+"cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push("+c+");\n\n"}else-1<e.indexOf("ellipse")?(f=e.indexOf(" cx="),f=e.substring(f+5),g=f.indexOf('"'),f=f.substring(0,g),g=e.indexOf(" cy="),
g=e.substring(g+5),h=g.indexOf('"'),g=g.substring(0,h),h=e.indexOf(" r="),e=e.substring(h+4),h=e.indexOf('"'),e=e.substring(0,h),a=a+"var "+c+"= paper.circle("+f+","+g+","+e+","+e+")",a=a+'\n.data("node","'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("node")+'");\n',a=a+"cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push("+c+");\n\n"):cvjs_debug&&console.log("note: not path, not circle, ..save not implemented! "+e);a+="return (buildings);\n";a+="}\n";a+="\n";a+="jQuery(document).ready(function() { \n";
a+="\tsetUpVqRoomsGeneric(); \n";return a+="}); \n"}
function cvjs_loadSpaceObjectsUser(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,cvjs_debug&&console.log("cvjs_openRedlineLoadModal "),cvjs_fileLoaderRedlineMode=!0,cvjs_filename_list_status=3,filesonserver=0,fileload_offset_flag[cvjs_active_floorplan_div_nr]&&(fileload_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#cvjs_serverFileLoadModal").css({position:"fixed"}),jQuery("#cvjs_serverFileLoadModal").offset({left:150+
jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#attention_bitmap").hide(),jQuery("#SelectFloorPlan").hide(),jQuery("#SelectFloorPlanPanel").hide(),jQuery("#SelectFloorPlanEdit").hide(),jQuery("#SelectFloorPlanPanelEdit").hide(),jQuery("#cvjs_cvRoomTextLayersOnLoad").html(""),jQuery("#serverFileModalName").html(languageTable.languages[cvjs_currentLanguage].OpenSpaceObjectModal.Header),jQuery("#addFloorPlanTable").hide(),jQuery("#add_br_not_addFloorPlanTable").show(),jQuery("#addRedlineTable").hide(),
jQuery("#infoFileModalNameDrawing").html(languageTable.languages[cvjs_currentLanguage].OpenSpaceObjectModal.SpaceObjectFilename),jQuery("#editFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].OpenSpaceObjectModal.EditSpaceObjectInfo),jQuery("#infoFloorPlanInfoText").html(languageTable.languages[cvjs_currentLanguage].OpenSpaceObjectModal.SpaceObjectFilename),cvjs_debug&&console.log("cvjs_openRedlineLoadModal cvjs_loadServerFileList(3)"),cvjs_loadServerFileList(3))}
var cvjs_spaceObjectsRelativePath="",cvjs_filepathServerSpaceObjects="",cvjs_spaceObjectsAbsolutePathOnly=!1,cvjs_SpaceObjectUrl="";function cvjs_setSpaceObjectsAbsolutePath(a,b){cvjs_spaceObjectsRelativePath=a;cvjs_filepathServerSpaceObjects=b;cvjs_spaceObjectsAbsolutePathOnly=!0}function cvjs_setSpaceObjectUrl(a){cvjs_SpaceObjectUrl=a}
function cvjs_loadSpaceObjectsDirect(a,b){cvjs_SpaceObjectUrl=b;cvjs_debug&&console.log("cvjs_loadSpaceObjectsDirect loading: "+cvjs_SpaceObjectUrl);cvjs_loadSpaceObjects(floorplan_div_Array[cvjs_active_floorplan_div_nr])}
function cvjs_loadSpaceObjects(a,b){void 0==b&&(b="");cvjs_loadRedlinesFileControllerFlag=!0;a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=void 0==a?0:cvjs_rPaperIndex(a);a=cvjs_serverHandlersPath+cvjs_serverLoadFileControllerRedlines;cvjs_debug&&console.log("brach 2 "+a+"  file="+cvjs_SpaceObjectUrl);var c={};c.file=cvjs_SpaceObjectUrl;c.custom_content=b;jQuery.ajax({url:a,type:"post",async:!1,data:c,success:function(a){var b="Load SPACES: "+a.substring(0,100);cvjs_debug&&
console.log(b);if(-1<cvjs_SpaceObjectUrl.indexOf(".js")&&-1==cvjs_SpaceObjectUrl.indexOf(".json"))cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_addInlineScript(a);else if(-1<cvjs_SpaceObjectUrl.indexOf(".json"))for(a=JSON.parse(a),b=0;b<a.SpaceObjects.length;b++)cvjs_setSpaceObjectDirect(a.SpaceObjects[b])},error:function(a){console.log("Error "+a)}})}id_publish_location=cvjs_ServerLocation+"content/SpaceObjects/space_objects_01.js";id_datalayer2_name="Space ID";
id_main_data_layer="cvjs_Data_Layer";var id_main_data_template_type="Space";zipcode=city=address=company=building_name="";state="Test1";country="";FacMgr_name="Hello 2!";FacMgr_phone=FacMgr_email=FacMgr_title="";var textLayer1,cvjs_supressPopUpModal=!1;function cvjs_supressPopUpModalMode(a){cvjs_setCreationMode(a,!1)}var cvjs_supressSingleSpaceHighLight=!1;function cvjs_supressSingleSpaceHighlight(a){cvjs_supressSingleSpaceHighLight=a}
function cvjs_addSpaceObjectDirectXY(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r){cvjs_addFixedSizeCustomSpaceObjectXY(a,b,c,c,e,"",g,h,f,k,l,p,n,q,r);cvjs_highlightSpaceObjectDirect(a,c,m)}var cvjs_addSpaceDWGFlag=!1,cvjs_addSpaceTextArrayFlag=!1,cvjs_addSpaceTextArray,cvjs_addSpaceScaleFactor=1,cvjs_textStyles,cvjs_scaleText,cvjs_hexColorText,cvjs_leftFactor,cvjs_spaceObjectDirect_svgx=0,cvjs_spaceObjectDirect_svgy=0,cvjs_spaceObjectDirect_dwgx=0,cvjs_spaceObjectDirect_dwgy=0;
function cvjs_addFixedSizeCustomSpaceObjectXY(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r){for(var t in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][t].data("id")==c){window.alert(languageTable.languages[cvjs_currentLanguage].InfoMessageModal.IdAlreadyUsed);return}cvjs_addSpaceDWGFlag=cvjs_addSpaceTextArrayFlag=!1;cvjs_addSpaceScaleFactor=1;null!=k&&1==k&&(cvjs_addSpaceDWGFlag=!0);null!=l&&(cvjs_addSpaceTextArrayFlag=!0,cvjs_addSpaceTextArray=
l);null!=m&&(cvjs_addSpaceScaleFactor=m);null!=p&&(cvjs_textStyles=p);null!=n&&(cvjs_scaleText=n);null!=q&&(cvjs_hexColorText=q);null!=r&&(cvjs_leftFactor=r);cvjs_addSpaceDWGFlag?(l=multiPages[cvjs_active_floorplan_div_nr].currentPage,cvjs_spaceObjectDirect_dwgx=g,cvjs_spaceObjectDirect_dwgy=h,k=cvjs_drawingCoordinates[l].SVG.lowerLeft.x+(g-cvjs_drawingCoordinates[l].DWG.lowerLeft.x)/(cvjs_drawingCoordinates[l].DWG.upperRight.x-cvjs_drawingCoordinates[l].DWG.lowerLeft.x)*(cvjs_drawingCoordinates[l].SVG.upperRight.x-
cvjs_drawingCoordinates[l].SVG.lowerLeft.x),l=cvjs_drawingCoordinates[l].SVG.lowerLeft.y+(h-cvjs_drawingCoordinates[l].DWG.lowerLeft.y)/(cvjs_drawingCoordinates[l].DWG.upperRight.y-cvjs_drawingCoordinates[l].DWG.lowerLeft.y)*(cvjs_drawingCoordinates[l].SVG.upperRight.y-cvjs_drawingCoordinates[l].SVG.lowerLeft.y),g=k,h=l,cvjs_spaceObjectDirect_svgx=k,cvjs_spaceObjectDirect_svgy=l):(cvjs_spaceObjectDirect_dwgy=cvjs_spaceObjectDirect_dwgx=0,cvjs_spaceObjectDirect_svgx=g,cvjs_spaceObjectDirect_svgy=h);
a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);a=!1;for(k=0;k<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;k++)f==layerTable[cvjs_active_floorplan_div_nr].layers[k].layerName&&(a=!0);a||(a="layer_"+f,layerTable[cvjs_active_floorplan_div_nr].layers[layerTable[cvjs_active_floorplan_div_nr].numberOfLayers]={layer:a,layerClass:a,layerName:f,status:"ON",layerBaseName:"",xRefFile:""},layerTable[cvjs_active_floorplan_div_nr].numberOfLayers+=1);
cvjs_hidePop();a=cvjs_currentMaxSpaceNodeId();a++;cvjs_setCurrentNodeValues(Node_underbar+a,d,c,f,"none","none","unpopulated",e,"unassigned","unassigned",!1,0,0,1,1,0,"");cvjs_addHandleFunc_FixedSizeXY(b,c,d,e,g,h)}function cvjs_moveFixedSizeCustomSpaceObjectXY(a,b,c,d){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();jQuery("#"+b).attr({path:"M"+c+","+d})}
function cvjs_addFixedSizeCustomSpaceObject(a,b,c,d,e,f){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);for(var g in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("id")==c){window.alert(languageTable.languages[cvjs_currentLanguage].InfoMessageModal.IdAlreadyUsed);return}a=!1;for(g=0;g<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;g++)f==layerTable[cvjs_active_floorplan_div_nr].layers[g].layerName&&
(a=!0);a||(a="layer_"+f,layerTable[cvjs_active_floorplan_div_nr].layers[layerTable[cvjs_active_floorplan_div_nr].numberOfLayers]={layer:a,layerClass:a,layerName:f,status:"ON",layerBaseName:"",xRefFile:""},layerTable[cvjs_active_floorplan_div_nr].numberOfLayers+=1);cvjs_hidePop();a=cvjs_currentMaxSpaceNodeId();a++;cvjs_setCurrentNodeValues(Node_underbar+a,d,c,f,"none","none","unpopulated",e,"unassigned","unassigned",!1,0,0,1,1,0,"");cvjs_addHandleFunc_FixedSize(b,c,d,e)}
function cvjs_drawSpaceObject_FixedSize(a,b,c,d){cvjs_addHandleFunc_FixedSize(a,b,c,d)}cvjs_customSpaceObjectName=cvjs_customSpaceObjectType=cvjs_customSpaceObjectId=cvjs_customSvgImagePath="";
function cvjs_addHandleFunc_FixedSizeXY(a,b,c,d,e,f){cvjs_customSvgImagePath=a;cvjs_customSpaceObjectId=b;cvjs_customSpaceObjectType=d;cvjs_customSpaceObjectName=c;tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=
cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});mouseMoveStickyNote=!1;stop_cvjs_create_fixed_rectangle_XY(e,f)}
function stop_cvjs_create_fixed_rectangle_XY(a,b){var c=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/600;cvjs_removeHandleFunc_FixedRectangle();cvjs_debug&&console.log("scaleNotescaleNotescaleNote "+c);var d=20*cvjs_addSpaceScaleFactor;
lastX_r=c*d*global_scale;lastY_r=c*d*global_scale;var e=c*d*.05*global_scale;0==cvjs_customSvgImagePath.length&&(lastY_r=0);c=c*d*.25*global_scale;tPath_r="M"+a+","+b;if(cvjs_addSpaceTextArrayFlag){var f=cvjs_addSpaceTextArray.length;d=lastY_r+c*f;tPath_r+="h"+lastX_r/global_scale+"v"+d/global_scale+"h"+-lastX_r/global_scale+"v"+(-d/global_scale+" Z")}else tPath_r+="h"+lastX_r/global_scale+"v"+lastY_r/global_scale+"h"+-lastX_r/global_scale+"v"+(-lastY_r/global_scale+" Z");cvjs_debug&&console.log(tPath_r);
d=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});e=cvjs_rPaper[cvjs_active_floorplan_div_nr].image(cvjs_customSvgImagePath,a+e/global_scale,b+e/global_scale,Math.abs((lastX_r-2*e)/global_scale),Math.abs((lastY_r-2*e)/global_scale));for(var g={"text-font":"Dialog","font-family":"Dialog","font-size":"7pt","text-anchor":"start","font-weight":"normal","font-style":"italic",stroke:"#88539B",fill:"#88539B"},h=f;3>h;h++)cvjs_addSpaceTextArray[h]="",cvjs_textStyles[h]=
g,cvjs_hexColorText[h]="#FFFFFF",cvjs_scaleText[h]=.1;if(cvjs_addSpaceTextArrayFlag)for(b+=lastY_r/global_scale,g=a+lastX_r/global_scale*cvjs_leftFactor,h=0;3>h;h++){cvjs_debug&&console.log("i="+h+"  "+cvjs_addSpaceTextArray[h]+"  "+b+"  "+a);if(0==h){var k=c*f/global_scale*cvjs_scaleText[h];b+=k;var l=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(g,b,cvjs_addSpaceTextArray[h]).attr(cvjs_textStyles[h]);l.attr({"font-size":k});k/=15;l.attr({"stroke-width":k});l.attr({stroke:cvjs_hexColorText[h]});
l.attr({fill:cvjs_hexColorText[h]});l.attr({id:"cv_"+cvjs_currentNode_underbar+"_text1"})}1==h&&(k=c*f/global_scale*cvjs_scaleText[h],b+=1.05*k,l=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(g,b,cvjs_addSpaceTextArray[h]).attr(cvjs_textStyles[h]),l.attr({"font-size":k}),k/=15,l.attr({"stroke-width":k}),l.attr({stroke:cvjs_hexColorText[h]}),l.attr({fill:cvjs_hexColorText[h]}),l.attr({id:"cv_"+cvjs_currentNode_underbar+"_text2"}));2==h&&(k=c*f/global_scale*cvjs_scaleText[h],b+=1.05*k,l=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(g,
b,cvjs_addSpaceTextArray[h]).attr(cvjs_textStyles[h]),l.attr({"font-size":k}),k/=15,l.attr({"stroke-width":k}),l.attr({stroke:cvjs_hexColorText[h]}),l.attr({fill:cvjs_hexColorText[h]}),l.attr({id:"cv_"+cvjs_currentNode_underbar+"_text3"}))}d.attr({path:tPath_r});d.attr({id:"cv_"+cvjs_currentNode_underbar,"cvjs:node":cvjs_currentNode_underbar,"cvjs:roomId":cvjs_customSpaceObjectId,"cvjs:name":cvjs_customSpaceObjectName,"class":"cvjs_nodes","cvjs:type":cvjs_customSpaceObjectType});e.attr({id:"cv_"+
cvjs_currentNode_underbar+"_image"});a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(d,e).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,a);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectSvgRectangle");cvjs_graphicalObjectOnChange("Create","SpaceObjectSvgRectangle",cvjs_currentNode_id);a=findFixtureIndex(cvjs_customSpaceObjectId);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgx",
cvjs_spaceObjectDirect_svgx);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgy",cvjs_spaceObjectDirect_svgy);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("dwgx",cvjs_spaceObjectDirect_dwgx);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("dwgy",cvjs_spaceObjectDirect_dwgy);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatex",0);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatey",0);cvjs_rPaper[cvjs_active_floorplan_div_nr].group().attr({id:"cvjs_"+
cvjs_customSpaceObjectId});jQuery("#cv_"+cvjs_currentNode_underbar+"_image").insertBefore("#cv_"+cvjs_currentNode_underbar);jQuery("#cvjs_"+cvjs_customSpaceObjectId).insertBefore("#cv_"+cvjs_currentNode_underbar+"_image");1==f&&jQuery("#cv_"+cvjs_currentNode_underbar+"_text1").insertBefore("#cvjs_"+cvjs_customSpaceObjectId);2==f&&(jQuery("#cv_"+cvjs_currentNode_underbar+"_text1").insertBefore("#cvjs_"+cvjs_customSpaceObjectId),jQuery("#cv_"+cvjs_currentNode_underbar+"_text2").insertBefore("#cv_"+
cvjs_currentNode_underbar+"_text1"));3==f&&(jQuery("#cv_"+cvjs_currentNode_underbar+"_text1").insertBefore("#cvjs_"+cvjs_customSpaceObjectId),jQuery("#cv_"+cvjs_currentNode_underbar+"_text2").insertBefore("#cv_"+cvjs_currentNode_underbar+"_text1"),jQuery("#cv_"+cvjs_currentNode_underbar+"_text3").insertBefore("#cv_"+cvjs_currentNode_underbar+"_text2"));jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar));jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+
cvjs_currentNode_underbar+"_image"));jQuery("#cv_"+cvjs_currentNode_underbar+"_image").css("pointer-events","none");1==f&&(jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar+"_text1")),jQuery("#cv_"+cvjs_currentNode_underbar+"_text1").css("pointer-events","none"));2==f&&(jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar+"_text1")),jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar+"_text2")),
jQuery("#cv_"+cvjs_currentNode_underbar+"_text1").css("pointer-events","none"),jQuery("#cv_"+cvjs_currentNode_underbar+"_text2").css("pointer-events","none"));3==f&&(jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar+"_text1")),jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar+"_text2")),jQuery("#cvjs_"+cvjs_customSpaceObjectId).append(jQuery("#cv_"+cvjs_currentNode_underbar+"_text3")),jQuery("#cv_"+cvjs_currentNode_underbar+
"_text1").css("pointer-events","none"),jQuery("#cv_"+cvjs_currentNode_underbar+"_text2").css("pointer-events","none"),jQuery("#cv_"+cvjs_currentNode_underbar+"_text3").css("pointer-events","none"))}
function cvjs_addHandleFunc_FixedSize(a,b,c,d){cvjs_customSvgImagePath=a;cvjs_customSpaceObjectId=b;cvjs_customSpaceObjectType=d;cvjs_customSpaceObjectName=c;tPath_r="M"+firstX_r+","+firstY_r;tRubberBand_r=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();
global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=
cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.mousedown(stop_cvjs_create_fixed_rectangle);mouseMoveStickyNote=!1;handleGroup.mousemove(move_cvjs_create_fixed_rectangle)}
function cvjs_removeHandleFunc_FixedRectangle(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_create_fixed_rectangle=function(){flag_rectangle=!1;tRubberBand_r.attr({stroke:"#b00000",fill:"none"})},move_cvjs_create_fixed_rectangle=function(a,b,c){b+=document.body.scrollLeft;c+=document.body.scrollTop;canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];
global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;a=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>
actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/600;a*=cvjs_globalScaleNote;var d=20*a,e=18.5*a,f=1.5*a,g="M0,"+f+"h"+e+"v"+d+"h-"+d+"v-"+e+"h"+f+"v-"+f+" Z";0==mouseMoveStickyNote&&(tRubberBand_sn=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(g).attr({stroke:"#000000",
"stroke-width":.5*a,fill:"none"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].image(cvjs_customSvgImagePath,0,f,Math.abs(e),Math.abs(d))),mouseMoveStickyNote=!0);tTransform_c="T"+((b-delta_x)/global_scale+f)+","+((c-delta_y)/global_scale-f);tRubberBand_sn.attr({transform:tTransform_c})},stop_cvjs_create_fixed_rectangle=function(a,b,c){tTransform_c="t0,0S"+d/100;tRubberBand_sn.attr({transform:tTransform_c,opacity:"0.0"});tRubberBand_sn.attr({fill:"none","fill-opacity":"0.0",stroke:"#000","stroke-opacity":"0.0"});
tRubberBand_sn.remove();b+=document.body.scrollLeft;c+=document.body.scrollTop;var d=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/600;d*=cvjs_globalScaleNote;cvjs_removeHandleFunc_FixedRectangle();firstX_r=b;firstY_r=c;
lastX_r=20*d*global_scale;lastY_r=20*d*global_scale;tPath_r="M"+(firstX_r-delta_x)/global_scale+","+(firstY_r-delta_y)/global_scale;tPath_r+="h"+lastX_r/global_scale+"v"+lastY_r/global_scale+"h"+-lastX_r/global_scale+"v"+(-lastY_r/global_scale+" Z");cvjs_debug&&console.log("scaleNotescaleNotescaleNote "+d+"  "+tPath_r);a=cvjs_rPaper[cvjs_active_floorplan_div_nr].image(cvjs_customSvgImagePath,(firstX_r-delta_x)/global_scale,(firstY_r-delta_y)/global_scale,Math.abs(lastX_r/global_scale),Math.abs(lastY_r/
global_scale));b=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(tPath_r).attr({stroke:"#b00000",fill:"none"});b.attr({path:tPath_r});b.attr({id:"cv_"+cvjs_currentNode_underbar,"cvjs:node":cvjs_currentNode_underbar,"cvjs:roomId":cvjs_customSpaceObjectId,"cvjs:name":cvjs_customSpaceObjectName,"class":"cvjs_nodes","cvjs:type":cvjs_customSpaceObjectType});a.attr({id:"cv_"+cvjs_currentNode_underbar+"_image"});jQuery("#cv_"+cvjs_currentNode_underbar+"_image").css("pointer-events","none");a=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(b,
a).attr({id:"cv_"+cvjs_currentNode_underbar+"_group"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,a);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentNode_underbar);cvjs_graphicalObjectCreated("SpaceObjectSvgRectangle");cvjs_graphicalObjectOnChange("Create","SpaceObjectSvgRectangle",cvjs_currentNode_id);jQuery("#cv_"+cvjs_currentNode_underbar+"_image").insertBefore("#cv_"+cvjs_currentNode_underbar)};
function cvjs_deleteSpaceImageObject(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_changeSpaceObject_ManualCreationMode&&(cluster_host_flag=1,cvjs_supressPopUpModal=!0,cvjs_creationInputType=2,cvjs_setCreationMode(cvjs_supressPopUpModal,!0),hideOnlyPop(),cvjs_clearDrawing());icon_command_active=33}var cvjs_rotateSpaceObjectFlag=!1;
function cvjs_rotateSpaceObject(a){cvjs_rotateSpaceObjectFlag=!0;cvjs_moveSpaceObjectFlag=!1;cvjs_resizeSpaceImageObject_core(a)}var cvjs_moveSpaceObjectFlag=!1;function cvjs_moveSpaceObject(a){cvjs_rotateSpaceObjectFlag=!1;cvjs_moveSpaceObjectFlag=!0;cvjs_resizeSpaceImageObject_core(a)}function cvjs_resizeSpaceObject(a){cvjs_moveSpaceObjectFlag=cvjs_rotateSpaceObjectFlag=!1;cvjs_resizeSpaceImageObject_core(a)}var cvjs_supressPopUpModalPriorResize=!1;
function cvjs_resizeSpaceImageObject(a){cvjs_moveSpaceObjectFlag=!1;cvjs_resizeSpaceImageObject_core(a)}
function cvjs_resizeSpaceImageObject_core(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_supressPopUpModalPriorResize=cvjs_supressPopUpModal;if(cvjs_changeSpaceObject_ManualCreationMode)for(spc in cluster_host_flag=1,cvjs_supressPopUpModal=!0,cvjs_creationInputType=2,cvjs_supressPopUpModal=!0,cvjs_creationInputType=2,cluster_host_flag=1,a=cvjs_getSpaceObjectIdList(),a)cvjs_highlightSpace(a[spc],cvjs_highlight_colorgrade_move_resize_rotate);
icon_command_active=34}var resize_x,resize_y,resize_height,resize_width,resize_node="",resize_rmid="",resize_image_height=0,resize_image_width=0,resize_image_x=0,resize_image_y=0,resize_path_d="",resize_color_layer,resize_fplan="",resize_aspect_ratio=1,resize_spc=0,resize_translate_x=0,resize_translate_x_org=0,resize_translate_y=0,resize_translate_y_org=0,resize_rotate=0,resize_scale_x=1,resize_scale_y=1,resize_origio_x,resize_origio_y,resize_transform="";
function cvjs_addHandleFunc_ResizeDragSpace(a,b,c){try{var d=jQuery("#cv_"+a).attr("d");d=d.substring(1);var e=d.indexOf("L"),f=d.indexOf("l"),g=d.indexOf("h"),h=d.indexOf("H");e=d.indexOf("L");var k=0;-1!=e&&(k=e);-1!=f&&(f<k||0==k)&&(k=f);-1!=g&&(g<k||0==k)&&(k=g);-1!=h&&(h<k||0==k)&&(k=h);-1!=e&&(e<k||0==k)&&(k=e);d=d.substring(0,k);var l=d.split(",");resize_origio_x=parseFloat(l[0]);resize_origio_y=parseFloat(l[1])}catch(m){console.log(m)}cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("translate_x",
resize_origio_x);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("translate_y",resize_origio_x);resize_translate_x_org=parseFloat(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("translate_x"));resize_translate_y_org=parseFloat(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("translate_y"));d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].getBBox();resize_node=a;resize_rmid=b;resize_spc=c;resize_height=d.height;resize_width=
d.width;resize_aspect_ratio=resize_height/resize_width;resize_x=d.x;resize_y=d.y;resize_scale_x=parseFloat(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("scale_x"));resize_scale_y=parseFloat(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("scale_y"));resize_rotate=parseFloat(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("rotate"));resize_transform=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("transform");
resize_fplan=floorplan_div_Array[cvjs_active_floorplan_div_nr];resize_fplan.lastIndexOf("_svg")==resize_fplan.length-4&&(resize_fplan=resize_fplan.substring(0,resize_fplan.length-4));resize_color_layer=cvjs_clearLayer(resize_color_layer);cvjs_highlightSpaceObjectIdDiv(resize_rmid,cvjs_object_selected_colorgrade_move_resize_rotate,resize_color_layer,resize_fplan);canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();
a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*global_scale+a.left;delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*global_scale)/
2-viewBox[cvjs_active_floorplan_div_nr].Y*global_scale+a.top;handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"});handleGroup.attr({transform:"T0,0S5.0"});handleGroup.drag(move_cvjs_resize_spaceobject_rectangle,start_cvjs_resize_spaceobject_rectangle,
stop_cvjs_resize_spaceobject_rectangle)}function cvjs_removeHandleFunc_ResizeSpace(){handleGroup.selectAll("handler").remove();handleGroup.remove()}
var start_cvjs_resize_spaceobject_rectangle=function(){},move_cvjs_resize_spaceobject_rectangle=function(a,b,c,d){d="#cv_"+resize_node+"_group";var e="#"+jQuery('[cvjs\\:node="'+resize_node+'"]').attr("id"),f=!0;0==e.indexOf("#cv_"+resize_node)&&(f=!1);var g="#cv_"+resize_node+"_image",h="";if(cvjs_rotateSpaceObjectFlag){g=0;try{c=(c-a-delta_x)/global_scale-resize_x;a/=global_scale;b/=global_scale;if(1<Math.abs(a)&&1<Math.abs(a+c)){var k=Math.atan(b/(a+c));g=0<a+c?180*k/Math.PI:180*k/Math.PI+180}else g=
0;h=resize_transform+" rotate("+g+" "+resize_x+" "+resize_y+")";cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("rotate",resize_rotate+g)}catch(l){console.log(l)}}else cvjs_moveSpaceObjectFlag?(h=a/global_scale/resize_scale_x,b=b/global_scale/resize_scale_y,k=Math.cos(Math.PI*resize_rotate/180),a=Math.sin(Math.PI*resize_rotate/180),h=resize_transform+" translate("+(h*k+b*a)+","+(-h*a+b*k)+")"):(k=(resize_width+a/global_scale)/resize_width,b=(resize_height+b/global_scale)/resize_height,
jQuery(g).length&&(b=k),h=resize_transform+" translate("+-resize_origio_x+","+-resize_origio_y+") scale("+k+","+b+") translate("+(2-k)/k*resize_origio_x+","+(2-b)/b*resize_origio_y+")",cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("scale_x",k*resize_scale_x),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("scale_y",b*resize_scale_y));cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][resize_spc].data("transform",h);jQuery(d).attr({transform:h});
f&&jQuery(e).length&&jQuery(e).attr({transform:h});resize_color_layer=cvjs_clearLayer(resize_color_layer);cvjs_highlightSpaceObjectIdDiv(resize_rmid,cvjs_object_selected_colorgrade_move_resize_rotate,resize_color_layer,resize_fplan)},stop_cvjs_resize_spaceobject_rectangle=function(){cvjs_removeHandleFunc_ResizeSpace();resize_color_layer=cvjs_clearLayer(resize_color_layer);cvjs_rotateSpaceObjectFlag?cvjs_graphicalObjectOnChange("Rotate","SpaceObject",resize_rmid):cvjs_moveSpaceObjectFlag?cvjs_graphicalObjectOnChange("Move",
"SpaceObject",resize_rmid):cvjs_graphicalObjectOnChange("Resize","SpaceObject",resize_rmid);cvjs_standardHighLightColors=!0;cvjs_supressPopUpModal=!1;for(var a in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id_link",b);b='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+b+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("name")+
'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+b+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("type")+"</h4></td></tr></table>";var c=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))c=c.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),
c=c.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),c=c.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"));dual_hbody_flag&&(-1<=parseInt(cvjs_currentNode_id)?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},
hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:hbody_2,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},
hideOnHTMLClick:"false"})}hideOnlyPop();cvjs_clearDrawing()};function cvjs_addFixedSizeImageSpaceObjectXY(a,b,c){cvjs_loadSpaceImage_UserConfiguration(a);cvjs_addFixedSizeCustomSpaceObjectXY(a,cvjs_loadSpaceImage_Location,cvjs_loadSpaceImage_ID,cvjs_loadSpaceImage_ID,cvjs_loadSpaceImage_Type,cvjs_loadSpaceImage_Layer,b,c)}
function cvjs_addFixedSizeImageSpaceObject(a){cvjs_loadSpaceImage_UserConfiguration(a);cvjs_addFixedSizeCustomSpaceObject(a,cvjs_loadSpaceImage_Location,cvjs_loadSpaceImage_ID,cvjs_loadSpaceImage_ID,cvjs_loadSpaceImage_Type,cvjs_loadSpaceImage_Layer)}
function cvjs_addDragRectangleImageSpaceObject(a){cvjs_loadSpaceImage_UserConfiguration(a);cvjs_addRectangleCustomSpaceObject(a,cvjs_loadSpaceImage_Location,cvjs_loadSpaceImage_ID,cvjs_loadSpaceImage_ID,cvjs_loadSpaceImage_Type,cvjs_loadSpaceImage_Layer)}function cvjs_setImageSpaceObjectParameters(a,b,c,d){cvjs_loadSpaceImage_Location=a;cvjs_loadSpaceImage_ID=b;cvjs_loadSpaceImage_Type=c;cvjs_loadSpaceImage_Layer=d}
function cvjs_initCADViewerPro_Section02(a){jQuery("#cvjs_modals_"+a).append('<div id="cvjs_spaceObjectAdminSettings_'+a+'"></div><div id="cvjs_spaceObjectInputPanel_'+a+'"></div>');jQuery("#cvjs_spaceObjectAdminSettings_"+a).hide();jQuery("#cvjs_spaceObjectInputPanel_"+a).hide();jQuery("#cvjs_modals_"+a).append('<table id="floorPlanCanvasObjectSpace_table_'+a+'"><tr><td><canvas id="floorPlanCanvasObjectSpace_'+a+'" width="10" height="10"></canvas></td></tr></table>');jQuery("#cvjs_modals_"+a).append('<div id="floatCompareDrawingMenu_'+
a+'" class="compareDrawingbox1"><div class="compareDrawingbox1Text1" id="compareDrawingMenuText1_'+a+'">xxxxxxx</div><div class="compareDrawingbox1Text2" id="compareDrawingMenuText2_'+a+'"></div></div>');jQuery("#floatCompareDrawingMenu_"+a).css({"z-index":2});jQuery("#floatCompareDrawingMenu_"+a).css({display:"block"});jQuery("#floatCompareDrawingMenu_"+a).css({position:"absolute"});jQuery("#floatCompareDrawingMenu_"+a).css({overflow:"visible"});jQuery("#floatCompareDrawingMenu_"+a).draggable();
jQuery("#floatCompareDrawingMenu_"+a).hide()}
function cvjs_initCADViewerPro_Section03(a){var b='<table width="100%"><tr><td><a href="http://cadviewer.com"><img src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" border="2" width="20" height="20" /></a></td><td cols="3"><td id="cvjs_imageObject">imageObject</td><td class="cvjs_modal_header_insert_image_info_1" id="imageNoteIcon3" onclick="cvjs_add_image(1);"   onmouseover="javascript:cvjs_showIconnoteTip(\''+languageTable.languages[cvjs_currentLanguage].ImageObjectModal.LoadImage+'\',3,1);" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" ><i class="fa fa-picture-o"></i></td><td class="cvjs_modal_header_insert_image_info_1" id="imageNoteIcon2" onclick="cvjs_delete_image(1);"  onmouseover="javascript:cvjs_showIconnoteTip(\''+
languageTable.languages[cvjs_currentLanguage].ImageObjectModal.RemoveImageNote+'\',2,1);" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();"><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_insert_image_info_2" id="imageNoteIcon1" onclick="cvjs_hide_image_note(1);" onmouseover="javascript:cvjs_showIconnoteTip(\''+languageTable.languages[cvjs_currentLanguage].ImageObjectModal.MinimizeImageNote+'\',1,1);" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();"><i class="fa fa-times"></i></td></tr></table>';
jQuery("#cvjs_modals_"+a).append('<div id="cvjs_floorPlanInsertImageEncapsulate_'+a+'"><table><tr><td><div id="cvjs_floorPlanInsertImageTop">'+b+'</div></tr></td><tr><td><div id="cvjs_floorPlanInsertImage"></div></td></tr></table></div>');cvjs_layerlistspaceModal_content='<table class="layerListTable" ><tr><td><div class="layerListHeader pagechangeListHeaderLayers"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_layerListTextHeaderSpace">'+
languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_layerlist_spaceobjects_'+a+'"></div></td></tr><tr><td><canvas id="dummy" width="30" height="8"></canvas></td></tr><tr><td><canvas id="dummy" width="30" height="4"></canvas><input id="cvjs_layer_search_space_field" class="search cvjs_search" placeholder="'+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Search+'" /><canvas id="dummy" width="30" height="4"></canvas><button id="cvjs_layer_sort_button_space" class="sort cvjs_sort" data-sort="layer">'+
languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Sort+'</button></td></tr><tr><td><canvas id="dummy" width="30" height="4"></canvas></td></tr><tr><td><ul class="list cvjs_list" id="layerlist_id_space"></ul><canvas id="dummy" width="30" height="20"></canvas><input id="cvjs_layer_settings_space_button1" class="cvjs_input" type="button_layer" name="Button3" value="'+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.AllLayerOn+'" onClick="modal_all_layer_on_space();" ><canvas id="dummy" width="30" height="20"></canvas><input id="cvjs_layer_settings_space_button2" class="cvjs_input" type="button_layer" name="Button3" value="'+
languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.AllLayerOff+'" onClick="modal_all_layer_off_space();" ><canvas id="dummy" width="30" height="20"></canvas><input id="cvjs_layer_settings_space_button3" class="cvjs_input" type="button_layer" name="Button3" value="'+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.SwapLayers+'" onClick="modal_swap_layers_on_off_space();" ></td></tr><tr><td><canvas id="dummy" width="5" height="4"><></td></tr></table>';jQuery("#cvjs_modals_"+
a).append('<div id="layerListSpaceObject_'+a+'" class="cvjs_listwrapper"></div>');jQuery("#layerListSpaceObject_"+a).html(cvjs_layerlistspaceModal_content);jQuery("#cvjs_exit_layerlist_spaceobjects_"+a).on("click",function(){cvjs_exit_layerlist_spaceobjects(a)});cvjs_collabStartModal_content='<table class="collabStartModalanguageTable"><tr><td><div class="collabStartHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+
'" /></a><div class="modalHeaderText"  id="cvjs_CollabHeader">'+languageTable.languages[cvjs_currentLanguage].CollaborationStartModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_startcollabmodal_'+a+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="10"></canvas><font id="collab_start_text">'+languageTable.languages[cvjs_currentLanguage].CollaborationStartModal.Session+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="mySession" id="cvjs_collabSessionInput" class="cvjs_input_collabStartModal"><canvas id="dummy" width="70" height="5"></canvas><input id="cvjs_collabStart_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].CollaborationStartModal.OK+'" onClick="cvjs_start_collab_button();"><canvas id="dummy" width="10" height="10"></canvas></td></tr></table>';jQuery("#cvjs_modals_"+a).append('<div class="collabStartModal" id="collabStartModal_'+a+'"></div>');jQuery("#collabStartModal_"+a).html(cvjs_collabStartModal_content);jQuery(function(){jQuery("#collabStartModal_"+a).draggable()});jQuery("#cvjs_exit_startcollabmodal_"+a).on("click",function(){cvjs_exit_startcollabmodal(a)});
cvjs_redlineColorModal_content='<table class="colorModalanguageTable"><tr><td><div class="colorModalHeader" id="colorModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_redlineColorHeader">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_color_modal_hide_'+a+
'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_redline_color_pickcolor">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.PickColor+'</font><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_colorPickerValue" value="FF0000" class="cvjs_inputRedlineColorModal jscolor {width:101, padding:10, shadow:false, borderWidth:0, backgroundColor:\'transparent\', insetColor:\'#000\',closable:true, closeText:\'Close Color Picker!\', onFineChange:\'cvjs_setRedlineColorFromPicker(this)\'}"><canvas id="dummy" width="20" height="10"></canvas><font id="cvjs_redline_color_selectcolor">'+
languageTable.languages[cvjs_currentLanguage].RedlineColorModal.SelectColor+'</font><canvas id="dummy" width="20" height="10"></canvas><input class="radioColor1" id="radioColor1_'+a+'" type="radio" name="radioColor" value="1" checked="checked"><img id="cvjs_radioColor1_img" src="'+cvjs_imagesLocation+'blue_color.png" border="1"/><label id="cvjs_radio1" for="radio1"><font id="cvjs_radio1_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Blue+'</font></label><canvas id="dummy" width="26" height="10"></canvas><input class="radioColor2" id="radioColor2_'+
a+'" type="radio" name="radioColor" value="2"><img id="cvjs_radioColor2_img" src="'+cvjs_imagesLocation+'red_color.png" border="1"/><label id="cvjs_radio2" for="radio2"><font id="cvjs_radio2_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Red+'</font></label></td></tr><tr><td><canvas id="dummy" width="303" height="10"></canvas><input class="radioColor3" id="radioColor3_'+a+'" type="radio" name="radioColor" value="3"><img id="cvjs_radioColor3_img" src="'+cvjs_imagesLocation+
'orange_color.png" border="1"/><label id="cvjs_radio3" for="radio3"><font id="cvjs_radio3_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Orange+'</font></label><canvas id="dummy" width="10" height="10"></canvas><input class="radioColor4" id="radioColor4_'+a+'" type="radio" name="radioColor" value="4"><img id="cvjs_radioColor4_img" src="'+cvjs_imagesLocation+'yellow_color.png" border="1"/><label id="cvjs_radio4" for="radio4"><font id="cvjs_radio4_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Yellow+
'</font></label></td></tr><tr><td><canvas id="dummy" width="303" height="10"></canvas><input class="radioColor5" id="radioColor5_'+a+'" type="radio" name="radioColor" value="5"><img id="cvjs_radioColor5_img" src="'+cvjs_imagesLocation+'green_color.png" border="1"/><label id="cvjs_radio5" for="radio5"><font id="cvjs_radio5_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Green+'</font></label><canvas id="dummy" width="17" height="10"></canvas><input class="radioColor6" id="radioColor6_'+
a+'" type="radio" name="radioColor" value="6"><img id="cvjs_radioColor6_img" src="'+cvjs_imagesLocation+'purple_color.png" border="1"/><label id="cvjs_radio6" for="radio6"><font id="cvjs_radio6_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Purple+'</font></label></td></tr><tr><td><canvas id="dummy" width="303" height="10"></canvas><input class="radioColor7" id="radioColor7_'+a+'" type="radio" name="radioColor" value="7"><img id="cvjs_radioColor7_img" src="'+cvjs_imagesLocation+
'gray_color.png" border="1"/><label id="cvjs_radio7" for="radio7"><font id="cvjs_radio7_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Gray+'</font></label><canvas id="dummy" width="24" height="10"></canvas><input class="radioColor8" id="radioColor8_'+a+'" type="radio" name="radioColor" value="8"><img id="cvjs_radioColor8_img" src="'+cvjs_imagesLocation+'brown_color.png" border="1"/><label id="cvjs_radio8" for="radio8"><font id="cvjs_radio8_text_red">'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.Brown+
'</font></label> </td></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_redlinecolor_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].RedlineColorModal.OK+'" onClick="cvjs_setRedlineColorViaButton(\''+a+'\');"><canvas id="dummy" width="10" height="10"></td></tr></table>';jQuery("#cvjs_modals_"+a).append('<div  class="colorModal"  id="colorModal_'+a+'"></div>');
jQuery("#colorModal_"+a).html(cvjs_redlineColorModal_content);jQuery("#cvjs_color_modal_hide_"+a).on("click",function(){cvjs_color_modal_hide(a)});cvjs_redlineEllipseModal_content='<table class="ellipseModalanguageTable"><tr><td><div class="ellipseModalHeader" id="ellipseModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_redlineEllipseHeader">'+languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.Header+
'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_ellipse_modal_hide_'+a+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas><font id="cvjs_redline_ellipse_type">'+languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.SelectType+'</font><canvas id="dummy" width="20" height="10"></canvas><input class="radioEllipse1" id="radioEllipse1_'+a+'" type="radio" name="radioEllipse" value="1" checked="checked"><label id="cvjs_ellipse1" for="ellipse1"><font id="cvjs_redline_ellipse_textellipse">'+
languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.Ellipse+'</font></label></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas><input class="radioEllipse2" id="radioEllipse2_'+a+'" type="radio" name="radioEllipse" value="2"><label id="cvjs_ellipse2" for="radio2"><font id="cvjs_redline_ellipse_textcloud">'+languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.Cloud+'</font></label><canvas id="dummy" width="10" height="10"></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_ellipse_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].RedlineEllipseModal.OK+'"><canvas id="dummy" width="10" height="10"></td></tr></table>';jQuery("#cvjs_modals_"+a).append('<div  class="ellipseModal"  id="ellipseModal_'+a+'"></div>');jQuery("#ellipseModal_"+a).html(cvjs_redlineEllipseModal_content);jQuery("#cvjs_ellipse_modal_hide_"+a).on("click",function(){cvjs_ellipse_modal_hide(a)});jQuery("#cvjs_ellipse_button").on("click",function(){cvjs_drawEllipseViaButton(a)});jQuery("#ellipseModal_"+a).hide();
jQuery(function(){jQuery("#ellipseModal_"+a).draggable()});cvjs_creationModeModal_content='<table class="creationModalanguageTable"><tr><td><div class="creationModalHeader" id="creationModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_redlineEllipseHeader">'+languageTable.languages[cvjs_currentLanguage].CreationModeModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_creation_modal_hide_'+
a+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="23"></canvas>'+languageTable.languages[cvjs_currentLanguage].CreationModeModal.SelectType+'<canvas id="dummy" width="20" height="10"></canvas><input class="radioCreation1" id="radioCreation1_'+a+'" type="radio" name="radioCreation" value="1" checked="checked"><label id="cvjs_ellipse1" for="ellipse1">'+languageTable.languages[cvjs_currentLanguage].CreationModeModal.DataSource+'</label></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas><input class="radioCreation2" id="radioCreation2_'+
a+'" type="radio" name="radioCreation" value="2"><label id="cvjs_ellipse2" for="radio2">'+languageTable.languages[cvjs_currentLanguage].CreationModeModal.Manually+'</label><canvas id="dummy" width="10" height="10"></tr><tr><td><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_ellipse_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].CreationModeModal.OK+'" onClick="cvjs_creation_modal_show(\''+a+'\');"><canvas id="dummy" width="10" height="10"></td></tr></table>';
jQuery("#cvjs_modals_"+a).append('<div  class="creationModal"  id="creationModeModal_'+a+'"></div>');jQuery("#creationModeModal_"+a).html(cvjs_creationModeModal_content);jQuery("#collabStartModal_"+a).hide();jQuery("#cvjs_creation_modal_hide_"+a).on("click",function(){cvjs_creation_modal_hide(a)});cvjs_mergeDXFModal_content='<table class="mergeDXFModalanguageTable"><tr><td><div class="mergeDXFModalHeader" id="mergeDXFModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+
cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_mergeDXFHeader">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_mergeDXF_modal_hide_'+a+'"></div></td></tr><tr><td><br><br><canvas id="dummy" width="10" height="10"></canvas><font id="cvjs_publish_dxf_selectmode">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.SelectMode+'</font><canvas id="dummy" width="20" height="10"></canvas><input class="radioMergeDXF1" id="radioMergeAsDXF1_'+
a+'" type="radio" name="radioColor" value="1" checked="checked"><label id="cvjs_mergedxfmode1" for="radio1">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Mode1+'</label><canvas id="dummy" width="26" height="10"></canvas><input class="radioMergeDXF2" id="radioMergeAsDXF2_'+a+'" type="radio" name="radioColor" value="2"><label id="cvjs_mergedxfmode2" for="radio2">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Mode2+'</label><canvas id="dummy" width="303" height="10"></canvas><input class="radioMergeDXF3" id="radioMergeAsDXF3_'+
a+'" type="radio" name="radioColor" value="3"><label id="cvjs_mergedxfmode3" for="radio3">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Mode3+'</label></td></tr><tr id="mergeDXFModal_row2_'+a+'" ><td><canvas id="dummy" width="10" height="10"></canvas><font id="cvjs_entiredoc_checkbox_text_dxf">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.EntireDoc+'</font><input type="checkbox" id="cvjs_entiredoc_checkbox" value="grayscale_status"></td></tr> <tr id="mergeDXFModal_row3_'+
a+'" ><td></td></tr> <tr class="mergeDXFModal_row4" id="mergeDXFModal_row4_'+a+'" ><td><table id="enter_email_content_table">         <tr><td><canvas id="dummy" width="10" height="20"></canvas><font id="cvjs_entiredoc_checkbox_text_recep_dxf">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Recipient+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="email" id="cvjs_mergeDXFemailrecipient_'+a+'" class="cvjs_mergeDXFemailrecipient"></td></tr>        <tr><td><canvas id="dummy" width="10" height="20"></canvas><font id="cvjs_entiredoc_checkbox_title_dxf">'+
languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Title+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="title" id="cvjs_mergeDXFemailtitle_'+a+'" class="cvjs_mergeDXFemailtitle"></td></tr>                <tr><td><canvas id="dummy" width="10" height="10"></canvas>    <table><tr><td><canvas id="dummy" width="10" height="10"></canvas><font id="cvjs_entiredoc_checkbox_message_dxf">'+languageTable.languages[cvjs_currentLanguage].MergeDXFModal.Message+'</font></td></tr><tr><td></td></tr></table>    <textarea class="cvjs_mergedxfmail_edit_text_1" id="mergedxfmail_text" cols="43" rows="3"></textarea></td></tr>                         </table></td></tr> <tr><td><canvas id="dummy" width="10" height="10"></canvas><input id="cvjs_publish_redline_to_dxf_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].MergeDXFModal.OK+'" onClick="cvjs_mergeDXFViaButton(\''+a+'\');"><canvas id="dummy" width="10" height="10"></td></tr><tr></tr></table>';jQuery("#cvjs_modals_"+a).append('<div  class="mergeDXFModal"  id="mergeDXFModal_'+a+'"></div>');jQuery("#mergeDXFModal_"+a).html(cvjs_mergeDXFModal_content);jQuery("#mergeDXFModal_"+a).hide();jQuery(function(){jQuery("#mergeDXFModal_"+a).draggable()});jQuery("#cvjs_mergeDXF_modal_hide_"+a).on("click",function(){cvjs_mergeDXF_modal_hide(a)});
cvjs_redlineThicknessModal_content='<table class="thicknessModalanguageTable"><tr><td><div class="thicknessHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_redlineThicknessHeader">'+languageTable.languages[cvjs_currentLanguage].RedlineThicknessModal.Header+'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_exit_redlinethicknessmodal_'+
a+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="24"></canvas><font id="cvjs_redline_thickness_thickness">'+languageTable.languages[cvjs_currentLanguage].RedlineThicknessModal.Thickness+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="3" id="cvjs_redlineThicknessInput_'+a+'" class="cvjs_inputThicknessModal"><canvas id="dummy" width="70" height="5"></canvas><input id="cvjs_thickness_button" type="button" name="bPrint" value="'+languageTable.languages[cvjs_currentLanguage].RedlineThicknessModal.OK+
'" onClick="cvjs_setRedlineThicknessViaButton(\''+a+'\');"><canvas id="dummy" width="10" height="10"></canvas></td></tr></table>';jQuery("#cvjs_modals_"+a).append('<div class="thicknessModal" id="thicknessModal_'+a+'"></div>');jQuery("#thicknessModal_"+a).html(cvjs_redlineThicknessModal_content);jQuery("#thicknessModal_"+a).hide();jQuery(function(){jQuery("#thicknessModal_"+a).draggable()});jQuery("#cvjs_exit_redlinethicknessmodal_"+a).on("click",function(){cvjs_exit_redlinethicknessmodal(a)});jQuery("#cvjs_modals_"+
a).append('<div id="imageObjectUpload_'+a+'"><input id="upfile_image" type="file" value="upload" onchange="add_file_object_image(this)"/></div>');jQuery("#imageObjectUpload_"+a).hide();cvjs_redlinetextModal_content='<table class="redlinetextModalanguageTable"><tr><td><div class="redlinetextModalHeader"><a class="modalIconLogo" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img class="cvjs_img" src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" /></a><div class="modalHeaderText"  id="cvjs_redlineTextHeader">'+languageTable.languages[cvjs_currentLanguage].RedlineTextModal.Header+
'</div><input class="cvjs_new_header_button" type="button" value="&times;" id="cvjs_hide_redline_text_modal_'+a+'"></div></td></tr><tr><td><br><canvas id="dummy" width="10" height="24"></canvas><font id="cvjs_redline_text_fontsize">'+languageTable.languages[cvjs_currentLanguage].RedlineTextModal.FontSize+'</font><canvas id="dummy" width="10" height="10"></canvas><input value="11" id="cvjs_redlineFontSizeInput_'+a+'" class="cvjs_inputRedlineTextModal"><canvas id="dummy" width="70" height="5"></canvas><canvas id="dummy" width="10" height="10"></canvas></td></tr><tr><td><canvas id="dummy" width="10" height="76"></canvas><textarea class="cvjs_redlines_edit_text_1" id="redline_text" cols="33" rows="3"></textarea><canvas id="dummy" width="10" height="5"></canvas><input id="cvjs_redlinetext_button" type="button" name="bPrint" value="'+
languageTable.languages[cvjs_currentLanguage].RedlineTextModal.OK+'" onClick="cvjs_initiateInsertRedlineText(\''+a+'\');"></td></tr><tr><td><div id="cvjs_calibrationModalText"><canvas id="dummy" width="0" height="13"></canvas><font id="cvjs_redline_text_inserttext">'+languageTable.languages[cvjs_currentLanguage].RedlineTextModal.Text+"</font></div></td></tr></table>";jQuery("#cvjs_modals_"+a).append('<div class="redlinetextModal" id="redlinetextModal_'+a+'"></div>');jQuery("#redlinetextModal_"+a).html(cvjs_redlinetextModal_content);
jQuery("#cvjs_hide_redline_text_modal_"+a).on("click",function(){cvjs_hide_redline_text_modal(a)});jQuery(function(){jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).draggable()});jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).css("left",jQuery("#"+a).position().left+50).css("top",jQuery("#"+a).position().top+50);jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).hide();jQuery("#imageNoteIcon3_"+a).mouseover(function(){tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].ImageObject.InsertReplace);
tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).position().left+490).css("top",jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).position().top-25)});jQuery("#imageNoteIcon2_"+a).mouseover(function(){tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].ImageObject.Delete);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+
a).position().left+500).css("top",jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).position().top-25)});jQuery("#imageNoteIcon1_"+a).mouseover(function(){tip[cvjs_active_floorplan_div_nr].html(languageTable.languages[cvjs_currentLanguage].ImageObject.Minimize);tip[cvjs_active_floorplan_div_nr].show();tip[cvjs_active_floorplan_div_nr].css("left",jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).position().left+535).css("top",jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+a).position().top-25)});
jQuery(function(){jQuery("#layerListSpaceObject_"+a).draggable()});jQuery("#layerListSpaceObject_"+a).css("position","absolute");jQuery("#layerListSpaceObject_"+a).hide();jQuery("#layerlist_id_space_"+a).mouseover(function(){jQuery("#layerListSpaceObject_"+a).draggable({disabled:!0})});jQuery("#layerlist_id_space_"+a).mouseout(function(){jQuery("#layerListSpaceObject_"+a).draggable({disabled:!1})});jQuery("#exit_layerlist_space").click(function(){cvjs_layerListSpace.clear();jQuery("#layerListSpaceObject").hide();
cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1});jQuery("#exit_layerlist_space").mouseover(function(){jQuery("#exit_layerlistSpaceObject").css("filter","alpha(opacity=70)");jQuery("#exit_layerlistSpaceObject").css("opacity","0.7")});jQuery("#exit_layerlist_space").mouseout(function(){jQuery("#exit_layerlistSpaceObject").css("filter","alpha(opacity=100)");jQuery("#exit_layerlistSpaceObject").css("opacity","1.0")});jQuery(function(){jQuery("#redlinetextModal_"+a).draggable()});jQuery("#redlinetextModal_"+
a).hide()}
function cvjs_initCADViewerPro_FileLoadModal(a){var b='<table  class="cvjs_serverFileLoadModalanguageTable" id="cvjs_serverFileLoadModal_table" ><tr><td><div id="cvjs_serverFileLoadModal" class="measurement_modal-body" ><div class="cadviewer_modal-content"><div class="cadviewer_modal-header"><table><tr><td><a class="modalIconLogoFileModal" href="'+pt1+pt2+pt3+pt4+pt5+pt6+'"><img src="'+cvjs_imagesLocation+lt1+lt2+lt3+lt4+'" width="30" height="30" alt="CADViewer Logo" /></a></td><td><canvas id="dummy" width="10" height="10"></canvas></td><td><h4><div class="modalHeaderTextFileModal" id="serverFileModalName">XXX</div></h4></td><td></td></tr></table><div id="cvjs_FileModalXButton"><input class="cvjs_new_header_button_filemodal" type="button" value="&times;" id="cvjs_exitServerFileLoadModal_'+a+
'"></div></div><hr id="id_filemodal_hr"class="cvjs_filemodal_hr">';b+='<div id="modalHeaderAdjustment">x<div><div id="SelectFloorPlanPanel"><div id="add_br_not_addFloorPlanTable""><br></div><div id="addFloorPlanTable"><table id="" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td class="fb_12"><img class="select_file_image" id="select_file" src="'+cvjs_imagesLocation+'tools/addDrawing.png" border="0" width="497" height="29" alt="Select File" /><div style=\'height: 0px;width: 0px; overflow:hidden;\'><input id="cvjs_upfile" type="file" multiple value="Reset form" onchange="cvjs_add_file_object(\'cvjs_upfile\');"/></div></td></tr><tr height="10"><td height="10"><img id="dummy2" src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td height="10"><img id="dummy2" src="'+cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td></tr></table></div>';b+='<div id="addRedlineTable"><table id="select_save_changes" width="100%" border="0" cellspacing="0" border-spacing="0" ><tr><td><img src="'+cvjs_imagesLocation+'5x5.png" border="1" width="3" height="3" /></td><td class="select_tag_text_upload_redline">'+languageTable.languages[cvjs_currentLanguage].SaveRedlineModal.Upload+
'</td><td><div id="inputRedlineFileName">Name goes here</div></td><td><div id="button2-no_upload_redline"><img id="uploadredline_modal_cancel_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Cancel_Inactive_4.png" border="0"></div></td><td><td><div style="width: 111px" ><div id="button1-upload_redline"><img id="uploadredline_modal_proceed_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Proceed_111x28_Up.png" border="0"></div></div></td><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="30" height="10" /></td></tr><tr><td><img src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="10" height="20" /></td></tr></table></div>';b+='<table id="filterByInfoTablex" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td class="fb_112"><div id="cvjs_cvRoomTextLayersOnLoad" class="select_tag_text_top"></div></td></tr></table>';b=cvjs_fileModalEditMode?b+('<table id="filterByInfoTable" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'5x5.png" border="1" width="3" height="3" /></td><td class="fb_112"><div id="infoFileModalNameDrawing" class="select_tag_text_top">DRAWING / FILENAME</div></td><td class="fb_3"><div id="editing" class="select_tag_text_blue">Edit</div></td><td><img src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="7" height="7" /></td></tr></table><div class="cvjs_filemodal_horizontal_line"></div>'):b+('<table id="filterByInfoTable" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'5x5.png" border="1" width="3" height="3" /></td><td class="fb_112"><div id="infoFileModalNameDrawing" class="select_tag_text_top">DRAWING / FILENAME</div></td><td class="fb_3"><div id="editing" class="select_tag_text_blue"></div></td><td><img src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="7" height="7" /></td></tr></table><div class="cvjs_filemodal_horizontal_line"></div>');b+='<div id="attention_bitmap" ><table id="filterByTable_attention" width="100%" border="0" cellspacing="0" border-spacing="0"><tr><td><img src="'+cvjs_imagesLocation+'10x10y.png" border="1" width="10" height="10" /></td><td class="fb_11"><div id="attention_1" class="select_file_text_attention">Attention</div></td><td class="fb_11"><div style="float:right;margin-right:18px;margin-top:0px;" id="CloseAttentionBitmap"><img src="'+
cvjs_imagesLocation+'crossXy.png" border="0"></div></td></tr></table>';b+='<table id="filterByInfoTable_attention" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'10x10y.png" border="1" width="10" height="10" /></td><td class="fb_1"><div id="attention_2" class="select_tag_text_attention">For best results, use a vector drawing or a grayscale bitmap to ensure legibility.</div></td></tr><tr><td><img src="'+cvjs_imagesLocation+'6x6y.png" border="1" width="6" height="6" /></td></tr></table><div class="horizontal_line_yellow"></div></div>';
b+='<div id="SelectFloorPlan">';for(var c=1;c<=cvjs_maxfiles;c++)b+='<div id="1floor'+c+'" ><table id="filterByTableFileInput" width="100%" border="0" cellspacing="0" border-spacing="0"><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td class="fb_11"><div id="1floor'+c+'_1" class="select_file_text">Floor Tag</div></td></tr></table><table id="filterByInfoTable" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+
cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10"/></td><td class="fb_1"><div id="1floor'+c+'_2" class="select_tag_text">filename1.ext</div></td></tr></table><div class="horizontal_dotted_line"></div></div>';b=b+"<br><br></div></div>"+('<div id="modalHeaderAdjustment">x<div><div id="SelectFloorPlanPanelEdit"><table id="filterByInfoTable" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'5x5.png" border="1" width="1" height="3" /></td><td class="fb_112"><div id="editFloorPlanInfoText" class="select_tag_text_top_big">Edit Floor Plan Info</div></td></tr></table>');
b+='<div id="modalHeaderAdjustment">x<div><table id="filterByInfoTable" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'5x5.png" border="1" width="3" height="3" /></td><td class="fb_112"><div id="infoFloorPlanInfoText" class="select_tag_text_top">DRAWING / FILENAME</div></td><td class="fb_3"><div id="done_editing" class="select_tag_text_blue">Done Editing</div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="0" width="7" height="7" /></td></tr></table><div id="id__filemodal_horizontal_line" class="cvjs_filemodal_horizontal_line"></div>';
b+='<div id="xsortable"><div id="SelectFloorPlanEdit">';for(c=1;c<=cvjs_maxfiles;c++)b+='<div id="2floor'+c+'"><table id="filterByTable2" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td style="padding-left:6px;cursor:ns-resize;"><img src="'+cvjs_imagesLocation+'tools/FlrPlanReorderGrip2.png" border="1" width="27" height="44" /></td><td class="fb_112"><div id="2floor'+c+'_1" class="select_file_text_2a">Floor Tag</div><div id="2floor'+c+'_4" class="display_tag_text2">filename1.ext</div></td><td class="fb_22"><div id="2floor'+
c+'_2" class="rename_tag_text_blue1">Rename</div></td><td><img src="'+cvjs_imagesLocation+'blueDot.png" border="0" width="12" height="17" /></td><td class="fb_22_2"><div id="2floor'+c+'_2_2" class="unlink_tag_text_blue1">Unlink</div></td><td><img src="'+cvjs_imagesLocation+'blueDot.png" border="0" width="12" height="17" /></td><td class="fb_22_3"><div id="2floor'+c+'_2_3" class="clear_tag_text_blue1">Clear</div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><img src="'+
cvjs_imagesLocation+'5x5.png" border="1" width="3" height="3" /></td><td><div id="2floor'+c+'_3" class="delete_tag_image"><img id="2floor'+c+'_3_image" src="'+cvjs_imagesLocation+'tools/Trash_2.png" border="0" width="14" height="17"></div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td></table><div class="horizontal_dotted_line"></div></div>';b+="</div></div></div></td></tr></table>";cvjs_modalsInitialized_FileLoadModal&&(jQuery("#cvjs_serverFileLoadModal_table").remove(),
cvjs_modalsInitialized_FileLoadModal=!1);cvjs_modalsInitialized_FileLoadModal||(jQuery("#cvjs_modals_"+a).append(b),jQuery("#cvjs_modals_"+a).append('<form id="delete_form" style="display:none"><table width="100%" border="0" cellspacing="0" border-spacing="0" ><tr></tr><tr><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div id="delete_Modal_header" class="select_file_text_modal">Delete</div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div class=\'select_file_text_close\'><div id="modal_close_cross">&times;</div></div></td></tr></table><div class="horizontal_modal_line"></div><table id="text_modal_table" class="text_modal_table_class" width="100%" border="0" cellspacing="0" border-spacing="0" ><tr><td><img src="'+
cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div class="select_tag_text_modal"><div id="delete_modal_file_name1">Delete</div></div></td></tr></table><table id="select_save_changes" width="100%" border="0" cellspacing="0" border-spacing="0" ><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="5" height="5" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><img src="'+
cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><div style="width: 60px" ><div id="button2-nodelete"><img id="delete_modal_cancel_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Cancel_Inactive_4.png" border="0"></div></div></td><td><td div style="height: 10px" ><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td><div style="width: 111px" ><div id="button1-delete"><img id="delete_modal_proceed_image" class="icon_img" src="'+
cvjs_imagesLocation+'tools/Proceed_111x28_Up.png" border="0"></div></div></td></tr></table></form>'),jQuery("#cvjs_modals_"+a).append('<form id="clear_form" style="display:none"><table width="100%" border="0" cellspacing="0" border-spacing="0" ><tr></tr><tr><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div id="clear_Modal_header" class="select_file_text_modal">Clear</div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div class=\'select_file_text_close\'><div id="clear_modal_close_cross">&times;</div></div></td></tr></table><div class="horizontal_modal_line"></div><table id="text_modal_table" class="text_modal_table_class" width="100%" border="0" cellspacing="0" border-spacing="0" ><tr><td><img src="'+
cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div class="select_tag_text_modal"><div id="clear_modal_file">Do you want to clear all locations in,</div></div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td></tr></table><table id="select_save_changes" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td><img src="'+
cvjs_imagesLocation+'7x7.png" border="1" width="5" height="5" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><div style="width: 60px" ><div id="button2-noclear"><img id="clear_modal_cancel_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Cancel_Inactive_4.png" border="0"></div></div></td><td><td div style="height: 10px" ><img src="'+cvjs_imagesLocation+
'10x10.png" border="1" width="10" height="10" /></td><td><div style="width: 111px" ><div id="button1-clear"><img id="clear_modal_proceed_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Proceed_111x28_Up.png" border="0"></div></div></td></tr><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="7" height="7" /></td></tr></table></form>'),jQuery("#cvjs_modals_"+a).append('<form id="unlink_form" style="display:none"><table width="100%" border="0" cellspacing="0" border-spacing="0" ><tr></tr><tr><td><img src="'+
cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div id="unlink_Modal_header" class="select_file_text_modal">Unlink</div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div class=\'select_file_text_close\'><div id="unlink_modal_close_cross">&times;</div></div></td></tr></table><div class="horizontal_modal_line"></div><table id="text_modal_table" class="text_modal_table_class" width="100%" border="0" cellspacing="0" border-spacing="0" ><tr><td><img src="'+
cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td><td><div class="select_tag_text_modal"><div id="unlink_modal_file">Do you want to unlink all locations in,</div></div></td><td><img src="'+cvjs_imagesLocation+'7x7.png" border="1" width="7" height="7" /></td></tr></table><table id="select_save_changes" width="100%" border="0" cellspacing="0" border-spacing="0" id="location_tags"><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="10" height="10" /></td><td><img src="'+
cvjs_imagesLocation+'7x7.png" border="1" width="5" height="5" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><img src="'+cvjs_imagesLocation+'white28x10.png" border="1" width="28" height="10" /></td><td><div style="width: 60px" ><div id="button2-nounlink"><img id="unlink_modal_cancel_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Cancel_Inactive_4.png" border="0"></div></div></td><td><td div style="height: 10px" ><img src="'+cvjs_imagesLocation+
'10x10.png" border="1" width="10" height="10" /></td><td><div style="width: 111px" ><div id="button1-unlink"><img id="unlink_modal_proceed_image" class="icon_img" src="'+cvjs_imagesLocation+'tools/Proceed_111x28_Up.png" border="0"></div></div></td></tr><tr><td><img src="'+cvjs_imagesLocation+'10x10.png" border="1" width="7" height="7" /></td></tr></table></form>'));jQuery("#cvjs_exitServerFileLoadModal_"+a).on("click",function(){cvjs_exitServerFileLoadModal(a)})}var cvjs_RedlinesLayer="cvjs_Redlines_01";
function cvjs_getStickyNotesRedlineDXF(){var a="";cvjs_rPaper[cvjs_active_floorplan_div_nr].getBBox();var b=" 0\nSECTION\n  2\nHEADER\n  9\n$ACADVER\n  1\nAC1015\n  9\n$ACADMAINTVER\n 70\n     6\n  9\n$DWGCODEPAGE\n  3\nANSI_1252\n  9\n$INSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n"+("  9\n$EXTMIN\n 10\n"+cvjs_drawingCoordinates[0].DWG.lowerLeft.x+"\n 20\n"+cvjs_drawingCoordinates[0].DWG.lowerLeft.y+"\n 30\n0.0\n  9\n$EXTMAX\n 10\n"+cvjs_drawingCoordinates[0].DWG.upperRight.x+"\n 20\n"+cvjs_drawingCoordinates[0].DWG.upperRight.y+
"\n 30\n0.0\n")+"  9\n$LIMMIN\n 10\n0.0\n 20\n0.0\n  9\n$LIMMAX\n 10\n420.0\n 20\n297.0\n  9\n$ORTHOMODE\n 70\n     0\n  9\n$REGENMODE\n 70\n     1\n  9\n$FILLMODE\n 70\n     1\n  9\n$QTEXTMODE\n 70\n     0\n  9\n$MIRRTEXT\n 70\n     0\n  9\n$LTSCALE\n 40\n1.0\n  9\n$ATTMODE\n 70\n     1\n  9\n$TEXTSIZE\n 40\n2.5\n  9\n$TRACEWID\n 40\n1.0\n  9\n$TEXTSTYLE\n  7\nStandard\n  9\n$CLAYER\n  8\n0\n  9\n$CELTYPE\n  6\nByLayer\n  9\n$CECOLOR\n 62\n   256\n  9\n$CELTSCALE\n 40\n1.0\n  9\n$DISPSILH\n 70\n     0\n  9\n$DIMSCALE\n 40\n1.0\n  9\n$DIMASZ\n 40\n2.5\n  9\n$DIMEXO\n 40\n0.625\n  9\n$DIMDLI\n 40\n3.75\n  9\n$DIMRND\n 40\n0.0\n  9\n$DIMDLE\n 40\n0.0\n  9\n$DIMEXE\n 40\n1.25\n  9\n$DIMTP\n 40\n0.0\n  9\n$DIMTM\n 40\n0.0\n  9\n$DIMTXT\n 40\n2.5\n  9\n$DIMCEN\n 40\n2.5\n  9\n$DIMTSZ\n 40\n0.0\n  9\n$DIMTOL\n 70\n     0\n  9\n$DIMLIM\n 70\n     0\n  9\n$DIMTIH\n 70\n     0\n  9\n$DIMTOH\n 70\n     0\n  9\n$DIMSE1\n 70\n     0\n  9\n$DIMSE2\n 70\n     0\n  9\n$DIMTAD\n 70\n     1\n  9\n$DIMZIN\n 70\n     8\n  9\n$DIMBLK\n  1\n\n  9\n$DIMASO\n 70\n     1\n  9\n$DIMSHO\n 70\n     1\n  9\n$DIMPOST\n  1\n\n  9\n$DIMAPOST\n  1\n\n  9\n$DIMALT\n 70\n     0\n  9\n$DIMALTD\n 70\n     3\n  9\n$DIMALTF\n 40\n0.03937007874016\n  9\n$DIMLFAC\n 40\n1.0\n  9\n$DIMTOFL\n 70\n     1\n  9\n$DIMTVP\n 40\n0.0\n  9\n$DIMTIX\n 70\n     0\n  9\n$DIMSOXD\n 70\n     0\n  9\n$DIMSAH\n 70\n     0\n  9\n$DIMBLK1\n  1\n\n  9\n$DIMBLK2\n  1\n\n  9\n$DIMSTYLE\n  2\nISO-25\n  9\n$DIMCLRD\n 70\n     0\n  9\n$DIMCLRE\n 70\n     0\n  9\n$DIMCLRT\n 70\n     0\n  9\n$DIMTFAC\n 40\n1.0\n  9\n$DIMGAP\n 40\n0.625\n  9\n$DIMJUST\n 70\n     0\n  9\n$DIMSD1\n 70\n     0\n  9\n$DIMSD2\n 70\n     0\n  9\n$DIMTOLJ\n 70\n     0\n  9\n$DIMTZIN\n 70\n     8\n  9\n$DIMALTZ\n 70\n     0\n  9\n$DIMALTTZ\n 70\n     0\n  9\n$DIMUPT\n 70\n     0\n  9\n$DIMDEC\n 70\n     2\n  9\n$DIMTDEC\n 70\n     2\n  9\n$DIMALTU\n 70\n     2\n  9\n$DIMALTTD\n 70\n     3\n  9\n$DIMTXSTY\n  7\nStandard\n  9\n$DIMAUNIT\n 70\n     0\n  9\n$DIMADEC\n 70\n     0\n  9\n$DIMALTRND\n 40\n0.0\n  9\n$DIMAZIN\n 70\n     0\n  9\n$DIMDSEP\n 70\n    44\n  9\n$DIMATFIT\n 70\n     3\n  9\n$DIMFRAC\n 70\n     0\n  9\n$DIMLDRBLK\n  1\n\n  9\n$DIMLUNIT\n 70\n     2\n  9\n$DIMLWD\n 70\n    -2\n  9\n$DIMLWE\n 70\n    -2\n  9\n$DIMTMOVE\n 70\n     0\n  9\n$LUNITS\n 70\n     2\n  9\n$LUPREC\n 70\n     3\n  9\n$SKETCHINC\n 40\n1.0\n  9\n$FILLETRAD\n 40\n10.0\n  9\n$AUNITS\n 70\n     0\n  9\n$AUPREC\n 70\n     0\n  9\n$MENU\n  1\n.\n  9\n$ELEVATION\n 40\n0.0\n  9\n$PELEVATION\n 40\n0.0\n  9\n$THICKNESS\n 40\n0.0\n  9\n$LIMCHECK\n 70\n     0\n  9\n$CHAMFERA\n 40\n10.0\n  9\n$CHAMFERB\n 40\n10.0\n  9\n$CHAMFERC\n 40\n20.0\n  9\n$CHAMFERD\n 40\n0.0\n  9\n$SKPOLY\n 70\n     0\n  9\n$TDCREATE\n 40\n2455022.720692847\n  9\n$TDUCREATE\n 40\n2455022.637359514\n  9\n$TDUPDATE\n 40\n2458234.855757477\n  9\n$TDUUPDATE\n 40\n2458234.772424144\n  9\n$TDINDWG\n 40\n0.0048455208\n  9\n$TDUSRTIMER\n 40\n0.0004155903\n  9\n$USRTIMER\n 70\n     1\n  9\n$ANGBASE\n 50\n0.0\n  9\n$ANGDIR\n 70\n     0\n  9\n$PDMODE\n 70\n     0\n  9\n$PDSIZE\n 40\n0.0\n  9\n$PLINEWID\n 40\n0.0\n  9\n$SPLFRAME\n 70\n     0\n  9\n$SPLINETYPE\n 70\n     6\n  9\n$SPLINESEGS\n 70\n     8\n  9\n$HANDSEED\n  5\n1AD\n  9\n$SURFTAB1\n 70\n     6\n  9\n$SURFTAB2\n 70\n     6\n  9\n$SURFTYPE\n 70\n     6\n  9\n$SURFU\n 70\n     6\n  9\n$SURFV\n 70\n     6\n  9\n$UCSBASE\n  2\n\n  9\n$UCSNAME\n  2\n\n  9\n$UCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$UCSORTHOREF\n  2\n\n  9\n$UCSORTHOVIEW\n 70\n     0\n  9\n$UCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSBASE\n  2\n\n  9\n$PUCSNAME\n  2\n\n  9\n$PUCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$PUCSORTHOREF\n  2\n\n  9\n$PUCSORTHOVIEW\n 70\n     0\n  9\n$PUCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$USERI1\n 70\n     0\n  9\n$USERI2\n 70\n     0\n  9\n$USERI3\n 70\n     0\n  9\n$USERI4\n 70\n     0\n  9\n$USERI5\n 70\n     0\n  9\n$USERR1\n 40\n0.0\n  9\n$USERR2\n 40\n0.0\n  9\n$USERR3\n 40\n0.0\n  9\n$USERR4\n 40\n0.0\n  9\n$USERR5\n 40\n0.0\n  9\n$WORLDVIEW\n 70\n     1\n  9\n$SHADEDGE\n 70\n     3\n  9\n$SHADEDIF\n 70\n    70\n  9\n$TILEMODE\n 70\n     1\n  9\n$MAXACTVP\n 70\n    64\n  9\n$PINSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PLIMCHECK\n 70\n     0\n  9\n$PEXTMIN\n 10\n1.000000000000000E+20\n 20\n1.000000000000000E+20\n 30\n1.000000000000000E+20\n  9\n$PEXTMAX\n 10\n-1.000000000000000E+20\n 20\n-1.000000000000000E+20\n 30\n-1.000000000000000E+20\n  9\n$PLIMMIN\n 10\n0.0\n 20\n0.0\n  9\n$PLIMMAX\n 10\n0.0\n 20\n0.0\n  9\n$UNITMODE\n 70\n     0\n  9\n$VISRETAIN\n 70\n     1\n  9\n$PLINEGEN\n 70\n     0\n  9\n$PSLTSCALE\n 70\n     1\n  9\n$TREEDEPTH\n 70\n  3020\n  9\n$CMLSTYLE\n  2\nStandard\n  9\n$CMLJUST\n 70\n     0\n  9\n$CMLSCALE\n 40\n20.0\n  9\n$PROXYGRAPHICS\n 70\n     1\n  9\n$MEASUREMENT\n 70\n     1\n  9\n$CELWEIGHT\n370\n    -1\n  9\n$ENDCAPS\n280\n     0\n  9\n$JOINSTYLE\n280\n     0\n  9\n$LWDISPLAY\n290\n     0\n  9\n$INSUNITS\n 70\n     4\n  9\n$HYPERLINKBASE\n  1\n\n  9\n$STYLESHEET\n  1\n\n  9\n$XEDIT\n290\n     1\n  9\n$CEPSNTYPE\n380\n     0\n  9\n$PSTYLEMODE\n290\n     1\n  9\n$FINGERPRINTGUID\n  2\n{EC6BB858-51AA-46EC-B484-6C9CC7AB3E2E}\n  9\n$VERSIONGUID\n  2\n{FAEB1C32-E019-11D5-929B-00C0DF256EC4}\n  9\n$EXTNAMES\n290\n     1\n  9\n$PSVPSCALE\n 40\n0.0\n  9\n$OLESTARTUP\n290\n     0\n  0\nENDSEC\n  0\nSECTION\n  2\nCLASSES\n  0\nCLASS\n  1\nACDBDICTIONARYWDFLT\n  2\nAcDbDictionaryWithDefault\n  3\nObjectDBX Classes\n 90\n        0\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nSCALE\n  2\nAcDbScale\n  3\nObjectDBX Classes\n 90\n     1153\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nVISUALSTYLE\n  2\nAcDbVisualStyle\n  3\nObjectDBX Classes\n 90\n     4095\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nMATERIAL\n  2\nAcDbMaterial\n  3\nObjectDBX Classes\n 90\n     1153\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nTABLESTYLE\n  2\nAcDbTableStyle\n  3\nObjectDBX Classes\n 90\n     4095\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nMLEADERSTYLE\n  2\nAcDbMLeaderStyle\n  3\nACDB_MLEADERSTYLE_CLASS\n 90\n     4095\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nACDBPLACEHOLDER\n  2\nAcDbPlaceHolder\n  3\nObjectDBX Classes\n 90\n        0\n280\n     0\n281\n     0\n  0\nCLASS\n  1\nLAYOUT\n  2\nAcDbLayout\n  3\nObjectDBX Classes\n 90\n        0\n280\n     0\n281\n     0\n  0\nENDSEC\n  0\nSECTION\n  2\nTABLES\n  0\nTABLE\n  2\nVPORT\n  5\n8\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     1\n  0\nVPORT\n  5\n29\n330\n8\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbViewportTableRecord\n  2\n*Active\n 70\n     0\n 10\n0.0\n 20\n0.0\n 11\n1.0\n 21\n1.0\n 12\n409.7886626127411\n 22\n161.5087387190685\n 13\n0.0\n 23\n0.0\n 14\n10.0\n 24\n10.0\n 15\n10.0\n 25\n10.0\n 16\n0.0\n 26\n0.0\n 36\n1.0\n 17\n-134.1869158878503\n 27\n0.0\n 37\n0.0\n 40\n235.9700856768558\n 41\n1.958515283842795\n 42\n50.0\n 43\n0.0\n 44\n0.0\n 50\n0.0\n 51\n0.0\n 71\n    16\n 72\n  1000\n 73\n     1\n 74\n     3\n 75\n     0\n 76\n     0\n 77\n     0\n 78\n     0\n281\n     0\n 65\n     1\n110\n0.0\n120\n0.0\n130\n0.0\n111\n1.0\n121\n0.0\n131\n0.0\n112\n0.0\n122\n1.0\n132\n0.0\n 79\n     0\n146\n0.0\n  0\nENDTAB\n  0\nTABLE\n  2\nLTYPE\n  5\n5\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     1\n  0\nLTYPE\n  5\n14\n330\n5\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByBlock\n 70\n     0\n  3\n\n 72\n    65\n 73\n     0\n 40\n0.0\n  0\nLTYPE\n  5\n15\n330\n5\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByLayer\n 70\n     0\n  3\n\n 72\n    65\n 73\n     0\n 40\n0.0\n  0\nLTYPE\n  5\n16\n330\n5\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nContinuous\n 70\n     0\n  3\nSolid line\n 72\n    65\n 73\n     0\n 40\n0.0\n  0\nENDTAB\n  0\nTABLE\n  2\nLAYER\n  5\n2\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     1\n  0\nLAYER\n  5\n10\n330\n2\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbLayerTableRecord\n  2\n0\n 70\n     0\n 62\n     7\n  6\nContinuous\n370\n    -3\n390\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nSTYLE\n  5\n3\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     2\n  0\nSTYLE\n  5\n11\n330\n3\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nStandard\n 70\n     0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n     0\n 42\n2.5\n  3\narial.ttf\n  4\n\n1001\nACAD\n1000\nArial\n1071\n        0\n  0\nSTYLE\n  5\nB8\n330\n3\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nAnnotative\n 70\n     0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n     0\n 42\n2.5\n  3\narial.ttf\n  4\n\n1001\nACAD\n1000\nArial\n1071\n        0\n1001\nAcadAnnotative\n1000\nAnnotativeData\n1002\n{\n1070\n     1\n1070\n     1\n1002\n}\n  0\nENDTAB\n  0\nTABLE\n  2\nVIEW\n  5\n6\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     0\n  0\nENDTAB\n  0\nTABLE\n  2\nUCS\n  5\n7\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     0\n  0\nENDTAB\n  0\nTABLE\n 0\nAPPID\n  2\nCADVIEWERJS\n 70\n     0\n  2\nAPPID\n  5\n9\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     2\n  0\nAPPID\n  5\n12\n330\n9\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD\n 70\n     0\n  0\nAPPID\n  5\nB9\n330\n9\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnotative\n 70\n     0\n  0\nENDTAB\n  0\nTABLE\n  2\nDIMSTYLE\n  5\nA\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     2\n100\nAcDbDimStyleTable\n  0\nDIMSTYLE\n105\n27\n330\nA\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nISO-25\n 70\n     0\n 41\n2.5\n 42\n0.625\n 43\n3.75\n 44\n1.25\n 73\n     0\n 74\n     0\n 77\n     1\n 78\n     8\n140\n2.5\n141\n2.5\n143\n0.03937007874016\n147\n0.625\n171\n     3\n172\n     1\n178\n     0\n271\n     2\n272\n     2\n274\n     3\n278\n    44\n283\n     0\n284\n     8\n340\n11\n  0\nDIMSTYLE\n105\nBA\n330\nA\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nAnnotative\n 70\n     0\n 40\n0.0\n 41\n2.5\n 42\n0.625\n 43\n3.75\n 44\n1.25\n 73\n     0\n 74\n     0\n 77\n     1\n 78\n     8\n140\n2.5\n141\n2.5\n143\n0.03937007874016\n147\n0.625\n171\n     3\n172\n     1\n178\n     0\n271\n     2\n272\n     2\n274\n     3\n278\n    44\n283\n     0\n284\n     8\n340\n11\n1001\nAcadAnnotative\n1000\nAnnotativeData\n1002\n{\n1070\n     1\n1070\n     1\n1002\n}\n  0\nENDTAB\n  0\nTABLE\n  2\nBLOCK_RECORD\n  5\n1\n330\n0\n100\nAcDbSymbolanguageTable\n 70\n     1\n  0\nBLOCK_RECORD\n  5\n1F\n330\n1\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Model_Space\n340\n166\n  0\nBLOCK_RECORD\n  5\n1B\n330\n1\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Paper_Space\n340\n167\n  0\nBLOCK_RECORD\n  5\n23\n330\n1\n100\nAcDbSymbolanguageTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Paper_Space0\n340\n0\n  0\nENDTAB\n  0\nENDSEC\n  0\nSECTION\n  2\nBLOCKS\n  0\nBLOCK\n  5\nEF\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Model_Space\n 70\n     0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Model_Space\n  1\n\n  0\nENDBLK\n  5\nF0\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\nF1\n330\n1B\n100\nAcDbEntity\n 67\n     1\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Paper_Space\n 70\n     0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Paper_Space\n  1\n\n  0\nENDBLK\n  5\nF2\n330\n1B\n100\nAcDbEntity\n 67\n     1\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\nF3\n330\n23\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Paper_Space0\n 70\n     0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Paper_Space0\n  1\n\n  0\nENDBLK\n  5\nF4\n330\n23\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nENDSEC\n",
c=0;b+="0\nSECTION\n2\nENTITIES\n";var d=0,e;for(e in vqRedlines)cvjs_debug&&console.log("spc="+e),1==vqRedlines[e].data("deleted")?cvjs_debug&&console.log("file.js deleted node "+vqRedlines[e].data("node")):0==c&&(c=1);c=0;for(e in vqStickyNotes)1!=vqStickyNotes[e].data("deleted")&&(0==c&&(c=1),parseInt(e));c=0;for(e in vqRedlines)if(1!=vqRedlines[e].data("deleted")){c++;var f=vqRedlines[e].toString();if(-1<f.indexOf("polyline")){f=f.substring(f.indexOf("points=")+8);f=f.substring(0,f.indexOf('"'));
var g=f.split(" ");f=vqRedlines[e].toString();f=f.substring(f.indexOf("matrix(")+8);f=f.substring(0,f.indexOf(")"));var h=vqRedlines[e].data("transform");h=h.substring(1,h.indexOf("r"));h=h.split(",");f.substring(f.indexOf("r")+1);f=cvjs_getAutoCADColor(vqRedlines[e].data("color"));d++;var k="A"+d.toString(16);a=k;b+="0\nLWPOLYLINE\n";b=b+"5\n"+k+"\n";b+="330\n1F\n100\nAcDbEntity\n";var l=vqRedlines[e].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[e].data("currentPage")-
1].pageName;b=b+"8\n"+l+"\n62\n"+f+"\n";b=b+"370\n   211\n100\nAcDbPolyline\n 90\n"+(g.length+1)+"        \n 70\n     1\n 43\n0.0\n";var m=cvjs_get_dwg_scaled_value(vqRedlines[e].data("strokeWidth")*cvjs_redlineThickness_scaleFactor,vqRedlines[e].data("currentPage"));for(l=0;l<g.length;l++)k=g[l].split(","),b=b+"40\n"+m+"\n41\n"+m+"\n",b=b+"10\n"+cvjs_get_dwg_x_coord(Number(h[0])+Number(k[0]),vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(Number(h[1])+Number(k[1]),vqRedlines[e].data("currentPage"))+
"\n";k=g[0].split(",");b=b+"40\n"+m+"\n41\n"+m+"\n";b=b+"10\n"+cvjs_get_dwg_x_coord(Number(h[0])+Number(k[0]),vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(Number(h[1])+Number(k[1]),vqStickyNotes[e].data("currentPage")-1)+"\n";d++;k="A"+d.toString(16);l=vqRedlines[e].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[e].data("currentPage")-1].pageName;b=b+"0\nHATCH\n  5\n"+k+"\n330\n1F\n100\nAcDbEntity\n  8\n"+l+"\n 62\n     "+f+"\n370\n    70\n100\nAcDbHatch\n 10\n0.0\n 20\n0.0\n 30\n0.0\n210\n0.0\n220\n0.0\n230\n1.0\n  2\nANSI31\n";
b=b+"  70\n     1\n 71\n     1\n 91\n        1\n 92\n        1\n 93\n       "+g.length+"\n";for(l=0;l<g.length-1;l++){f=g[l].split(",");var p=g[l+1].split(",");b+="72\n 1\n";b=b+"10\n"+cvjs_get_dwg_x_coord(Number(h[0])+Number(f[0]),vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(Number(h[1])+Number(f[1]),vqRedlines[e].data("currentPage"))+"\n";b=b+"11\n"+cvjs_get_dwg_x_coord(Number(h[0])+Number(p[0]),vqRedlines[e].data("currentPage"))+"\n21\n"+cvjs_get_dwg_y_coord(Number(h[1])+Number(p[1]),
vqRedlines[e].data("currentPage"))+"\n"}f=g[g.length-1].split(",");p=g[0].split(",");b+="72\n 1\n";b=b+"10\n"+cvjs_get_dwg_x_coord(Number(h[0])+Number(f[0]),vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(Number(h[1])+Number(f[1]),vqRedlines[e].data("currentPage"))+"\n";b=b+"11\n"+cvjs_get_dwg_x_coord(Number(h[0])+Number(p[0]),vqRedlines[e].data("currentPage"))+"\n21\n"+cvjs_get_dwg_y_coord(Number(h[1])+Number(p[1]),vqRedlines[e].data("currentPage"))+"\n";b=b+" 97\n        1\n330\n"+
a+"\n 75\n     0\n 76\n     1\n 52\n0.0\n41\n1.0\n 77\n     0\n 78\n     1\n 53\n45.0\n 43\n0.0\n 44\n0.0\n 45\n-2.245064030267288\n 46\n2.245064030267288\n 79\n     0\n 98\n        1\n 10\n0.0\n 20\n0.0\n1001\nACAD\n1010\n0.0\n1020\n0.0\n1030\n0.0\n";a=k;f=vqRedlines[e].toString();f=f.substring(f.indexOf("d=")+3);f=f.substring(0,f.indexOf('"'));k=f.indexOf("Z");h=!1;-1<k&&(h=!0);h||(f+="Z");p=new PathConverter.Outline;(new PathConverter.SVGParser(p)).parse(f);f=cvjs_getAutoCADColor(vqRedlines[e].data("color"));
d++;k="A"+d.toString(16);m=cvjs_get_dwg_scaled_value(vqRedlines[e].data("strokeWidth")*cvjs_redlineThickness_scaleFactor,vqRedlines[e].data("currentPage"));var n=0;p.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&n++})})});h||n--;b+="0\nLWPOLYLINE\n";b=b+"5\n"+k+"\n";b+="330\n1F\n100\nAcDbEntity\n";l=vqRedlines[e].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[e].data("currentPage")-1].pageName;b=b+"8\n"+l+"\n62\n"+
f+"\n";k=0;h&&(k=1);b=b+"370\n   211\n100\nAcDbPolyline\n 90\n"+n+"        \n 70\n     "+k+"\n 43\n0.0\n";m=cvjs_get_dwg_scaled_value(vqRedlines[e].data("strokeWidth")*cvjs_redlineThickness_scaleFactor,vqRedlines[e].data("currentPage"));var q=0;p.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&(q<n&&(b=b+"40\n"+m+"\n41\n"+m+"\n",b=b+"10\n"+cvjs_get_dwg_x_coord(a.x,vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(a.y,vqRedlines[e].data("currentPage"))+
"\n"),q++)})})});b+="1001\n CADVIEWERJS\n";b=b+"1000\n node: "+vqRedlines[e].data("node")+"\n";b=b+"1000\n name: "+vqRedlines[e].data("name")+"\n";b=b+"1000\n id: "+vqRedlines[e].data("id")+"\n";b=b+"1000\n layer: "+vqRedlines[e].data("layer")+"\n";b=b+"1000\n group: "+vqRedlines[e].data("group")+"\n";b=b+"1000\n color: "+vqRedlines[e].data("color")+"\n";b=b+"1000\n strokeWidth: "+vqRedlines[e].data("strokeWidth")+"\n";b=b+"1000\n fill: "+vqRedlines[e].data("fill")+"\n";b=b+"1000\n username: "+vqRedlines[e].data("username")+
"\n";b=b+"1000\n userid: "+vqRedlines[e].data("userid")+"\n";b=b+"1000\n currentPage: "+vqRedlines[e].data("currentPage")+"\n";b=b+"1000\n triangle_design: "+vqRedlines[e].data("triangle_design")+"\n";b+="1000\n polypath_arrow: none\n";b=b+"1000\n redline_text: "+vqRedlines[e].data("redline_text")+"\n";b=b+"1000\n fill_opacity: "+vqRedlines[e].data("fill_opacity")+"\n";b=b+"1000\n transform: "+vqRedlines[e].data("transform")+"\n";b=b+"1000\n drawingRotation: "+vqRedlines[e].data("drawingRotation")+
"\n"}else if(-1<f.indexOf("text")){f=vqRedlines[e].data("transform");h=f.substring(1,f.indexOf("S"));h=h.split(",");a=f.substring(f.indexOf("S")+1).split(",");f=cvjs_getAutoCADColor(vqRedlines[e].data("color"));d++;k="A"+d.toString(16);g=vqRedlines[e].data("redline_text");l=g.split("<br>");p=1;for(var r=0;r<l.length;r++)l[r].length>p&&(p=l[r].length);r=(g.match(/<br>/g)||[]).length+1;g="{"+g+"}";g=g.replace(/<br>/g,"\\P");b+="0\nMTEXT\n";b=b+"5\n"+k+"\n";l=vqRedlines[e].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[e].data("currentPage")-
1].pageName;b=b+"330\n1F\n100\nAcDbEntity\n8\n"+l+"\n62\n"+f+"\n100\nAcDbMText\n";b=b+"10\n"+cvjs_get_dwg_x_coord(h[0],vqRedlines[e].data("currentPage"))+"\n";b=b+"20\n"+cvjs_get_dwg_y_coord(h[1],vqRedlines[e].data("currentPage"))+"\n";b+="30\n 0\n";b=b+"40\n"+cvjs_get_dwg_scaled_value(cvjs_reference_font_size*a[0],vqRedlines[e].data("currentPage"))+"\n";b=b+"41\n"+cvjs_get_dwg_scaled_value(h[1]+r*cvjs_reference_font_size*a[0],vqRedlines[e].data("currentPage"))+"\n";b+=" 71\n     1\n 72\n     5\n  1\n";
b=b+g+"\n";h=cvjs_get_dwg_scaled_value(cvjs_reference_font_size*a[0]*.8*p,vqRedlines[e].data("currentPage"));b=b+" 73\n     1\n 44\n1.0\n1001\nACAD\n1000\nACAD_MTEXT_DEFINED_HEIGHT_BEGIN\n1070\n    "+h+"\n1040\n"+cvjs_get_dwg_scaled_value(r*cvjs_reference_font_size*a[0])+"\n1000\nACAD_MTEXT_DEFINED_HEIGHT_END\n";b+="1001\n CADVIEWERJS\n";b=b+"1000\n node: "+vqRedlines[e].data("node")+"\n";b=b+"1000\n name: "+vqRedlines[e].data("name")+"\n";b=b+"1000\n id: "+vqRedlines[e].data("id")+"\n";b=b+"1000\n layer: "+
vqRedlines[e].data("layer")+"\n";b=b+"1000\n group: "+vqRedlines[e].data("group")+"\n";b=b+"1000\n color: "+vqRedlines[e].data("color")+"\n";b=b+"1000\n strokeWidth: "+vqRedlines[e].data("strokeWidth")+"\n";b=b+"1000\n fill: "+vqRedlines[e].data("fill")+"\n";b=b+"1000\n username: "+vqRedlines[e].data("username")+"\n";b=b+"1000\n userid: "+vqRedlines[e].data("userid")+"\n";b=b+"1000\n currentPage: "+vqRedlines[e].data("currentPage")+"\n";b=b+"1000\n triangle_design: "+vqRedlines[e].data("triangle_design")+
"\n";b+="1000\n polypath_arrow: none\n";b=b+"1000\n redline_text: "+vqRedlines[e].data("redline_text")+"\n";b=b+"1000\n fill_opacity: "+vqRedlines[e].data("fill_opacity")+"\n";b=b+"1000\n transform: "+vqRedlines[e].data("transform")+"\n";b=b+"1000\n drawingRotation: "+vqRedlines[e].data("drawingRotation")+"\n"}else if(-1<f.indexOf("path")){h=f.substring(f.indexOf("fill-opacity")+13);h=h.substring(0,h.indexOf(";"));g=.02<Number(h);f=f.substring(f.indexOf("d=")+3);f=f.substring(0,f.indexOf('"'));k=
f.indexOf("Z");h=!1;-1<k&&(h=!0);h||(f+="Z");p=new PathConverter.Outline;(new PathConverter.SVGParser(p)).parse(f);f=cvjs_getAutoCADColor(vqRedlines[e].data("color"));d++;a=k="A"+d.toString(16);m=vqRedlines[e].data("strokeWidth")*cvjs_redlineThickness_scaleFactor;n=0;p.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&n++})})});h||n--;b+="0\nLWPOLYLINE\n";b=b+"5\n"+k+"\n";b+="330\n1F\n100\nAcDbEntity\n";l=vqRedlines[e].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[e].data("currentPage")-
1].pageName;b=b+"8\n"+l+"\n62\n"+f+"\n";k=0;h&&(k=1);b=b+"370\n   211\n100\nAcDbPolyline\n 90\n"+n+"        \n 70\n     "+k+"\n 43\n0.0\n";m=vqRedlines[e].data("strokeWidth")*cvjs_redlineThickness_scaleFactor;q=0;p.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&(q<n&&(b=b+"40\n"+cvjs_get_dwg_scaled_value(m,vqRedlines[e].data("currentPage"))+"\n41\n"+cvjs_get_dwg_scaled_value(m,vqRedlines[e].data("currentPage"))+"\n",b=b+"10\n"+cvjs_get_dwg_x_coord(a.x,
vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(a.y,vqRedlines[e].data("currentPage"))+"\n"),q++)})})});b+="1001\n CADVIEWERJS\n";b=b+"1000\n node: "+vqRedlines[e].data("node")+"\n";b=b+"1000\n name: "+vqRedlines[e].data("name")+"\n";b=b+"1000\n id: "+vqRedlines[e].data("id")+"\n";b=b+"1000\n layer: "+vqRedlines[e].data("layer")+"\n";b=b+"1000\n group: "+vqRedlines[e].data("group")+"\n";b=b+"1000\n color: "+vqRedlines[e].data("color")+"\n";b=b+"1000\n strokeWidth: "+vqRedlines[e].data("strokeWidth")+
"\n";b=b+"1000\n fill: "+vqRedlines[e].data("fill")+"\n";b=b+"1000\n username: "+vqRedlines[e].data("username")+"\n";b=b+"1000\n userid: "+vqRedlines[e].data("userid")+"\n";b=b+"1000\n currentPage: "+vqRedlines[e].data("currentPage")+"\n";b=b+"1000\n triangle_design: "+vqRedlines[e].data("triangle_design")+"\n";b+="1000\n polypath_arrow: none\n";b=b+"1000\n redline_text: "+vqRedlines[e].data("redline_text")+"\n";b=b+"1000\n fill_opacity: "+vqRedlines[e].data("fill_opacity")+"\n";b=b+"1000\n transform: "+
vqRedlines[e].data("transform")+"\n";b=b+"1000\n drawingRotation: "+vqRedlines[e].data("drawingRotation")+"\n";if(g&&h){d++;k="A"+d.toString(16);l=vqRedlines[e].data("layer")+"_"+multiPages[cvjs_active_floorplan_div_nr].pages[vqRedlines[e].data("currentPage")-1].pageName;b=b+"0\nHATCH\n  5\n"+k+"\n330\n1F\n100\nAcDbEntity\n  8\n"+l+"\n 62\n     "+f+"\n370\n    70\n100\nAcDbHatch\n 10\n0.0\n 20\n0.0\n 30\n0.0\n210\n0.0\n220\n0.0\n230\n1.0\n  2\nANSI31\n";b=b+"  70\n     0\n 71\n     1\n 91\n        1\n 92\n        1\n 93\n       "+
(n-1)+"\n";var t=[],u=[];q=0;p.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&(t[q]=a.x,u[q]=a.y,q++)})})});for(l=0;l<t.length-1;l++)b+="72\n 1\n",b=b+"10\n"+cvjs_get_dwg_x_coord(t[l],vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(u[l],vqRedlines[e].data("currentPage"))+"\n",b=b+"11\n"+cvjs_get_dwg_x_coord(t[l+1],vqRedlines[e].data("currentPage"))+"\n21\n"+cvjs_get_dwg_y_coord(u[l+1],vqRedlines[e].data("currentPage"))+
"\n";b+="72\n 1\n";b=b+"10\n"+cvjs_get_dwg_x_coord(t[t.length-1],vqRedlines[e].data("currentPage"))+"\n20\n"+cvjs_get_dwg_y_coord(u[t.length-1],vqRedlines[e].data("currentPage"))+"\n";b=b+"11\n"+cvjs_get_dwg_x_coord(t[0],vqRedlines[e].data("currentPage"))+"\n21\n"+cvjs_get_dwg_y_coord(u[0],vqRedlines[e].data("currentPage"))+"\n";b=b+" 97\n        1\n330\n"+a+"\n 75\n     0\n 76\n     1\n 52\n0.0\n41\n1.0\n 77\n     0\n 78\n     1\n 53\n45.0\n 43\n0.0\n 44\n0.0\n 45\n"+cvjs_get_dwg_scaled_value(-6.735192090801863)+
"\n 46\n"+cvjs_get_dwg_scaled_value(6.735192090801863)+"\n 79\n     0\n 98\n        1\n 10\n0.0\n 20\n0.0\n1001\nACAD\n1010\n0.0\n1020\n0.0\n1030\n0.0\n";a=k}console.log("dataURL TOTAL "+b+" dataURL TOTAL ")}}return b+="0\nENDSEC\n0\nEOF\n"}function cvjs_getStickyNotesRedlineJS(){return cvjs_getStickyNotesRedline()}
function cvjs_getStickyNotesRedline(){var a=0;var b="var cvjs_stickyNotesRedlines_Base = {\n";for(var c in vqRedlines)cvjs_debug&&console.log("spc="+c),1==vqRedlines[c].data("deleted")?cvjs_debug&&console.log("file.js deleted node "+vqRedlines[c].data("node")):(0==a?a=1:b+="\t\t\t\t\t\t,\n",b=b+"\t\t\t\t\t"+c+": {\n",b=b+'\t\t\t\t\t\tnode: "'+vqRedlines[c].data("node")+'",\n',b=b+'\t\t\t\t\t\tname: "'+vqRedlines[c].data("name")+'",\n',b=b+'\t\t\t\t\t\tid: "'+vqRedlines[c].data("id")+'",\n',b=b+'\t\t\t\t\t\tlayer: "'+
vqRedlines[c].data("layer")+'",\n',b=b+'\t\t\t\t\t\tgroup: "'+vqRedlines[c].data("group")+'",\n',b=b+'\t\t\t\t\t\tcolor: "'+vqRedlines[c].data("color")+'",\n',b=b+'\t\t\t\t\t\tstrokeWidth: "'+vqRedlines[c].data("strokeWidth")+'",\n',b=b+'\t\t\t\t\t\tfill: "'+vqRedlines[c].data("fill")+'",\n',b=b+'\t\t\t\t\t\tusername: "'+vqRedlines[c].data("username")+'",\n',b=b+'\t\t\t\t\t\tuserid: "'+vqRedlines[c].data("userid")+'",\n',b=b+"\t\t\t\t\t\tcurrentPage: "+vqRedlines[c].data("currentPage")+",\n",b=b+
'\t\t\t\t\t\ttriangle_design: "'+vqRedlines[c].data("triangle_design")+'",\n',b=b+'\t\t\t\t\t\tpolypath_arrow: "'+vqRedlines[c].data("polypath_arrow")+'",\n',b=b+'\t\t\t\t\t\tredline_text: "'+vqRedlines[c].data("redline_text")+'",\n',b=b+'\t\t\t\t\t\tfill_opacity: "'+vqRedlines[c].data("fill_opacity")+'",\n',b=b+'\t\t\t\t\t\ttransform: "'+vqRedlines[c].data("transform")+'",\n',b=b+"\t\t\t\t\t\tdrawingRotation: "+vqRedlines[c].data("drawingRotation")+"\n",b+="\t\t\t\t\t}\n");0<vqRedlines.length&&0<
vqStickyNotes.length&&(b+="\t\t\t\t\t\t,\n");a=0;for(c in vqStickyNotes)if(1!=vqStickyNotes[c].data("deleted")){0==a?a=1:b+="\t\t\t\t\t\t,\n";var d=parseInt(c)+vqRedlines.length;b=b+"\t\t\t\t\t"+d+": {\n";b=b+'\t\t\t\t\t\tnode: "'+vqStickyNotes[c].data("node")+'",\n';b=b+'\t\t\t\t\t\tname: "'+vqStickyNotes[c].data("name")+'",\n';b=b+'\t\t\t\t\t\tid: "'+vqStickyNotes[c].data("id")+'",\n';b=b+'\t\t\t\t\t\tlayer: "'+vqStickyNotes[c].data("layer")+'",\n';b=b+'\t\t\t\t\t\tgroup: "'+vqStickyNotes[c].data("group")+
'",\n';b=b+'\t\t\t\t\t\ttext: "'+vqStickyNotes[c].data("text")+'",\n';b=b+'\t\t\t\t\t\tuserid: "'+vqStickyNotes[c].data("userid")+'",\n';b=b+"\t\t\t\t\t\tcurrentPage: "+vqStickyNotes[c].data("currentPage")+",\n";b=b+'\t\t\t\t\t\tdate: "'+vqStickyNotes[c].data("date")+'",\n';b=b+"\t\t\t\t\t\tlinked: "+vqStickyNotes[c].data("linked")+",\n";b=b+'\t\t\t\t\t\ttransform: "'+vqStickyNotes[c].data("transform")+'",\n';b=b+"\t\t\t\t\t\tdrawingRotation: "+vqStickyNotes[c].data("drawingRotation")+"\n";b+="\t\t\t\t\t}\n"}b+=
"}\n\nfunction cvjs_setUpStickyNotesRedlines(paper){\n\n";a=0;for(c in vqRedlines)if(1!=vqRedlines[c].data("deleted")){a++;d="cItemRed"+a;var e=vqRedlines[c].toString();if(-1<e.indexOf("polyline"))e=e.substring(e.indexOf("points=")+8),e=e.substring(0,e.indexOf('"')),b=b+"var "+d+'= paper.g(paper.polyline("',b=b+e+' ")',e=vqRedlines[c].toString(),e=e.substring(e.indexOf("matrix(")+8),e.substring(0,e.indexOf(")")),b=b+'.attr({transform: "'+vqRedlines[c].data("transform")+'", "fill": "'+vqRedlines[c].data("color")+
'"})',e=vqRedlines[c].toString(),e=e.substring(e.indexOf("d=")+3),e=e.substring(0,e.indexOf('"')),b+=', paper.path("',b=b+e+' ")',b=b+'.attr({stroke: "'+vqRedlines[c].data("color")+'", "stroke-width": "'+vqRedlines[c].data("strokeWidth")+'", "fill": "'+vqRedlines[c].data("fill")+'", "fill-opacity": "'+vqRedlines[c].data("fill_opacity")+'"}))',b=b+'\n.data("node","'+vqRedlines[c].data("node")+'");\n',b=b+"vqRedlines.push("+d+");\n\n";else if(-1<e.indexOf("text"))b=b+"var "+d+'= paper.path("M0,0")',
b=b+'\n.data("node","'+vqRedlines[c].data("node")+'");\n',b=b+"vqRedlines.push("+d+");\n\n";else if(-1<e.indexOf("path"))e=e.substring(e.indexOf("d=")+3),e=e.substring(0,e.indexOf('"')),b=b+"var "+d+'= paper.path("',b=b+e+' ")',b=b+'.attr({stroke: "'+vqRedlines[c].data("color")+'", "stroke-width": "'+vqRedlines[c].data("strokeWidth")+'", "fill": "'+vqRedlines[c].data("fill")+'", "fill-opacity": "'+vqRedlines[c].data("fill_opacity")+'"})',b=b+'\n.data("node","'+vqRedlines[c].data("node")+'");\n',b=
b+"vqRedlines.push("+d+");\n\n";else if(-1<e.indexOf("ellipse")){console.log(e);var f=e.substring(e.indexOf("cx=")+4);f=f.substring(0,f.indexOf('"'));var g=e.substring(e.indexOf("cy=")+4);g=g.substring(0,g.indexOf('"'));var h=e.substring(e.indexOf("rx=")+4);h=h.substring(0,h.indexOf('"'));e=e.substring(e.indexOf("ry=")+4);e=e.substring(0,e.indexOf('"'));b=b+"var "+d+"= paper.ellipse("+f+","+g+","+h+","+e;b+=")";b=b+'.attr({stroke: "'+vqRedlines[c].data("color")+'", "stroke-width": "'+vqRedlines[c].data("strokeWidth")+
'", "fill": "'+vqRedlines[c].data("fill")+'", "fill-opacity": "'+vqRedlines[c].data("fill_opacity")+'"})';b=b+'\n.data("node","'+vqRedlines[c].data("node")+'");\n';b=b+"vqRedlines.push("+d+");\n\n"}b=b+"cvjs_stickyNotesRedlines.push(cvjs_stickyNotesRedlines_Base["+c+"]);\n\n"}b=b+" cvjs_redline="+a+"; \n\n";a=0;for(c in vqStickyNotes)1!=vqStickyNotes[c].data("deleted")&&(a++,d="itemSNote"+a,f=0,10>vqStickyNotes[c].data("id")&&(f=3),f='paper.group(paper.path("M0,0h20v20h-20v-20Z").attr({stroke: "#000000", "stroke-width" : "1.0"}),paper.path("M7,12h1.3M9.5,12h3.5M11.25,12v5M9.75,12v1.75M12.75,12v1.75M10.5,17h1.5M7,13.5h1.3M7,15.25h3M7,17.0h2.2").attr({stroke: "#000000", "stroke-width" : "0.5"}),paper.text('+
(3+f)+',9,"#'+vqStickyNotes[c].data("id")+'").attr({"font-size": "8px", "font-style": "italic", stroke: "#000000", "stroke-width" : "0.3", "stroke" : "0.3", "fill" : "#000000", "fill-opacity" : 1.0}))',f+='.attr({\'transform\': "t0,0S0.01" , "opacity" : "0.1"})',f+=".attr({\tfill: '#FFF', \"fill-opacity\": \"0.8\", stroke: '#000', 'stroke-opacity': \"1\" })",b=b+"var "+d+"="+f+'\n.data("node","'+vqStickyNotes[c].data("node")+'");\n',b=b+"vqStickyNotes.push("+d+");\n\n",d=parseInt(c)+vqRedlines.length,
b=b+"cvjs_stickyNotesRedlines.push(cvjs_stickyNotesRedlines_Base["+d+"]);\n\n");b=b+" cvjs_stickynote="+a+"; \n\n}\n\njQuery(document).ready(function() { \n";b+="\tstickynotesRedlines_loaded = true; \n";b+="}); \n";b+="stickynotesRedlines_loaded = true; \n";cvjs_debug&&console.log("redline length "+vqRedlines.length);c=vqRedlines.length;for(a=0;a<vqRedlines.length;a++){f=0;g=b;for(d="RED_"+(a+1);-1<g.indexOf(d);)f++,g=g.substring(g.indexOf(d)+4);cvjs_debug&&console.log("Instances of "+d+" is "+f);
4==f&&(cvjs_debug&&console.log("we need to substitute 2 and 4th instance of "+d+" with new variable names!"),c++,f="RED_"+c,g=nthIndex(b,d,2),b=b.substring(0,g)+f+b.substring(g+d.length),g=nthIndex(b,d,3),b=b.substring(0,g)+f+b.substring(g+d.length))}return b}function nthIndex(a,b,c){for(var d=a.length,e=-1;c--&&e++<d&&!(e=a.indexOf(b,e),0>e););return e}
function cvjs_saveSpaceObjects(a,b,c){void 0==c&&(c="");a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));a="";a=JSON.stringify(cvjs_returnAllSpaceObjects());var d=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;-1<b.indexOf("\\")||(b=encodeURIComponent(b));var e={};e.file=b;e.file_content=a;e.custom_content=c;jQuery.ajax({url:d,type:"post",data:e,success:function(a){var b="Save Spaces: "+a;a=a.toLowerCase();-1<
a.indexOf("success")&&(b=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.RedlinesSaved);cvjs_collab_mode||(cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],b),message_modal_type_bootstrap?jQuery("#info_messageModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeOut(1500):jQuery("#info_messageModal_2_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeOut(1500));jQuery("#addRedlineTable").hide();cvjs_loadServerFileList(3)},error:function(a){console.log("Error "+
a)}})}
function cvjs_saveStickyNotesRedlines(a,b,c){void 0==c&&(c="");void 0==b&&(b=!0);a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));a="";a=cvjs_saveRedlinesAsDXF?cvjs_getStickyNotesRedlineDXF():cvjs_saveRedlinesAsXML?cvjs_getStickyNotesRedlineXML(!0):cvjs_getStickyNotesRedline();var d=cvjs_serverHandlersPath+cvjs_serverSaveFileControllerRedlines;-1<cvjs_StickyNoteSaveRedlineUrl.indexOf("\\")||(cvjs_StickyNoteSaveRedlineUrl=encodeURIComponent(cvjs_StickyNoteSaveRedlineUrl));
var e={};e.file=cvjs_StickyNoteSaveRedlineUrl;e.file_content=a;e.custom_content=c;cvjs_debug&&console.log(d+"  "+cvjs_StickyNoteSaveRedlineUrl+" dataurl "+a);jQuery.ajax({url:d,type:"post",data:e,success:function(a){var c="Save redlines: "+a;a=a.toLowerCase().substring(a.lastIndexOf("/"));-1<a.indexOf("success")&&(c=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.RedlinesSaved);!cvjs_collab_mode&&b&&(cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],c),
message_modal_type_bootstrap?jQuery("#info_messageModal_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeOut(1500):jQuery("#info_messageModal_2_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeOut(1500));jQuery("#addRedlineTable").hide();cvjs_debug&&console.log("cvjs_saveStickyNotesRedlines cvjs_loadServerFileList(2)  cvjs_fileSaverRedlineMode"+cvjs_fileSaverRedlineMode);1==cvjs_fileSaverRedlineMode&&cvjs_loadServerFileList(2);cvjs_fileSaverRedlineMode=!1},error:function(a){console.log("Error "+
a)}})}function cvjs_CADViewerPro(a){cvjs_Community_Version=!a;cvjs_PrintModal_PrintPDF=!0}function cvjs_drawRedline__Freehand(){jQuery("body").disableSelection();cvjs_addHandleFunc_RedlinePolygonFreehand()}var color_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_setRedlineColor(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,color_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(color_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#colorModal_"+a).css({position:"fixed"}),jQuery("#colorModal_"+a).offset({left:150+jQuery("#"+a).position().left,
top:50+jQuery("#"+a).position().top})),jQuery("#colorModal_"+a).show())}function cvjs_color_modal_hide(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#colorModal_"+a).hide()}var publishPDF_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_setPublishPDF(a){try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg"),cvjs_debug&&console.log("first in: cvjs_setPublishPDF "+a),cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,publishPDF_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(publishPDF_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#publishPDFModal_"+a).css({position:"fixed"}),jQuery("#publishPDFModal_"+a).offset({left:150+jQuery("#"+
a).position().left,top:50+jQuery("#"+a).position().top})),0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")?(console.log("hide menu x2"),jQuery("#cvjs_publishpdfmode3").hide(),jQuery("#radioPublishAsPDF3_"+a).hide()):(console.log("show menu x2"),jQuery("#cvjs_publishpdfmode3").show(),jQuery("#radioPublishAsPDF3_"+a).show()),0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_customPdfFolderFlag?(console.log("show entire document button"),
jQuery("#publishPDFModal_row2_"+a).show(),jQuery("#publishPDFModal_row3_"+a).hide()):(console.log("hide button"),jQuery("#publishPDFModal_row2_"+a).hide(),jQuery("#publishPDFModal_row3_"+a).show()),jQuery("#publishPDFModal_row4_"+a).hide(),jQuery("#radioPublishAsPDF2_"+a).is(":checked")&&(jQuery("#publishPDFModal_row2_"+a).hide(),jQuery("#publishPDFModal_row3_"+a).hide(),jQuery("#publishPDFModal_row4_"+a).show()),jQuery("#publishPDFModal_"+a).show())}catch(b){console.log("cvjs_setPublishPDF:"+b),
cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}}function cvjs_publishPDF_modal_hide(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#publishPDFModal_"+a).hide()}var mergeDXF_modal_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_setMergeDXF(a){try{cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,mergeDXF_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(mergeDXF_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#mergeDXFModal_"+a).css({position:"fixed"}),jQuery("#mergeDXFModal_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")?
(console.log("hide menu x2"),jQuery("#cvjs_mergedxfmode3").hide(),jQuery("#radioMergeAsDXF3_"+a).hide()):(console.log("show menu x2"),jQuery("#cvjs_mergedxfmode3").show(),jQuery("#radioMergeAsDXF3_"+a).show()),0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_customPdfFolderFlag?(console.log("show entire document button"),jQuery("#mergeDXFModal_row2_"+a).show(),jQuery("#mergeDXFModal_row3_"+a).hide()):(console.log("hide button"),jQuery("#mergeDXFModal_row2_"+a).hide(),
jQuery("#mergeDXFModal_row3_"+a).show()),jQuery("#mergeDXFModal_row4_"+a).hide(),jQuery("#radioMergeAsDXF2_"+a).is(":checked")&&(jQuery("#mergeDXFModal_row2_"+a).hide(),jQuery("#mergeDXFModal_row3_"+a).hide(),jQuery("#mergeDXFModal_row4_"+a).show()),jQuery("#mergeDXFModal_"+a).show())}catch(b){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1,console.log("cvjs_setMergeDXF: "+b)}}
function cvjs_mergeDXF_modal_hide(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#mergeDXFModal_"+a).hide()}var generic_color_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_setGenericColor(){generic_color_offset_flag[cvjs_active_floorplan_div_nr]&&(generic_color_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#genericColorModal").css({position:"fixed"}),jQuery("#genericColorModal").offset({left:150+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().left,top:50+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top}));jQuery("#genericColorModal").show()}
var redline_linethickness_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],page_change_in_document_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_setRedlineThickness(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,redline_linethickness_offset_flag[cvjs_active_floorplan_div_nr]&&(redline_linethickness_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#thicknessModal_"+a).css({position:"fixed"}),jQuery("#thicknessModal_"+a).offset({left:150+
jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top})),jQuery("#thicknessModal_"+a).show())}function cvjs_setRedlineColorViaButton(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#colorModal_"+a).hide()}function cvjs_setRedlineColorFromPicker(a){cvjs_setCurrentRedlineValues_Color("#"+a)}
function cvjs_setRedlineThicknessViaButton(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);var b=jQuery("#cvjs_redlineThicknessInput_"+a).val();cvjs_setCurrentRedlineValues_StokeWidth(b);jQuery("#thicknessModal_"+a).hide();cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1}
function cvjs_drawRedlineRectangle(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawSpaceObject_RedlineRectangle()}
function cvjs_drawRedlineFilledRectangle(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawSpaceObject_FilledRedlineRectangle()}
function cvjs_drawRedlineCloud(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawSpaceObject_RedlineCloud()}
function cvjs_drawRedlinePolyline(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawSpaceObject_RedlinePolyline()}
function cvjs_drawRedlineFilledPolygon(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawSpaceObject_RedlineFilledPolygon()}
function cvjs_drawRedlineArrow(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawSpaceObject_RedlineArrowPolyline()}
var redline_text_offset_flag=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];
function cvjs_drawRedlineText(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,redline_text_offset_flag[cvjs_active_floorplan_div_nr]&&(redline_text_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#redlinetextModal_"+a).css({position:"fixed"}),jQuery("#redlinetextModal_"+a).offset({left:150+jQuery("#"+a).position().left,
top:50+jQuery("#"+a).position().top})),jQuery("#redline_text").val(""),jQuery("#redlinetextModal_"+a).show())}function cvjs_hide_redline_text_modal(a){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#redlinetextModal_"+a).hide()}function cvjs_exitRedlineTextModal(){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!1;jQuery("#redlinetextModal").hide();try{tRubberBand_text1.attr({transform:"M0,0S0"})}catch(a){}}
var vqStickyNotes=[],vqRedlines=[],vqImageNotes=[],cvjs_stickynote=0,cvjs_redline=0,cvjs_StickyNoteRedlineUrl="",cvjs_StickyNoteSaveRedlineUrl="";function cvjs_setStickyNoteRedlineUrl(a){cvjs_StickyNoteRedlineUrl=a}
function cvjs_setStickyNoteSaveRedlineUrl(a){cvjs_StickyNoteSaveRedlineUrl=a;0<cvjs_StickyNoteSaveRedlineUrl.toLowerCase().indexOf(".dxf")?(cvjs_saveRedlinesAsDXF=!0,cvjs_saveRedlinesAsXML=!1):cvjs_saveRedlinesAsDXF=!1;0<cvjs_StickyNoteSaveRedlineUrl.toLowerCase().indexOf(".xml")?(cvjs_saveRedlinesAsXML=!0,cvjs_saveRedlinesAsDXF=!1):cvjs_saveRedlinesAsXML=!1}
function cvjs_drawRedline_Freehand(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawRedline__Freehand()}
function cvjs_drawRedline_Freehand_globalColorWidth(){cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned",cvjs_currentRedline_color,cvjs_currentRedline_strokeWidth,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawRedline_Freehand()}
function cvjs_drawRedline_Freehand_setValues(){cvjs_redline++;cvjs_setCurrentRedlineValues("RED_"+cvjs_redline,"redline"+cvjs_redline,cvjs_redline,"RedLineLayer","unassigned","#AA0055",3,cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]);cvjs_drawRedline_Freehand()}
function cvjs_drawStickyNote_setValues(){var a=new Date;cvjs_stickynote++;cvjs_setCurrentStickyNoteValues("SNOTE_"+cvjs_stickynote,"myName",cvjs_stickynote,"StickNoteLayer","unassigned","","X201",a,!0);cvjs_drawStickyNoteDirect()}
function cvjs_drawStickyNote(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]||(cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0,a=new Date,cvjs_stickynote++,cvjs_setCurrentStickyNoteValues("SNOTE_"+cvjs_stickynote,cvjs_currentStickyNote_name,cvjs_stickynote,cvjs_currentStickyNote_layer,cvjs_currentStickyNote_group,"",cvjs_currentStickyNote_userid,a,
!0),cvjs_drawStickyNoteDirect())}function cvjs_deleteLastRedline(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_setUpVqRedlines_deleteNode("RED_"+cvjs_redline);cvjs_redline--}function cvjs_deleteAllRedlines(){for(;0<cvjs_redline;)cvjs_setUpVqRedlines_deleteNode("RED_"+cvjs_redline),cvjs_redline--}
function cvjs_deleteAllStickyNotes(){for(;0<cvjs_stickynote;){cvjs_stickynote--;try{var a=vqStickyNotes[cvjs_stickynote].data("node");cvjs_setUpStickyNotes_deleteNode(a)}catch(b){}}}var stickyNotetimer,cvjs_fileLoaderRedlineMode=!1,cvjs_fileSaverRedlineMode=!1;
function cvjs_loadStickyNotesRedlines(a,b){void 0==b&&(b="");a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=void 0==a?0:cvjs_rPaperIndex(a);cvjs_debug&&console.log("!!!!!!!!!!!!!!!!!!!!!!!!   cvjs_loadStickyNotesRedlines "+cvjs_active_floorplan_div_nr+"  "+a);if(cvjs_loadRedlinesFileControllerFlag){a=cvjs_serverHandlersPath+cvjs_serverLoadFileControllerRedlines;cvjs_debug&&console.log("brach 2 "+a+"  file="+cvjs_StickyNoteRedlineUrl);var c={};c.file=cvjs_StickyNoteRedlineUrl;
c.custom_content=b;jQuery.ajax({url:a,type:"post",data:c,success:function(a){cvjs_debug&&console.log("Load redlines: "+a);cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_addInlineScript(a);stickynotesRedlines_loaded=!0;cvjs_loadStickyNotesRedlinesTimer()},error:function(a){console.log("Error "+a)}})}else stickynotesRedlines_loaded=!1,0==current_redline_js_initialized?(current_redline_js_initialized=1,current_jsRedlinename=cvjs_StickyNoteRedlineUrl,cvjs_debug&&console.log("before loadJSbase redline "+
cvjs_StickyNoteRedlineUrl),loadJSbase(cvjs_StickyNoteRedlineUrl)):(cvjs_debug&&console.log("replace "+current_jsRedlinename+"  "+cvjs_StickyNoteRedlineUrl),replacejscssfile(current_jsRedlinename,cvjs_StickyNoteRedlineUrl,"js"),current_jsRedlinename=cvjs_StickyNoteRedlineUrl),cvjs_loadStickyNotesRedlinesTimer()}var myFlagOldTypeRedlines=!1,cvjs_redlineStickyNoteLayer=[];
function cvjs_loadStickyNotesRedlinesTimer(){if(stickynotesRedlines_loaded){load_failures=0;cvjs_collab_mode&&(console.log("clear collab redlines, after js files is loaded."),cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]));cvjs_setUpStickyNotesRedlines(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr]);cvjs_debug&&console.log("before loading loop");var a=1,b=0;try{for(var c=0;c<vqStickyNotes.length;c++){var d=cvjs_stickyNotesRedlines[c].node.toString();-1<d.substring("SNOTE_")&&
(d=d.substring(6),b=parseInt(d),b>a&&(a=b))}}catch(l){console.log("catching oldtime redline format issue: "+l)}cvjs_debug&&console.log("the maximum NOTE_ number is: "+a);for(c=0;c<cvjs_stickyNotesRedlines.length;c++)for(b=c+1;b<cvjs_stickyNotesRedlines.length;b++)if(cvjs_stickyNotesRedlines[c].node==cvjs_stickyNotesRedlines[b].node&&-1<cvjs_stickyNotesRedlines[c].node.indexOf("SNOTE_")){cvjs_debug&&console.log("We have double stickynotes "+cvjs_stickyNotesRedlines[c].node);a+=1;var e="SNOTE_"+a;cvjs_debug&&
console.log("the newNote="+e);for(var f=0;f<vqStickyNotes.length;f++)if(vqStickyNotes[f].data("node")==cvjs_stickyNotesRedlines[c].node)for(var g=f+1;g<vqStickyNotes.length;g++)vqStickyNotes[f].data("node")==vqStickyNotes[g].data("node")&&(cvjs_debug&&console.log("We have double path instances of "+vqStickyNotes[g].data("node")+", changing second instance to "+e),cvjs_stickyNotesRedlines[b].node=e,cvjs_stickyNotesRedlines[b].id=a,vqStickyNotes[g].data("node",e))}a=0;for(var h in vqStickyNotes){cvjs_debug&&
console.log(" snote="+h);for(var k in cvjs_stickyNotesRedlines)cvjs_stickyNotesRedlines[k].node==vqStickyNotes[h].data("node")&&(cvjs_debug&&console.log(k),b=parseInt(cvjs_stickyNotesRedlines[k].id),b>a&&(a=b),cvjs_setCurrentStickyNoteValues_All(cvjs_stickyNotesRedlines[k].node,cvjs_stickyNotesRedlines[k].name,cvjs_stickyNotesRedlines[k].id,cvjs_stickyNotesRedlines[k].layer,cvjs_stickyNotesRedlines[k].group,cvjs_stickyNotesRedlines[k].text,cvjs_stickyNotesRedlines[k].userid,cvjs_stickyNotesRedlines[k].date,
cvjs_stickyNotesRedlines[k].linked,cvjs_stickyNotesRedlines[k].transform,cvjs_stickyNotesRedlines[k].currentPage,cvjs_stickyNotesRedlines[k].drawingRotation),console.log(" cvjs_setUpVqStickyNotes_currentNode_vqIndex_passedInstance "+cvjs_currentStickyNote_underbar+"   "+h),vqStickyNotes[h].data("name",cvjs_currentStickyNote_name),vqStickyNotes[h].data("id",cvjs_currentStickyNote_id),vqStickyNotes[h].data("text",cvjs_currentStickyNote_text),vqStickyNotes[h].data("layer",cvjs_currentStickyNote_layer),
vqStickyNotes[h].data("group",cvjs_currentStickyNote_group),vqStickyNotes[h].data("linked",cvjs_currentStickyNote_linked),vqStickyNotes[h].data("userid",cvjs_currentStickyNote_userid),vqStickyNotes[h].data("date",cvjs_currentStickyNote_date),vqStickyNotes[h].data("currentPage",cvjs_currentStickyNote_currentPage),vqStickyNotes[h].data("transform",cvjs_currentStickyNote_transform),vqStickyNotes[h].data("drawingRotation",cvjs_currentStickyNote_drawingRotation),vqStickyNotes[h].data("currentPage")!=multiPages[cvjs_active_floorplan_div_nr].currentPage?
vqStickyNotes[h].attr(hide):vqStickyNotes[h].attr(show))}e=1;b=0;try{for(c=0;c<vqRedlines.length;c++)d=cvjs_stickyNotesRedlines[c].node.toString(),-1<d.substring("RED_")&&(d=d.substring(4),b=parseInt(d),b>e&&(e=b))}catch(l){console.log("Catching old type redlines issues: "+l)}cvjs_debug&&console.log("the maximum RED_ number is: "+e);for(c=0;c<cvjs_stickyNotesRedlines.length;c++)for(b=c+1;b<cvjs_stickyNotesRedlines.length;b++)if(cvjs_stickyNotesRedlines[c].node==cvjs_stickyNotesRedlines[b].node&&-1<
cvjs_stickyNotesRedlines[c].node.indexOf("RED_"))for(cvjs_debug&&console.log("We have double redlines "+cvjs_stickyNotesRedlines[c].node),e+=1,d="RED_"+e,cvjs_debug&&console.log("the newRed="+d),f=0;f<vqRedlines.length;f++)if(vqRedlines[f].data("node")==cvjs_stickyNotesRedlines[c].node)for(g=f+1;g<vqRedlines.length;g++)vqRedlines[f].data("node")==vqRedlines[g].data("node")&&(console.log("We have double path instances of "+vqRedlines[g].data("node")+", changing second instance to "+d),cvjs_stickyNotesRedlines[b].node=
d,vqRedlines[g].data("node",d));for(h in vqRedlines)for(k in cvjs_stickyNotesRedlines)myFlagOldTypeRedlines=void 0==cvjs_stickyNotesRedlines[k].node?!0:!1,c=cvjs_stickyNotesRedlines[k].node==vqRedlines[h].data("node"),myFlagOldTypeRedlines&&(c=k==vqRedlines[h].data("node")),c&&(myFlagOldTypeRedlines?(cvjs_setCurrentRedlineValues_All(k,cvjs_stickyNotesRedlines[k].name,cvjs_stickyNotesRedlines[k].id,cvjs_stickyNotesRedlines[k].layer,cvjs_stickyNotesRedlines[k].group,cvjs_stickyNotesRedlines[k].color,
cvjs_stickyNotesRedlines[k].strokeWidth,cvjs_stickyNotesRedlines[k].fill,cvjs_stickyNotesRedlines[k].fill_opacity,cvjs_stickyNotesRedlines[k].transform,cvjs_stickyNotesRedlines[k].username,cvjs_stickyNotesRedlines[k].userid,cvjs_stickyNotesRedlines[k].currentPage,cvjs_stickyNotesRedlines[k].polypath_arrow,cvjs_stickyNotesRedlines[k].triangle_design,cvjs_stickyNotesRedlines[k].redline_text,0),cvjs_debug&&console.log("Old format making redline "+k)):(cvjs_setCurrentRedlineValues_All(cvjs_stickyNotesRedlines[k].node,
cvjs_stickyNotesRedlines[k].name,cvjs_stickyNotesRedlines[k].id,cvjs_stickyNotesRedlines[k].layer,cvjs_stickyNotesRedlines[k].group,cvjs_stickyNotesRedlines[k].color,cvjs_stickyNotesRedlines[k].strokeWidth,cvjs_stickyNotesRedlines[k].fill,cvjs_stickyNotesRedlines[k].fill_opacity,cvjs_stickyNotesRedlines[k].transform,cvjs_stickyNotesRedlines[k].username,cvjs_stickyNotesRedlines[k].userid,cvjs_stickyNotesRedlines[k].currentPage,cvjs_stickyNotesRedlines[k].polypath_arrow,cvjs_stickyNotesRedlines[k].triangle_design,
cvjs_stickyNotesRedlines[k].redline_text,cvjs_stickyNotesRedlines[k].drawingRotation),cvjs_debug&&console.log("New format making redline "+cvjs_stickyNotesRedlines[k].node)),cvjs_setUpVqRedlines_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentRedline_underbar),vqRedlines[h].mousedown(function(a){cvjs_deleteRedlineFlag?(cvjs_deleteRedlineFlag=!1,a=this.data("node"),cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete","Redline",a)):(a=this.data("id"),
cvjs_graphicalObjectOnChange("Click","Redline",a))}),vqRedlines[h].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+
10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)}),vqRedlines[h].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()}),vqRedlines[h].data("currentPage")!=multiPages[cvjs_active_floorplan_div_nr].currentPage?vqRedlines[h].attr(hide):vqRedlines[h].attr(show));h=vqStickyNotes.length;cvjs_stickynote=a;cvjs_debug&&
console.log("how many redlines "+vqRedlines.length+"  how many stickynotes "+h+"  the maximum StickyNoteNumber = "+a);cvjs_updateDrawingRedlines(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr]);try{cvjs_OnLoadEndRedlines()}catch(l){console.log("Please define cvjs_OnLoadEndRedlines in your encapsulating code: "+l)}}else 80>load_failures?setTimeout(function(){cvjs_loadStickyNotesRedlinesTimer()},256):cvjs_debug&&console.log("Readline Load Failed! - please check if redline Url is set correct: cvjs_setStickyNoteRedlineUrl()")}
var cvjs_deleteRedlineFlag=!1;function cvjs_deleteSingleRedline(a){a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");"undefined"!==typeof a&&(cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a));cvjs_deleteRedlineFlag=!0}
function cvjs_saveScreenAsImage_UploadSharepointListItem(a,b,c,d,e){for(var f="",g=0;g<vqStickyNotes.length;g++)0<g&&(f+="\n"),f=f+vqStickyNotes[g].data("id")+","+vqStickyNotes[g].data("name")+","+vqStickyNotes[g].data("userid")+","+vqStickyNotes[g].data("date")+","+vqStickyNotes[g].data("text");cvjs_phpImagesUrlController=cvjs_serverHandlersPath+cvjs_serverCreateThumb_StickyNote_Controller;cvjs_serverSave_php_controllerArray={};cvjs_serverSave_php_controllerArray.serverPath=a;cvjs_serverSave_php_controllerArray.fileName=
b.substring(0,b.indexOf(".png"));cvjs_serverSave_php_controllerArray.thumbFile1=cvjs_serverSave_php_controllerArray.fileName+"_200.png";cvjs_serverSave_php_controllerArray.thumbFile1_size=200;cvjs_serverSave_php_controllerArray.thumbFile2=cvjs_serverSave_php_controllerArray.fileName+"_400.png";cvjs_serverSave_php_controllerArray.thumbFile2_size=400;cvjs_serverSave_php_controllerArray.stickyNoteContent=f;cvjs_serverSave_php_controllerArray.sharepoint_user_name=c;cvjs_serverSave_php_controllerArray.sharepoint_list_name=
d;cvjs_serverSave_php_controllerArray.sharepoint_record_id=e;cvjs_serverSavePrintModeController=7;cvjs_saveScreenAsImage(a,b)}
function cvjs_batchConvertDrawingsToPDF(a,b,c,d){cvjs_batchDrawingsArrLength=a.length;cvjs_batchDrawingsArrLength_globalCounter=0;cvjs_drawingFilesArray=a;cvjs_pageOrientationArray=b;cvjs_pageSizeArray=c;cvjs_pageResolutionArray=d;cvjs_setCustomCallbackMethodOnLoadEnd(!0,cvjs_batchConvertOnLoadEndCustomMethod);cvjs_serverSavePrintModeController=2;cvjs_LoadDrawing(floorplan_div_Array[cvjs_active_floorplan_div_nr],cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter])}
function cvjs_batchConvertOnLoadEndCustomMethod(){if(cvjs_batchDrawingsArrLength_globalCounter==cvjs_batchDrawingsArrLength){cvjs_phpImagesUrlController=cvjs_phpPath+cvjs_batchFilesToPDF_Controller;cvjs_serverSave_php_controllerArray={};cvjs_serverSave_php_controllerArray.numberOfFiles=cvjs_batchDrawingsArrLength;var a=cvjs_ServerLocation+"/converters/files/";cvjs_serverSave_php_controllerArray.serverPath=a;for(a=0;a<cvjs_batchDrawingsArrLength;a++){var b="fileName_"+a,c=cvjs_drawingFilesArray[a].substring(cvjs_drawingFilesArray[a].lastIndexOf("/")+
1,cvjs_drawingFilesArray[a].lastIndexOf("."));cvjs_serverSave_php_controllerArray[b]=c;cvjs_serverSave_php_controllerArray["rotation_"+a]=cvjs_pageOrientationArray[a].toLowerCase();c=cvjs_pageSizeArray[a];if(0==c.toLowerCase().indexOf("ansi a")||0==c.toLowerCase().indexOf("letter"))c="LETTER";0==c.toLowerCase().indexOf("A4")&&(c="A4");0==c.toLowerCase().indexOf("A3")&&(c="A3");0==c.toLowerCase().indexOf("A2")&&(c="A2");cvjs_serverSave_php_controllerArray["page_format_"+a]=c;cvjs_serverSave_php_controllerArray["page_resolution_"+
a]=cvjs_pageResolutionArray[a]}jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html('<table class="waitlooperTable" width="100" border="0" cellspacing="0" border-spacing="0" ><tr><td><div id="looper_image_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'"></div></td></tr><tr><td><div class="cvjs_wait_text_5" id="cvjs_wait_looper_text_id_'+floorplan_div_Array[cvjs_active_floorplan_div_nr]+'">'+languageTable.languages[cvjs_currentLanguage].WaitModal.BatchPDF+"</div></td></tr></table>");
cvjs_setLooperPosition();jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).fadeIn(1E3);jQuery.ajax({url:cvjs_phpImagesUrlController,type:"post",data:cvjs_serverSave_php_controllerArray,success:function(a){cvjs_serverSavePrintModeController=0;jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();window.open(cvjs_ServerLocation+"/converters/files/"+a,"width="+window.screen.width*cvjs_print_to_pdf_windowRelativeSize+",height="+window.screen.height*
cvjs_print_to_pdf_windowRelativeSize);jQuery("#cvjs_wait_looper_"+floorplan_div_Array[0]).hide();cvjs_setCustomCallbackMethodOnLoadEnd(!1,"")},error:function(a){console.log("Error "+a)}})}else cvjs_setPrintPaperSize(cvjs_pageSizeArray[cvjs_batchDrawingsArrLength_globalCounter]),cvjs_setPrintOrientation(cvjs_pageOrientationArray[cvjs_batchDrawingsArrLength_globalCounter]),a=cvjs_ServerLocation+"/converters/files/",c=cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter].substring(cvjs_drawingFilesArray[cvjs_batchDrawingsArrLength_globalCounter].lastIndexOf("/")+
1),cvjs_saveScreenAsImage(a,c)}function cvjs_clearDrawingSpaceObjects(){cvjs_clearDrawing()}
function cvjs_clearDrawing(){for(var a in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])try{if(a!=cvjs_lastObj[cvjs_active_floorplan_div_nr]||a!=cvjs_popObj[cvjs_active_floorplan_div_nr])if(jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip("hide"),!cvjs_supressPopUpModal||cvjs_standardHighLightColors)if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor").toString().indexOf("undefined")){var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),
c="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id");jQuery(c).attr(defaultColor)}else b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),c="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),jQuery(c).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor"));else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("linked")?(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),c="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),
jQuery(c).attr(defaultColor_linked)):(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),c="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),jQuery(c).attr(defaultColor_unlinked))}catch(d){}}
function cvjs_clearDrawingStickyNotes(){cvjs_debug&&console.log("cvjs_clearDrawingStickyNotes");try{for(var a in vqStickyNotes)if(a!=spaceIdStickyNote[cvjs_active_floorplan_div_nr]||a!=lastObjStickyNote[cvjs_active_floorplan_div_nr])jQuery(vqStickyNotes[a].node.qtip).is(":visible")&&jQuery(vqStickyNotes[a].node).qtip("hide"),cvjs_supressPopUpModal?vqStickyNotes[a].data("linked")?vqStickyNotes[a].attr(defaultColor_linked):vqStickyNotes[a].attr(defaultColor_unlinked):vqStickyNotes[a].attr(defaultColor_StickyNotes)}catch(b){console.log("cvjs_clearDrawingStickyNotes_ "+
b)}}function cvjs_clearDrawingHyperlinks(){for(var a in vqURLs)try{a==lastObjHyperlink[cvjs_active_floorplan_div_nr]&&a==popObjHyperlink[cvjs_active_floorplan_div_nr]||jQuery(vqURLs[a].node).qtip("hide"),cvjs_supressHyperlinkColors?vqURLs[a].attr(defaultColor_Hyperlinks_blank):vqURLs[a].attr(defaultColor_Hyperlinks)}catch(b){}}function cvjs_clearDrawingRedlines(){}
function cvjs_updateDrawingRedlines(a){cvjs_debug&&console.log(a+"cvjs_updateDrawingRedlines(redlineStickyNoteLayer) cvjs_updateDrawingRedlines(redlineStickyNoteLayer) cvjs_updateDrawingRedlines(redlineStickyNoteLayer)");try{cvjs_debug&&console.log("cvjs_updateDrawingRedlines() redline length "+vqRedlines.length+"  "+vqStickyNotes.length);if(0<vqRedlines.length)for(var b=0;b<vqRedlines.length;b++)if("none"!=vqRedlines[b].data("redline_text")&&void 0!=vqRedlines[b].data("redline_text")){var c=vqRedlines[b].data("redline_text").split("<br>");
try{cvjs_setCurrentRedlineValues_All(vqRedlines[b].data("node"),vqRedlines[b].data("name"),vqRedlines[b].data("id"),vqRedlines[b].data("layer"),vqRedlines[b].data("group"),vqRedlines[b].data("color"),vqRedlines[b].data("strokeWidth"),vqRedlines[b].data("fill"),vqRedlines[b].data("fill_opacity"),vqRedlines[b].data("transform"),vqRedlines[b].data("username"),vqRedlines[b].data("userid"),vqRedlines[b].data("currentPage"),vqRedlines[b].data("polypath_arrow"),vqRedlines[b].data("triangle_design"),vqRedlines[b].data("redline_text"),
vqRedlines[b].data("drawingRotation"));vqRedlines[b]=a.text(0,0,c).attr({stroke:cvjs_currentRedline_color,fill:cvjs_currentRedline_color,"font-size":cvjs_reference_font_size,transform:vqRedlines[b].data("transform")});for(var d=1;d<c.length;d++)vqRedlines[b].selectAll("tspan")[d].attr({x:0,dy:"1em"});vqRedlines[b].data("node",cvjs_currentRedline_underbar);vqRedlines[b].data("name",cvjs_currentRedline_name);vqRedlines[b].data("id",cvjs_currentRedline_id);vqRedlines[b].data("layer",cvjs_currentRedline_layer);
vqRedlines[b].data("group",cvjs_currentRedline_group);vqRedlines[b].data("color",cvjs_currentRedline_color);vqRedlines[b].data("strokeWidth",cvjs_currentRedline_strokeWidth);vqRedlines[b].data("fill",cvjs_currentRedline_fill);vqRedlines[b].data("fill_opacity",cvjs_currentRedline_fill_opacity);vqRedlines[b].data("transform",cvjs_currentRedline_transform);vqRedlines[b].data("username",cvjs_currentRedline_username);vqRedlines[b].data("userid",cvjs_currentRedline_userid);vqRedlines[b].data("currentPage",
cvjs_currentRedline_currentPage);vqRedlines[b].data("polypath_arrow",cvjs_currentRedline_polypath_arrow);vqRedlines[b].data("triangle_design",cvjs_currentRedline_triangle_design);vqRedlines[b].data("redline_text",cvjs_currentRedline_redline_text);vqRedlines[b].data("drawingRotation",cvjs_currentRedline_drawingRotation);vqRedlines[b].mousedown(function(a){cvjs_deleteRedlineFlag?(cvjs_deleteRedlineFlag=!1,a=this.data("node"),cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete",
"Redline",a)):(a=this.data("id"),cvjs_graphicalObjectOnChange("Click","Redline",a))});vqRedlines[b].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",
a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)});vqRedlines[b].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()});if(vqRedlines[b].data("currentPage")!=multiPages[cvjs_active_floorplan_div_nr].currentPage)vqRedlines[b].attr(hide);else{vqRedlines[b].attr(show);
try{0!=vqRedlines[b].data("drawingRotation")&&cvjs_rotateAngle(vqRedlines[b].data("drawingRotation"),floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(e){console.log(e)}}}catch(e){console.log(e)}}else{if("none"!=vqRedlines[b].data("polypath_arrow")&&void 0!=vqRedlines[b].data("polypath_arrow")){try{cvjs_setCurrentRedlineValues_All(vqRedlines[b].data("node"),vqRedlines[b].data("name"),vqRedlines[b].data("id"),vqRedlines[b].data("layer"),vqRedlines[b].data("group"),vqRedlines[b].data("color"),
vqRedlines[b].data("strokeWidth"),vqRedlines[b].data("fill"),vqRedlines[b].data("fill_opacity"),vqRedlines[b].data("transform"),vqRedlines[b].data("username"),vqRedlines[b].data("userid"),vqRedlines[b].data("currentPage"),vqRedlines[b].data("polypath_arrow"),vqRedlines[b].data("triangle_design"),vqRedlines[b].data("redline_text"),vqRedlines[b].data("drawingRotation")),a.add(vqRedlines[b])}catch(e){console.log(e)}vqRedlines[b].data("node",cvjs_currentRedline_underbar);vqRedlines[b].data("name",cvjs_currentRedline_name);
vqRedlines[b].data("id",cvjs_currentRedline_id);vqRedlines[b].data("layer",cvjs_currentRedline_layer);vqRedlines[b].data("group",cvjs_currentRedline_group);vqRedlines[b].data("color",cvjs_currentRedline_color);vqRedlines[b].data("strokeWidth",cvjs_currentRedline_strokeWidth);vqRedlines[b].data("fill",cvjs_currentRedline_fill);vqRedlines[b].data("fill_opacity",cvjs_currentRedline_fill_opacity);vqRedlines[b].data("transform",cvjs_currentRedline_transform);vqRedlines[b].data("username",cvjs_currentRedline_username);
vqRedlines[b].data("userid",cvjs_currentRedline_userid);vqRedlines[b].data("currentPage",cvjs_currentRedline_currentPage);vqRedlines[b].data("polypath_arrow",cvjs_currentRedline_polypath_arrow);vqRedlines[b].data("triangle_design",cvjs_currentRedline_triangle_design);vqRedlines[b].data("redline_text",cvjs_currentRedline_redline_text);vqRedlines[b].data("drawingRotation",cvjs_currentRedline_drawingRotation);vqRedlines[b].mousedown(function(a){cvjs_deleteRedlineFlag?(cvjs_deleteRedlineFlag=!1,a=this.data("node"),
cvjs_setUpVqRedlines_deleteNode(a),a=this.data("id"),cvjs_graphicalObjectOnChange("Delete","Redline",a)):(a=this.data("id"),cvjs_graphicalObjectOnChange("Click","Redline",a))});vqRedlines[b].mouseover(function(a){tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});var b="UserName: "+this.data("username");tip[cvjs_active_floorplan_div_nr].html(b);tip[cvjs_active_floorplan_div_nr].show();b=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?
tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25)});vqRedlines[b].mouseout(function(a){tip[cvjs_active_floorplan_div_nr].hide()});if(vqRedlines[b].data("currentPage")!=multiPages[cvjs_active_floorplan_div_nr].currentPage)vqRedlines[b].attr(hide);
else{vqRedlines[b].attr(show);try{0!=vqRedlines[b].data("drawingRotation")&&cvjs_rotateAngle(vqRedlines[b].data("drawingRotation"),floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(e){console.log(e)}}}else a.add(vqRedlines[b]);cvjs_debug&&console.log(vqRedlines[b]+"  "+vqRedlines[b].data("currentPage")+" multi "+multiPages[cvjs_active_floorplan_div_nr].currentPage+(vqRedlines[b].data("currentPage")!=multiPages[cvjs_active_floorplan_div_nr].currentPage));if(vqRedlines[b].data("currentPage")!=
multiPages[cvjs_active_floorplan_div_nr].currentPage)vqRedlines[b].attr(hide);else{vqRedlines[b].attr(show);try{0!=vqRedlines[b].data("drawingRotation")&&cvjs_rotateAngle(vqRedlines[b].data("drawingRotation"),floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(e){console.log(e)}}}if(0<vqStickyNotes.length)for(b=0;b<vqStickyNotes.length;b++)if(cvjs_debug&&console.log("loop "+vqStickyNotes[b].data("name")),cvjs_setCurrentStickyNoteValues_All(vqStickyNotes[b].data("node"),vqStickyNotes[b].data("name"),
vqStickyNotes[b].data("id"),vqStickyNotes[b].data("layer"),vqStickyNotes[b].data("group"),vqStickyNotes[b].data("text"),vqStickyNotes[b].data("userid"),vqStickyNotes[b].data("date"),vqStickyNotes[b].data("linked"),vqStickyNotes[b].data("transform"),vqStickyNotes[b].data("currentPage"),vqStickyNotes[b].data("drawingRotation")),c=0,10>b&&(c=3),vqStickyNotes[b]=a.group(a.path("M0,0h20v20h-20v-20Z").attr({stroke:"#000000","stroke-width":"1.0"}),a.path("M7,12h1.3M9.5,12h3.5M11.25,12v5M9.75,12v1.75M12.75,12v1.75M10.5,17h1.5M7,13.5h1.3M7,15.25h3M7,17.0h2.2").attr({stroke:"#000000",
"stroke-width":"0.5"}),a.text(3+c,9,"#"+vqStickyNotes[b].data("id")).attr({"font-size":"8px","font-style":"italic",stroke:"#000000","stroke-width":"0.3",fill:"#000000","fill-opacity":1})).attr({transform:vqStickyNotes[b].data("transform"),opacity:"1"}).attr({fill:"#FFF","fill-opacity":"0.8",stroke:"#000","stroke-opacity":"1"}).data("node",vqStickyNotes[b].data("node")),a.add(vqStickyNotes[b]),cvjs_setUpVqStickyNotes_currentNode_PageChange(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_currentStickyNote_underbar,
b),vqStickyNotes[b].data("currentPage")!=multiPages[cvjs_active_floorplan_div_nr].currentPage)vqStickyNotes[b].attr(hide);else{vqStickyNotes[b].attr(show);try{0!=vqStickyNotes[b].data("drawingRotation")&&cvjs_rotateAngle(vqStickyNotes[b].data("drawingRotation"),floorplan_div_Array[cvjs_active_floorplan_div_nr])}catch(e){console.log(e)}}cvjs_rPaper[cvjs_active_floorplan_div_nr].add(a);a.prepend(cvjs_masterBackground[cvjs_active_floorplan_div_nr])}catch(e){console.log("cvjs_updateDrawingRedlines "+
e)}}
function cvjs_clearAllDrawing(){for(var a in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors){var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node");b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id");jQuery(b).attr(defaultColor)}else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("linked")?(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),
jQuery(b).attr(defaultColor_linked)):(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),jQuery(b).attr(defaultColor_unlinked));try{a==cvjs_lastObj[cvjs_active_floorplan_div_nr]&&a==cvjs_popObj[cvjs_active_floorplan_div_nr]||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip("hide")}catch(c){}}}function cvjs_highlightURL(a,b,c){cvjs_highlightURL_layersort(a,b,c,"")}
function cvjs_highlightURL_layersort(a,b,c,d){a=findUrl(a);if(0<=a){var e=vqURLs[a].attr().toString(),f="";a=!0;var g=0,h=0,k=0;if(-1<e.indexOf("path")){a=!0;f=e.indexOf(" d=");f=e.substring(f+4);var l=f.indexOf('" ');f=f.substring(0,l)}-1<e.indexOf("circle")&&(a=!1,g=e.indexOf(" cx="),g=e.substring(g+5),h=g.indexOf('"'),g=g.substring(0,h),h=e.indexOf(" cy="),h=e.substring(h+5),k=h.indexOf('"'),h=h.substring(0,k),k=e.indexOf(" r="),k=e.substring(k+4),l=k.indexOf('"'),k=k.substring(0,l));cvjs_debug&&
console.log("cvjs_highlightRoomCSS_layersort "+e+" "+g+" "+h+" "+k);l=e.indexOf(" fill=");e.substring(l+1);b=JSON.stringify(b);b=b.toString();b=b.split(",");e="#fff";l="0.5";for(var m="#fff",p=1,n="round",q="1",r=0;r<b.length;r++){var t=b[r];-1<t.indexOf('"fill"')&&(e=t.substring(t.indexOf(":")+1),-1<e.indexOf("}")&&(e=e.substring(0,e.indexOf("}"))));-1<t.indexOf('"fill-opacity"')&&(l=t.substring(t.indexOf(":")+1),-1<l.indexOf("}")&&(l=l.substring(0,l.indexOf("}"))));-1<t.indexOf('"stroke"')&&(m=
t.substring(t.indexOf(":")+1),-1<m.indexOf("}")&&(m=m.substring(0,m.indexOf("}"))));-1<t.indexOf('"stroke-width"')&&(p=t.substring(t.indexOf(":")+1),-1<p.indexOf("}")&&(p=p.substring(0,p.indexOf("}"))));-1<t.indexOf('"stroke-opacity"')&&(q=t.substring(t.indexOf(":")+1),-1<q.indexOf("}")&&(q=q.substring(0,q.indexOf("}"))));-1<t.indexOf('"stroke-linejoin"')&&(n=t.substring(t.indexOf(":")+1),-1<n.indexOf("}")&&(n=n.substring(0,n.indexOf("}"))))}try{var u=jQuery.parseJSON('{ "fill" : '+e+' , "fill-opacity": '+
l+' , "stroke": '+m+', "stroke-width": '+p+', "stroke-opacity": '+q+',  "stroke-linejoin": '+n+" }");a?c.add(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(f).attr(u)):c.add(cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(g,h,k,k).attr(u));try{d.prepend(c)}catch(v){}return 1}catch(v){cvjs_debug&&console.log("A2 "+v)}}return-1}function findURL(a){for(var b in vqURLs)if(vqURLs[b].data("id")==a)return b;return-1}
function cvjs_highlightRoomCSS(a,b){a=findRoom(a);0<=a&&(cvjs_lastObj[cvjs_active_floorplan_div_nr]=a,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(b))}function cvjs_highlightAllSpaceObjects(a,b){for(var c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_highlightRoomCSS_layer(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id"),a,b)}
function cvjs_highlightAllRooms_layer(a,b){for(var c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_highlightRoomCSS_layer(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id"),a,b)}function cvjs_highlightSpaceObjectIdDiv(a,b,c,d){cvjs_highlightRoomCSS_layersortDiv(a,b,c,d)}function cvjs_highlightSpaceObjectId(a,b,c){cvjs_highlightRoomCSS_layersort(a,b,c,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}
function cvjs_highlightRoomCSS_layer(a,b,c){cvjs_highlightRoomCSS_layersort(a,b,c,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])}function cvjs_highlightRoomCSS_layersortDiv(a,b,c,d){1>d.indexOf("_svg")&&(d+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(d);return-1!=cvjs_highlightRoomCSS_layersort(a,b,c,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])?!0:!1}
function cvjs_highlightRoomCSS_layersort(a,b,c,d){a=findFixtureIndex(a);if(-1==a)return-1;if(0<=a){cvjs_lastObj[cvjs_active_floorplan_div_nr]=a;try{var e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].toString();0<e.indexOf("path")||0<e.indexOf("circle")||(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr().toString())}catch(B){e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr().toString()}var f="",g=!0,h=0,k=0,l=0;if(-1<e.indexOf("path")){g=!0;f=e.indexOf(" d=");
f=e.substring(f+4);var m=f.indexOf('" ');f=f.substring(0,m)}-1<e.indexOf("circle")&&(g=!1,h=e.indexOf(" cx="),h=e.substring(h+5),k=h.indexOf('"'),h=h.substring(0,k),k=e.indexOf(" cy="),k=e.substring(k+5),l=k.indexOf('"'),k=k.substring(0,l),l=e.indexOf(" r="),l=e.substring(l+4),m=l.indexOf('"'),l=l.substring(0,m));m=e.indexOf(" fill=");e.substring(m+1);b=JSON.stringify(b);b=b.toString();b=b.split(",");e="#fff";m="0.5";for(var p,n=1,q='"round"',r='"round"',t="1",u=0;u<b.length;u++){var v=b[u];-1<v.indexOf('"fill"')&&
(e=v.substring(v.indexOf(":")+1),-1<e.indexOf("}")&&(e=e.substring(0,e.indexOf("}"))));-1<v.indexOf('"fill-opacity"')&&(m=v.substring(v.indexOf(":")+1),-1<m.indexOf("}")&&(m=m.substring(0,m.indexOf("}"))));-1<v.indexOf('"stroke"')&&(p=v.substring(v.indexOf(":")+1),-1<p.indexOf("}")&&p.substring(0,p.indexOf("}")));-1<v.indexOf('"stroke-width"')&&(n=v.substring(v.indexOf(":")+1),-1<n.indexOf("}")&&(n=n.substring(0,n.indexOf("}"))));-1<v.indexOf('"stroke-opacity"')&&(t=v.substring(v.indexOf(":")+1),
-1<t.indexOf("}")&&(t=t.substring(0,t.indexOf("}"))));-1<v.indexOf('"stroke-linejoin"')&&(q=v.substring(v.indexOf(":")+1),-1<q.indexOf("}")&&(q=q.substring(0,q.indexOf("}"))));-1<v.indexOf('"stroke-linecap"')&&(r=v.substring(v.indexOf(":")+1),-1<r.indexOf("}")&&(r=r.substring(0,r.indexOf("}"))),cvjs_debug&&console.log("strokelinecap_var "+r))}try{var y=jQuery.parseJSON('{ "fill" : '+e+' , "fill-opacity": '+m+' , "stroke": '+e+', "stroke-width": '+n+', "stroke-opacity": '+t+',  "stroke-linejoin": '+
q+',  "stroke-linecap": '+r+" }"),x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("transform");g?c.path(f).attr(y).attr({transform:x}):c.circle(h,k,l,l).attr(y).attr({transform:x});try{d.prepend(c)}catch(B){}return 1}catch(B){cvjs_debug&&console.log("A2 "+B)}}return-1}function l_pt(a){lt1=a;lt4=lt3=lt2=""}
function cvjs_highlightSpaceBorderCSS_layersortDiv(a,b,c,d,e){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(d+"_svg");return-1!=cvjs_highlightSpaceBorderCSS_layersort(a,b,c,layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr],e)?!0:!1}
function cvjs_highlightSpaceBorderCSS_layersort(a,b,c,d,e){var f=findFixtureIndex(a);if(0<=f){cvjs_debug&&console.log("rmid "+a+" rm="+f);cvjs_lastObj[cvjs_active_floorplan_div_nr]=f;try{var g=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].toString();0<g.indexOf("path")||0<g.indexOf("circle")||(g=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].attr().toString())}catch(u){g=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][f].attr().toString()}f="";a=!0;var h=0,k=0,l=0;if(-1<
g.indexOf("path")){a=!0;f=g.indexOf(" d=");f=g.substring(f+4);var m=f.indexOf('" ');f=f.substring(0,m)}-1<g.indexOf("circle")&&(a=!1,h=g.indexOf(" cx="),h=g.substring(h+5),k=h.indexOf('"'),h=h.substring(0,k),k=g.indexOf(" cy="),k=g.substring(k+5),l=k.indexOf('"'),k=k.substring(0,l),l=g.indexOf(" r="),l=g.substring(l+4),m=l.indexOf('"'),l=l.substring(0,m));m=g.indexOf(" fill=");g.substring(m+1);b=JSON.stringify(b);b=b.toString();b=b.split(",");m=1;var p='"round"';g="#fff";for(var n=0;n<b.length;n++){var q=
b[n];if(-1<q.indexOf('"fill"')){var r=q.substring(q.indexOf(":")+1);-1<r.indexOf("}")&&r.substring(0,r.indexOf("}"))}-1<q.indexOf('"fill-opacity"')&&(r=q.substring(q.indexOf(":")+1),-1<r.indexOf("}")&&r.substring(0,r.indexOf("}")));-1<q.indexOf('"stroke"')&&(g=q.substring(q.indexOf(":")+1),-1<g.indexOf("}")&&(g=g.substring(0,g.indexOf("}"))));-1<q.indexOf('"stroke-width"')&&(m=q.substring(q.indexOf(":")+1),-1<m.indexOf("}")&&(m=m.substring(0,m.indexOf("}"))));-1<q.indexOf('"stroke-opacity"')&&(r=
q.substring(q.indexOf(":")+1),-1<r.indexOf("}")&&r.substring(0,r.indexOf("}")));-1<q.indexOf('"stroke-linejoin"')&&(p=q.substring(q.indexOf(":")+1),-1<p.indexOf("}")&&(p=p.substring(0,p.indexOf("}"))));-1<q.indexOf('"stroke-linecap"')&&(q=q.substring(q.indexOf(":")+1),-1<q.indexOf("}")&&(q=q.substring(0,q.indexOf("}"))),cvjs_debug&&console.log("2 strokelinecap_var "+q))}try{e='{ "fill" : "#fff" , "fill-opacity": 0.0 , "stroke": '+g+', "stroke-width": '+m*e+', "stroke-opacity": 1,  "stroke-linejoin": '+
p+" }";cvjs_debug&&console.log(e);var t=jQuery.parseJSON(e);a?c.add(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(f).attr(t)):c.add(cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(h,k,l,l).attr(t));try{d.prepend(c)}catch(u){}return 1}catch(u){cvjs_debug&&console.log("A2 "+u)}}return-1}
function findFixtureIndex(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a)return b;cvjs_debug&&console.log("no match!");return-1}
function findNodeFromId(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a)return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");cvjs_debug&&console.log("no match!");return-1}
function cvjs_highlightFixtureCSS_layersort(a,b,c,d,e){a=findFixtureIndex(a);if(0<=a){cvjs_lastObj[cvjs_active_floorplan_div_nr]=a;var f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr().toString();a=!0;if(-1<f.indexOf("path")){a=!0;var g=f.indexOf(" d=");g=f.substring(g+4);var h=g.indexOf('" ');g=g.substring(0,h)}if(-1<f.indexOf("circle")){a=!1;var k=f.indexOf(" cx=");k=f.substring(k+5);var l=k.indexOf('"');k=k.substring(0,l);l=f.indexOf(" cy=");l=f.substring(l+5);var m=l.indexOf('"');
l=l.substring(0,m);m=f.indexOf(" r=");m=f.substring(m+4);h=m.indexOf('"');m=m.substring(0,h)}h=f.indexOf(" fill=");f.substring(h+1);b=JSON.stringify(b);b=b.toString();b=b.split(",");f="#fff";h="0.5";for(var p="#fff",n=1,q="round",r="1",t=0;t<b.length;t++){var u=b[t];-1<u.indexOf('"fill"')&&(f=u.substring(u.indexOf(":")+1),-1<f.indexOf("}")&&(f=f.substring(0,f.indexOf("}"))));-1<u.indexOf('"fill-opacity"')&&(h=u.substring(u.indexOf(":")+1),-1<h.indexOf("}")&&(h=h.substring(0,h.indexOf("}"))));-1<u.indexOf('"stroke"')&&
(p=u.substring(u.indexOf(":")+1),-1<p.indexOf("}")&&(p=p.substring(0,p.indexOf("}"))));-1<u.indexOf('"stroke-width"')&&(n=u.substring(u.indexOf(":")+1),-1<n.indexOf("}")&&(n=n.substring(0,n.indexOf("}"))));-1<u.indexOf('"stroke-opacity"')&&(r=u.substring(u.indexOf(":")+1),-1<r.indexOf("}")&&(r=r.substring(0,r.indexOf("}"))));-1<u.indexOf('"stroke-linejoin"')&&(q=u.substring(u.indexOf(":")+1),-1<q.indexOf("}")&&(q=q.substring(0,q.indexOf("}"))))}try{var v=jQuery.parseJSON('{ "fill" : '+f+' , "fill-opacity": '+
h+' , "stroke": '+p+', "stroke-width": '+n+', "stroke-opacity": '+r+',  "stroke-linejoin": '+q+" }");a?c.add(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(g).transform(e).attr(v)):c.add(cvjs_rPaper[cvjs_active_floorplan_div_nr].circle(k,l,m,m).transform(e).attr(v));try{d.prepend(c)}catch(y){}return 1}catch(y){cvjs_debug&&console.log("A2 "+y)}}return-1}
function cvjs_highlightRoomRGB(a,b,c,d){a=findRoom(a);0<=a&&(cvjs_lastObj[cvjs_active_floorplan_div_nr]=a,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr({fill:"rgb("+b+","+c+","+d+")","fill-opacity":"0.7"}))}function cvjs_highlightRoomHex(a,b){a=findRoom(a);0<=a&&(cvjs_lastObj[cvjs_active_floorplan_div_nr]=a,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr({fill:"#"+b,"fill-opacity":"0.7"}))}
function cvjs_highlightRoomByIdHex(a,b){a=findRoomById(a);0<=a&&(cvjs_lastObj[cvjs_active_floorplan_div_nr]=a,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr({fill:"#"+b,"fill-opacity":"0.7"}))}
function clearRoom(a){a=findRoom(a);if(0<=a)if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors)if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor").toString().indexOf("undefined")){var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node");b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id");jQuery(b).attr(defaultColor)}else b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),
jQuery(b).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor"));else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("linked")?(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),jQuery(b).attr(defaultColor_linked)):(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(defaultColor_unlinked),b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+
b+'"]').attr("id"),jQuery(b).attr(defaultColor_unlinked))}
function cvjs_highlightRoomImmediate(a,b){void 0==b?cvjs_clearDrawing():1==b&&cvjs_clearDrawing();if(cvjs_supressSingleSpaceHighLight)return c;var c=findRoom(a);0<=c&&(cvjs_lastObj[cvjs_active_floorplan_div_nr]=c,!cvjs_supressPopUpModal||cvjs_standardHighLightColors?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor)):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor_unlinked)));return c}
function cvjs_highlightRoomImmediateHyperlinks(a){cvjs_clearDrawingHyperlinks();a=findUrl(a);0<=a&&(lastObjHyperlink[cvjs_active_floorplan_div_nr]=a,cvjs_supressPopUpModal?cvjs_supressHyperlinkColors?vqURLs[a].attr(defaultColor_Hyperlinks_blank):vqURLs[a].attr(defaultColor_Hyperlinks):cvjs_supressHyperlinkColors?vqURLs[a].attr(defaultColor_Hyperlinks_blank):vqURLs[a].attr(selectColor));return a}
function cvjs_highlightRoomImmediateStickyNotes(a){cvjs_clearDrawingStickyNotes();a=findStickyNotes(a);0<=a&&(lastObjStickyNote[cvjs_active_floorplan_div_nr]=a,cvjs_supressPopUpModal?vqStickyNotes[a].data("linked")?vqStickyNotes[a].attr(selectColor_linked):vqStickyNotes[a].attr(selectColor_unlinked):vqStickyNotes[a].attr(selectColor_StickyNotes));return a}
function cvjs_highlightRoomImmediateNoClearDrawing(a){a=findRoom(a);if(0<=a){cvjs_lastObj[cvjs_active_floorplan_div_nr]=a;if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors){var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node");b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id");jQuery(b).attr(selectColor)}else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("linked")?(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+
b+'"]').attr("id"),jQuery(b).attr(selectColor_linked)):(b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),b="#"+jQuery('[cvjs\\:node="'+b+'"]').attr("id"),jQuery(b).attr(selectColor_unlinked));return a}}function highlightRoomVqId(a){cvjs_clearDrawing();cvjs_lastObj[cvjs_active_floorplan_div_nr]=a;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(highlight)}
function highlightRoom(a){cvjs_clearDrawing();a=findRoom(a);if(0<=a)return cvjs_lastObj[cvjs_active_floorplan_div_nr]=a,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].animate(highlight,300),a}function cvjs_activateSpaceObjectModal_Id(a){change_space_fixed_location(a)}function cvjs_activateSpaceObjectModal_Node(a){a=findIdFromNode(a);change_space_fixed_location(a)}var cvjs_supressPopUpModal_callback_JS=!1;
function change_space_fixed_location(a,b){void 0!=b&&(cvjs_active_floorplan_div_nr=b);cvjs_debug&&console.log("change_space_fixed_location "+a+"  "+b+"  cvjs_supressPopUpModal_callback_JS: "+cvjs_supressPopUpModal_callback_JS);if(cvjs_supressPopUpModal_callback_JS){hidePop();if(0==a){closeAllPopups(-1);try{cvjs_NoObjectSelected()}catch(k){}}else{var c=cvjs_highlightRoomImmediate(a,!0);0<=c&&(spaceId=a,cvjs_lastObj[cvjs_active_floorplan_div_nr]=c,jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].node).qtip("destroy"))}cvjs_change_space(a);
cvjs_ObjectSelected(a);cvjs_graphicalObjectOnChange("Click","SpaceObject",a)}else{if(cvjs_callbackForModalDisplayVar){var d=cvjs_customModalPopUpBody(a);b=findRoom(a);var e="";cvjs_isLicensed=!0;e='<table width="100%"><tr><td class="cvjs_modal_header_1" onclick="cvjs_popupTitleClick(\''+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")+"');\">"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name")+'</td><td class="cvjs_modal_header_info_1" onclick="hideOnlyPop('+
b+');"><i class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type")+"</h4></td></tr></table>";cvjs_debug&&console.log("we are licensed  "+cvjs_licensedDaysLeft);jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip({content:{text:d,title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});
d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");cvjs_getAttributeStatus(d)}hidePop();if(0==a){closeAllPopups(-1);try{cvjs_NoObjectSelected()}catch(k){}}else{cvjs_debug&&console.log("fixed location 2 cvjs_supressPopUpModal "+cvjs_supressPopUpModal);c=cvjs_highlightRoomImmediate(a,!1);if(0<=c){spaceId=a;cvjs_lastObj[cvjs_active_floorplan_div_nr]=c;if(1==cvjs_supressPopUpModal)console.log("cv changespace fixed destroy "),jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].node).qtip("destroy");
else{cvjs_debug&&console.log("cv changespace fixed show/hide/destroy");jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].node).qtip("show");b=!1;try{b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("qtip")}catch(k){console.log(k+" QTIP not defined")}b||(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("qtip",!0),jQuery("#hideOnlyPop_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id_link")).on("click",function(){hideOnlyPop()}),jQuery("#cvjs_popupTitleClick_"+
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id_link")).on("click",function(){cvjs_popupTitleClick(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id"))}),0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("angular"))||(jQuery("#my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")).on("click",function(){my_own_clickmenu1(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id"))}),
jQuery("#my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")).on("click",function(){my_own_clickmenu2(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id"))}),jQuery("#cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")).on("click",function(){cvjs_zoomHere()}));var f={};jQuery("*[id]").each(function(){var a=jQuery(this).attr("id");f[a]||(f[a]=!0)});for(var g in f){var h="#"+g;try{0!=jQuery(h).attr("id").indexOf("qtip-")||
0<h.indexOf("-title")||0<h.indexOf("-content")||jQuery(function(){jQuery(h).draggable({cancel:"+content+"})})}catch(k){}}cvjs_callbackForModalDisplayVar&&("unpopulated"==cvjs_getAttributeStatus(d)?cvjs_callbackForModalDisplay(a,d):cvjs_populateMyCustomPopUpBody(a,d))}cvjs_popObj[cvjs_active_floorplan_div_nr]=c}try{console.log("cluster host "+cluster_host_flag),1==cluster_host_flag&&1==cvjs_supressPopUpModal?xcvjs_ObjectSelected(a,floorplan_div_Array[cvjs_active_floorplan_div_nr]):cvjs_ObjectSelected(a,
floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_graphicalObjectOnChange("Click","SpaceObject",a)}catch(k){console.log(a+"cvjs_highlightRoomImmediate: "+k),cvjs_ObjectSelected(a,null),cvjs_graphicalObjectOnChange("Click","SpaceObject",a)}}cvjs_supressPopUpModal&&cvjs_update_done_edit_location_fields(a)}}
function change_space_fixed_locationStickyNotes(a){hidePopStickyNotes();if(0==a){closeAllPopupsStickyNotes(-1);try{cvjs_NoObjectSelectedStickyNotes()}catch(e){console.log("change_space_fixed_locationStickyNotes:"+e)}}else{var b=cvjs_highlightRoomImmediateStickyNotes(a);cvjs_debug_stickynotes&&window.alert("X in change_space_fixed    cvjs_supressPopUpModal "+cvjs_supressPopUpModal+"  "+b+" spaceIdStickNote "+spaceIdStickyNote[cvjs_active_floorplan_div_nr]+" lastObjStickyNote[cvjs_active_floorplan_div_nr]  "+
lastObjStickyNote[cvjs_active_floorplan_div_nr]);if(0<=b){spaceIdStickyNote[cvjs_active_floorplan_div_nr]=a;lastObjStickyNote[cvjs_active_floorplan_div_nr]=b;if(1==cvjs_supressPopUpModal)jQuery(vqStickyNotes[b].node.qtip).is(":visible")&&jQuery(vqStickyNotes[b].node).qtip("hide");else{jQuery(vqStickyNotes[b].node.qtip).is(":visible")||jQuery.when(jQuery(vqStickyNotes[b].node).qtip("show")).then(function(a,b,c){});for(var c=document.getElementsByTagName("div"),d=0;d<c.length;d++)-1<c[d].id.indexOf("qtip-")&&
-1==c[d].id.indexOf("-content")&&-1==c[d].id.indexOf("-title")&&(StickNoteQtipDiv=c[d].id)}popObjStickyNote[cvjs_active_floorplan_div_nr]=b}try{cvjs_ObjectSelectedStickyNotes(a),cvjs_graphicalObjectOnChange("Click","StickyNote",a)}catch(e){console.log("change_space_fixed_locationStickyNotes:"+e)}}}
function change_space_fixed_locationHyperlink(a){if(0==a)try{cvjs_NoObjectSelectedHyperlinks()}catch(c){}else{var b=cvjs_highlightRoomImmediateHyperlinks(a);0<=b&&(lastObjHyperlink[cvjs_active_floorplan_div_nr]=b,1==cvjs_supressPopUpModal?(jQuery(vqURLs[b].node).qtip("show"),jQuery(vqURLs[b].node).qtip("hide")):jQuery(vqURLs[b].node).qtip("show"),popObjHyperlink[cvjs_active_floorplan_div_nr]=b);try{cvjs_ObjectSelectedHyperlink(a),cvjs_graphicalObjectOnChange("Click","HyperLink",a)}catch(c){}}}
function cvjs_mysimple_encode(a){a=ABC.toAscii(a);var b=a.charAt(0);var c="";for(var d=0;d<b;d++){for(var e="",f=0;3>f;f++){var g=a.charAt(1+3*d+f);g=g.toString();e+=g}e=parseInt(e);e=256-e;c+=String.fromCharCode(e)}parseInt(c);c="";for(d=0;d<(a.length-1-3*b)/3;d++){e="";for(f=0;3>f;f++)g=a.charAt(1+3*b+3*d+f),g=g.toString(),e+=g;e=parseInt(e);e=256-e;c+=String.fromCharCode(e)}return c}
var ABC={toAscii:function(a){return a.replace(/\s*[01]{8}\s*/g,function(a){return String.fromCharCode(parseInt(a,2))})},toBinary:function(a,b){return a.replace(/[\s\S]/g,function(a){a=ABC.zeroPad(a.charCodeAt().toString(2));return 0==b?a:a+" "})},zeroPad:function(a){return"00000000".slice(String(a).length)+a}},cvjs_LicenseKeyPath="../app/js/",cvjs_isLicensed=!1,cvjs_licensedDaysLeft=40;
function cvjs_setLicenseKeyPath(a){cvjs_LicenseKeyPath=a;try{loadJSbase(cvjs_LicenseKeyPath+"cvlicense.js")}catch(b){cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],languageTable.languages[cvjs_currentLanguage].InfoMessageModal.LicensePath+a),cvjs_isLicensed=!1}}var cvjsLicenseKey;function cvjs_setLicenseKeyDirect(a){cvjsLicenseKey=jQuery.parseJSON(a);cvjs_licenseKeyLoaded=!0}var cvjs_licenseKeyLoaded=!1;
function CheckLicenseLoad(a,b,c,d,e){if(cvjs_licenseKeyLoaded){load_failures=0;try{void 0==cvjsLicenseKey.cvKey&&(cvjs_isLicensed=!1)}catch(t){cvjs_isLicensed=!1}var f=cvjs_currentURL(),g=cvjs_mysimple_encode(cvjsLicenseKey.cvKey),h=g.split(":"),k=!1;if(1==h.length)k=!0;else{var l=h[1].split("-");g=Number(l[0]);var m=Number(l[1]);l=Number(l[2]);var p=new Date,n=Number(p.getMonth()+1),q=Number(p.getDate());p=Number(p.getFullYear());g>p?(k=!0,cvjs_licensedDaysLeft=40,1==g-p&&1==m&&12==n&&(cvjs_licensedDaysLeft=
l>q?40:31-l+q)):g==p&&m>n?(k=!0,cvjs_licensedDaysLeft=2<=m-n?40:l>q?40:30-l+q):g==p&&m==n&&l>=q&&(k=!0,cvjs_licensedDaysLeft=l-q);g=h[0]}h=g.split(";");if(1==h.length)cvjs_isLicensed=-1<f.indexOf(g)?!0:!1;else{g=!0;cvjs_isLicensed=!1;for(var r in h)g&&-1<f.indexOf(h[r])&&(cvjs_isLicensed=!0,g=!1)}k||(cvjs_isLicensed=!1);cvjs_LoadDrawing_Conversion_original(a,b,c,d,e)}else 5>load_failures?(load_failures++,setTimeout(function(){CheckLicenseLoad(a,b,c,d,e)},256)):(cvjs_isLicensed=!1,load_failures=0,
cvjs_LoadDrawing_Conversion_original(a,b,c,d,e))}function cvjs_checkLicensePreThenLoad(a,b,c,d,e){load_failures=0;CheckLicenseLoad(a,b,c,d,e)}
function cvjs_checkLicense(){try{cvjs_debug&&console.log(cvjsLicenseKey);try{if(void 0==cvjsLicenseKey.cvKey){cvjs_debug&&console.log("cvjsLicenseKey.cvKey undefined!");jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();var a=actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr],b='{ "font-size" : "'+.04*a+'" , "font-family": "arial" }';try{var c=jQuery.parseJSON(b)}catch(x){console.log(x)}var d=
cvjs_rPaper[cvjs_active_floorplan_div_nr].text(actualLLX[cvjs_active_floorplan_div_nr]+.2*(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]),actualLLY[cvjs_active_floorplan_div_nr]+.2*(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]),"CADViewer Trial Version").attr(c).attr({fill:"rgb(237,137,137)",stroke:"rgb(237,137,137)","fill-opacity":"1"});cvjs_masterBackground[cvjs_active_floorplan_div_nr].add(d);cvjs_debug&&console.log("License key not found or corrupt! Your CADViewer URl is: "+
cvjs_currentURL());var e=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.LicenseNotFound;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],e);return}}catch(x){cvjs_debug&&console.log("license key err"+x);var f=cvjs_masterBackground[cvjs_active_floorplan_div_nr].getBBox();a=f.height;b='{ "font-size" : "'+.1*a+'" , "font-family": "arial" }';try{c=jQuery.parseJSON(b)}catch(B){console.log(B)}d=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(f.x+.1*f.width,f.y+
.5*f.height,"CADViewer Trial Version").attr(c).attr({fill:"rgb(237,137,137)",stroke:"rgb(237,137,137)","fill-opacity":"1"});cvjs_SVGGroup[cvjs_active_floorplan_div_nr].add(d);cvjs_isLicensed=!1;cvjs_debug&&console.log("2 License key not found or corrupt! Your CADViewer URl is: "+cvjs_currentURL());e=languageTable.languages[cvjs_currentLanguage].InfoMessageModal.LicenseNotFound;cvjs_displayInformationModal(floorplan_div_Array[cvjs_active_floorplan_div_nr],e);return}var g=cvjs_currentURL(),h=cvjs_mysimple_encode(cvjsLicenseKey.cvKey),
k=h.split(":");e=!1;if(1==k.length)e=!0;else{var l=k[1].split("-"),m=Number(l[0]),p=Number(l[1]),n=Number(l[2]),q=new Date,r=Number(q.getMonth()+1),t=Number(q.getDate()),u=Number(q.getFullYear());m>u?e=!0:m==u&&p>r?e=!0:m==u&&p==r&&n>=t&&(e=!0);h=k[0]}var v=h.split(";");cvjs_debug&&console.log("XX"+g+"XX"+h+"XX");if(1==v.length)cvjs_isLicensed=-1<g.indexOf(h)?!0:!1;else{h=!0;cvjs_isLicensed=!1;for(var y in v)h&&-1<g.indexOf(v[y])&&(cvjs_isLicensed=!0,h=!1)}e||(cvjs_isLicensed=!1);cvjs_debug&&console.log("DATE CHECK "+
e+"   license is "+cvjs_isLicensed);if(!cvjs_isLicensed){f=cvjs_masterBackground[cvjs_active_floorplan_div_nr].getBBox();a=f.height;b='{ "font-size" : "'+.1*a+'" , "font-family": "arial" }';try{c=jQuery.parseJSON(b)}catch(x){console.log(x)}d=cvjs_rPaper[cvjs_active_floorplan_div_nr].text(f.x+.1*f.width,f.y+.5*f.height,"CADViewer Trial Version").attr(c).attr({fill:"rgb(237,137,137)",stroke:"rgb(237,137,137)","fill-opacity":"1"});cvjs_SVGGroup[cvjs_active_floorplan_div_nr].add(d);g.substring(0,g.lastIndexOf("/"));
cvjs_isLicensed=!1}}catch(x){console.log("cvjs_checkLicense error: "+x)}}
function cvjs_LayerListSpaceObject(a,b){void 0==b&&(b=1);a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);if(!cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]){cvjs_interactiveMethod_Active[cvjs_active_floorplan_div_nr]=!0;cvjs_debug&&console.log(a.lastIndexOf("_svg")+"  "+(a.length-4));a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_layerListSpace=new List("layerListSpaceObject_"+a,cvjs_layerOptionsSpace,cvjs_layerValuesSpace);for(var c,
d=0;d<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;d++){var e="javascript:cvjs_LayerTypeSpaceClick("+d+","+b+")";var f="#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"_layerlist_menuitem_"+d;c=languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned;1==b&&(c=-1<layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName.indexOf(cvjs_convertRoomLayer)&&layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName.length==cvjs_convertRoomLayer.length?"<b style='color:magenta;'>"+
languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.RoomLayer+"</b>":-1<layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName.indexOf(cvjs_convertTextLayer)&&layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName.length==cvjs_convertTextLayer.length?"<b style='color:red;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.TextLayer+"</b>":languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned);2==b&&(c=1==cvjs_convertHandleLayer[d]?
"<b style='color:magenta;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.HandleLayer+"</b>":languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned);3==b&&(1==cvjs_floodfillSpaceIDLayerTable[d]?(c="<b style='color:magenta;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.FloodfillLayer+"</b>",cvjs_spaceIDLayer=layerTable[cvjs_active_floorplan_div_nr].layers[d].layer):c=languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned);
"OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[d].status&&cvjs_layerListSpace.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Off,text_room_layer:c,link:f,link_text_room_l:e,id:d,layer:layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName});"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[d].status&&cvjs_layerListSpace.add({selected:languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.On,text_room_layer:c,link:f,link_text_room_l:e,id:d,
layer:layerTable[cvjs_active_floorplan_div_nr].layers[d].layerName})}layerlistspaceobject_offset_flag[cvjs_active_floorplan_div_nr]&&(layerlistspaceobject_offset_flag[cvjs_active_floorplan_div_nr]=!1,jQuery("#layerListSpaceObject_"+a).css({position:"fixed"}),jQuery("#layerListSpaceObject_"+a).offset({left:150+jQuery("#"+a).position().left,top:50+jQuery("#"+a).position().top}));jQuery("#layerListSpaceObject_"+a).show()}}
function cvjs_LayerListSpaceClick(a){"OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[a].status?(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),cvjs_spaceObjectLayerOnOff(floorplan_div_Array[cvjs_active_floorplan_div_nr],layerTable[cvjs_active_floorplan_div_nr].layers[a].layerName,"on"),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON",a=cvjs_layerListSpace.get("id",a)[0],a.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.On})):
(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF",cvjs_spaceObjectLayerOnOff(floorplan_div_Array[cvjs_active_floorplan_div_nr],layerTable[cvjs_active_floorplan_div_nr].layers[a].layerName,"off"),a=cvjs_layerListSpace.get("id",a)[0],a.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Off}))}
function cvjs_LayerTypeSpaceClick(a,b){var c=cvjs_layerListSpace.get("id",a)[0],d=c.values().text_room_layer;1==b&&(d=-1<d.indexOf(languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned)?"<b style='color:red;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.TextLayer+"</b>":-1<d.indexOf(languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.TextLayer)?"<b style='color:magenta;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.RoomLayer+
"</b>":languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned);2==b&&(0==cvjs_convertHandleLayer[a]?(d="<b style='color:magenta;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.HandleLayer+"</b>",cvjs_convertHandleLayer[a]=!0):(d=languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned,cvjs_convertHandleLayer[a]=!1));3==b&&(0==cvjs_floodfillSpaceIDLayerTable[a]?(d="<b style='color:magenta;'>"+languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.FloodfillLayer+
"</b>",cvjs_floodfillSpaceIDLayerTable[a]=!0,cvjs_spaceIDLayer=layerTable[cvjs_active_floorplan_div_nr].layers[a].layer):(d=languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.NotAssigned,cvjs_floodfillSpaceIDLayerTable[a]=!1,cvjs_spaceIDLayer="None Selected"));cvjs_debug&&console.log("after:  mode "+a+"  "+cvjs_convertHandleLayer[a]);c.values({text_room_layer:d})}
function modal_all_layer_off_space(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF",cvjs_layerListSpace.get("id",a)[0].values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.Off});cvjs_allSpaceObjectsOff(floorplan_div_Array[cvjs_active_floorplan_div_nr])}
function all_layer_off_thumb_on(){for(var a=!1,b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)"cvjs_Thumb"==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName&&(a=!0);if(a)for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)"cvjs_Thumb"==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName?(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),layerTable[cvjs_active_floorplan_div_nr].layers[b].status="ON"):(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),
layerTable[cvjs_active_floorplan_div_nr].layers[b].status="OFF")}
function all_layer_on_thumb_off(){for(var a=!1,b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)"cvjs_Thumb"==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName&&(a=!0);if(a)for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)"cvjs_Thumb"==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName?(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),layerTable[cvjs_active_floorplan_div_nr].layers[b].status="OFF"):(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),
layerTable[cvjs_active_floorplan_div_nr].layers[b].status="ON")}
function modal_all_layer_on_space(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++){var b=cvjs_layerListSpace.get("id",a)[0];void 0!=b&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListModal.On}))}cvjs_allSpaceObjectsOn(floorplan_div_Array[cvjs_active_floorplan_div_nr])}
function modal_swap_layers_on_off_space(){for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)if("OFF"==layerTable[cvjs_active_floorplan_div_nr].layers[a].status){var b=cvjs_layerListSpace.get("id",a)[0];void 0!=b&&(cvjs_LayerOn(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="ON",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.On}))}else b=cvjs_layerListSpace.get("id",a)[0],
void 0!=b&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[a].layer),layerTable[cvjs_active_floorplan_div_nr].layers[a].status="OFF",b.values({selected:languageTable.languages[cvjs_currentLanguage].LayerListSpaceModal.Off}))}
var cvjs_redlinesRelativePath="../redlines/",cvjs_filepathServerRedlines="/home/cadviewer/cadviewer.com/cadviewer_6_1_0/content/redlines/",cvjs_SharePointFileStructure=[],cvjs_SharePointFileStructure_folder=[],cvjs_SharePointFileStructure_level=[],cvjs_SharePointFileStructure_currentfileNr=0;
function cvjs_generateShareFileDrawingList(){var a=cvjs_serverHandlersPath+"CV-JS_sharepoint_filelist.php";cvjs_debug&&console.log(a);var b={};b.user_name=cvjs_sharepoint_UserName;jQuery.ajax({url:a,type:"post",data:b,success:function(a){cvjs_debug&&console.log("Return call: "+a)}})}
function cvjs_buildShareFileDrawingSelector(){jQuery("#cv_drawing_selector").find("option").remove().end().append('<option value="0">Select Drawing</option>').val("0");console.log("HELLO !"+jQuery("#cv_drawing_selector option").html());var a=cvjs_SharePointFileStructure_level[cvjs_SharePointFileStructure_currentfileNr],b=cvjs_SharePointFileStructure[cvjs_SharePointFileStructure_currentfileNr];console.log("LEVEL  "+a+" "+b+" "+cvjs_SharePointFileStructure_folder[cvjs_SharePointFileStructure_currentfileNr]);
for(var c=0;c<cvjs_SharePointFileStructure.length;c++){var d=(c+1).toString();console.log(cvjs_SharePointFileStructure_level[c]+"   "+a);if(cvjs_SharePointFileStructure_level[c]==a)jQuery("#cv_drawing_selector").append(jQuery("<option>",{value:d,text:cvjs_SharePointFileStructure[c]}));else if(cvjs_SharePointFileStructure_level[c]>a){console.log("level loop, i="+c+" "+cvjs_SharePointFileStructure_folder[c]);for(var e=!0,f=0;f<c;f++)-1<cvjs_SharePointFileStructure_folder[c].indexOf(cvjs_SharePointFileStructure_folder[f])&&
cvjs_SharePointFileStructure_level[c]>=cvjs_SharePointFileStructure_level[f]&&cvjs_SharePointFileStructure_level[f]>a?(console.log(f+" it is already there so we do nothing "+c),e=!1):console.log("we add the selector "+c+"  "+cvjs_SharePointFileStructure_folder[c]);console.log("ADDFOLDERFLAG "+e+"  "+cvjs_SharePointFileStructure_folder[c]);f=0;b=cvjs_SharePointFileStructure_folder[c];for(var g=!0;g;)-1<b.indexOf("/")?(f++,b=b.substring(b.indexOf("/")+1)):g=!1;b=cvjs_SharePointFileStructure_folder[c];
for(g=0;g<f;g++)b=b.substring(b.indexOf("/")+1);e&&jQuery("#cv_drawing_selector").append(jQuery("<option>",{value:d,text:b}))}}}function cvjs_setQRCodeInsertion(a,b,c){cvjs_PercentXFromLowerLeft=a;cvjs_PercentYFromLowerLeft=b;cvjs_widthPercent=c}function cvjs_setLoadMultipleRedlinesStickyNotes(a){cvjs_loadMultipleRedlinesStickyNotes=a}
function cvjs_idObjectClicked(){return 0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("id"):-1}function cvjs_IdObjectClicked(){return 0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("id"):-1}
function cvjs_NameObjectClicked(){return 0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("name"):-1}function cvjs_NodeObjectClicked(){return 0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]?cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"):-1}
function cvjs_StickyNoteClicked(){return 0<=lastObjStickyNote[cvjs_active_floorplan_div_nr]?vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].data("node"):-1}
function hoverIn(a){if(null!=lastElem){var b=jQuery.parseJSON('{"stroke" : "'+lastStroke+'" , "stroke-opacity" : '+lastStrokeWidth+" }");lastElem.attr(b);lastLink="";jQuery("#cvjs_display_tip").empty().hide()}lastElem=a;lastStroke=a.attr("stroke");lastStrokeWidth=a.attr("stroke-width");a.attr({stroke:"cyan","stroke-opacity":4});a=a.data("hyperlink");b={left:mousex+10,top:mousey+10};jQuery("#cvjs_tool_tip").html('<img src="../drawings/'+a+'" border="0" />').show().offset(b)}function hoverOut(a){}
function doHyperlink(a){var b={left:mousex+10,top:mousey+10};a=a.data("hyperlink");0==flip?(flip=1,cvjs_rPaper[cvjs_active_floorplan_div_nr].attr({viewBox:"0 0 800 600"})):flip=0;lastLink!=a?(lastLink=a,jQuery("#cvjs_display_tip").html('<img src="../drawings/'+a+'" border="0" >').show().offset(b)):(lastLink="",jQuery("#cvjs_display_tip").empty().hide())}
function cvjs_resizeWindow_3D(a,b){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(b);var c=jQuery("#"+b).position();console.log("cvjs_resizeWindow_3D left "+c.left+"  top "+c.top);jQuery("#"+b).css("position","relative");jQuery("#"+b).css("display","block");jQuery("#"+b).css("overflow","hidden");jQuery("#"+b).width(jQuery("#"+a).width());jQuery("#"+b).height(40);c=jQuery("#"+b).position();console.log("cvjs_resizeWindow_3D left "+c.left+"  top "+c.top);c=jQuery("#"+a).position();console.log("model3D "+
c.top+"  "+c.left);jQuery("#topIconMenu_"+b+"_svg").css({left:jQuery("#"+a).position().left+1,top:jQuery("#"+a).position().top+1});jQuery("#topIconMenu_placeholder_1_"+b+"_svg").css({left:jQuery("#"+a).position().left+1+cvjs_iconmenu_pos_x,top:jQuery("#"+a).position().top+1+cvjs_iconmenu_pos_y});jQuery("#gMenu_"+b+"_svg").offset({top:c.top+cvjs_gMenu_pos_y,left:c.left+cvjs_gMenu_pos_x});c=c.left+jQuery("#"+a).width()-475;var d=+b+"_svg",e=jQuery("#topIconMenu_placeholder_1_"+d).width();jQuery("#topIconMenu_"+
d).position();392<jQuery(b).width()-e?(jQuery("#topIconMenu_"+d).css({height:"32px"}),jQuery("#topIconMenu_placeholder_2_"+d).offset({top:jQuery("#"+a).position().top+1,left:c+78})):(jQuery("#topIconMenu_placeholder_2_"+d).offset({top:jQuery("#"+a).position().top+33,left:c+78}),jQuery("#topIconMenu_"+d).css({height:"64px"}))}
function hidePop(){if(0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&cvjs_lastObj[cvjs_active_floorplan_div_nr]<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length){jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].node).qtip("hide");if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors){var a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node");a="#"+jQuery('[cvjs\\:node="'+
a+'"]').attr("id");jQuery(a).attr(defaultColor)}else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+
a+'"]').attr("id"),jQuery(a).attr(defaultColor_unlinked));cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1}0<=cvjs_popObj[cvjs_active_floorplan_div_nr]&&cvjs_popObj[cvjs_active_floorplan_div_nr]<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length&&(jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].node).qtip("hide"),!cvjs_supressPopUpModal||cvjs_standardHighLightColors?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor)):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_unlinked)),cvjs_popObj[cvjs_active_floorplan_div_nr]=-1)}function a_pt(a){pt1=a;pt6=pt5=pt4=pt3=pt2=""}
function hidePopStickyNotes(){0<=lastObjStickyNote[cvjs_active_floorplan_div_nr]&&(jQuery(vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].node).qtip("hide"),!cvjs_supressPopUpModal||cvjs_standardHighLightColors?vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_StickyNotes):vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].data("linked")?vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_linked):vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_unlinked),
lastObjStickyNote[cvjs_active_floorplan_div_nr]=-1);0<=popObjStickyNote[cvjs_active_floorplan_div_nr]&&(jQuery(vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].node).qtip("hide"),!cvjs_supressPopUpModal||cvjs_standardHighLightColors?vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_StickyNotes):vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].data("linked")?vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_linked):
vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_unlinked),popObjStickyNote[cvjs_active_floorplan_div_nr]=-1)}
function cvjs_hidePop(){try{if(0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]){jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].node).qtip("hide");if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors){var a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),b="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id");jQuery(b).attr(defaultColor)}else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("linked")?
(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),b="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(b).attr(defaultColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),b="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(b).attr(defaultColor_unlinked));cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1}0<=cvjs_popObj&&(jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].node).qtip("hide"),
!cvjs_supressPopUpModal||cvjs_standardHighLightColors?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),b="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(b).attr(defaultColor)):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),b="#"+jQuery('[cvjs\\:node="'+
a+'"]').attr("id"),jQuery(b).attr(defaultColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),b="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(b).attr(defaultColor_unlinked)),cvjs_popObj[cvjs_active_floorplan_div_nr]=-1)}catch(c){return c}return!0}
function cvjs_redrawPop(){if(0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]){if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors){var a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node");a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id");jQuery(a).attr(selectColor)}else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor_unlinked));cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1;try{cvjs_NoObjectSelected()}catch(b){}}if(0<=cvjs_popObj){!cvjs_supressPopUpModal||cvjs_standardHighLightColors?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor)):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(selectColor_unlinked));cvjs_popObj[cvjs_active_floorplan_div_nr]=-1;try{cvjs_NoObjectSelected()}catch(b){}}}function cvjs_hideOnlyPop(){hideOnlyPop()}
function hideOnlyPop(){vqRoomMouseSelect=!1;if(0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&cvjs_lastObj[cvjs_active_floorplan_div_nr]<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length){jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].node).qtip("hide");if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors)if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("defaultcolor").toString().indexOf("undefined")){var a=
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node");a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id");jQuery(a).attr(defaultColor)}else a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("defaultcolor"));else cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("linked")?
(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_unlinked));cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1;try{cvjs_NoObjectSelected()}catch(b){}}if(0<=cvjs_popObj[cvjs_active_floorplan_div_nr]&&
cvjs_popObj[cvjs_active_floorplan_div_nr]<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length){jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].node).qtip("hide");!cvjs_supressPopUpModal||cvjs_standardHighLightColors?-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("defaultcolor").toString().indexOf("undefined")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("defaultcolor"))):cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("linked")?(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),
a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_linked)):(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor_unlinked));cvjs_popObj[cvjs_active_floorplan_div_nr]=-1;try{cvjs_NoObjectSelected()}catch(b){}}}
function hideOnlyStickyNote(a){a=lastObjStickyNote[cvjs_active_floorplan_div_nr]==popObjStickyNote[cvjs_active_floorplan_div_nr];cvjs_debug&&console.log("before branch");cvjs_debug_stickynotes&&(cvjs_debug&&console.log("hide pop"),hidePopStickyNotes());if(0<=lastObjStickyNote[cvjs_active_floorplan_div_nr]){jQuery(vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].node.qtip).is(":visible")&&jQuery(vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].node).qtip("hide");StickNoteEditMode=
!1;var b=vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].data("text");cvjs_setStickyNoteText(b);b='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].data("id")+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].data("name")+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="cvjs_move_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.MoveNote+"',1,"+lastObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.EditNote+"',2,"+lastObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="cvjs_delete_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.DeleteNote+"',3,"+lastObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+lastObjStickyNote[cvjs_active_floorplan_div_nr]+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MinimizeNote+
"',4,"+lastObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-times"></i></td></tr></table>';jQuery(vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].node).qtip({content:{text:cvjsStickyNoteBody,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});jQuery(vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].node).qtip("hide");cvjs_supressPopUpModal?vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].data("linked")?
vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_linked):vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_unlinked):vqStickyNotes[lastObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_StickyNotes);lastObjStickyNote[cvjs_active_floorplan_div_nr]=-1;try{cvjs_NoObjectSelected()}catch(c){}}if(0<=popObjStickyNote[cvjs_active_floorplan_div_nr]&&!a){jQuery(vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]+1].node).qtip("hide");
StickNoteEditMode=!1;b=vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].data("text");cvjs_setStickyNoteText(b);b='<table width="100%"><tr><td cols="3"><div class="cvjs_modal_header_stickynote_info_2">#'+vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].data("id")+'</div><td class="cvjs_modal_header_stickynote_info_2_background"></td><td class="cvjs_modal_header_1" >'+vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].data("name")+'</td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon1" onclick="cvjs_move_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.MoveNote+"',1,"+popObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-arrows"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon2" onclick="cvjs_edit_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.EditNote+"',2,"+popObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-edit"></i></td><td class="cvjs_modal_header_sticky_note_info_1" id="stickyNoteIcon3" onclick="cvjs_delete_note();" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+
languageTable.languages[cvjs_currentLanguage].StickyNote.DeleteNote+"',3,"+popObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-trash-o"></i></td><td class="cvjs_modal_header_sticky_note_info_2" id="stickyNoteIcon4" onclick="hideOnlyStickyNote('+popObjStickyNote[cvjs_active_floorplan_div_nr]+');" onmouseout="javascript:tip[cvjs_active_floorplan_div_nr].hide();" onmouseover="javascript:cvjs_showStickynoteTip(\''+languageTable.languages[cvjs_currentLanguage].StickyNote.MinimizeNote+
"',4,"+popObjStickyNote[cvjs_active_floorplan_div_nr]+');" ><i class="fa fa-times"></i></td></tr></table>';jQuery(vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].node).qtip({content:{text:cvjsStickyNoteBody,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});cvjs_supressPopUpModal?vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].data("linked")?vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_linked):
vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_unlinked):vqStickyNotes[popObjStickyNote[cvjs_active_floorplan_div_nr]].attr(defaultColor_StickyNotes);popObjStickyNote[cvjs_active_floorplan_div_nr]=-1;try{cvjs_NoObjectSelected()}catch(c){}}else popObjStickyNote[cvjs_active_floorplan_div_nr]=-1}
function closeAllPopups(a){cvjs_debug&&console.log("closeAllPopups");for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])b!=a&&jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip("hide")}function closeAllPopupsStickyNotes(a){for(var b in vqStickyNotes)b!=a&&jQuery(vqStickyNotes[b].node).qtip("hide")}
function pick_space(a){jQuery("#SearchResultsPanel").hide();cvjs_change_space(a);var b=findRoom(a);if(b){cvjs_debug&&console.log("pickspace");jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip("show");cvjs_popObj[cvjs_active_floorplan_div_nr]=b;a=!1;try{a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("qtip")}catch(c){console.log(c+" QTIP not defined")}a||(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("qtip",!0),jQuery("#hideOnlyPop_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id_link")).on("click",
function(){hideOnlyPop()}),jQuery("#cvjs_popupTitleClick_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id_link")).on("click",function(){cvjs_popupTitleClick(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("angular"))||(jQuery("#my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",
function(){my_own_clickmenu1(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),jQuery("#my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){my_own_clickmenu2(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),jQuery("#cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){cvjs_zoomHere()}))}}
function cvjs_pick_space(a){cvjs_change_space(a);var b=findRoom(a);if(b){cvjs_debug&&console.log("cv pickspace");jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node).qtip("show");cvjs_popObj[cvjs_active_floorplan_div_nr]=b;a=!1;try{a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("qtip")}catch(c){console.log(c+" QTIP not defined")}a||(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("qtip",!0),jQuery("#hideOnlyPop_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id_link")).on("click",
function(){hideOnlyPop()}),jQuery("#cvjs_popupTitleClick_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id_link")).on("click",function(){cvjs_popupTitleClick(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),0!=cvjs_frontEndHandlerType.indexOf("reactjs")&&0!=cvjs_frontEndHandlerType.indexOf("vuejs")&&0!=cvjs_frontEndHandlerType.indexOf("angular"))||(jQuery("#my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",
function(){my_own_clickmenu1(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),jQuery("#my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){my_own_clickmenu2(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"))}),jQuery("#cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")).on("click",function(){cvjs_zoomHere()}))}}
var cvjs_lastObj=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],cvjs_popObj=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],lastObjHyperlink=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],popObjHyperlink=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],lastObjStickyNote=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],spaceIdStickyNote=[-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],popObjStickyNote=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];function findRoom(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a)return b;return-1}function findStickyNotes(a){for(var b in vqStickyNotes)if(vqStickyNotes[b].data("id")==a)return b;return-1}
function findUrl(a){for(var b in vqURLs)if(vqURLs[b].data("id")==a)return b;return-1}function findRoomById(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a)return b;return-1}
function findIdFromNode(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node")==a)return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id");return-1}function cvjs_zoomHere(){zoomHere()}
function zoomHere(){if(!cvjs_Community_Version&&0<=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&cvjs_lastObj[cvjs_active_floorplan_div_nr]<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length){jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].node).qtip("hide");0<=cvjs_popObj&&jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_popObj[cvjs_active_floorplan_div_nr]].node).qtip("hide");bbox=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][cvjs_lastObj[cvjs_active_floorplan_div_nr]].getBBox();
var a=viewBoxWidth[cvjs_active_floorplan_div_nr]/viewBoxHeight[cvjs_active_floorplan_div_nr],b=bbox.x+bbox.width/2,c=bbox.y+bbox.height/2;if(bbox.width>bbox.height){var d=2*bbox.width;var e=d/a}else e=2*bbox.height,d=e*a;viewBox[cvjs_active_floorplan_div_nr].X=b-d/2;viewBox[cvjs_active_floorplan_div_nr].Y=c-e/2;viewBoxWidth[cvjs_active_floorplan_div_nr]=d;viewBoxHeight[cvjs_active_floorplan_div_nr]=e;a=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+
" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(a);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];cvjs_lastObj[cvjs_active_floorplan_div_nr]=-1}}function zoomHere_Factor(a,b){cvjs_zoomHere_Factor(a,b)}function cvjs_zoomHere_ObjectId(a,b){a=findFixtureIndex(a);0==b&&(b=100);cvjs_zoomHere_Factor(a,1/b*100)}
function cvjs_zoomHere_ObjectIdDiv(a,b,c){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c+"_svg");cvjs_debug&&console.log(" IdDiv active floorplan "+cvjs_active_floorplan_div_nr+"  "+c);c=findFixtureIndex(a);if(-1!=c){var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node");cvjs_debug&&console.log("vqid="+d+" rm= "+c+"  "+a+" "+cvjs_active_floorplan_div_nr);0==b&&(b=100);cvjs_zoomHere_Factor(d,1/b*100)}}
function cvjs_zoomHere_Factor(a,b){cvjs_debug&&console.log("zoomHere "+a+"  "+b);cvjs_debug&&console.log(" cvjs_active_floorplan_div_nr "+cvjs_active_floorplan_div_nr+"  length "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length);for(var c=0;c<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length;c++)if(a==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node")){cvjs_debug&&console.log("!!!inside ZoomHere "+a+"  "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("node"));
bbox=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].getBBox();var d=viewBoxWidth[cvjs_active_floorplan_div_nr]/viewBoxHeight[cvjs_active_floorplan_div_nr],e=bbox.x+bbox.width/2,f=bbox.y+bbox.height/2;if(bbox.width>bbox.height){var g=bbox.width*b;var h=g/d}else h=bbox.height*b,g=h*d;viewBox[cvjs_active_floorplan_div_nr].X=e-g/2;viewBox[cvjs_active_floorplan_div_nr].Y=f-h/2;viewBoxWidth[cvjs_active_floorplan_div_nr]=g;viewBoxHeight[cvjs_active_floorplan_div_nr]=h;d=jQuery.parseJSON('{"viewBox" : "'+
viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(d);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr]}}
function cvjs_zoomHere_Handle(a,b,c){cvjs_debug&&console.log("zoomHere Handle "+a+"  "+b);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(c+"_svg");var d=!1,e={};jQuery(".cvjs_block").each(function(){var a=jQuery(this).attr("id"),b="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]";jQuery("#"+a).parents(b).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(e[a]||(e[a]=!0))});for(var f in e)try{var g="#"+f,h="";jQuery(g).each(function(){jQuery.each(this.attributes,function(){if(this.specified&&
(h="cvjs:handle"==this.name.toString().toLowerCase()?this.value:"",0==h.indexOf(a))){cvjs_debug&&console.log("!!!inside ZoomHere "+a+" "+g+"  "+f);var c=cvjs_rPaper[cvjs_active_floorplan_div_nr].select(g).getBBox(),e=viewBoxWidth[cvjs_active_floorplan_div_nr]/viewBoxHeight[cvjs_active_floorplan_div_nr],m=c.x+c.width/2,p=c.y+c.height/2;if(c.width>c.height){c=c.width*b;var n=c/e}else n=c.height*b,c=n*e;viewBox[cvjs_active_floorplan_div_nr].X=m-c/2;viewBox[cvjs_active_floorplan_div_nr].Y=p-n/2;viewBoxWidth[cvjs_active_floorplan_div_nr]=
c;viewBoxHeight[cvjs_active_floorplan_div_nr]=n;e=jQuery.parseJSON('{"viewBox" : "'+viewBox[cvjs_active_floorplan_div_nr].X+" "+viewBox[cvjs_active_floorplan_div_nr].Y+" "+viewBoxWidth[cvjs_active_floorplan_div_nr]+" "+viewBoxHeight[cvjs_active_floorplan_div_nr]+'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(e);zoomScale=viewBoxWidth[cvjs_active_floorplan_div_nr]/rpWidth[cvjs_active_floorplan_div_nr];return d=!0}})})}catch(k){console.log(k)}return d?!0:!1}
function cvjs_directDownloadStickyNotesRedlines(a,b){a=cvjs_getStickyNotesRedline();a=new Blob([a],{type:"text/javascript"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,b);else{var c=window.document.createElement("a");c.href=window.URL.createObjectURL(a);c.download=b;document.body.appendChild(c);c.click();document.body.removeChild(c)}}
function cvjs_clickElem(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}
function cvjs_directUploadStickyNotesRedlines(a){var b=document.createElement("input");b.type="file";b.style.display="none";b.onchange=function(a){if(a=a.target.files[0]){var c=new FileReader;c.onload=function(a){a=a.target.result;cvjs_clearCurrentRedline(floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_addInlineScript(a);stickynotesRedlines_loaded=!0;cvjs_loadStickyNotesRedlinesTimer();document.body.removeChild(b)};c.readAsText(a)}};document.body.appendChild(b);cvjs_clickElem(b)}
var cvjs_displayMapsStatus=!1;
function display_maps(){cvjs_displayMapsStatus=!cvjs_displayMapsStatus;console.log("cvjs_displayMapsStatus "+cvjs_displayMapsStatus);cvjs_displayMapsStatus?jQuery("#datamaps_form").show():jQuery("#datamaps_form").hide();jQuery("#cvjs_displayData_switch").prop("checked")?jQuery("#datamaps_form").css("left",40).css("top",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height()-197):jQuery("#datamaps_form").css("left",
40).css("top",jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position().top+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height()-120)}var cvjs_currentMapNumber=0;
function cvjs_change_datamaps(a){0==a&&(jQuery("#cvjs_display_selection_1").show(),jQuery("#cvjs_display_selection_2").hide(),jQuery("#cvjs_display_selection_3").hide(),jQuery("#cvjs_display_selection_4").hide());1==a&&(jQuery("#cvjs_display_selection_1").hide(),jQuery("#cvjs_display_selection_2").show(),jQuery("#cvjs_display_selection_3").hide(),jQuery("#cvjs_display_selection_4").hide());2==a&&(jQuery("#cvjs_display_selection_1").hide(),jQuery("#cvjs_display_selection_2").hide(),jQuery("#cvjs_display_selection_3").show(),
jQuery("#cvjs_display_selection_4").hide());3==a&&(jQuery("#cvjs_display_selection_1").hide(),jQuery("#cvjs_display_selection_2").hide(),jQuery("#cvjs_display_selection_3").hide(),jQuery("#cvjs_display_selection_4").show());null!=cvjs_dataMapsHeaderArray?jQuery("#drop_select_datamaps").html(cvjs_dataMapsHeaderArray[a]+'<b class="caret"></b>'):jQuery("#drop_select_datamaps").html(languageTable.languages[cvjs_currentLanguage].DataMaps.Map[a]+'<b class="caret"></b>');cvjs_ParseDisplayDataMaps(a);cvjs_currentMapNumber=
a}function cvjs_hide_image_note(a){jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide();tip[cvjs_active_floorplan_div_nr].hide()}
function cvjs_delete_image(a,b){b=floorplan_div_Array[cvjs_active_floorplan_div_nr];jQuery("#cvjs_floorPlanInsertImageEncapsulate_"+b).hide();tip[cvjs_active_floorplan_div_nr].hide();vqImageNotes[currentImageNoteId].data("deleted",!0);vqImageNotes[currentImageNoteId].attr({transform:"S0.001",opacity:"0.01"});cvjs_graphicalObjectOnChange("Delete","ImageLink",a)}function cvjs_setGlobalSpaceImageObjectScaleFactor(a){cvjs_globalScaleNote=a}
var cvjs_dgnWorkSpace=!1,cvjs_dgnWorkSpaceLocation="",cvjs_dgnWorkSpaceServerLocation="";
function cvjs_setDgnWorkSpace(a,b){cvjs_dgnWorkSpace=!0;cvjs_dgnWorkSpaceLocation=a;cvjs_debug&&console.log(a+"  path"+b+"XX");""!=b?cvjs_dgnWorkSpaceServerLocation=b:(0<cvjs_dgnWorkSpaceLocation.lastIndexOf("/")?(a=cvjs_dgnWorkSpaceLocation.lastIndexOf("/",cvjs_dgnWorkSpaceLocation.lastIndexOf("/")-1),cvjs_dgnWorkSpaceServerLocation=cvjs_dgnWorkSpaceLocation.substring(0,a)):0<cvjs_dgnWorkSpaceLocation.lastIndexOf("\\")?(a=cvjs_dgnWorkSpaceLocation.lastIndexOf("\\",cvjs_dgnWorkSpaceLocation.lastIndexOf("\\")-
1),cvjs_dgnWorkSpaceServerLocation=cvjs_dgnWorkSpaceLocation.substring(0,a)):cvjs_dgnWorkSpaceServerLocation=cvjs_dgnWorkSpaceLocation,cvjs_debug&&console.log(cvjs_dgnWorkSpaceLocation+"   "+cvjs_dgnWorkSpaceServerLocation));cvjs_conversion_addAXconversionParameter("wksp",cvjs_dgnWorkSpaceLocation);cvjs_conversion_addAXconversionParameter("spath",cvjs_dgnWorkSpaceServerLocation)}function cvjs_setDgnWorkSpaceServerPath(a){cvjs_dgnWorkSpaceServerLocation=a}
function cvjs_addSingleSpaceObject(a,b,c,d,e,f,g,h,k,l,m){try{a.lastIndexOf("_svg")!=a.length-4&&(a+="_svg");cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_hidePop();var p=cvjs_currentMaxSpaceNodeId();p++;a=Node_underbar+p;cvjs_setCurrentNodeValues(a,b,c,d,e,f,g,h,k,l,!0,0,0,1,1,0,"");var n=cvjs_rPaper[cvjs_active_floorplan_div_nr].path(m).attr({fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,n);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],
a)}catch(q){console.log(q)}}
function cvjs_ObjectBoundingBox_ScreenCoord(a){a=findRoom(a);if(0<=a)try{var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a],c=b.getBBox();console.log(b+"  "+c.x+" "+c.y+" "+c.x2+"  "+c.y2);var d=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(),e=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();var f=d/viewBoxWidth[cvjs_active_floorplan_div_nr],g=e/viewBoxHeight[cvjs_active_floorplan_div_nr];
global_scale=f<g?f:g}catch(h){return console.log("cvjs_ObjectBoundingBox_ScreenCoord: "+h),null}else return null}function cvjs_highlightSpaceObjectDirect(a,b,c){a=findFixtureIndex(b);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor",c);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(c)}
function cvjs_clearHighlightSpaceObjectDirect(a,b){a=findFixtureIndex(b);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor","undefined");a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node");a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id");jQuery(a).attr(defaultColor)}
function cvjs_clearAllHighlightSpaceObjectDirect(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("defaultcolor","undefined"),a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node"),a="#"+jQuery('[cvjs\\:node="'+a+'"]').attr("id"),jQuery(a).attr(defaultColor)}
function cvjs_modifySpaceObjectDirectXY(a,b,c,d,e,f,g,h,k){try{var l=findFixtureIndex(b);if(0>l)return!1;cvjs_addSpaceDWGFlag=cvjs_addSpaceTextArrayFlag=!1;cvjs_addSpaceScaleFactor=1;cvjs_customSvgImagePath=c;null!=d&&(cvjs_addSpaceTextArrayFlag=!0,cvjs_addSpaceTextArray=d);null!=e&&(cvjs_addSpaceScaleFactor=e);null!=f&&(cvjs_textStyles=f);null!=g&&(cvjs_scaleText=g);null!=h&&(cvjs_hexColorText=h);null!=k&&(cvjs_leftFactor=k);var m=findNodeFromId(b);console.log(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("svgy"));
console.log(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("translatey"));cvjs_coreModifySpaceObjectDirectXY(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("svgx"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("svgy"),m,b);return!0}catch(p){console.log("cvjs_modifySpaceObjectDirectXY error: "+p)}}
function cvjs_coreModifySpaceObjectDirectXY(a,b,c,d){try{var e=1;e=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr]>actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]?(actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])/600:(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr])/600;cvjs_removeHandleFunc_FixedRectangle();var f=20*cvjs_addSpaceScaleFactor;lastX_r=e*f*global_scale;lastY_r=
e*f*global_scale;0==cvjs_customSvgImagePath.length&&(lastY_r=0);var g=e*f*.25*global_scale;tPath_r="M"+a+","+b;if(cvjs_addSpaceTextArrayFlag){var h=cvjs_addSpaceTextArray.length;var k=lastY_r+g*h;tPath_r+="h"+lastX_r/global_scale+"v"+k/global_scale+"h"+-lastX_r/global_scale+"v"+(-k/global_scale+" Z")}else tPath_r+="h"+lastX_r/global_scale+"v"+lastY_r/global_scale+"h"+-lastX_r/global_scale+"v"+(-lastY_r/global_scale+" Z");cvjs_debug&&console.log(tPath_r);document.getElementById("cv_"+c).setAttribute("d",
tPath_r);document.getElementById("cv_"+c+"_image").setAttribute("href",cvjs_customSvgImagePath);document.getElementById("cv_"+c+"_image").setAttribute("x",a);document.getElementById("cv_"+c+"_image").setAttribute("y",b);document.getElementById("cv_"+c+"_image").setAttribute("width",e*f*.9);document.getElementById("cv_"+c+"_image").setAttribute("height",e*f*.9);var l=findFixtureIndex(d);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("translatex",0);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][l].data("translatey",
0);jQuery("#cvjs_"+d).attr({transform:"translate(0,0)"});e={"text-font":"Dialog","font-family":"Dialog","font-size":"7pt","text-anchor":"start","font-weight":"normal","font-style":"italic",stroke:"#88539B",fill:"#88539B"};for(d=h;3>d;d++)cvjs_addSpaceTextArray[d]="",cvjs_textStyles[d]=e,cvjs_hexColorText[d]="#FFFFFF",cvjs_scaleText[d]=.1;if(cvjs_addSpaceTextArrayFlag)for(b+=lastY_r/global_scale,e=a+lastX_r/global_scale*cvjs_leftFactor,d=0;3>d;d++){console.log("i="+d+"  "+cvjs_addSpaceTextArray[d]+
"  "+b+"  "+a);if(0==d){var m=g*h/global_scale*cvjs_scaleText[d];b+=m;document.getElementById("cv_"+c+"_text1").setAttribute("x",e);document.getElementById("cv_"+c+"_text1").setAttribute("y",b);document.getElementById("cv_"+c+"_text1").textContent=cvjs_addSpaceTextArray[d];for(var p="",n=0;n<cvjs_textStyles[d].length;n++)p+=cvjs_textStyles[d][n]+"; ";p+="font-size:"+m;document.getElementById("cv_"+c+"_text1").setAttribute("style",p);var q=m/15;document.getElementById("cv_"+c+"_text1").setAttribute("stroke-width",
q);document.getElementById("cv_"+c+"_text1").setAttribute("stroke",cvjs_hexColorText[d]);document.getElementById("cv_"+c+"_text1").setAttribute("fill",cvjs_hexColorText[d]);jQuery("#cv_"+c+"_text1").css("pointer-events","none")}if(1==d){m=g*h/global_scale*cvjs_scaleText[d];b+=1.05*m;document.getElementById("cv_"+c+"_text2").setAttribute("x",e);document.getElementById("cv_"+c+"_text2").setAttribute("y",b);document.getElementById("cv_"+c+"_text2").textContent=cvjs_addSpaceTextArray[d];p="";for(n=0;n<
cvjs_textStyles[d].length;n++)p+=cvjs_textStyles[d][n]+"; ";p+="font-size:"+m;document.getElementById("cv_"+c+"_text2").setAttribute("style",p);q=m/15;document.getElementById("cv_"+c+"_text2").setAttribute("stroke-width",q);document.getElementById("cv_"+c+"_text2").setAttribute("stroke",cvjs_hexColorText[d]);document.getElementById("cv_"+c+"_text2").setAttribute("fill",cvjs_hexColorText[d]);jQuery("#cv_"+c+"_text2").css("pointer-events","none")}if(2==d){m=g*h/global_scale*cvjs_scaleText[d];b+=1.05*
m;document.getElementById("cv_"+c+"_text3").textContent=cvjs_addSpaceTextArray[d];document.getElementById("cv_"+c+"_text3").setAttribute("x",e);document.getElementById("cv_"+c+"_text3").setAttribute("y",b);p="";for(n=0;n<cvjs_textStyles[d].length;n++)p+=cvjs_textStyles[d][n]+"; ";p+="font-size:"+m;document.getElementById("cv_"+c+"_text3").setAttribute("style",p);q=m/15;document.getElementById("cv_"+c+"_text3").setAttribute("stroke-width",q);document.getElementById("cv_"+c+"_text3").setAttribute("stroke",
cvjs_hexColorText[d]);document.getElementById("cv_"+c+"_text3").setAttribute("fill",cvjs_hexColorText[d]);jQuery("#cv_"+c+"_text3").css("pointer-events","none")}}}catch(r){console.log("cvjs_coreModifySpaceObjectDirectXY error: "+r)}}
function cvjs_moveSpaceObjectDirectXY(a,b,c,d,e){a=findFixtureIndex(b);if(0>a)return!1;if(0==c){var f=d-cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgx"),g=e-cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgy");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgx",d);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgy",e);var h=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatex"),k=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatey");
f=h+f;g=k+g;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatex",f);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatey",g);jQuery("#cvjs_"+b).attr({transform:"translate("+f+","+g+")"})}1==c&&(c=multiPages[cvjs_active_floorplan_div_nr].currentPage,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("dwgx",d),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("dwgy",e),d=cvjs_drawingCoordinates[c].SVG.lowerLeft.x+(d-cvjs_drawingCoordinates[c].DWG.lowerLeft.x)/
(cvjs_drawingCoordinates[c].DWG.upperRight.x-cvjs_drawingCoordinates[c].DWG.lowerLeft.x)*(cvjs_drawingCoordinates[c].SVG.upperRight.x-cvjs_drawingCoordinates[c].SVG.lowerLeft.x),e=cvjs_drawingCoordinates[c].SVG.lowerLeft.y+(e-cvjs_drawingCoordinates[c].DWG.lowerLeft.y)/(cvjs_drawingCoordinates[c].DWG.upperRight.y-cvjs_drawingCoordinates[c].DWG.lowerLeft.y)*(cvjs_drawingCoordinates[c].SVG.upperRight.y-cvjs_drawingCoordinates[c].SVG.lowerLeft.y),f=d-cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgx"),
g=e-cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgy"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgx",d),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("svgy",e),h=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatex"),k=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatey"),f=h+f,g=k+g,cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatex",f),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translatey",
g),jQuery("#cvjs_"+b).attr({transform:"translate("+f+","+g+")"}));return!0}function cvjs_getSpaceObjectDirectXYCoord(a,b,c){a=[];b=findFixtureIndex(b);return 0>b?null:0==c?(a.x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("svgx"),a.y=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("svgy"),a):1==c?(a.x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("dwgx"),a.y=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("dwgy"),a):null}
function cvjs_deleteSpaceObjectDirectXY(a,b){a=findFixtureIndex(b);if(0>a)return!1;findNodeFromId(b);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("deleted",!0);jQuery("#cvjs_"+b).remove();return!0}
function cvjs_allSpaceObjectsOn(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(show),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("displaySpaceObject","on"),a="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node")+"_image",jQuery(a).show()}
function cvjs_allSpaceObjectsOff(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].attr(hide),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("displaySpaceObject","off"),a="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node")+"_image",jQuery(a).hide()}function cvjs_setSpaceObjectsDefaultLayer(a,b){cvjs_currentNode_layer=b}
function cvjs_getSpaceObjectDefaultLayer(a){return cvjs_currentNode_layer}function cvjs_getLayerForSpaceObject(a,b){for(var c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")==b)return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("layer");return-1}function cvjs_getLayerOnSpaceObject(a,b){cvjs_getLayerForSpaceObject(a,b)}
function cvjs_setSpaceObjectOnLayer(a,b,c){a=findFixtureIndex(b);if(0>a)return!1;findNodeFromId(b);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("layer",c);return!0}
function cvjs_setSpaceObjectOnOff(a,b,c){a=findFixtureIndex(b);if(0>a)return!1;0==c.toLowerCase().indexOf("on")&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(show),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("displaySpaceObject","on"),b="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node")+"_image",jQuery(b).show());0==c.toLowerCase().indexOf("off")&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].attr(hide),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("displaySpaceObject",
"off"),b="#cv_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node")+"_image",jQuery(b).hide());return!0}function cvjs_returnAllSpaceObjectsOnLayer(a,b){a=[];for(var c in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("layer")==b&&(a[a.length]=d)}return a}
function cvjs_spaceObjectLayerOnOff(a,b,c){b=cvjs_returnAllSpaceObjectsOnLayer(a,b);for(var d=0;d<b.length;d++)cvjs_setSpaceObjectOnOff(a,b[d],c)}
function cvjs_returnActiveSpaceObjects(a){a=cvjs_getSpaceObjectIdList();for(var b=[],c=0;c<a.length;c++){var d=findFixtureIndex(a[c]);console.log(d+" "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("displaySpaceObject"));0>d||"on"==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("displaySpaceObject")&&(b[b.length]=a[c])}return b}
function cvjs_returnSpaceObjectClicked(){try{var a=cvjs_idObjectClicked();cvjs_NodeObjectClicked();var b=findFixtureIndex(a),c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node.outerHTML;c=c.substring(c.indexOf("d=")+3);c=c.substring(0,c.indexOf('"'));cvjs_debug&&console.log(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b]);var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group");void 0==d&&(d="undefined");var e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("tags");
void 0==e&&(e="undefined");var f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");-1<f.indexOf("cv_")&&(f=f.substring(3));var g=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("area");void 0==g&&(g="");var h={path:c,tags:e,node:f,area:g,outerhtml:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("outerhtml"),occupancy:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("occupancy"),name:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name"),
type:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type"),id:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"),defaultcolor:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("defaultcolor"),layer:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("layer"),group:d,linked:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("linked"),attributes:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributes"),attributeStatus:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributeStatus"),
displaySpaceObjects:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("displaySpaceObject"),translate_x:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("translate_x"),translate_y:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("translate_y"),scale_x:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("scale_x"),scale_y:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("scale_y"),rotate:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("rotate"),
transform:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("transform")};cvjs_debug&&console.log("return space direct "+h.id+" "+h.layer);return h}catch(k){console.log("cvjs_returnSpaceObjectClicked: "+k)}}
function cvjs_returnAllSpaceObjects(){try{var a=JSON.parse('{ "SpaceObjects" :[]}'),b;for(b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){var c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node.outerHTML;c=c.substring(c.indexOf("id=")+4);c=c.substring(0,c.indexOf('"'));if(-1<c.indexOf("_group")){var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].node.outerHTML;c=d.substring(d.indexOf(" d=")+4);c=c.substring(0,c.indexOf('"'));-1<d.indexOf("_group_loading")&&(d=
d.substring(d.indexOf("_group_loading")),d=d.substring(d.indexOf(">")+1),d=d.slice(0,-4));var e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("group");void 0==e&&(e="undefined");var f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("tags");void 0==f&&(f="undefined");var g=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node");-1<g.indexOf("cv_")&&(g=g.substring(3));var h=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("area");void 0==
h&&(h="");var k={path:c,tags:f,node:g,area:h,outerhtml:d,occupancy:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("occupancy"),name:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name"),type:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("type"),id:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id"),defaultcolor:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("defaultcolor"),layer:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("layer"),
group:e,linked:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("linked"),attributes:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributes"),attributeStatus:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("attributeStatus"),displaySpaceObjects:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("displaySpaceObject"),translate_x:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("translate_x"),translate_y:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("translate_y"),
scale_x:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("scale_x"),scale_y:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("scale_y"),rotate:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("rotate"),transform:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("transform")};a.SpaceObjects.push(k)}}return a}catch(l){console.log(l)}}
function cvjs_returnSpaceObjectID(a){a=findFixtureIndex(a);var b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node.outerHTML,c=b.substring(b.indexOf(" d=")+4);c=c.substring(0,c.indexOf('"'));-1<b.indexOf("_group_loading>-1")&&(b=b.substring(b.indexOf("_group_loading")),b=b.substring(b.indexOf(">")),b=b.slice(0,-4));var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("group");void 0==d&&(d="undefined");var e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("tags");
void 0==e&&(e="undefined");var f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node");-1<f.indexOf("cv_")&&(f=f.substring(3));var g=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("area");void 0==g&&(g="");a={path:c,tags:e,node:f,area:g,outerhtml:b,occupancy:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("occupancy"),name:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("name"),type:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("type"),
id:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"),defaultcolor:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor"),layer:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("layer"),group:d,linked:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("linked"),attributes:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("attributes"),attributeStatus:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("attributeStatus"),
displaySpaceObjects:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("displaySpaceObject"),translate_x:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translate_x"),translate_y:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("translate_y"),scale_x:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("scale_x"),scale_y:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("scale_y"),rotate:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("rotate"),
transform:cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("transform")};cvjs_debug&&console.log("return space object ID "+a.id+" "+a.layer);return a}
function cvjs_setSpaceObjectDirect(a){console.log(" cvjs_setSpaceObjectDirect "+a.id+"  "+a.name+"  "+a.node+" length: "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length);for(var b=0;b<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length;b++){if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a.id)return console.log("NOTE: ID is in vqRooms "+a.id),!1;if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("name")==a.name)return console.log("NOTE: NAME is in vqRooms "+
a.name),!1;if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("node")==a.node)return console.log("NOTE: NODE is in vqRooms "+a.node),!1}var c=a.layer,d=!1;for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)c==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName&&(d=!0);d||(b="layer_"+c,layerTable[cvjs_active_floorplan_div_nr].layers[layerTable[cvjs_active_floorplan_div_nr].numberOfLayers]={layer:b,layerClass:b,layerName:c,status:"ON",layerBaseName:"",xRefFile:""},
layerTable[cvjs_active_floorplan_div_nr].numberOfLayers+=1);cvjs_currentNode_underbar=a.node;try{var e=jQuery('[cvjs\\:node="'+a.node+'"]').attr("id");console.log("original_path_id:"+e);void 0!=e&&(console.log("set original_path_id in loop:"+e),jQuery("#"+e).removeClass("cvjs_nodes").removeAttr("cvjs:node",a.node))}catch(f){console.log(f)}cvjs_setCurrentNodeValues(cvjs_currentNode_underbar,a.name,a.id,a.layer,a.group,a.attributes,a.attributeStatus,a.type,a.tags,a.occupancy,a.linked,a.translate_x,
a.translate_y,a.scale_x,a.scale_y,a.rotate,a.transform,a.area);c=cvjs_rPaper[cvjs_active_floorplan_div_nr].group().attr({id:"cv_"+cvjs_currentNode_underbar+"_group_loading"});e="#cv_"+cvjs_currentNode_underbar+"_group";jQuery("#cv_"+cvjs_currentNode_underbar+"_group_loading").html(a.outerhtml);jQuery(e).html();cvjs_addVqRoomsGraphics_newNode_polygon(cvjs_currentNode_underbar,c);cvjs_debug&&console.log(" set direct cvjs_currentNode_underbar "+cvjs_currentNode_underbar);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],
cvjs_currentNode_underbar);return!0}function cvjs_changeSpaceObjectLayer(a,b){a=findFixtureIndex(a);if(-1==a)return!1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("layer",b);return!0}function cvjs_changeSpaceObjectLinkStatus(a,b){a=findFixtureIndex(a);if(-1==a)return!1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("linked",b);return!0}
function cvjs_changeSpaceObjectName(a,b){a=findFixtureIndex(a);if(-1==a)return!1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("name",b);jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip("destroy");b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id_link",b);b='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")+
'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("name")+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+b+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("type")+"</h4></td></tr></table>";var c=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))c=c.replace("my_own_clickmenu1()",
"my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),c=c.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),c=c.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"));dual_hbody_flag&&(-1<=parseInt(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"))?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,
title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:hbody_2,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,
title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});return!0}
function cvjs_changeSpaceObjectType(a,b){a=findFixtureIndex(a);if(-1==a)return!1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("type",b);jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip("destroy");b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id_link",b);b='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+b+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("name")+
'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+b+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("type")+"</h4></td></tr></table>";var c=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))c=c.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),
c=c.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),c=c.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"));dual_hbody_flag&&(-1<=parseInt(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"))?jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:hbody_2,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});return!0}
function cvjs_changeSpaceObjectID(a,b){for(var c=0;c<vqRooms.lenght;c++)if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("id")==b)return!1;a=findFixtureIndex(a);if(-1==a)return!1;cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id",b);jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip("destroy");b=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id").replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id_link",
b);b='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+b+'">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("name")+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+b+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("type")+"</h4></td></tr></table>";c=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||
0==cvjs_frontEndHandlerType.indexOf("angular"))c=c.replace("my_own_clickmenu1()","my_own_clickmenu1_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),c=c.replace("my_own_clickmenu2()","my_own_clickmenu2_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id")),c=c.replace("cvjs_zoomHere()","cvjs_zoomHere_"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"));dual_hbody_flag&&(-1<=parseInt(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("id"))?
jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:hbody_2,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||
jQuery(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].node).qtip({content:{text:c,title:b},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});return!0}var selected_current_jsonStrucure;
function CADViewer_floorplan_methods_newVersion(){selected_current_jsonStrucure=cvjs_returnSpaceObjectClicked();jQuery("#cvjs_spaceobjectchangeLayerFromModal").val(selected_current_jsonStrucure.layer);jQuery("#cvjs_spaceobjectchangeIdFromModal").val(selected_current_jsonStrucure.id);jQuery("#cvjs_spaceobjectchangeTypeFromModal").val(selected_current_jsonStrucure.type)}
function CADViewer_floorplan_methods_2(a){selected_current_jsonStrucure=cvjs_returnSpaceObjectID(a);jQuery("#cvjs_spaceobjectchangeLayerFromModal").val(selected_current_jsonStrucure.layer);jQuery("#cvjs_spaceobjectchangeIdFromModal").val(selected_current_jsonStrucure.id);jQuery("#cvjs_spaceobjectchangeTypeFromModal").val(selected_current_jsonStrucure.type)}
var elementOriginalColor=[],elementOriginalFill=[],elementOriginalStroke=[],elementOriginalStrokeWidth=[],elementOriginalTag=[],elementOriginalFillOpacity=[],elementOriginalOpacity=[],myOverColor="#F00",myOverStroke="#F00",myOverStrokeWidth=6,myOverStrokeWidthFactor=4,myOverFill="#F00",myFillOpacity=.2,myOpacity=1,cvjs_handleToolTip=!0,cvjs_highlightHandleArray=[];
function cvjs_clearAllHighlightHandleObjectStyles(){for(var a=0;a<cvjs_highlightHandleArray.length;a++){var b=a;"text"==elementOriginalTag[b]?jQuery("#"+cvjs_highlightHandleArray[b]).css({fill:elementOriginalFill[b]}):"circle"==elementOriginalTag[b]?(jQuery("#"+cvjs_highlightHandleArray[b]).css({color:elementOriginalColor[b]}),jQuery("#"+cvjs_highlightHandleArray[b]).css({"stroke-width":elementOriginalStrokeWidth[b]}),jQuery("#"+cvjs_highlightHandleArray[b]).css({stroke:elementOriginalStroke[b]}),
jQuery("#"+cvjs_highlightHandleArray[b]).css({"fill-opacity":elementOriginalFillOpacity[b]})):(jQuery("#"+cvjs_highlightHandleArray[b]).css({color:elementOriginalColor[b]}),jQuery("#"+cvjs_highlightHandleArray[b]).css({"stroke-width":elementOriginalStrokeWidth[b]}),jQuery("#"+cvjs_highlightHandleArray[b]).css({stroke:elementOriginalStroke[b]}));jQuery("#"+cvjs_highlightHandleArray[b]).css({opacity:elementOriginalOpacity[b]})}}function cvjs_removeSingleHighlightHandleObjectStyles(a,b){}
function cvjs_HighlightHandle(a,b,c,d){0>a.indexOf("#")&&(a="#"+a);var e=!1,f="",g="";jQuery("[ cvjs\\:handle = '"+d+"']").each(function(){g=jQuery(this).attr("id");-1==g.indexOf("_clone")&&(f=g,e=!0)});e||jQuery("[ cvjs\\:bhandle = '"+d+"']").each(function(){g=jQuery(this).attr("id");-1==g.indexOf("_clone")&&(f=g,e=!0)});jQuery("#"+f).css("color");d=jQuery("#"+f).css("stroke-width");jQuery("#"+f).css("stroke");jQuery("#"+f).css("fill");jQuery("#"+f).css("fill-opacity");jQuery("#"+f).css("opacity");
c=jQuery("#"+f).get(0).tagName;0<d.indexOf("px")&&(d=d.substring(0,d.indexOf("px")));d=parseFloat(d)*b;"text"==c?jQuery("#"+f).css({fill:a}):"circle"==c?(jQuery("#"+f).css({color:a}),jQuery("#"+f).css({stroke:a}),jQuery("#"+f).css({"stroke-width":d}),jQuery("#"+f).css({"fill-opacity":myFillOpacity})):(jQuery("#"+f).css({color:a}),jQuery("#"+f).css({stroke:a}),jQuery("#"+f).css({"stroke-width":d}));jQuery("#"+f).css({opacity:myOpacity})}
function cvjs_HighlightHandleObjectStyles(a,b,c,d,e,f){cvjs_handleToolTip=d;0>a.indexOf("#")&&(a="#"+a);cvjs_debug&&console.log("cvjs_HighlightHandleObjectStyles "+e+"  "+f+"  "+a);d=!1;c=-1;for(f=0;f<cvjs_highlightHandleArray.length;f++)cvjs_highlightHandleArray[f]==e&&(d=!0,c=f);d||(c=cvjs_highlightHandleArray.length,cvjs_highlightHandleArray[c]=e,elementOriginalColor[c]=jQuery("#"+e).css("color"),elementOriginalStrokeWidth[c]=jQuery("#"+e).css("stroke-width"),elementOriginalStroke[c]=jQuery("#"+
e).css("stroke"),elementOriginalFill[c]=jQuery("#"+e).css("fill"),elementOriginalFillOpacity[c]=jQuery("#"+e).css("fill-opacity"),elementOriginalOpacity[c]=jQuery("#"+e).css("opacity"),elementOriginalTag[c]=jQuery("#"+e).get(0).tagName);d=elementOriginalStrokeWidth[c];0<d.indexOf("px")&&(d=d.substring(0,d.indexOf("px")));d=parseFloat(d)*b;"text"==elementOriginalTag[c]?jQuery("#"+e).css({fill:a}):"circle"==elementOriginalTag[c]?(jQuery("#"+e).css({color:a}),jQuery("#"+e).css({stroke:a}),jQuery("#"+
e).css({"stroke-width":d}),jQuery("#"+e).css({"fill-opacity":myFillOpacity})):(jQuery("#"+e).css({color:a}),jQuery("#"+e).css({stroke:a}),jQuery("#"+e).css({"stroke-width":d}));jQuery("#"+e).css({opacity:myOpacity})}
function cvjs_mouseenter_handleObjectStyles(a,b,c,d,e,f){cvjs_handleToolTip=d;0>a.indexOf("#")&&(a="#"+a);if(-1<e.indexOf("cv_Block")){var g=0,h={};jQuery("svg *").filter("[id^=cv_]").each(function(){var a=jQuery(this).attr("id");jQuery(this).attr("cvjs:bhandle")==f&&(h[g]=a,g++)});for(e=0;e<g;e++){d=h[e];var k=!1;c=-1;for(var l=0;l<cvjs_highlightHandleArray.length;l++)cvjs_highlightHandleArray[l]==d&&(k=!0,c=l);k||(c=cvjs_highlightHandleArray.length,cvjs_highlightHandleArray[c]=d,elementOriginalColor[c]=
jQuery("#"+d).css("color"),elementOriginalStrokeWidth[c]=jQuery("#"+d).css("stroke-width"),elementOriginalStroke[c]=jQuery("#"+d).css("stroke"),elementOriginalFill[c]=jQuery("#"+d).css("fill"),elementOriginalFillOpacity[c]=jQuery("#"+d).css("fill-opacity"),elementOriginalOpacity[c]=jQuery("#"+d).css("opacity"),elementOriginalTag[c]=jQuery("#"+d).get(0).tagName);k=elementOriginalStrokeWidth[c];0<k.indexOf("px")&&(k=k.substring(0,k.indexOf("px")));k=parseFloat(k)*b;"text"==elementOriginalTag[c]?cvjs_convertOrgToHex(elementOriginalFill[c])==
a.toLowerCase()?jQuery("#"+d).css({fill:"#0000ff"}):jQuery("#"+d).css({fill:a}):"circle"==elementOriginalTag[c]?(0==!cvjs_convertOrgToHex(elementOriginalFill[c]).indexOf("none")&&(cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+d).css({fill:"#0000ff"}):jQuery("#"+d).css({fill:a})),cvjs_convertOrgToHex(elementOriginalStroke[c])==a.toLowerCase()?jQuery("#"+d).css({stroke:"#0000ff"}):jQuery("#"+d).css({stroke:a}),cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?
jQuery("#"+d).css({color:"#0000ff"}):jQuery("#"+d).css({color:a}),jQuery("#"+d).css({"stroke-width":k}),jQuery("#"+d).css({"fill-opacity":myFillOpacity})):(0==!cvjs_convertOrgToHex(elementOriginalFill[c]).indexOf("none")&&(cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+d).css({fill:"#0000ff"}):jQuery("#"+d).css({fill:a})),cvjs_convertOrgToHex(elementOriginalStroke[c])==a.toLowerCase()?jQuery("#"+d).css({stroke:"#0000ff"}):jQuery("#"+d).css({stroke:a}),cvjs_convertOrgToHex(elementOriginalFill[c])==
a.toLowerCase()?jQuery("#"+d).css({color:"#0000ff"}):jQuery("#"+d).css({color:a}),jQuery("#"+d).css({"stroke-width":k}));jQuery("#"+d).css({opacity:myOpacity})}}else{k=!1;c=-1;for(l=0;l<cvjs_highlightHandleArray.length;l++)cvjs_highlightHandleArray[l]==e&&(k=!0,c=l);k||(c=cvjs_highlightHandleArray.length,cvjs_highlightHandleArray[c]=e,elementOriginalColor[c]=jQuery("#"+e).css("color"),elementOriginalStrokeWidth[c]=jQuery("#"+e).css("stroke-width"),elementOriginalStroke[c]=jQuery("#"+e).css("stroke"),
elementOriginalFill[c]=jQuery("#"+e).css("fill"),elementOriginalFillOpacity[c]=jQuery("#"+e).css("fill-opacity"),elementOriginalOpacity[c]=jQuery("#"+e).css("opacity"),elementOriginalTag[c]=jQuery("#"+e).get(0).tagName);k=elementOriginalStrokeWidth[c];0<k.indexOf("px")&&(k=k.substring(0,k.indexOf("px")));k=parseFloat(k)*b;"text"==elementOriginalTag[c]?cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+e).css({fill:"#0000ff"}):jQuery("#"+e).css({fill:a}):"circle"==elementOriginalTag[c]?
(0==!cvjs_convertOrgToHex(elementOriginalFill[c]).indexOf("none")&&(cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+e).css({fill:"#0000ff"}):jQuery("#"+e).css({fill:a})),cvjs_convertOrgToHex(elementOriginalStroke[c])==a.toLowerCase()?jQuery("#"+e).css({stroke:"#0000ff"}):jQuery("#"+e).css({stroke:a}),cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+e).css({color:"#0000ff"}):jQuery("#"+e).css({color:a}),jQuery("#"+e).css({"stroke-width":k}),jQuery("#"+
e).css({"fill-opacity":myFillOpacity})):(0==!cvjs_convertOrgToHex(elementOriginalFill[c]).indexOf("none")&&(cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+e).css({fill:"#0000ff"}):jQuery("#"+e).css({fill:a})),cvjs_convertOrgToHex(elementOriginalStroke[c])==a.toLowerCase()?jQuery("#"+e).css({stroke:"#0000ff"}):jQuery("#"+e).css({stroke:a}),cvjs_convertOrgToHex(elementOriginalFill[c])==a.toLowerCase()?jQuery("#"+e).css({color:"#0000ff"}):jQuery("#"+e).css({color:a}),jQuery("#"+
e).css({"stroke-width":k}));jQuery("#"+e).css({opacity:myOpacity})}}function cvjs_convertOrgToHex(a){if(0==a.indexOf("#"))return a;0==a.indexOf("rgb(")&&(a=a.substring(4),a=a.slice(0,-1),a=a.split(","),a="#"+cvjs_rgbToHex(a[0])+cvjs_rgbToHex(a[1])+cvjs_rgbToHex(a[2]));return a}function cvjs_rgbToHex(a){a=Number(a).toString(16);2>a.length&&(a="0"+a);return a}
function cvjs_mouseout_handleObjectStyles(a,b){cvjs_debug&&console.log("mouseout "+a+"  "+b);if(-1<a.indexOf("cv_Block")){var c=0,d={};jQuery("svg *").filter("[id^=cv_]").each(function(){var a=jQuery(this).attr("id");jQuery(this).attr("cvjs:bhandle")==b&&(d[c]=a,c++)});for(a=0;a<c;a++){for(var e=d[a],f=-1,g=0;g<cvjs_highlightHandleArray.length;g++)cvjs_highlightHandleArray[g]==e&&(f=g);"text"==elementOriginalTag[f]?jQuery("#"+e).css({fill:elementOriginalFill[f]}):"circle"==elementOriginalTag[f]?(0==
!cvjs_convertOrgToHex(elementOriginalFill[f]).indexOf("none")&&jQuery("#"+e).css({fill:elementOriginalFill[f]}),jQuery("#"+e).css({color:elementOriginalColor[f]}),jQuery("#"+e).css({"stroke-width":elementOriginalStrokeWidth[f]}),jQuery("#"+e).css({stroke:elementOriginalStroke[f]}),jQuery("#"+e).css({"fill-opacity":elementOriginalFillOpacity[f]})):(0==!cvjs_convertOrgToHex(elementOriginalFill[f]).indexOf("none")&&jQuery("#"+e).css({fill:elementOriginalFill[f]}),jQuery("#"+e).css({color:elementOriginalColor[f]}),
jQuery("#"+e).css({"stroke-width":elementOriginalStrokeWidth[f]}),jQuery("#"+e).css({stroke:elementOriginalStroke[f]}));jQuery("#"+e).css({opacity:elementOriginalOpacity[f]})}}else{cvjs_debug&&console.log("mouseout "+a+"  "+b);f=-1;for(g=0;g<cvjs_highlightHandleArray.length;g++)cvjs_highlightHandleArray[g]==a&&(f=g);"text"==elementOriginalTag[f]?jQuery("#"+a).css({fill:elementOriginalFill[f]}):"circle"==elementOriginalTag[f]?(jQuery("#"+a).css({color:elementOriginalColor[f]}),jQuery("#"+a).css({"stroke-width":elementOriginalStrokeWidth[f]}),
jQuery("#"+a).css({stroke:elementOriginalStroke[f]}),jQuery("#"+a).css({"fill-opacity":elementOriginalFillOpacity[f]})):(jQuery("#"+a).css({color:elementOriginalColor[f]}),jQuery("#"+a).css({"stroke-width":elementOriginalStrokeWidth[f]}),jQuery("#"+a).css({stroke:elementOriginalStroke[f]}));jQuery("#"+a).css({opacity:elementOriginalOpacity[f]})}}var cvjs_spacesSpecificHighlightLayer;
function cvjs_highlightSpace(a,b){var c=findFixtureIndex(a);a=a.replaceAll(".","_");if(-1==c)return-1;if(0<=c){cvjs_lastObj[cvjs_active_floorplan_div_nr]=c;if(void 0==jQuery("#cv_spacehighlight_"+a).attr("id")){try{var d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].toString();0<d.indexOf("path")||0<d.indexOf("circle")||(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].attr().toString())}catch(m){d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].attr().toString()}var e=
"",f=!0,g=0,h=0,k=0;if(-1<d.indexOf("path")){f=!0;e=d.indexOf(" d=");e=d.substring(e+4);var l=e.indexOf('" ');e=e.substring(0,l)}-1<d.indexOf("circle")&&(f=!1,g=d.indexOf(" cx="),g=d.substring(g+5),h=g.indexOf('"'),g=g.substring(0,h),h=d.indexOf(" cy="),h=d.substring(h+5),k=h.indexOf('"'),h=h.substring(0,k),k=d.indexOf(" r="),d=d.substring(k+4),k=d.indexOf('"'),k=d.substring(0,k));c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("transform");d=""!=c;f?d?cvjs_spacesSpecificHighlightLayer.path(e).attr(b).attr({id:"cv_spacehighlight_"+
a}).attr({transform:c}):cvjs_spacesSpecificHighlightLayer.path(e).attr(b).attr({id:"cv_spacehighlight_"+a}):d?cvjs_spacesSpecificHighlightLayer.circle(g,h,k,k).attr(b).attr({id:"cv_spacehighlight_"+a}).attr({transform:c}):cvjs_spacesSpecificHighlightLayer.circle(g,h,k,k).attr(b).attr({id:"cv_spacehighlight_"+a})}else c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][c].data("transform"),""!=c?jQuery("#cv_spacehighlight_"+a).css(b).attr({transform:c}):jQuery("#cv_spacehighlight_"+a).css(b);
try{layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].prepend(cvjs_spacesSpecificHighlightLayer)}catch(m){}return 1}return-1}var cvjsRoomPolygonBaseHighlightAttributes={fill:"#FFF","fill-opacity":.1,stroke:"#FFF","stroke-width":.01,"stroke-opacity":1,"stroke-linejoin":"round"},cvjsSpaceHighlightLayernBaseHighlightAttributes={fill:"#FFF","fill-opacity":.001,stroke:"#FFF","stroke-width":.0011,"stroke-opacity":1,"stroke-linejoin":"round"};
function cvjs_clearSpaceLayer(){try{cvjs_spacesSpecificHighlightLayer.remove(),cvjs_spacesSpecificHighlightLayer=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()}catch(c){cvjs_spacesSpecificHighlightLayer=cvjs_rPaper[cvjs_active_floorplan_div_nr].g()}var a=cvjs_getSpaceObjectIdList(),b;for(b in a)cvjs_highlightSpace(a[b],cvjsSpaceHighlightLayernBaseHighlightAttributes);cvjs_customLayerContentAdded=!1}
function cvjs_hatchSpace(a,b,c,d){try{var e=findFixtureIndex(a);if(-1==e)return-1;var f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].toString();console.log(a+" "+f+"XXX");e=!0;if(-1<f.indexOf("path")){e=!0;var g=f.indexOf(" d="),h=f.substring(g+4),k=h.indexOf('" ');var l=h.substring(0,k)}if(-1<f.indexOf("circle")){e=!1;var m=f.indexOf(" cx="),p=f.substring(m+5),n=p.indexOf('"');var q=p.substring(0,n);var r=f.indexOf(" cy="),t=f.substring(r+5),u=t.indexOf('"');var v=t.substring(0,u);var y=
f.indexOf(" r="),x=f.substring(y+4),B=x.indexOf('"');var A=x.substring(0,B)}if("pattern_45degree_standard"==b||"pattern_45degree_fine"==b||"pattern_45degree_wide"==b||"pattern_90degree_standard"==b||"pattern_90degree_fine"==b||"pattern_90degree_wide"==b||"pattern_135degree_standard"==b||"pattern_135degree_fine"==b||"pattern_135degree_wide"==b||"pattern_0degree_standard"==b||"pattern_0degree_fine"==b||"pattern_0degree_wide"==b||"pattern_45degree_crosshatch_standard"==b||"pattern_45degree_crosshatch_fine"==
b){if("pattern_45degree_standard"==b){cvjs_setUpPattern_45degree_standard(c,"1.0");var z=pattern_45degree_standard}"pattern_45degree_fine"==b&&(cvjs_setUpPattern_45degree_fine(c,"1.0"),z=pattern_45degree_standard);"pattern_45degree_wide"==b&&(cvjs_setUpPattern_45degree_wide(c,"1.0"),z=pattern_45degree_standard);"pattern_90degree_standard"==b&&(cvjs_setUpPattern_90degree_standard(c,"1.0"),z=pattern_90degree_standard);"pattern_90degree_fine"==b&&(cvjs_setUpPattern_90degree_fine(c,"1.0"),z=pattern_90degree_standard);
"pattern_90degree_wide"==b&&(cvjs_setUpPattern_90degree_wide(c,"1.0"),z=pattern_90degree_standard);"pattern_135degree_standard"==b&&(cvjs_setUpPattern_135degree_standard(c,"1.0"),z=pattern_135degree_standard);"pattern_135degree_fine"==b&&(cvjs_setUpPattern_135degree_fine(c,"1.0"),z=pattern_135degree_standard);"pattern_135degree_wide"==b&&(cvjs_setUpPattern_135degree_wide(c,"1.0"),z=pattern_135degree_standard);"pattern_0degree_standard"==b&&(cvjs_setUpPattern_0degree_standard(c,"1.0"),z=pattern_0degree_standard);
"pattern_0degree_fine"==b&&(cvjs_setUpPattern_0degree_fine(c,"1.0"),z=pattern_0degree_standard);"pattern_0degree_wide"==b&&(cvjs_setUpPattern_0degree_wide(c,"1.0"),z=pattern_0degree_standard);"pattern_45degree_crosshatch_standard"==b&&(cvjs_setUpPattern_45degree_crosshatch_standard(c,"1.0"),z=pattern_45degree_crosshatch);"pattern_45degree_crosshatch_fine"==b&&(cvjs_setUpPattern_45degree_crosshatch_fine(c,"1.0"),z=pattern_45degree_crosshatch);a=a.replaceAll(".","_");void 0!=jQuery("#cv_spacehighlight_"+
a).attr("id")&&jQuery("#cv_spacehighlight_"+a).remove();console.log("undefined, new entity "+z+"  "+l);e?cvjs_spacesSpecificHighlightLayer.path(l).attr({id:"cv_spacehighlight_"+a}).attr({fill:z,"fill-opacity":d,stroke:c,"stroke-opacity":d}):cvjs_spacesSpecificHighlightLayer.circle(q,v,A,A).attr({id:"cv_spacehighlight_"+a}).attr({fill:z,"fill-opacity":d,stroke:c,"stroke-opacity":d});try{layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].prepend(cvjs_spacesSpecificHighlightLayer)}catch(C){}}}catch(C){console.log(C)}}
function cvjs_clearAllCustomTooltips(){cvjs_setCustomToolTip(!0);var a=cvjs_getSpaceObjectIdList(),b;for(b in a)cvjs_setCustomToolTipValue(a[b],Array(a[b]))}var mySpaceArray_currentSettingsObj=[],mySpaceArray_currentSettingsSpace=[],mySpaceArray_currentSettings_counter=0;
function cvjs_removeSelectedAndReturnOriginalStyle(a,b){try{for(var c,d=0;d<b.length;d++)if(cvjs_debug&&console.log(b[d]+" remove return loop "+a+" "),b[d]==a){for(var e=0;e<mySpaceArray_currentSettingsObj.length;e++)mySpaceArray_currentSettingsSpace[e]==a&&(c=mySpaceArray_currentSettingsObj[e],mySpaceArray_currentSettingsObj.splice(e,1),mySpaceArray_currentSettingsSpace.splice(e,1));b.splice(d,1);return c}return null}catch(f){console.log(f)}}
function cvjs_returnOriginalStyleAndRemoveSelected(a,b){try{for(var c,d=0;d<b.length;d++)if(b[d].space==a)return cvjs_debug&&console.log(b[d].space+" removing return loop "+a+" "),c=b[d].attrObj,b.splice(d,1),c;return null}catch(e){console.log(e)}}function cvjs_returnIsSpaceMultipleSelected(a,b){for(var c=!1,d=0;d<b.length;d++)b[d].space==a&&(c=!0);return c}
function cvjs_addSelectedToOriginalStyles(a){var b={},c,d,e=!1,f=!1,g=a;a=a.replaceAll(".","_");jQuery("#cv_spacehighlight_"+a).each(function(){jQuery.each(this.attributes,function(){if(this.specified&&("fill"==this.name&&(c=this.value,f=!0),"stroke"==this.name&&(d=this.value,e=!0),"style"==this.name)){var a=this.value;console.log("1 style "+a);a=a.toString().split(";");for(var g=0;g<a.length;g++){var l=a[g].split(":"),m=l[0].trim(),p="";try{p=l[1].trim(),b[m]=p,"stroke"==m&&(e=!1),"fill"==m&&(f=
!1)}catch(n){console.log("no style value")}}}})});cvjs_debug&&console.log(e+"  "+f+"  "+d);e&&(b.stroke=d);f&&(b.fill=c);mySpaceArray_currentSettingsObj[mySpaceArray_currentSettings_counter]=b;mySpaceArray_currentSettingsSpace[mySpaceArray_currentSettings_counter]=g;mySpaceArray_currentSettings_counter++}
function cvjs_returnSelectedOriginalStyles(a){var b={},c,d,e=!1,f=!1;a=a.replaceAll(".","_");jQuery("#cv_spacehighlight_"+a).each(function(){jQuery.each(this.attributes,function(){if(this.specified&&("fill"==this.name&&(c=this.value,f=!0),"stroke"==this.name&&(d=this.value,e=!0),"style"==this.name))for(var a=this.value.toString().split(";"),h=0;h<a.length;h++){var k=a[h].split(":"),l=k[0].trim(),m="";try{m=k[1].trim(),b[l]=m,"stroke"==l&&(e=!1),"fill"==l&&(f=!1)}catch(p){console.log("no style value")}}})});
e&&(b.stroke=d);f&&(b.fill=c);return b}function cvjs_currentSpaceSettings(){var a={};a.styleObj=mySpaceArray_currentSettingsObj[mySpaceArray_currentSettings_counter-1];a.roomId=mySpaceArray_currentSettingsSpace[mySpaceArray_currentSettings_counter-1];a.counter=mySpaceArray_currentSettings_counter-1;return a}var cvjs_multiSelect=!1;function cvjs_initMultiSelect(){mySpaceArray_currentSettingsObj=[];mySpaceArray_currentSettingsSpace=[];mySpaceArray_currentSettings_counter=0;cvjs_multiSelect=!0}
function cvjs_exitMultiSelect(){cvjs_multiSelect=!1}function closestPoint(a,b){function c(a){var c=a.x-b[0];a=a.y-b[1];return c*c+a*a}for(var d=a.getTotalLength(),e=8,f,g,h=Infinity,k,l=0,m;l<=d;l+=e)(m=c(k=a.getPointAtLength(l)))<h&&(f=k,g=l,h=m);for(e/=2;.5<e;){var p,n,q,r,t,u;0<=(q=g-e)&&(t=c(p=a.getPointAtLength(q)))<h?(f=p,g=q,h=t):(r=g+e)<=d&&(u=c(n=a.getPointAtLength(r)))<h?(f=n,g=r,h=u):e/=2}f=[f.x,f.y];f.distance=Math.sqrt(h);return f}
var cvjs_realClickMoveInHandleObjectX=0,cvjs_realClickMoveInHandleObjectY=0;
function cvjs_measurementActionClickMoveInHandleObject(a,b,c){try{var d=[(a.pageX-delta_x)/global_scale,(a.pageY-delta_y)/global_scale];a=b;b=!1;-1<a.indexOf("Z")&&(b=!0);b||(a+=" Z");var e=new PathConverter.Outline;(new PathConverter.SVGParser(e)).parse(a);var f=[];e.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&f.push([a.x,a.y])})})});cvjs_debug&&console.log(f.length);if(0==f.length)cvjs_debug&&console.log("empty path, or Arc in Path, return");
else{var g=d3.svg.line().interpolate("linear"),h=cvjs_rPaper[cvjs_active_floorplan_div_nr].toString();h=h.substring(h.indexOf("svg id")+7);h=h.substring(h.indexOf("viewBox")+9);h=h.substring(0,h.indexOf('"'));var k=h.split(" "),l=d3.select("body").append("svg").attr("x",k[0]).attr("y",k[1]).attr("width",k[2]).attr("height",k[3]),m=l.append("path").datum(f).attr("d",g),p=closestPoint(m.node(),d);c?(lastX_poly_redline1=Math.floor(p[0]*global_scale+delta_x),lastY_poly_redline1=Math.floor(p[1]*global_scale+
delta_y)):(cvjs_realClickMoveInHandleObjectX=Math.floor(p[0]*global_scale+delta_x),cvjs_realClickMoveInHandleObjectY=Math.floor(p[1]*global_scale+delta_y));l.remove()}}catch(n){console.log("cvjs_measurementActionClickMoveInHandleObject:"+n)}}
function cvjs_getLengthOfSVGPath(a){try{var b=!1;-1<a.indexOf("Z")&&(b=!0);b||(a+=" Z");var c=new PathConverter.Outline;(new PathConverter.SVGParser(c)).parse(a);var d=[];c.getShapes().forEach(function(a){a.points.forEach(function(a){[a.main,a.left,a.right].forEach(function(a){a&&d.push([a.x,a.y])})})});console.log("points: "+d.length);if(0==d.length)return console.log("empty path, or Arc in Path, return"),-1;c=0;for(a=0;a<d.length-1;a++){var e=Math.sqrt(Math.pow(d[a+1][0]-d[a][0],2)+Math.pow(d[a+
1][1]-d[a][1],2));c+=e}return c}catch(f){console.log("cvjs_measurementActionClickMoveInHandleObject:"+f)}}function drawDrawing(){console.log("drawDrawing")}function drawPaths(){console.log("drawPaths")}function drawThumb(a){cvjs_debug&&console.log("drawThumb"+a)}
var cvjs_loadSpaceImage_Location="",cvjs_loadSpaceImage_ID="",cvjs_loadSpaceImage_Type="",cvjs_loadSpaceImage_Layer="",highlight_colorgrade_D_legend_5="#f5f5dc",highlight_colorgrade_D_5={fill:"#f5f5dc","fill-opacity":"0.7",stroke:"#f5f5dc","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_D_legend_4="#fbd9c0",highlight_colorgrade_D_4={fill:"#fbd9c0","fill-opacity":"0.7",stroke:"#fbd9c0","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_D_legend_3=
"#fdbca5",highlight_colorgrade_D_3={fill:"#fdbca5","fill-opacity":"0.7",stroke:"#fdbca5","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_D_legend_2="#fd9e8b",highlight_colorgrade_D_2={fill:"#fd9e8b","fill-opacity":"0.7",stroke:"#fd9e8b","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_D_legend_1="#fa8072",highlight_colorgrade_D_1={fill:"#fa8072","fill-opacity":"0.7",stroke:"#fa8072","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},
no_colorgrade_D_reading={fill:"#D2D2D2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_A_legend_1="#FF413B",highlight_colorgrade_A_1={fill:"#FF413B","fill-opacity":"0.7",stroke:"#FF413B","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_A_legend_2="#FF7570",highlight_colorgrade_A_2={fill:"#FF7570","fill-opacity":"0.7",stroke:"#FF7570","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},
highlight_colorgrade_A_legend_3="#FFABA8",highlight_colorgrade_A_3={fill:"#FFABA8","fill-opacity":"0.7",stroke:"#FFABA8","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_A_legend_4="#C1E9B7",highlight_colorgrade_A_4={fill:"#C1E9B7","fill-opacity":"0.7",stroke:"#C1E9B7","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_A_legend_5="#89DC74",highlight_colorgrade_A_5={fill:"#89DC74","fill-opacity":"0.7",stroke:"#89DC74","stroke-width":1,
"stroke-opacity":"1","stroke-linejoin":"round"},no_colorgrade_A_reading={fill:"#D2D2D2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_C_legend_1="#fef0d9",highlight_colorgrade_C_1={fill:"#fef0d9","fill-opacity":"0.7",stroke:"#fef0d9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_C_legend_2="#fdcc8a",highlight_colorgrade_C_2={fill:"#fdcc8a","fill-opacity":"0.7",stroke:"#fdcc8a","stroke-width":1,
"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_C_legend_3="#fc8d59",highlight_colorgrade_C_3={fill:"#fc8d59","fill-opacity":"0.7",stroke:"#fc8d59","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_C_legend_4="#e34a33",highlight_colorgrade_C_4={fill:"#e34a33","fill-opacity":"0.7",stroke:"#e34a33","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_C_legend_5="#b30000",highlight_colorgrade_C_5={fill:"#b30000",
"fill-opacity":"0.7",stroke:"#b30000","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_colorgrade_C_reading={fill:"#A2C2A2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_B_legend_1="#FFECD9",highlight_colorgrade_B_1={fill:"#FFECD9","fill-opacity":"0.7",stroke:"#FFECD9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_B_legend_2="#FFD5AB",highlight_colorgrade_B_2={fill:"#FFD5AB",
"fill-opacity":"0.7",stroke:"#FFD5AB","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_B_legend_3="#FFBF80",highlight_colorgrade_B_3={fill:"#FFBF80","fill-opacity":"0.7",stroke:"#FFBF80","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_B_legend_4="#FFAA55",highlight_colorgrade_B_4={fill:"#FFAA55","fill-opacity":"0.7",stroke:"#FFAA55","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_colorgrade_B_legend_5=
"#FF7F00",highlight_colorgrade_B_5={fill:"#FF7F00","fill-opacity":"0.7",stroke:"#FF7F00","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_colorgrade_B_reading={fill:"#A2A2C2","fill-opacity":"0.05",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"0.2","stroke-linejoin":"round"},highlight_fixture_colorgrade_A_legend_1="#FF413B",highlight_fixture_colorgrade_A_scale_1="s1.00",highlight_fixture_colorgrade_A_1={fill:"#FF413B","fill-opacity":"0.6",stroke:"#FFFFFF","stroke-width":"0.15",
"stroke-opacity":"1.0","stroke-linejoin":"round"},highlight_fixture_colorgrade_A_legend_2="#FF7570",highlight_fixture_colorgrade_A_scale_2="s0.80",highlight_fixture_colorgrade_A_2={fill:"#FF7570","fill-opacity":"0.6",stroke:"#FFFFFF","stroke-width":"0.175","stroke-opacity":"1.0","stroke-linejoin":"round"},highlight_fixture_colorgrade_A_legend_3="#FFABA8",highlight_fixture_colorgrade_A_scale_3="s0.70",highlight_fixture_colorgrade_A_3={fill:"#FFABA8","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.2",
"stroke-opacity":"1.0","stroke-linejoin":"round"},highlight_fixture_colorgrade_A_legend_4="#C1E9B7",highlight_fixture_colorgrade_A_scale_4="s0.60",highlight_fixture_colorgrade_A_4={fill:"#C1E9B7","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.2","stroke-opacity":"1.0","stroke-linejoin":"round"},highlight_fixture_colorgrade_A_legend_5="#89DC74",highlight_fixture_colorgrade_A_scale_5="s0.50",highlight_fixture_colorgrade_A_5={fill:"#89DC74","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.3",
"stroke-opacity":"1.0","stroke-linejoin":"round"},no_motion_reading_fixture_scale="s0.40",no_motion_reading_fixture={fill:"#D2D2D2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":"1","stroke-opacity":"0.01","stroke-linejoin":"round"},highlight_fixture_colorgrade_D_legend_1="#f5f5dc",highlight_fixture_colorgrade_D_scale_1="s0.60",highlight_fixture_colorgrade_D_1={fill:"#f5f5dc","fill-opacity":"0.7",stroke:"#f5f5dc","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_D_legend_2=
"#fbd9c0",highlight_fixture_colorgrade_D_scale_2="s0.70",highlight_fixture_colorgrade_D_2={fill:"#fbd9c0","fill-opacity":"0.7",stroke:"#fbd9c0","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_D_legend_3="#fdbca5",highlight_fixture_colorgrade_D_scale_3="s0.80",highlight_fixture_colorgrade_D_3={fill:"#fdbca5","fill-opacity":"0.7",stroke:"#fdbca5","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_D_legend_4="#fd9e8b",
highlight_fixture_colorgrade_D_scale_4="s0.90",highlight_fixture_colorgrade_D_4={fill:"#fd9e8b","fill-opacity":"0.7",stroke:"#fd9e8b","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_D_legend_5="#fa8072",highlight_fixture_colorgrade_D_scale_5="s1.00",highlight_fixture_colorgrade_D_5={fill:"#fa8072","fill-opacity":"0.7",stroke:"#fa8072","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_fixture_colorgrade_D_scale="s0.6",no_fixture_colorgrade_D_reading=
{fill:"#D2D2D2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_C_legend_1="#fef0d9",highlight_fixture_colorgrade_C_scale_1="s0.60",highlight_fixture_colorgrade_C_1={fill:"#fef0d9","fill-opacity":"0.7",stroke:"#fef0d9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_C_legend_2="#fdcc8a",highlight_fixture_colorgrade_C_scale_2="s0.70",highlight_fixture_colorgrade_C_2={fill:"#fdcc8a",
"fill-opacity":"0.7",stroke:"#fdcc8a","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_C_legend_3="#fc8d59",highlight_fixture_colorgrade_C_scale_3="s0.80",highlight_fixture_colorgrade_C_3={fill:"#fc8d59","fill-opacity":"0.7",stroke:"#fc8d59","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_C_legend_4="#e34a33",highlight_fixture_colorgrade_C_scale_4="s0.90",highlight_fixture_colorgrade_C_4={fill:"#e34a33","fill-opacity":"0.7",
stroke:"#e34a33","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_C_legend_5="#b30000",highlight_fixture_colorgrade_C_scale_5="s1.00",highlight_fixture_colorgrade_C_5={fill:"#b30000","fill-opacity":"0.7",stroke:"#b30000","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_colorgrade_C_reading_fixture_scale="s0.50",no_colorgrade_C_reading_fixture={fill:"#A2C2A2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1",
"stroke-linejoin":"round"},highlight_fixture_colorgrade_B_legend_1="#FFECD9",highlight_fixture_colorgrade_B_scale_1="s0.60",highlight_fixture_colorgrade_B_1={fill:"#FFECD9","fill-opacity":"0.7",stroke:"#FFECD9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_B_legend_2="#FFD5AB",highlight_fixture_colorgrade_B_scale_2="s0.70",highlight_fixture_colorgrade_B_2={fill:"#FFD5AB","fill-opacity":"0.7",stroke:"#FFD5AB","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},
highlight_fixture_colorgrade_B_legend_3="#FFBF80",highlight_fixture_colorgrade_B_scale_3="s0.80",highlight_fixture_colorgrade_B_3={fill:"#FFBF80","fill-opacity":"0.7",stroke:"#FFBF80","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_B_legend_4="#FFAA55",highlight_fixture_colorgrade_B_scale_4="s0.90",highlight_fixture_colorgrade_B_4={fill:"#FFAA55","fill-opacity":"0.7",stroke:"#FFAA55","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_colorgrade_B_legend_5=
"#FF7F00",highlight_fixture_colorgrade_B_scale_5="s1.00",highlight_fixture_colorgrade_B_5={fill:"#FF7F00","fill-opacity":"0.7",stroke:"#FF7F00","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_colorgrade_B_reading_fixture_scale="s0.50",no_colorgrade_B_reading_fixture={fill:"#A2A2C2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},cvjsRoomPolygonBaseAttributes={fill:"#FFF","fill-opacity":"0.1",stroke:"#AAA","stroke-width":1,
"stroke-opacity":"0.1","stroke-linejoin":"round"},cvjsRoomPolygonHighlightAttributes={fill:"#a4d7f4","fill-opacity":"0.5",stroke:"#a4d7f4","stroke-width":3,"stroke-opacity":"1"},cvjsRoomPolygonSelectAttributes={fill:"#5BBEF6","fill-opacity":"0.5",stroke:"#5BBEF6","stroke-width":3,"stroke-opacity":"1"},cvjsRoomPolygonBaseAttributes_Admin_unlinked={fill:"#ffff99","fill-opacity":"0.3",stroke:"#ffff99","stroke-width":1,"stroke-opacity":"0.1","stroke-linejoin":"round"},cvjsRoomPolygonHighlightAttributes_Admin_unlinked=
{fill:"#ff9999","fill-opacity":"0.3",stroke:"#ff9999","stroke-width":3,"stroke-opacity":"1"},cvjsRoomPolygonSelectAttributes_Admin_unlinked={fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-width":3,"stroke-opacity":"1"},cvjsRoomPolygonBaseAttributes_Admin_linked={fill:"#a4d7f4","fill-opacity":"0.3",stroke:"#a4d7f4","stroke-width":1,"stroke-opacity":"0.1","stroke-linejoin":"round"},cvjsRoomPolygonHighlightAttributes_Admin_linked={fill:"#41A458","fill-opacity":"0.3",stroke:"#a4d7f4","stroke-width":3,
"stroke-opacity":"1"},cvjsRoomPolygonSelectAttributes_Admin_linked={fill:"#41A458","fill-opacity":"0.5",stroke:"#41A458","stroke-width":3,"stroke-opacity":"1"},office_space={fill:"#FFF","fill-opacity":"0",stroke:"#ffd700","stroke-width":4,"stroke-opacity":1,"stroke-linejoin":"round"},meeting_room={fill:"#FFF","fill-opacity":"0.01",stroke:"#12A89D","stroke-width":4,"stroke-opacity":1,"stroke-linejoin":"round"},collab_space={fill:"#FFF","fill-opacity":"0.01",stroke:"#FF00FF","stroke-width":4,"stroke-opacity":1,
"stroke-linejoin":"round"},highlight_occupancy_legend_1="#7C1399",highlight_occupancy_1={fill:"#7C1399","fill-opacity":"0.7",stroke:"#7C1399","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_occupancy_legend_2="#AF46CC",highlight_occupancy_2={fill:"#AF46CC","fill-opacity":"0.7",stroke:"#AF46CC","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_occupancy_legend_3="#E27EFF",highlight_occupancy_3={fill:"#E27EFF","fill-opacity":"0.7",stroke:"#E27EFF",
"stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_occupancy_legend_4="#E9A4FF",highlight_occupancy_4={fill:"#E9A4FF","fill-opacity":"0.7",stroke:"#E9A4FF","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_occupancy_legend_5="#EACFFF",highlight_occupancy_5={fill:"#EACFFF","fill-opacity":"0.7",stroke:"#EACFFF","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_motion_reading={fill:"#D2D2D2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,
"stroke-opacity":"1","stroke-linejoin":"round"},highlight_temperature_legend_1="#fef0d9",highlight_temperature_1={fill:"#fef0d9","fill-opacity":"0.7",stroke:"#fef0d9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_temperature_legend_2="#fdcc8a",highlight_temperature_2={fill:"#fdcc8a","fill-opacity":"0.7",stroke:"#fdcc8a","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_temperature_legend_3="#fc8d59",highlight_temperature_3={fill:"#fc8d59","fill-opacity":"0.7",
stroke:"#fc8d59","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_temperature_legend_4="#e34a33",highlight_temperature_4={fill:"#e34a33","fill-opacity":"0.7",stroke:"#e34a33","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_temperature_legend_5="#b30000",highlight_temperature_5={fill:"#b30000","fill-opacity":"0.7",stroke:"#b30000","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_temperature_reading={fill:"#A2C2A2","fill-opacity":"0.5",
stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_power_legend_1="#FFECD9",highlight_power_1={fill:"#FFECD9","fill-opacity":"0.7",stroke:"#FFECD9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_power_legend_2="#FFD5AB",highlight_power_2={fill:"#FFD5AB","fill-opacity":"0.7",stroke:"#FFD5AB","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_power_legend_3="#FFBF80",highlight_power_3={fill:"#FFBF80","fill-opacity":"0.7",
stroke:"#FFBF80","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_power_legend_4="#FFAA55",highlight_power_4={fill:"#FFAA55","fill-opacity":"0.7",stroke:"#FFAA55","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_power_legend_5="#FF7F00",highlight_power_5={fill:"#FF7F00","fill-opacity":"0.7",stroke:"#FF7F00","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_power_reading={fill:"#A2A2C2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,
"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_occupancy_legend_1="#7C1399",highlight_fixture_occupancy_scale_1="s2.40",highlight_fixture_occupancy_1={fill:"#7C1399","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.15","stroke-opacity":"1.0","stroke-linejoin":"round"},highlight_fixture_occupancy_legend_2="#AF46CC",highlight_fixture_occupancy_scale_2="s1.90",highlight_fixture_occupancy_2={fill:"#AF46CC","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.175","stroke-opacity":"1.0",
"stroke-linejoin":"round"},highlight_fixture_occupancy_legend_3="#E27EFF",highlight_fixture_occupancy_scale_3="s1.50",highlight_fixture_occupancy_3={fill:"#E27EFF","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.2","stroke-opacity":"1.0","stroke-linejoin":"round"},highlight_fixture_occupancy_legend_4="#E9A4FF",highlight_fixture_occupancy_scale_4="s1.2",highlight_fixture_occupancy_4={fill:"#E9A4FF","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.2","stroke-opacity":"1.0","stroke-linejoin":"round"},
highlight_fixture_occupancy_legend_5="#EACFFF",highlight_fixture_occupancy_scale_5="s0.8",highlight_fixture_occupancy_5={fill:"#EACFFF","fill-opacity":"0.7",stroke:"#FFFFFF","stroke-width":"0.3","stroke-opacity":"1.0","stroke-linejoin":"round"};no_motion_reading_fixture_scale="s1.0";no_motion_reading_fixture={fill:"#D2D2D2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":"1","stroke-opacity":"0.01","stroke-linejoin":"round"};
var highlight_fixture_temperature_legend_1="#fef0d9",highlight_fixture_temperature_scale_1="s1.0",highlight_fixture_temperature_1={fill:"#fef0d9","fill-opacity":"0.7",stroke:"#fef0d9","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_temperature_legend_2="#fdcc8a",highlight_fixture_temperature_scale_2="s1.1",highlight_fixture_temperature_2={fill:"#fdcc8a","fill-opacity":"0.7",stroke:"#fdcc8a","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_temperature_legend_3=
"#fc8d59",highlight_fixture_temperature_scale_3="s1.2",highlight_fixture_temperature_3={fill:"#fc8d59","fill-opacity":"0.7",stroke:"#fc8d59","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_temperature_legend_4="#e34a33",highlight_fixture_temperature_scale_4="s1.3",highlight_fixture_temperature_4={fill:"#e34a33","fill-opacity":"0.7",stroke:"#e34a33","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_temperature_legend_5="#b30000",highlight_fixture_temperature_scale_5=
"s1.4",highlight_fixture_temperature_5={fill:"#b30000","fill-opacity":"0.7",stroke:"#b30000","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_temperature_reading_fixture_scale="s1.0",no_temperature_reading_fixture={fill:"#A2C2A2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_power_legend_1="#FFECD9",highlight_fixture_power_scale_1="s1.0",highlight_fixture_power_1={fill:"#FFECD9","fill-opacity":"0.7",stroke:"#FFECD9",
"stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_power_legend_2="#FFD5AB",highlight_fixture_power_scale_2="s1.1",highlight_fixture_power_2={fill:"#FFD5AB","fill-opacity":"0.7",stroke:"#FFD5AB","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_power_legend_3="#FFBF80",highlight_fixture_power_scale_3="s1.2",highlight_fixture_power_3={fill:"#FFBF80","fill-opacity":"0.7",stroke:"#FFBF80","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},
highlight_fixture_power_legend_4="#FFAA55",highlight_fixture_power_scale_4="s1.3",highlight_fixture_power_4={fill:"#FFAA55","fill-opacity":"0.7",stroke:"#FFAA55","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},highlight_fixture_power_legend_5="#FF7F00",highlight_fixture_power_scale_5="s1.4",highlight_fixture_power_5={fill:"#FF7F00","fill-opacity":"0.7",stroke:"#FF7F00","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"},no_power_reading_fixture_scale="s1.0",no_power_reading_fixture=
{fill:"#A2A2C2","fill-opacity":"0.5",stroke:"#D2D2D2","stroke-width":1,"stroke-opacity":"1","stroke-linejoin":"round"};cvjsRoomPolygonBaseAttributes_Admin_unlinked={fill:"#ffff99","fill-opacity":"0.3",stroke:"#ffff99","stroke-width":1,"stroke-opacity":"0.1","stroke-linejoin":"round"};cvjsRoomPolygonHighlightAttributes_Admin_unlinked={fill:"#ff9999","fill-opacity":"0.3",stroke:"#ff9999","stroke-width":3,"stroke-opacity":"1"};
cvjsRoomPolygonSelectAttributes_Admin_unlinked={fill:"#ff9999","fill-opacity":"0.5",stroke:"#ff9999","stroke-width":3,"stroke-opacity":"1"};cvjsRoomPolygonBaseAttributes_Admin_linked={fill:"#a4d7f4","fill-opacity":"0.3",stroke:"#a4d7f4","stroke-width":1,"stroke-opacity":"0.1","stroke-linejoin":"round"};cvjsRoomPolygonHighlightAttributes_Admin_linked={fill:"#41A458","fill-opacity":"0.3",stroke:"#a4d7f4","stroke-width":3,"stroke-opacity":"1"};
cvjsRoomPolygonSelectAttributes_Admin_linked={fill:"#41A458","fill-opacity":"0.5",stroke:"#41A458","stroke-width":3,"stroke-opacity":"1"};
var cvjs_highlight_colorgrade_delete={fill:"#e76d6d","fill-opacity":"0.2",stroke:"#fe50d9","stroke-width":2,"stroke-opacity":"1","stroke-linejoin":"round"},cvjs_highlight_colorgrade_move_resize_rotate={fill:"#3792cb","fill-opacity":"0.2",stroke:"#296d98","stroke-width":1.5,"stroke-opacity":"1","stroke-linejoin":"round"},cvjs_object_selected_colorgrade_move_resize_rotate={fill:"#3792cb","fill-opacity":"0.6",stroke:"#296d98","stroke-width":3,"stroke-opacity":"1.0","stroke-linejoin":"round"};
function cvjs_exit_customsearchmodal(a){}function cvjs_startCustomSearchText(){}function cvjs_emptyMainCanvasInAngular(a){jQuery("#"+a).empty();floorplans_divs_Initialized="                                             ".split(" ")}var cvjs_delta_x,cvjs_delta_y,cvjs_global_scale,cvjs_handleGroup,cvjs_RubberBand,cvjs_firstX,cvjs_firstY,cvjs_lastX,cvjs_lastY;function cvjs_executeCustomCanvasMethod_drag(a,b,c,d){cvjs_executeCustomCanvasMethod("DRAG",a,b,c,"","","",d)}
function cvjs_executeCustomCanvasMethod_nodrag(a,b,c,d,e){cvjs_executeCustomCanvasMethod("NODRAG","","",a,b,c,d,e)}function cvjs_executeCustomCanvasMethod_click(a,b,c,d,e){cvjs_executeCustomCanvasMethod("NODRAG","","",a,b,c,d,e)}
function cvjs_customCanvasMethod_globalScale(){try{canvas_width=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width();canvas_height=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position();global_scale_X=canvas_width/viewBoxWidth[cvjs_active_floorplan_div_nr];global_scale_Y=canvas_height/viewBoxHeight[cvjs_active_floorplan_div_nr];cvjs_global_scale=global_scale_X<global_scale_Y?global_scale_X:
global_scale_Y;cvjs_delta_x=(canvas_width-viewBoxWidth[cvjs_active_floorplan_div_nr]*cvjs_global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].X*cvjs_global_scale+a.left;cvjs_delta_y=(canvas_height-viewBoxHeight[cvjs_active_floorplan_div_nr]*cvjs_global_scale)/2-viewBox[cvjs_active_floorplan_div_nr].Y*cvjs_global_scale+a.top}catch(b){console.log("cvjs_customCanvasMethod_globalScale: "+b)}}
function cvjs_customCanvasMethod_setupHandleGroup(){try{cvjs_handleGroup=cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr]).attr({fill:"#fff","fill-opacity":"0.01"}),cvjs_handleGroup.attr({transform:"T0,0S5.0"})}catch(a){console.log("cvjs_customCanvasMethod_handleGroup: "+
a)}}function cvjs_executeCustomCanvasMethod(a,b,c,d,e,f,g,h){try{cvjs_customCanvasMethod_globalScale(),cvjs_customCanvasMethod_setupHandleGroup(),0==a.toLowerCase().indexOf("drag")&&cvjs_handleGroup.drag(d,b,c),0==a.toLowerCase().indexOf("nodrag")&&(""!=f&&cvjs_handleGroup.mouseup(f),""!=e&&cvjs_handleGroup.mousedown(e),""!=d&&cvjs_handleGroup.mousemove(d),""!=g&&cvjs_handleGroup.dblclick(g)),""!=h&&h()}catch(k){console.log("cvjs_executeCustomCanvasMethod:"+k)}}
function cvjs_removeCustomCanvasMethod(){console.log("cvjs_removeCustomCanvasMethod()");cvjs_handleGroup.selectAll("handler").remove();cvjs_handleGroup.remove()}function cvjs_makeTextObjectOnCanvas(a,b,c){return cvjs_rPaper[cvjs_active_floorplan_div_nr].text(a,b,c).attr({fill:"#000","fill-opacity":"1",stroke:"#000","font-size":1})}
function cvjs_makeGraphicsObjectOnCanvas(a,b){if(0==a.toLowerCase().indexOf("path"))return cvjs_rPaper[cvjs_active_floorplan_div_nr].path(b).attr({fill:"#999999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"});if(0==a.toLowerCase().indexOf("polyline"))return cvjs_rPaper[cvjs_active_floorplan_div_nr].polyline(b).attr({fill:"#999999","fill-opacity":"0.5",stroke:"#ff9999","stroke-opacity":"1"})}function cvjs_SVG_x(a){return(a-cvjs_delta_x)/cvjs_global_scale}
function cvjs_SVG_y(a){return(a-cvjs_delta_y)/cvjs_global_scale}function cvjs_rect_doOverlap(a,b,c,d,e,f,g,h){return a>=g||e>=c||b>=h||f>=d?!1:!0}function cvjs_getSpaceObjectBoundingBox(a){for(var b in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])if(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].data("id")==a)return cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][b].getBBox();return!1}
function cvjs_addVqRoomsGraphics_newNode(a,b){try{var c=b.data("node",a);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push(c)}catch(d){console.log("cvjs_addVqRoomsGraphics_newNode: "+d)}}
function cvjs_createSpaceObjectGroup(a,b,c,d,e,f,g){try{cvjs_currentNode_underbar=a;cvjs_currentNode_name=d;cvjs_currentNode_id=c;cvjs_currentNode_layer=f;cvjs_currentNode_group=g;cvjs_currentNode_attributeStatus=cvjs_currentNode_attributes="";cvjs_currentNode_type=e;cvjs_currentNode_occupancy=cvjs_currentNode_tags="";cvjs_currentNode_linked="unlinked";cvjs_currentNode_translate_y=cvjs_currentNode_translate_x="0";cvjs_currentNode_scale_y=cvjs_currentNode_scale_x="1";cvjs_currentNode_rotate="0";cvjs_currentNode_transform=
"";f=!1;for(g=0;g<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;g++)cvjs_currentNode_layer==layerTable[cvjs_active_floorplan_div_nr].layers[g].layerName&&(f=!0);f||(f="layer_"+cvjs_currentNode_layer,layerTable[cvjs_active_floorplan_div_nr].layers[layerTable[cvjs_active_floorplan_div_nr].numberOfLayers]={layer:f,layerClass:f,layerName:cvjs_currentNode_layer,status:"ON",layerBaseName:"",xRefFile:""},layerTable[cvjs_active_floorplan_div_nr].numberOfLayers+=1);b.attr({id:"cv_"+a,"cvjs:node":a,
"cvjs:roomId":c,"cvjs:name":d,"class":"cvjs_nodes","cvjs:type":e});var h=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(b).attr({id:"cv_"+a+"_group"});cvjs_addVqRoomsGraphics_newNode(a,h);cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],a)}catch(k){console.log("cvjs_createSpaceObjectGroup: "+k)}}function cvjs_addGraphicsToSpaceObjectGroup(a,b,c){c="cv_"+a+"_"+c;b.attr({id:c});jQuery("#"+c).appendTo("#cv_"+a+"_group")}
function cvjs_addObjectToSpaceObjectGroup(a,b,c,d){void 0==d&&(d=!1);d&&(b="cv_"+b+"_group");jQuery("#"+b).appendTo("#cv_"+a+"_group");b=b.substring(0,b.indexOf("_group"));jQuery('[id^="'+b+'"]').each(function(){var b=jQuery(this).attr("id"),d=b.substring(b.indexOf("NODE_")+5);d=d.substring(b.indexOf("_"));b=""!=d?"cv_"+a+"_"+d+"_"+c:"cv_"+a+"_"+c;jQuery(this).attr("id",b)})}
function cvjs_hideObjectInSpaceObjectGroup(a,b){jQuery('[id$="'+b+'"]').each(function(){-1<jQuery(this).attr("id").indexOf(a)&&jQuery(this).hide()})}function cvjs_showObjectInSpaceObjectGroup(a,b){jQuery('[id$="'+b+'"]').each(function(){-1<jQuery(this).attr("id").indexOf(a)&&jQuery(this).show()})}function cvjs_sendCustomCanvasToFront(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_handleGroup.before(cvjs_SVGGroup[cvjs_active_floorplan_div_nr])}
function cvjs_sendCustomCanvasToBack(a){cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_SVGGroup[cvjs_active_floorplan_div_nr].before(cvjs_handleGroup)}
function cvjs_copyGroupObject(a,b){cvjs_debug&&console.log(a+"  "+b);try{var c="x",d=0,e;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")==a&&(c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"),d=e);cvjs_debug&&console.log("currentNode_underbar "+c);var f="cv_"+c+"_group",g=cvjs_currentMaxSpaceNodeId();g++;var h=Node_underbar+g;jQuery("#"+f).clone().attr("id","cv_"+h+"_group").insertBefore("#"+
f);f="cv_"+c;jQuery('[id^="'+f+'"]').each(function(){var a=jQuery(this).attr("id"),c=jQuery(this).parent().attr("id");console.log("elementid="+a);console.log("pid="+c);void 0!=c&&-1<c.indexOf(h)&&(a=a.substring(f.length),a="cv_"+h+a,jQuery(this).attr({id:a,"cvjs:node":h,"cvjs:roomId":b,"cvjs:name":b,"class":"cvjs_nodes","cvjs:type":cvjs_currentNode_type}))});cvjs_addVqRoomsGraphics_newNode(h,cvjs_rPaper[cvjs_active_floorplan_div_nr].select("#cv_"+h+"_group"));cvjs_currentNode_name=cvjs_currentNode_id=
b;cvjs_currentNode_underbar=h;cvjs_currentNode_layer=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("layer");cvjs_currentNode_group=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("group");cvjs_currentNode_attributes=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("attributes");cvjs_currentNode_attributeStatus=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("attributeStatus");cvjs_currentNode_type=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("type");
cvjs_currentNode_tags=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("tags");cvjs_currentNode_occupancy=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("occupancy");cvjs_currentNode_linked=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("linked");cvjs_currentNode_translate_x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("translate_x");cvjs_currentNode_translate_y=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("translate_y");
cvjs_currentNode_scale_x=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("scale_x");cvjs_currentNode_scale_y=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("scale_y");cvjs_currentNode_rotate=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("rotate");cvjs_currentNode_transform=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][d].data("transform");cvjs_setUpVqRooms_currentNode(cvjs_rPaper[cvjs_active_floorplan_div_nr],h)}catch(k){console.log("cvjs_copySpaceObjectGroup: "+
k)}}function cvjs_changeTextOnSpaceObjectGroup(a,b,c){try{var d="x",e;for(e in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr])cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("id")==a&&(d=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"));a="cv_"+d+"_"+b;jQuery("#"+a).text(c);cvjs_debug&&console.log("currentNode_underbar "+d+" mygroup "+a)}catch(f){console.log(f)}}
function cvjs_setUpSpacesHandlesDragBackground(a){cvjs_debug&&console.log("cvjs_setUpSpacesHandlesDragBackground ");if(VqSetup)cvjs_debug&&console.log("returning cvjs_setUpSpacesHandlesDragBackground()");else{VqSetup=!0;cvjs_svgScale=cvjs_svgTransY=cvjs_svgTransX=cvjs_svgScaleTrans=cvjs_svgwidth=cvjs_svgHeight=cvjs_svgviewBox="";cvjs_svgWidthHeight100percent=!1;DefaultZoomFactor=1.1;var b=jQuery(window).height()-(jQuery("#logorow").height()+jQuery("#navrow").height()+20),c=jQuery(window).width()-
128,d="#"+a;"undefined"===typeof a&&(a=floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_debug&&console.log("2 DoSetUpVq: "+a);cvjs_active_floorplan_div_nr=cvjs_rPaperIndex(a);cvjs_leafletJS&&(cvjs_active_floorplan_div_nr=0,floorplan_div_Array[cvjs_active_floorplan_div_nr]=a,cvjs_debug&&console.log("before calling Snap to div: "+d),cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap(d),cvjs_debug&&console.log("after before calling Snap to div:"));cvjs_debug&&console.log("6.4.52 cvjs_active_floorplan_div_nr: "+
cvjs_active_floorplan_div_nr);fileOverlay?cvjs_debug&&console.log("file overlay we do nothing"):(cvjs_rPaper[cvjs_active_floorplan_div_nr]=null,d="#"+a,cvjs_rPaper[cvjs_active_floorplan_div_nr]||(cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap(d)));if(SVGloadFlag&&!SVGfragmentIsLoaded)cvjs_debug&&console.log("we are loading SVG but the fragment is False, therefore return");else{if(SVGfragmentIsLoaded){SVGfragmentIsLoaded=!1;try{cvjs_debug&&console.log("B remove all "+cvjs_initMasterBackground);if(cvjs_initMasterBackground&&
!cvjs_leafletJS)if(fileOverlay)cvjs_debug&&console.log("file overlay we do nothing 2");else{var e=document.getElementById(floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_debug&&console.log("myNode "+e);if(void 0!=e&&null!=e)for(;e.firstChild;)e.removeChild(e.firstChild);cvjs_rPaper[cvjs_active_floorplan_div_nr]=null;cvjs_rPaper[cvjs_active_floorplan_div_nr]||(cvjs_rPaper[cvjs_active_floorplan_div_nr]=Snap(d))}cvjs_svgWidthHeight100percent=!1;b=jQuery(d).height();c=jQuery(d).width();c=b=1E4;
cvjs_debug&&console.log("before adding SVG with or without _secondfile ");cvjs_SVGGroup[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].group();fileOverlay?cvjs_SVGGroup[cvjs_active_floorplan_div_nr].attr({id:"main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"_secondfile"}):cvjs_SVGGroup[cvjs_active_floorplan_div_nr].attr({id:"main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]});var f=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].svg(0,0,c,b,0,0,c,
b);f.add(SVGloadedFragment);cvjs_SVGGroup[cvjs_active_floorplan_div_nr].add(f);cvjs_leafletJS&&(cvjs_debug&&console.log("main master insert before #main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]),jQuery("#main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).insertBefore("#cv_main_Drawing"));var g=cvjs_rPaper[cvjs_active_floorplan_div_nr].toString();b=g;var h=b.indexOf("<svg");d=c=0;-1<h&&(c=b.indexOf("<svg",h+4),b.substring(0,c),b=b.substring(c),cvjs_debug&&console.log("pString after first svg is cut out: "+
b.substring(0,400)),d=b.substring(4).indexOf("<svg"),-1<d&&(c=b.indexOf("<svg",d+4),b=b.substring(c)));g=b;cvjs_debug&&console.log("After viewBox search "+g.substring(0,100));if(0<b.indexOf("viewBox")){b=b.substring(b.indexOf("viewBox")+9);b=b.substring(0,b.indexOf('"'));var k=b.split(" ")}b=g;0<b.indexOf("width=")&&(b=b.substring(b.indexOf("width=")+7),b=b.substring(0,b.indexOf('"')),cvjs_svgWidth=Number(b));0==b.indexOf("100%")&&(cvjs_svgWidthHeight100percent=!0,cvjs_svgWidth=cvjs_svgviewBox[2]);
b=g;0<b.indexOf("height=")&&(b=b.substring(b.indexOf("height=")+8),b=b.substring(0,b.indexOf('"')),cvjs_svgHeight=Number(b));0==b.indexOf("100%")&&(cvjs_svgHeight=cvjs_svgviewBox[3],cvjs_svgWidthHeight100percent=!0);try{cvjs_svgviewBox=k.map(Number),cvjs_debug&&console.log(cvjs_svgviewBox[0]+" cvjs_active_floorplan_div_nr "+cvjs_active_floorplan_div_nr+" "+actualLLX[cvjs_active_floorplan_div_nr]),cvjs_svgviewBox[2]!=cvjs_svgWidth||cvjs_svgviewBox[3]!=cvjs_svgHeight?(actualLLX[cvjs_active_floorplan_div_nr]=
0,actualLLY[cvjs_active_floorplan_div_nr]=0,actualURX[cvjs_active_floorplan_div_nr]=cvjs_svgWidth,actualURY[cvjs_active_floorplan_div_nr]=cvjs_svgHeight):(actualLLX[cvjs_active_floorplan_div_nr]=cvjs_svgviewBox[0],actualLLY[cvjs_active_floorplan_div_nr]=cvjs_svgviewBox[1],actualURX[cvjs_active_floorplan_div_nr]=cvjs_svgviewBox[2],actualURY[cvjs_active_floorplan_div_nr]=cvjs_svgviewBox[3]),cvjs_debug&&console.log("6.4.50d SETTING OF MASTERBACKGROUND "+actualURX[cvjs_active_floorplan_div_nr]+"  "+actualURY[cvjs_active_floorplan_div_nr]),
void 0!=cvjs_masterBackground[cvjs_active_floorplan_div_nr]&&cvjs_masterBackground[cvjs_active_floorplan_div_nr].remove(),cvjs_masterBackground[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])),
cvjs_masterBackground[cvjs_active_floorplan_div_nr].data("id","master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({id:"master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]}),cvjs_leafletJS?jQuery("#cv_main_drawing").insertBefore("#master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]):cvjs_masterBackground[cvjs_active_floorplan_div_nr].after(cvjs_SVGGroup),jQuery("#main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).insertBefore("#cv_main_Drawing")}catch(r){cvjs_debug&&
console.log("values.map cvjs_svgviewBox "+r),actualLLX[cvjs_active_floorplan_div_nr]=0,actualLLY[cvjs_active_floorplan_div_nr]=0,actualURX[cvjs_active_floorplan_div_nr]=cvjs_svgWidth,actualURY[cvjs_active_floorplan_div_nr]=cvjs_svgHeight}cvjs_debug&&console.log("MASTERBACKGROUND actualLLX="+actualLLX[cvjs_active_floorplan_div_nr]);var l=cvjs_svgHeight/cvjs_svgviewBox[3],m=(cvjs_svgWidth-cvjs_svgviewBox[2]/cvjs_svgviewBox[3]*cvjs_svgHeight)/2/l;cvjs_svgScaleTrans="T"+(m-cvjs_svgviewBox[0])+","+(0-
cvjs_svgviewBox[1])+"S"+l+",0,0";cvjs_svgTransX=m-cvjs_svgviewBox[0];cvjs_svgTransY=0-cvjs_svgviewBox[1];cvjs_svgScale=l;cvjs_debug&&console.log("cvjs_addSVGClickHandler "+cvjs_addSVGClickHandler);cvjs_addSVGClickHandler&&cvjs_processAddSVGClickHandler()}catch(r){console.log("Err 3 "+r)}}else cvjs_debug&&console.log("6.4.50 BEFORE INIT MASTERBACKGROUND "+cvjs_initMasterBackground),cvjs_initMasterBackground&&(cvjs_masterBackground[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],
actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])),cvjs_masterBackground[cvjs_active_floorplan_div_nr].data("id","master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({id:"master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]}));try{printDebugFlag?cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#aa0fc0",
"fill-opacity":"1.0"}):cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#fff","fill-opacity":"0.01","stroke-width":0})}catch(r){console.log("error message: "+r),cvjs_legacyBatikPDFtoSVGerror()}viewBoxWidth[cvjs_active_floorplan_div_nr]=fpWidth;viewBoxHeight[cvjs_active_floorplan_div_nr]=winHeight;rpWidth[cvjs_active_floorplan_div_nr]=actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr];rpHeight[cvjs_active_floorplan_div_nr]=actualURY[cvjs_active_floorplan_div_nr]-
actualLLY[cvjs_active_floorplan_div_nr];vBHo=viewBoxHeight[cvjs_active_floorplan_div_nr];vBWo=viewBoxWidth[cvjs_active_floorplan_div_nr];g=rpWidth[cvjs_active_floorplan_div_nr]/viewBoxWidth[cvjs_active_floorplan_div_nr];h=rpHeight[cvjs_active_floorplan_div_nr]/viewBoxHeight[cvjs_active_floorplan_div_nr];zoomScale=g>h?h:g;g=jQuery.parseJSON('{"viewBox" : "'+actualLLX[cvjs_active_floorplan_div_nr]+" "+actualLLY[cvjs_active_floorplan_div_nr]+" "+rpWidth[cvjs_active_floorplan_div_nr]+" "+rpHeight[cvjs_active_floorplan_div_nr]+
'" }');cvjs_rPaper[cvjs_active_floorplan_div_nr].attr(g);viewBox[cvjs_active_floorplan_div_nr]={X:0,Y:0,width:0,height:0};viewBox[cvjs_active_floorplan_div_nr].X=actualLLX[cvjs_active_floorplan_div_nr];viewBox[cvjs_active_floorplan_div_nr].Y=actualLLY[cvjs_active_floorplan_div_nr];viewBoxWidth[cvjs_active_floorplan_div_nr]=rpWidth[cvjs_active_floorplan_div_nr];viewBoxHeight[cvjs_active_floorplan_div_nr]=rpHeight[cvjs_active_floorplan_div_nr];layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]=
cvjs_rPaper[cvjs_active_floorplan_div_nr].paper.g();try{setUpVqURLs(cvjs_rPaper[cvjs_active_floorplan_div_nr])}catch(r){}if(cvjs_initMasterBackground)try{void 0!=layers_all&&null!=layers_all&&cvjs_masterBackground[cvjs_active_floorplan_div_nr].add(layers_all)}catch(r){console.log(r)}cvjs_leafletJS||cvjs_addMouseWheelControls(cvjs_active_floorplan_div_nr);SVGloadFlag||cvjs_setLayerTableNoSVGLoad();if(SVGloadFlag){SVGloadFlag=!1;cvjs_svgCreatedFromConversion?(cvjs_svgCreatedFromConversion=!1,cvjs_loaddrawing_FileNamePath[cvjs_active_floorplan_div_nr]=
cvjs_svgCreationContentLocation,cvjs_loadDrawing_conversionMode=!0):cvjs_loadDrawing_conversionMode=!1;cvjs_debug&&console.log("META-DATA SECTION");cvjs_getMetaDataSection();cvjs_processLayersInSVG();try{cvjs_processSpaceObjects(),cvjs_setProcessHandleObjects&&cvjs_processHandleObjects(),cvjs_debug&&console.log("BEFORE setupVqRoom  vqRooms.length "+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length+" buildings[vqBuilding].floors[vqFloor].rooms.length "+Object.keys(buildings[vqBuilding].floors[vqFloor].rooms).length),
cvjs_Community_Version?layer_cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].paper.g():cvjs_setUpSpaceObjects(cvjs_rPaper[cvjs_active_floorplan_div_nr],cvjs_active_floorplan_div_nr),cvjs_MinWidth=-1}catch(r){console.log("loop over Space Objects and Handle Objects"+r)}}cvjs_addNavigationModalContent();cvjs_setUpMasterBackgroundSVG(cvjs_active_floorplan_div_nr,a);cvjs_leafletJS&&(jQuery("#main_master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(),
jQuery("#master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide());cvjs_change_space(0);ResizeVq(jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width(),jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).height());try{cvjs_SVGGroup[cvjs_active_floorplan_div_nr].before(cvjs_masterBackground[cvjs_active_floorplan_div_nr])}catch(r){console.log("6.4.50d error setting masterbackground first")}if(cvjs_customMethodForOnLoadEnd)try{cvjs_loadInProgress=!1,cvjs_myOnLoadEndMethod()}catch(r){console.log("Please define cvjs_myOnLoadEndMethod in your encapsulating code: "+
r)}else try{var p=floorplan_div_Array[cvjs_active_floorplan_div_nr].slice(0,-4);cvjs_loadInProgress=!1;cvjs_currentRotationAngle[cvjs_active_floorplan_div_nr]=0;0==cvjs_preConversionFileExtension[cvjs_active_floorplan_div_nr].indexOf("pdf")&&cvjs_dragBackgroundToFront_SVG(p);cvjs_currentBackgroundColor[cvjs_active_floorplan_div_nr]=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("background-color");cvjs_clearSpaceLayer();first_thickness=!0;cvjs_firstLoadViewBoxX=viewBox[cvjs_active_floorplan_div_nr].X;
cvjs_firstLoadViewBoxY=viewBox[cvjs_active_floorplan_div_nr].Y;cvjs_firstLoadViewBoxW=viewBoxWidth[cvjs_active_floorplan_div_nr];cvjs_firstLoadViewBoxH=viewBoxHeight[cvjs_active_floorplan_div_nr];var n=document.querySelector(":root"),q=getComputedStyle(n);cvjs_tmsMinLineWidth_init=q.getPropertyValue("--tmsMinLineWidth");cvjs_tmsMinFixedLineWidth_init=q.getPropertyValue("--tmsMinFixedLineWidth");""==cvjs_tmsMinFixedLineWidth_init&&(cvjs_tmsMinFixedLineWidth_init=-1);cvjs_debug&&console.log("before cvjs_OnLoadEnd cvjs_tmsMinLineWidth_init: "+
cvjs_tmsMinLineWidth_init+" "+cvjs_tmsMinFixedLineWidth_init);cvjs_OnLoadEnd(p)}catch(r){console.log("Please define cvjs_OnLoadEnd in your encapsulating code: "+r)}if(cvjs_compareDrawings)try{cvjs_OnLoadEndCompareDrawings()}catch(r){console.log("Please define cvjs_OnLoadEndCompareDrawings in your encapsulating code: "+r)}a='<option value="1">'+languageTable.languages[cvjs_currentLanguage].LayerListModal.BaseAndXref+"</option>";for(p=0;p<XrefFileList.length;p++)a=a+'<option value="'+(p+2)+'">'+languageTable.languages[cvjs_currentLanguage].LayerListModal.Xref+
" "+XrefFileList[p]+"</option>";cvjs_debug&&console.log(" selectString  "+a);jQuery("#cvjs_SelectLayerDrawings").multiselect("destroy");jQuery("#cvjs_SelectLayerDrawings").empty();jQuery("#cvjs_SelectLayerDrawings").append(a);jQuery("#cvjs_SelectLayerDrawings").multiselect({includeSelectAllOption:!0});jQuery("#cvjs_SelectLayerDrawings option").each(function(){this.selected=!0});jQuery("#cvjs_SelectLayerDrawings").multiselect("refresh")}}}
function cvjs_removeHandleObjects(){try{var a=0,b={};cvjs_debug&&console.log("REMOVE HANDLE OBJECTS!!");jQuery("svg *").filter("[id^=cv_]").each(function(){var c=jQuery(this).attr("id");void 0!=jQuery(this).attr("cvjs:handle")&&(b[a]=c,a++)});for(var c=a,d=a=0;d<c;d++){var e=b[d],f="#"+e;jQuery(f).attr("cvjs:handle");var g=e;if(void 0==jQuery(f).attr("cvjs:bhandle")){var h="",k=jQuery(f).attr("class");void 0!=k&&-1<k.indexOf("AcDb")&&(h=k.substring(k.indexOf("AcDb")),-1<h.indexOf(" ")&&(h=h.substring(0,
h.indexOf(" "))));"AcDb2dPolyline"==h||"AcDb3dPolyline"==h||"AcDbMline"==h||"AcDbSpline"==h||"AcDbRegion"==h||"AcDbLine"==h||"AcDbPolyline"==h?(g=e+"_clone",cvjs_firstCloneHandleFlag||(cvjs_firstCloneHandleFlag=!0,cvjs_firstCloneHandle=g),a++,jQuery("#"+g).unbind("mouseover"),jQuery("#"+g).unbind("mouseenter"),jQuery("#"+g).unbind("mousemove"),jQuery("#"+g).unbind("mousedown"),jQuery("#"+g).unbind("mouseup"),jQuery("#"+g).unbind("mouseleave"),jQuery("#"+g).unbind("click"),jQuery("#"+g).unbind("dblclick"),
jQuery("#"+g).remove()):(jQuery("#"+g).unbind("mouseover"),jQuery("#"+g).unbind("mouseenter"),jQuery("#"+g).unbind("mousemove"),jQuery("#"+g).unbind("mousedown"),jQuery("#"+g).unbind("mouseup"),jQuery("#"+g).unbind("mouseleave"),jQuery("#"+g).unbind("click"),jQuery("#"+g).unbind("dblclick"),a++)}}}catch(l){console.log("Error remove handles: "+l)}cvjs_debug&&console.log("REMOVED handles+unbind: "+a)}
function cvjs_processHandleObjects(){var a=0,b={};try{var c=viewBox[cvjs_active_floorplan_div_nr].X,d=viewBox[cvjs_active_floorplan_div_nr].Y,e=viewBoxWidth[cvjs_active_floorplan_div_nr],f=viewBoxHeight[cvjs_active_floorplan_div_nr];console.log("viewbox "+c+" "+d+" "+f+" "+e);var g="",h=-1;jQuery("svg *").filter("[id^=cv_]").each(function(){var k=jQuery(this).attr("id"),l=jQuery(this).attr("cvjs:handle");if(void 0!=l){var n=jQuery(this).attr("cvjs:bhandle"),m=jQuery(this).attr("d"),p=jQuery(this).attr("x"),
q=jQuery(this).attr("y"),r=jQuery(this).attr("cx"),z=jQuery(this).attr("cy");if(void 0==p&&void 0==q&&void 0==m&&void 0==r&&void 0==z){var C=jQuery(this).prop("classList");if(void 0!=C)for(var D=0;D<C.length;D++)"cvjs_block"==C[D]&&(g=l,b[a]=k,h=a,a++)}void 0!=p&&void 0!=q&&(l=!0,p>c+e&&(l=!1),q>d+f&&(l=!1),q<d&&(l=!1),l&&(b[a]=k,a++),l||n!=g||(b[h]="removed",h=-1));void 0!=r&&void 0!=z&&(l=!0,r>c+e&&(l=!1),r<c&&(l=!1),z>d+f&&(l=!1),z<d&&(l=!1),l&&(b[a]=k,a++),l||n!=g||(b[h]="removed",h=-1));if(void 0!=
m){p={};p[0]=m.indexOf("l");p[1]=m.indexOf("A");p[2]=m.indexOf("H");p[3]=m.indexOf("V");p[4]=m.indexOf("L");p[5]=m.indexOf("h");p[6]=m.indexOf("v");p[7]=m.indexOf("a");q=p[0];for(r=1;8>r;r++)-1!=q?-1<p[r]&&p[r]<q&&(q=p[r]):q=p[r];-1<q&&(p=m.substring(1,q).split(","),m=parseFloat(p[0]),p=parseFloat(p[1]),l=!0,m>c+e&&(l=!1),m<c&&(l=!1),p>d+f&&(l=!1),p<d&&(l=!1),l&&(b[a]=k,a++),l||n!=g||(b[h]="removed",h=-1))}}});console.log("AFTER EACH LOOP "+a)}catch(t){console.log(" ERROR handles + blocks: "+t)}var k=
a;cvjs_debug&&console.log("NOTE: Number of Handle entities: "+a+"  alloff="+alloff);a=0;cvjs_firstCloneHandle="";cvjs_firstCloneHandleFlag=!1;for(var l=0;l<k;l++)try{var m=b[l];if("removed"!=m){var p="#"+m;jQuery(p).attr("cvjs:handle");var n=m;if(void 0==jQuery(p).attr("cvjs:bhandle")){var q="",r=jQuery(p).attr("class");-1<r.indexOf("AcDb")&&(q=r.substring(r.indexOf("AcDb")),-1<q.indexOf(" ")&&(q=q.substring(0,q.indexOf(" "))));if("AcDb2dPolyline"==q||"AcDb3dPolyline"==q||"AcDbMline"==q||"AcDbSpline"==
q||"AcDbRegion"==q||"AcDbLine"==q||"AcDbPolyline"==q||"AcDbHatch"==q)n=m+"_clone",cvjs_firstCloneHandleFlag||(cvjs_firstCloneHandleFlag=!0,cvjs_firstCloneHandle=n),a++,jQuery(p).clone().insertAfter(p).attr("id",n),jQuery("#"+n).removeClass("ZW"),jQuery("#"+n).removeClass("nZW"),jQuery("#"+n).addClass("ZW6"),jQuery("#"+n).css({opacity:.01});jQuery("#"+n).css("pointer-events","auto");jQuery("#"+n).css("cursor","pointer");jQuery("#"+n).mousemove(function(a){if(!alloff){if(cvjs_measurement_active){jQuery(this).attr("cvjs:handle");
var b=jQuery(this).attr("d");""!=b&&void 0!=b?2==cvjs_measurementInteractiveType?(cvjs_measurementActionClickMoveInHandleObject(a,b,!1),mousemove_polygon_area_measurement_core(cvjs_realClickMoveInHandleObjectX,cvjs_realClickMoveInHandleObjectY)):(cvjs_measurementActionClickMoveInHandleObject(a,b,!0),mousemove_polygon_measurement_core(lastX_poly_redline1,lastY_poly_redline1)):2==cvjs_measurementInteractiveType?mousemove_polygon_area_measurement_core(a.pageX,a.pageY):mousemove_polygon_measurement_core(a.pageX,
a.pageY)}calibration_active&&(jQuery(this).attr("cvjs:handle"),b=jQuery(this).attr("d"),""!=b&&void 0!=b?(cvjs_measurementActionClickMoveInHandleObject(a,b,!0),mousemove_polygon_calibrate_core(lastX_poly_redline1,lastY_poly_redline1)):mousemove_polygon_calibrate_core(a.pageX,a.pageY))}});jQuery("#"+n).mouseout(function(a){if(!alloff){a=jQuery(this).attr("id");var b=jQuery(this).attr("class"),c="";-1<b.indexOf("AcDb")&&(c=b.substring(b.indexOf("AcDb")),-1<c.indexOf(" ")&&(c=c.substring(0,c.indexOf(" "))));
b=jQuery(this).attr("cvjs:handle");0<a.indexOf("_clone")?cvjs_mouseout(a.substring(0,a.indexOf("_clone")),b,c):cvjs_mouseout(a,b,c);cvjs_handleToolTip&&tip[cvjs_active_floorplan_div_nr].hide();cvjs_measurement_active&&8==cvjs_measurementInteractiveType&&(cvjs_measurementInteractiveType8ClickFlag||("AcDb2dPolyline"==c||"AcDb3dPolyline"==c||"AcDbMline"==c||"AcDbSpline"==c||"AcDbRegion"==c||"AcDbLine"==c||"AcDbPolyline"==c)&&jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("0 "+
cvjs_units[cvjs_active_floorplan_div_nr]))}});jQuery("#"+n).mouseleave(function(a){if(!alloff){a=jQuery(this).attr("id");var b=jQuery(this).attr("class"),c="";-1<b.indexOf("AcDb")&&(c=b.substring(b.indexOf("AcDb")),-1<c.indexOf(" ")&&(c=c.substring(0,c.indexOf(" "))));b=jQuery(this).attr("cvjs:handle");0<a.indexOf("_clone")?cvjs_mouseleave(a.substring(0,a.indexOf("_clone")),b,c):cvjs_mouseleave(a,b,c)}});jQuery("#"+n).mouseover(function(a){if(!alloff){var b=jQuery(this).attr("id");cvjs_debug&&console.log("over "+
b);var c=jQuery(this).attr("class"),d="",e=jQuery(this).attr("cvjs:handle");-1<c.indexOf("AcDb")&&(d=c.substring(c.indexOf("AcDb")),-1<d.indexOf(" ")&&(d=d.substring(0,d.indexOf(" "))));if(cvjs_measurement_active&&8==cvjs_measurementInteractiveType&&!cvjs_measurementInteractiveType8ClickFlag){var f=jQuery(this).attr("d");if(""!=f&&void 0!=f){var g=(cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*cvjs_getLengthOfSVGPath(f)).toFixed(2);0==cvjs_units[cvjs_active_floorplan_div_nr].indexOf("feet")?
(c=Math.floor(g),g-=Math.floor(g),g=Math.round(16*g),16==g&&(c+=1,g=0),jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(c+"' "+g+'/16"')):jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(g+" "+cvjs_units[cvjs_active_floorplan_div_nr])}}0<b.indexOf("_clone")?cvjs_mouseover(b.substring(0,b.indexOf("_clone")),e,d):cvjs_mouseover(b,e,d);cvjs_handleToolTip&&(tip[cvjs_active_floorplan_div_nr].css({position:"fixed"}),b="Handle: "+
e+"<br>"+d,cvjs_measurement_active&&8==cvjs_measurementInteractiveType&&!cvjs_measurementInteractiveType8ClickFlag&&""!=f&&void 0!=f&&(b=b+"<br>"+jQuery("#cvjs_measurementBox_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html()),tip[cvjs_active_floorplan_div_nr].html(b),tip[cvjs_active_floorplan_div_nr].show(),f=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position(),"absolute"==jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).css("position")?tip[cvjs_active_floorplan_div_nr].css("left",
a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-f.left+document.documentElement.scrollLeft+10).css("top",a.clientY-f.top+document.documentElement.scrollTop-25))}});jQuery("#"+n).mouseenter(function(a){if(!alloff){a=jQuery(this).attr("id");var b=jQuery(this).attr("class"),c="",d=jQuery(this).attr("cvjs:handle");-1<b.indexOf("AcDb")&&(c=b.substring(b.indexOf("AcDb")),-1<c.indexOf(" ")&&
(c=c.substring(0,c.indexOf(" "))));jQuery(this).attr("cvjs:handle");0<a.indexOf("_clone")?cvjs_mouseenter(a.substring(0,a.indexOf("_clone")),d,c):cvjs_mouseenter(a,d,c)}});jQuery("#"+n).mousedown(function(a){if(!alloff){var b=jQuery(this).attr("id"),c=jQuery(this).attr("class"),d="";-1<c.indexOf("AcDb")&&(d=c.substring(c.indexOf("AcDb")),-1<d.indexOf(" ")&&(d=d.substring(0,d.indexOf(" "))));c=jQuery(this).attr("cvjs:handle");var e=jQuery(this).attr("d");if(!cvjs_calibrateSelectObject||"AcDb2dPolyline"!=
d&&"AcDb3dPolyline"!=d&&"AcDbMline"!=d&&"AcDbSpline"!=d&&"AcDbRegion"!=d&&"AcDbLine"!=d&&"AcDbPolyline"!=d){if(cvjs_measurement_active&&8!=cvjs_measurementInteractiveType)try{""!=e&&void 0!=e?2==cvjs_measurementInteractiveType?(console.log("3 click this is area"),cvjs_measurementActionClickMoveInHandleObject(a,e,!1),mousemove_polygon_area_measurement_core(cvjs_realClickMoveInHandleObjectX,cvjs_realClickMoveInHandleObjectY),mousedown_polygon_area_measurement_core(cvjs_realClickMoveInHandleObjectX,
cvjs_realClickMoveInHandleObjectY)):(cvjs_measurementActionClickMoveInHandleObject(a,e,!0),mousemove_polygon_measurement_core(lastX_poly_redline1,lastY_poly_redline1),mousedown_polygon_measurement_core(lastX_poly_redline1,lastY_poly_redline1)):2==cvjs_measurementInteractiveType?(console.log("4 click this is area"),mousemove_polygon_area_measurement_core(a.pageX,a.pageY),mousedown_polygon_area_measurement_core(a.pageX,a.pageY)):(mousemove_polygon_measurement_core(a.pageX,a.pageY),mousedown_polygon_measurement_core(a.pageX,
a.pageY));return}catch(B){console.log(B);return}!cvjs_measurement_active||8!=cvjs_measurementInteractiveType||"AcDb2dPolyline"!=d&&"AcDb3dPolyline"!=d&&"AcDbMline"!=d&&"AcDbSpline"!=d&&"AcDbRegion"!=d&&"AcDbLine"!=d&&"AcDbPolyline"!=d?0<b.indexOf("_clone")?cvjs_mousedown(b.substring(0,b.indexOf("_clone")),c,d,e,a.offsetX,a.offsetY):cvjs_mousedown(b,c,d,e,a.offsetX,a.offsetY):(cvjs_measurementInteractiveType8ClickFlag=alloff=!0,0<b.indexOf("_clone")&&(b=b.substring(0,b.indexOf("_clone"))),cvjs_HighlightHandleObjectStyles("#0FF",
2,1,!0,b,c),tip[cvjs_active_floorplan_div_nr].hide())}else alloff=!0,0<b.indexOf("_clone")&&(b=b.substring(0,b.indexOf("_clone"))),cvjs_HighlightHandleObjectStyles("#0FF",2,1,!0,b,c),tip[cvjs_active_floorplan_div_nr].hide(),mLength_calibrateSelectObject=cvjs_getLengthOfSVGPath(e),jQuery("#cvjs_calibrateReferenceDistance").val((cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]*mLength_calibrateSelectObject).toFixed(2))}});jQuery("#"+n).click(function(a){if(!alloff){var b=jQuery(this).attr("id"),c=
jQuery(this).attr("class"),d="";-1<c.indexOf("AcDb")&&(d=c.substring(c.indexOf("AcDb")),-1<d.indexOf(" ")&&(d=d.substring(0,d.indexOf(" "))));c=jQuery(this).attr("cvjs:handle");var e=jQuery(this).attr("d");calibration_active&&(c=jQuery(this).attr("cvjs:handle"),e=jQuery(this).attr("d"),""!=e?(cvjs_measurementActionClickMoveInHandleObject(a,e),mousedown_polygon_calibrate_core(lastX_poly_redline1,lastY_poly_redline1)):mousedown_polygon_calibrate_core(a.pageX,a.pageY));0<b.indexOf("_clone")?cvjs_click(b.substring(0,
b.indexOf("_clone")),c,d,e,a.offsetX,a.offsetY):cvjs_click(b,c,d,e,a.offsetX,a.offsetY)}});jQuery("#"+n).dblclick(function(a){if(!alloff){if(cvjs_measurement_active){var b=jQuery(this).attr("d");if(2==cvjs_measurementInteractiveType)try{""!=b?(console.log("4 dblclick this is area"),cvjs_measurementActionClickMoveInHandleObject(a,b),mousemove_polygon_area_measurement_core(lastX_poly_redline1,lastY_poly_redline1)):(console.log("5 dblclick this is area"),mousemove_polygon_area_measurement_core(a.pageX,
a.pageY));measurement_finish_filledpolygon();return}catch(y){console.log(y);return}else return}a=jQuery(this).attr("id");var c=jQuery(this).attr("class");b="";-1<c.indexOf("AcDb")&&(b=c.substring(c.indexOf("AcDb")),-1<b.indexOf(" ")&&(b=b.substring(0,b.indexOf(" "))));c=jQuery(this).attr("cvjs:handle");0<a.indexOf("_clone")?cvjs_dblclick(a.substring(0,a.indexOf("_clone")),c,b):cvjs_dblclick(a,c,b)}})}}}catch(t){console.log(t)}cvjs_debug&&console.log("CLONED Number of Handle entities: "+a)}
function cvjs_processLayersInSVG(){layerTable[cvjs_active_floorplan_div_nr]={numberOfLayers:0,layers:[]};var a={};jQuery("[id^=layer_]").each(function(){var a=jQuery(this).attr("id"),b=a.toString();-1<b.indexOf("\\u")&&(b=b.replace(/\\u/g,"__u"),document.getElementById(a).setAttribute("id",b))});jQuery("[id^=layer_]").each(function(){var b=jQuery(this).attr("id"),c="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]";jQuery("#"+b).parents(c).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&
(a[b]||(a[b]=!0),jQuery(this).attr(hide))});XrefFileList[0]="none";var b=XrefFileList.length=0,c;for(c in a){var d="#"+c,e=c,f="",g="",h="ON";f=jQuery(d).attr("class");jQuery(d).each(function(){jQuery.each(this.attributes,function(){if(this.specified){var a=this.name.toString().toLowerCase();"id"==a&&(e=this.value);"class"==a&&(f=this.value);"cvjs:layername"==a&&(g=this.value);"cvjs:status"==a&&(h=this.value)}})});var k=g=JSON.parse('"'+g+'"'),l="none",m=!1,p="none";p=void 0==cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]||
null==cvjs_preConversionFileName[cvjs_active_floorplan_div_nr]?"svg":cvjs_preConversionFileName[cvjs_active_floorplan_div_nr].substring(cvjs_preConversionFileName[cvjs_active_floorplan_div_nr].lastIndexOf(".")+1);if(-1<g.indexOf("|")){k=g.substring(g.indexOf("|")+1);l=g.substring(0,g.indexOf("|"))+"."+p;for(p=0;p<XrefFileList.length;p++)0==XrefFileList[p].indexOf(l)&&(m=!0),0==XrefFileList[p].indexOf("none")&&(XrefFileList[p]=l,m=!0);m||(XrefFileList[XrefFileList.length]=l)}try{if(-1<f.toString().indexOf("\\u")||
f.toString().endsWith("_block")){if(-1<f.toString().indexOf("\\u")){jQuery(d).removeClass(f);var n=f.toString().replace(/\\u/g,"_u");jQuery(d).addClass(n);f=jQuery(d).attr("class");var q=d.toString().replace(/__u/g,"_u");if(jQuery(q).length)jQuery(d).detach().appendTo(q);else{var r={layer:e,layerClass:f,layerName:g,status:h,layerBaseName:k,xRefFile:l};layerTable[cvjs_active_floorplan_div_nr].layers[b]=r;b++;layerTable[cvjs_active_floorplan_div_nr].numberOfLayers=b}}f.toString().endsWith("_block")&&
(q=d.substring(0,d.toString().indexOf("_block")),jQuery(q).length?(jQuery(d).removeClass(f),n=f.toString().substring(0,f.toString().indexOf("_block")),jQuery(d).addClass(n),f=jQuery(d).attr("class"),jQuery(d).detach().appendTo(q)):(r={layer:e,layerClass:f,layerName:g,status:h,layerBaseName:k,xRefFile:l},layerTable[cvjs_active_floorplan_div_nr].layers[b]=r,b++,layerTable[cvjs_active_floorplan_div_nr].numberOfLayers=b))}else r={layer:e,layerClass:f,layerName:g,status:h,layerBaseName:k,xRefFile:l},layerTable[cvjs_active_floorplan_div_nr].layers[b]=
r,b++,layerTable[cvjs_active_floorplan_div_nr].numberOfLayers=b}catch(t){f=e,g=e.substring(e.indexOf("layer_")+6),h="ON",r={layer:e,layerClass:f,layerName:g,status:h,layerBaseName:k,xRefFile:l},layerTable[cvjs_active_floorplan_div_nr].layers[b]=r,b++,layerTable[cvjs_active_floorplan_div_nr].numberOfLayers=b}}for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++){for(c=0;c<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;c++)b!=c?jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[c].layer).attr(hide):
jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[c].layer).attr(show);bbox=cvjs_SVGGroup[cvjs_active_floorplan_div_nr].getBBox()}try{for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[b].layer).attr(show)}catch(t){console.log(t+" show layers")}try{for(b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)"cvjs_Thumb"==layerTable[cvjs_active_floorplan_div_nr].layers[b].layerName&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),
layerTable[cvjs_active_floorplan_div_nr].layers[b].status="OFF"),jQuery("#"+layerTable[cvjs_active_floorplan_div_nr].layers[b].layer).mousedown(function(a){if(cvjs_turnDrawingLayerOffFlag){cvjs_turnDrawingLayerOffFlag=!1;a=jQuery(this).attr("id");for(var b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)layerTable[cvjs_active_floorplan_div_nr].layers[b].layerClass==a&&"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[b].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),
layerTable[cvjs_active_floorplan_div_nr].layers[b].status="OFF")}})}catch(t){console.log("we could not add Layer handlers to objects"+t)}}
function cvjs_setUpMasterBackgroundSVG(a,b){cvjs_resetZoomPan_SetMasterBackground(a);cvjs_floorplan_div=b;cvjs_masterBackground[a].drag(dragMove,dragStart,dragEnd);cvjs_masterBackground[a].mousedown(function(c){c=this.data("id");c=c.substring(7);a=cvjs_rPaperIndex(b);cvjs_debug&&console.log(c+"  "+a+"    active_floorplan_div_nr")});cvjs_masterBackground[a].mouseup(function(b){cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[a].attr(show);dragInsidePolygon&&0==totalDragStart&&(dragInsidePolygon=
!1,DoMouseUp(b,b.clientX+document.body.scrollLeft,b.clientY+document.body.scrollTop),setRoomAfterPanPC())});cvjs_masterBackground[a].mousemove(function(b){try{mousex=b.clientX+document.body.scrollLeft;mousey=b.clientY+document.body.scrollTop;try{if(!cvjs_Community_Version&&tooltipLast[a]!=cvjs_lastObj[a]&&cvjs_location_flag&&-1!=tooltipLast[a]){if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors){var c=cvjs_SpaceObjectsContent[a][tooltipLast[a]].data("node"),e="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id");
jQuery(e).attr(defaultColor)}else cvjs_SpaceObjectsContent[a][tooltipLast[a]].data("linked")?(c=cvjs_SpaceObjectsContent[a][tooltipLast[a]].data("node"),e="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id"),jQuery(e).attr(defaultColor_linked)):(c=cvjs_SpaceObjectsContent[a][tooltipLast[a]].data("node"),e="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id"),jQuery(e).attr(defaultColor_unlinked));tip[a].hide()}}catch(f){}try{tooltipLastStickyNote!=lastObjStickyNote[a]&&cvjs_location_flag&&(cvjs_supressPopUpModal?
vqStickyNotes[tooltipLastStickyNote].data("linked")?vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_linked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_unlinked):vqStickyNotes[tooltipLastStickyNote].attr(defaultColor_StickyNotes),tip[a].hide())}catch(f){}try{tooltipLastHyperlink!=lastObjHyperlink[a]&&cvjs_location_flag&&(cvjs_supressHyperlinkColors?vqURLs[tooltipLastHyperlink].attr(defaultColor_Hyperlinks_blank):vqURLs[tooltipLastHyperlink].attr(defaultColor_Hyperlinks),tip[a].hide())}catch(f){}dragInsidePolygon&&
0==totalDragStart&&(dx=b.clientX+document.body.scrollLeft,dy=b.clientY+document.body.scrollTop,DoMouseMove(dx,dy))}catch(f){}}).touchstart(function(b){cvjs_debug&&console.log("touchstart masterbackground "+thumb_loaded+" panWithThumb"+panWithThumb+" totalDragStart"+totalDragStart);preventDrag=!0;try{b.cancelable&&(b.preventDefault(),b.stopPropagation())}catch(d){console.log("touch start :"+d)}if(!thumb_loaded){thumb_loaded=!0;try{drawThumb(2,cvjs_rPaper[a])}catch(d){console.log(d)}}try{0==totalDragStart&&
(panWithThumb&&(layers_all.attr(hide),layer_thumb.attr(show),all_layer_off_thumb_on()),layer_cvjs_SpaceObjectsContent[a].attr(hide))}catch(d){console.log("touchstart: "+d)}try{firstFingerX=b.touches[0].pageX,firstFingerY=b.touches[0].pageY,totalDragStart=1,preventDrag=!1,firstFingerX1=firstFingerX,firstFingerY1=firstFingerY,firstFingerX1_base=firstFingerX,firstFingerY1_base=firstFingerY,firstFingerX1_viewBox_base=viewBox[a].X,firstFingerY1_viewBox_base=viewBox[a].Y,secondFingerX=b.touches[1].pageX,
secondFingerY=b.touches[1].pageY,totalDragStart=2,preventDrag=!0,deltaXinit=secondFingerX-firstFingerX,deltaYinit=secondFingerY-firstFingerY,deltaDynamicPre=deltaBase=Math.sqrt(deltaXinit*deltaXinit+deltaYinit*deltaYinit),viewBox_initX[a]=viewBox[a].X,viewBox_initY[a]=viewBox[a].Y,viewBoxWidth_init[a]=viewBoxWidth[a],viewBoxHeight_init[a]=viewBoxHeight[a],flagOK=!0}catch(d){}}).touchend(function(b){cvjs_debug&&console.log("touchend masterbackground totalDragStart"+totalDragStart);preventDrag=!0;2==
totalDragStart&&(b.cancelable&&(b.preventDefault(),b.stopPropagation()),tip[a].hide(),cvjs_Community_Version||hideOnlyPop());try{2==totalDragStart&&pinch_zoom_two_fingers_touchend(),1==totalDragStart&&console.log("XX touchend 1, let us move"),totalDragStart=0,cvjs_Community_Version||layer_cvjs_SpaceObjectsContent[a].attr(show),panWithThumb&&(layers_all.attr(show),layer_thumb.attr(hide),all_layer_on_thumb_off())}catch(d){console.log(d)}}).touchmove(function(b){b.stopPropagation();preventDrag&&b.cancelable&&
(b.preventDefault(),b.stopPropagation());2==totalDragStart&&(b.cancelable&&(b.preventDefault(),b.stopPropagation()),tip[a].hide(),cvjs_Community_Version||hideOnlyPop());2==totalDragStart&&pinch_zoom_two_fingers(b.touches[0].pageX,b.touches[0].pageY,b.touches[1].pageX,b.touches[1].pageY);if(1==totalDragStart)try{if(firstFingerX=b.touches[0].pageX,firstFingerY=b.touches[0].pageY,totalDragStart=1,preventDrag=!1,preventDrag=!0,deltaX=firstFingerX1-firstFingerX,deltaY=firstFingerY1-firstFingerY,deltaDynamic=
Math.sqrt(deltaX*deltaX+deltaY*deltaY),(4<deltaDynamic-deltaDynamicPre||-4>deltaDynamic-deltaDynamicPre)&&flagOK){flagOK=!1;deltaDynamicPre=deltaDynamic;canvas_width=jQuery("#"+floorplan_div_Array[a]).width();canvas_height=jQuery("#"+floorplan_div_Array[a]).height();jQuery("#"+floorplan_div_Array[a]).position();global_scale_X=canvas_width/viewBoxWidth[a];global_scale_Y=canvas_height/viewBoxHeight[a];global_scale=global_scale_X<global_scale_Y?global_scale_X:global_scale_Y;viewBox[a].X=firstFingerX1_viewBox_base+
(-firstFingerX+firstFingerX1_base)/global_scale;viewBox[a].Y=firstFingerY1_viewBox_base+(-firstFingerY+firstFingerY1_base)/global_scale;var c=jQuery.parseJSON('{"viewBox" : "'+viewBox[a].X+" "+viewBox[a].Y+" "+viewBoxWidth[a]+" "+viewBoxHeight[a]+'" }');cvjs_rPaper[a].attr(c);firstFingerX1=firstFingerX;firstFingerY1=firstFingerY;flagOK=!0}}catch(e){console.log("touchmove: "+e)}})}
function cvjs_processSpaceObjects(){void 0==cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]&&(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]=[]);vqBuilding="BUILDING_NAME_GOES_HERE";vqFloor="FLOOR_NAME_GOES_HERE";buildings={BUILDING_NAME_GOES_HERE:{name:"",company:"",address:"",city:"",state:"",zipcode:"",country:"",FacMgr:"",FacMgr_title:"",FacMgr_email:"",FacMgr_phone:"",floors:{FLOOR_NAME_GOES_HERE:{name:"name_of_file_to_appear",file:"file_name",rooms:{}}}}};cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]=
[];var a={};jQuery(".cvjs_nodes, [id^=layer_]").each(function(){var b=jQuery(this).attr("id"),c="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]";jQuery("#"+b).parents(c).attr("id")==floorplan_div_Array[cvjs_active_floorplan_div_nr]&&(a[b]||(a[b]=!0))});var b=0;try{cvjs_units[cvjs_active_floorplan_div_nr]=worldUnits.units}catch(n){cvjs_units[cvjs_active_floorplan_div_nr]="mm"}var c="cvjs_SpaceLayer",d;for(d in a){try{var e="#"+d;jQuery(e).each(function(){jQuery.each(this.attributes,function(){this.specified&&
"cvjs:layername"==this.name.toString().toLowerCase()&&(c=this.value)})})}catch(n){console.log("try catch layer")}try{e="#"+d;var f=jQuery(e).attr("d");b++;var g="",h="",k="",l="",m="";jQuery(e).each(function(){jQuery.each(this.attributes,function(){if(this.specified){var a=this.name.toString().toLowerCase();"cvjs:roomid"==a&&(k=this.value);"cvjs:name"==a&&(h=this.value);"cvjs:roomname"==a&&(h=this.value);"cvjs:type"==a&&(l=this.value);"cvjs:node"==a&&(g=this.value);"cvjs:area"==a&&(m=this.value)}})});
if(""!=g){try{jQuery(e).removeClass("cvjs_nodes").removeAttr("cvjs:node",g)}catch(n){console.log(n)}try{var p=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].path(f).attr("id","cv_"+g)).attr({id:"cv_"+g+"_group"}).attr({cursor:"pointer"}).attr({"pointer-events":"auto"}).data("node",g);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].push(p);jQuery("#cv_"+g+"_group").addClass("cvjs_nodes").attr("cvjs:roomid",k).attr("cvjs:node",g);jQuery("#cv_"+g+"_group").attr(defaultColor);
jQuery("#cv_"+g+"_group").css("pointer-events","auto");jQuery("#cv_"+g+"_group").css("cursor","pointer")}catch(n){window.alert(n)}""==h&&(h=k);""==l&&(l="Space");"m"==cvjs_units[cvjs_active_floorplan_div_nr]?(""!=m&&(l+=" <br>"+Number(m).toFixed(2)+" m<sup>2</sup>"),""!=m&&(m=Number(m).toFixed(2)+" m2")):"cm"==cvjs_units[cvjs_active_floorplan_div_nr]?(""!=m&&(l+=" <br>"+(Number(m)/1E4).toFixed(2)+" m<sup>2</sup>"),""!=m&&(m=(Number(m)/1E4).toFixed(2)+" m2")):"mm"==cvjs_units[cvjs_active_floorplan_div_nr]?
(""!=m&&(l+=" <br>"+(Number(m)/1E6).toFixed(2)+" m<sup>2</sup>"),""!=m&&(m=(Number(m)/1E6).toFixed(2)+" m2")):"in"==cvjs_units[cvjs_active_floorplan_div_nr]?(""!=m&&(l+=" <br>"+(Number(m)/1550.003).toFixed(2)+" m<sup>2</sup>"),""!=m&&(m=(Number(m)/1550.003).toFixed(2)+" m2")):(""!=m&&(l+=" <br>"+(Number(m)/1E6).toFixed(2)+" m<sup>2</sup>"),""!=m&&(m=(Number(m)/1E6).toFixed(2)+" m2"));buildings[vqBuilding].floors[vqFloor].rooms[g]={name:h,id:k,type:l,area:m,attributeStatus:"unpopulated",attributes:[{name:"Room Id",
value:""},{name:"FirstName",value:""},{name:"LastName",value:""},{name:"Phone",value:""},{name:"Building",value:""},{name:"Floor",value:""},{name:"Department",value:""},{name:"Division",value:""},{name:"Dept Name",value:""},{name:"Category",value:""},{name:"Type",value:""},{name:"Standard",value:""}],occupancy:"",tags:{1:""},linked:!0,handle:"",layer:c,displaySpaceObject:"on"}}}catch(n){console.log("Err 8: "+n)}}}
function cvjs_addNavigationModalContent(){try{try{if(cvjs_rPaper[cvjs_active_floorplan_div_nr].selectAll("text").attr({"stroke-width":"0"}),cvjs_rPaper[cvjs_active_floorplan_div_nr].selectAll("path").attr({"stroke-linejoin":"round"}),cvjs_PDFloadFlag||jQuery("#cvjs_wait_looper_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).hide(500),page_change_modal_offset_flag[cvjs_active_floorplan_div_nr]&&(page_change_modal_offset_flag[cvjs_active_floorplan_div_nr]=!1,pageChangeInterface[cvjs_interfaceCounterIndex(floorplan_div_Array[cvjs_active_floorplan_div_nr])])){jQuery("#floatNavigationMenu_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).show();var a=jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).position(),b=a.top+5,c=a.left+jQuery("#"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).width()-475;40>c&&(c=40);jQuery("#floatNavigationMenu_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).offset({top:b,left:c})}}catch(h){console.log("LoadEnd: change_modal: "+h)}try{a="";a=cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]?cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage+
"/"+cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].multiPages:multiPages[cvjs_active_floorplan_div_nr].currentPage+"/"+multiPages[cvjs_active_floorplan_div_nr].multiPages;var d=a.length;jQuery("#floatpagemenuText1_topBar_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(a);a="&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"+a;7<=d?(a+="",d+=1):6==d?(a="&nbsp"+a,d=9):5==d?(a="&nbsp&nbsp"+a,d=9):4==d?(a="&nbsp&nbsp&nbsp&nbsp"+a,d=9):3==d&&(a=
"&nbsp&nbsp&nbsp&nbsp&nbsp"+a+"&nbsp",d=9);a+="&nbsp&nbsp&nbsp&nbsp";if(cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]){var e="";e=-1<cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage-1].pageName.indexOf("com.autodesk")?"Layout":cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].pages[cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr].currentPage-1].pageName}else e="",e=-1<multiPages[cvjs_active_floorplan_div_nr].pages[multiPages[cvjs_active_floorplan_div_nr].currentPage-
1].pageName.indexOf("com.autodesk")?"Layout":multiPages[cvjs_active_floorplan_div_nr].pages[multiPages[cvjs_active_floorplan_div_nr].currentPage-1].pageName;var f=e;d=f.length;23<d&&(f=f.substring(0,21)+"..");jQuery("#floatpagemenuText2_topBar_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(f);var g=a+"  "+f;jQuery("#floatpagemenuText_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(g);cvjs_SVG_multiPagesFlag[cvjs_active_floorplan_div_nr]&&(multiPages[cvjs_active_floorplan_div_nr]=
cvjs_SVG_multiPages[cvjs_active_floorplan_div_nr])}catch(h){console.log("LoadEnd: pageNr_err: "+h),g="&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1/1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  Single Page",jQuery("#floatpagemenuText_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html(g),jQuery("#floatpagemenuText1_topBar_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("1/1"),jQuery("#floatpagemenuText2_topBar_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]).html("Single Page")}try{cvjs_redlineThickness_scaleFactor=cvjs_redlineThickness_drawingFactor*Math.sqrt(Math.pow(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],2)+Math.pow(actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],2)),first_thickness=!0,cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr]&&(cvjs_displayMagnifyingGlassFlag[cvjs_active_floorplan_div_nr]=!1,cvjs_exitBirdsEye(floorplan_div_Array[cvjs_active_floorplan_div_nr])),
cvjs_calibratedMeasurement=!1,cvjs_clearDrawingStickyNotes(),cvjs_Community_Version||cvjs_updateDrawingRedlines(cvjs_redlineStickyNoteLayer[cvjs_active_floorplan_div_nr])}catch(h){console.log("LoadEnd: magnify, clear, update, checkLicense: "+h)}}catch(h){console.log(" 1 LoadEnd: "+h)}}
function cvjs_getMetaDataSection(){var a="";try{for(var b=document.querySelectorAll('[id^="cadviewer_multiPages"]'),c=!1,d=0,e=b.length;d<e;d++){var f=b[d].id,g="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]",h=jQuery("#"+f).parents(g).attr("id");h!=floorplan_div_Array[cvjs_active_floorplan_div_nr]||c||(c=!0,a=b[d].textContent,a=a.substring(a.indexOf("=")+1),multiPages[cvjs_active_floorplan_div_nr]=jQuery.parseJSON(a))}c||(a=document.getElementById("cadviewer_multiPages").textContent,
a=a.substring(a.indexOf("=")+1),multiPages[cvjs_active_floorplan_div_nr]=jQuery.parseJSON(a))}catch(k){cvjs_debug&&console.log("no multiPages["+cvjs_active_floorplan_div_nr+"] defined in metadata"+k)}try{b=document.querySelectorAll('[id^="cadviewer_worldUnits"]');c=!1;d=0;for(e=b.length;d<e;d++)f=b[d].id,g="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]",h=jQuery("#"+f).parents(g).attr("id"),h!=floorplan_div_Array[cvjs_active_floorplan_div_nr]||c||(c=!0,a=b[d].textContent,a=a.substring(a.indexOf("=")+
1),cvjs_debug&&console.log(a),worldUnits=jQuery.parseJSON(a));c||(a=document.getElementById("cadviewer_worldUnits").textContent,a=a.substring(a.indexOf("=")+1),cvjs_debug&&console.log(a),worldUnits=jQuery.parseJSON(a));0==worldUnits.svgToWorldUnits&&(worldUnits.svgToWorldUnits=1);worldUnits.svgToWorldUnits=1/worldUnits.svgToWorldUnits;cvjs_svgToWorldUnits[cvjs_active_floorplan_div_nr]=worldUnits.svgToWorldUnits;cvjs_units[cvjs_active_floorplan_div_nr]=worldUnits.units;cvjs_debug&&console.log("worldUnits.units "+
worldUnits.units)}catch(k){cvjs_debug&&console.log("no worldUnits defined in metadata"+k)}try{b=document.querySelectorAll('[id^="cadviewer_drawingCoordinates"]');c=!1;d=0;for(e=b.length;d<e;d++)f=b[d].id,g="[id^="+floorplan_div_Array[cvjs_active_floorplan_div_nr]+"]",h=jQuery("#"+f).parents(g).attr("id"),h!=floorplan_div_Array[cvjs_active_floorplan_div_nr]||c||(c=!0,a=b[d].textContent,a=a.replace(/(\r\n|\n|\r)/gm,""),cvjs_debug&&console.log("cadviewer_drawingCoordinates="+a+"XXX"),cvjs_drawingCoordinates[multiPages[cvjs_active_floorplan_div_nr].currentPage]=
jQuery.parseJSON(a));c||(a=document.getElementById("cadviewer_drawingCoordinates").textContent,a=a.replace(/(\r\n|\n|\r)/gm,""),cvjs_debug&&console.log("cadviewer_drawingCoordinates="+a+"XXX"),cvjs_drawingCoordinates[multiPages[cvjs_active_floorplan_div_nr].currentPage]=jQuery.parseJSON(a))}catch(k){cvjs_debug&&console.log("no drawingCoordinates defined in metadata or parsing error "+k)}}
function cvjs_setLayerTableNoSVGLoad(){cvjs_debug&&console.log("before parsing Layers ");try{for(var a=0;a<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;a++)layerTable[cvjs_active_floorplan_div_nr].layers[a].layer.data("layerClass",layerTable[cvjs_active_floorplan_div_nr].layers[a].layerClass),layerTable[cvjs_active_floorplan_div_nr].layers[a].layer.mousedown(function(a){if(cvjs_turnDrawingLayerOffFlag){cvjs_turnDrawingLayerOffFlag=!1;a=this.data("layerClass");for(var b=0;b<layerTable[cvjs_active_floorplan_div_nr].numberOfLayers;b++)layerTable[cvjs_active_floorplan_div_nr].layers[b].layerClass==
a&&"ON"==layerTable[cvjs_active_floorplan_div_nr].layers[b].status&&(cvjs_LayerOff(layerTable[cvjs_active_floorplan_div_nr].layers[b].layer),layerTable[cvjs_active_floorplan_div_nr].layers[b].status="OFF")}})}catch(b){console.log("we could not add Layer handlers to objects"+b)}}
function cvjs_legacyBatikPDFtoSVGerror(){try{cvjs_masterBackground[cvjs_active_floorplan_div_nr]=cvjs_rPaper[cvjs_active_floorplan_div_nr].group(cvjs_rPaper[cvjs_active_floorplan_div_nr].rect(actualLLX[cvjs_active_floorplan_div_nr],actualLLY[cvjs_active_floorplan_div_nr],actualURX[cvjs_active_floorplan_div_nr]-actualLLX[cvjs_active_floorplan_div_nr],actualURY[cvjs_active_floorplan_div_nr]-actualLLY[cvjs_active_floorplan_div_nr])),cvjs_masterBackground[cvjs_active_floorplan_div_nr].data("id","master_"+
floorplan_div_Array[cvjs_active_floorplan_div_nr]),cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({id:"master_"+floorplan_div_Array[cvjs_active_floorplan_div_nr]}),cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#0000ff","fill-opacity":"0.3","stroke-width":0}),printDebugFlag?cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#aa0fc0","fill-opacity":"1.0"}):cvjs_masterBackground[cvjs_active_floorplan_div_nr].attr({fill:"#fff","fill-opacity":"0.01","stroke-width":0})}catch(a){console.log("cvjs_legacyBatikPDFtoSVGerror:"+
a)}}
function cvjs_processAddSVGClickHandler(){var a={};jQuery("*[id]").each(function(){var b=jQuery(this).attr("id");a[b]||(a[b]=!0)});for(var b in a)try{var c="#"+b,d=jQuery(c).attr("stroke-width");void 0!=d&&jQuery(c).data("original_stroke_width",d);var e=jQuery(c).attr("style");if(void 0==e)jQuery(c).data("original_stroke","Undefined");else for(var f=e.split(";"),g=0;g<f.length;g++){var h=f[g].split(":");"stroke"==h[0].trim()&&jQuery(c).data("original_stroke",h[1].trim())}jQuery(c).click(function(a){cvjs_SVGfileObjectClicked(jQuery(this).attr("id"),a.pageX,
a.pageY)});jQuery(c).mouseenter(function(a){cvjs_SVGfileObjectMouseEnter(jQuery(this).attr("id"),a.pageX,a.pageY)});jQuery(c).mouseleave(function(a){cvjs_SVGfileObjectMouseLeave(jQuery(this).attr("id"),a.pageX,a.pageY)});jQuery(c).mousemove(function(a){cvjs_SVGfileObjectMouseMove(jQuery(this).attr("id"),a.pageX,a.pageY)})}catch(k){console.log("Err 2: "+k)}}
function cvjs_setUpSpaceObjects(a,b){cvjs_debug&&console.log("6.4.52 NOTE!!!!  cvjs_setUpSpaceObjects "+b);var c="";void 0!=b&&(a=cvjs_rPaper[b],cvjs_active_floorplan_div_nr=b,c=floorplan_div_Array[cvjs_active_floorplan_div_nr]);cvjs_debug&&console.log("cvjs_setUpSpaceObjects here: "+c);floorplan_height=.9*jQuery(window).height();floorplan_width=.9*jQuery(window).width();tip[b]=jQuery("#tip_"+c);tip[b].hide().css("left",floorplan_width).css("top",floorplan_height);var d="",e=null,f=null;try{jQuery.fn.qtip.defaults.show.event=
"click",jQuery.fn.qtip.defaults.hide.event=null}catch(p){}vqBuilding in buildings&&(e=buildings[vqBuilding],vqFloor in e.floors&&(f=e.floors[vqFloor]));layer_cvjs_SpaceObjectsContent[b]=a.g();cvjs_debug&&console.log("NUMBER OF SPACES:"+cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr].length);for(var g in cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr]){a=0;for(bRoom in f.rooms)if(rid=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("node"),bRoom==rid){a=1;e=f.rooms[bRoom].tags;
var h=1,k;for(k in e){for(var l="tag"+h,m=e[k];" "==m.charAt(0);)m=m.substr(1);m=m.replace(/ /gi,"&nbsp;");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data(l,m);h++}cvjs_SpaceObjectsContent[b][g].data("occupancy",f.rooms[bRoom].occupancy);cvjs_SpaceObjectsContent[b][g].data("name",f.rooms[bRoom].name);cvjs_SpaceObjectsContent[b][g].data("type",f.rooms[bRoom].type);cvjs_SpaceObjectsContent[b][g].data("area",f.rooms[bRoom].area);-1==f.rooms[bRoom].id?cvjs_SpaceObjectsContent[b][g].data("id",
rid):cvjs_SpaceObjectsContent[b][g].data("id",f.rooms[bRoom].id);cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("defaultcolor","undefined");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("translate_x","0");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("translate_y","0");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("scale_x","1");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("scale_y","1");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("rotate",
"0");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("transform","");try{cvjs_SpaceObjectsContent[b][g].data("layer",f.rooms[bRoom].layer),cvjs_SpaceObjectsContent[b][g].data("group",f.rooms[bRoom].group),cvjs_SpaceObjectsContent[b][g].data("attributes",f.rooms[bRoom].attributes),cvjs_SpaceObjectsContent[b][g].data("attributeStatus",f.rooms[bRoom].attributeStatus),void 0!=f.rooms[bRoom].linked?cvjs_SpaceObjectsContent[b][g].data("linked",f.rooms[bRoom].linked):cvjs_SpaceObjectsContent[b][g].data("linked",
!1),cvjs_SpaceObjectsContent[b][g].data("handle",f.rooms[bRoom].handle),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("displaySpaceObject",f.rooms[bRoom].displaySpaceObject)}catch(p){console.log(p)}!cvjs_supressPopUpModal||cvjs_standardHighLightColors?-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("defaultcolor").toString().indexOf("undefined")?(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("node"),e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),
jQuery(e).attr(defaultColor)):(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("node"),e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),jQuery(e).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("defaultcolor"))):cvjs_SpaceObjectsContent[b][g].data("linked")?(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("node"),e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),jQuery(e).attr(defaultColor_linked)):(e=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("node"),
e="#"+jQuery('[cvjs\\:node="'+e+'"]').attr("id"),jQuery(e).attr(defaultColor_unlinked));e=f.rooms[bRoom].id.replace(/\./g,"_");cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("id_link",e);e='<table width="100%"><tr><td class="cvjs_modal_header_1" id="cvjs_popupTitleClick_'+e+'">'+f.rooms[bRoom].name+'</td><td class="cvjs_modal_header_info_1"><i id="hideOnlyPop_'+e+'" class="fa fa-times"></i></td></tr><tr><td cols="2"><h4 id="cvjs_modal_header_info_2">'+f.rooms[bRoom].type+"</h4></td></tr></table>";
h=hbody;if(0==cvjs_frontEndHandlerType.indexOf("reactjs")||0==cvjs_frontEndHandlerType.indexOf("vuejs")||0==cvjs_frontEndHandlerType.indexOf("angular"))h=h.replace("my_own_clickmenu1()","my_own_clickmenu1_"+f.rooms[bRoom].id),h=h.replace("my_own_clickmenu2()","my_own_clickmenu2_"+f.rooms[bRoom].id),h=h.replace("cvjs_zoomHere()","cvjs_zoomHere_"+f.rooms[bRoom].id);dual_hbody_flag&&(-1<=parseInt(f.rooms[bRoom].id)?jQuery(cvjs_SpaceObjectsContent[b][g].node).qtip({content:{text:h,title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},
position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}):jQuery(cvjs_SpaceObjectsContent[b][g].node).qtip({content:{text:hbody_2,title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"}));dual_hbody_flag||jQuery(cvjs_SpaceObjectsContent[b][g].node).qtip({content:{text:h,title:e},style:{classes:"qtip-bootstrap qtip-shadow qtip-rounded qtip-zindex"},position:{my:"bottom center",at:"top left"},hideOnHTMLClick:"false"});
cvjs_SpaceObjectsContent[b][g].mousedown(function(a){cvjs_debug&&console.log("G Domousedown"+a.clientX+"  "+document.body.scrollLeft+" "+a.clientY+" "+document.body.scrollTop);vqRoomMouseSelect=!0;cvjs_disableClickDrag||DoMouseDown(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop,b)}).mouseout(function(a){cvjs_leafletJS&&(tip[b]=tip_leafletBase[b]);tip[b].hide();a=findRoom(currentRoomId);if(!vqRoomMouseSelect&&(!cvjs_supressPopUpModal||cvjs_standardHighLightColors))if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor").toString().indexOf("undefined")){var c=
cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node");c="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id");jQuery(c).attr(defaultColor)}else c=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("node"),c="#"+jQuery('[cvjs\\:node="'+c+'"]').attr("id"),jQuery(c).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][a].data("defaultcolor"))}).mousemove(function(a){cvjs_leafletJS&&(tip[b]=tip_leafletBase[b]);currentRoomId=this.data("id");currentRoomName=this.data("name");
if(bMouseDown||bTempMouseDown)DoMouseMove(a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else{var e=findRoom(currentRoomId);if(0<=e&&e!=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&cvjs_location_flag){if(tooltipLast[b]!=cvjs_lastObj[cvjs_active_floorplan_div_nr]&&-1!=tooltipLast[b])if(!cvjs_supressPopUpModal||cvjs_standardHighLightColors)if(-1<cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[b]].data("defaultcolor").toString().indexOf("undefined")){var f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[b]].data("node");
f="#"+jQuery('[cvjs\\:node="'+f+'"]').attr("id");jQuery(f).attr(defaultColor)}else f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[b]].data("node"),f="#"+jQuery('[cvjs\\:node="'+f+'"]').attr("id"),jQuery(f).attr(cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[b]].data("defaultcolor"));else cvjs_SpaceObjectsContent[b][tooltipLast[b]].data("linked")?(f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[b]].data("node"),f="#"+jQuery('[cvjs\\:node="'+
f+'"]').attr("id"),jQuery(f).attr(defaultColor_linked)):(f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][tooltipLast[b]].data("node"),f="#"+jQuery('[cvjs\\:node="'+f+'"]').attr("id"),jQuery(f).attr(defaultColor_unlinked));!cvjs_supressPopUpModal||cvjs_standardHighLightColors?(f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"),f="#"+jQuery('[cvjs\\:node="'+f+'"]').attr("id"),jQuery(f).attr(highlight)):cvjs_SpaceObjectsContent[b][e].data("linked")?(f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"),
f="#"+jQuery('[cvjs\\:node="'+f+'"]').attr("id"),jQuery(f).attr(highlight_linked)):(f=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][e].data("node"),f="#"+jQuery('[cvjs\\:node="'+f+'"]').attr("id"),jQuery(f).attr(highlight_unlinked));tooltipLast[b]=e}d=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");cvjs_customToolTip&&(d=cvjs_displayCustomToolTip(this.data("id")));tip[b].html(d);tip[b].show();e=jQuery("#"+c).position();f=jQuery("#"+c).css("position");
tip[b].css({position:"fixed"});"absolute"==f?tip[b].css("left",a.clientX+document.documentElement.scrollLeft+10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[b].css("left",a.clientX-e.left+document.documentElement.scrollLeft+10).css("top",a.clientY-e.top+document.documentElement.scrollTop-25)}}).mouseup(function(a){cvjs_debug&&console.log(" 6.3.75 mouse up "+bPan);if(bPan)DoMouseUp(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);else try{layer_cvjs_SpaceObjectsContent[b].attr(show),
panWithThumb&&(layers_all.attr(show),layer_thumb.attr(hide))}catch(n){console.log("t5 "+n)}d=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id");cvjs_customToolTip&&(d=cvjs_displayCustomToolTip(this.data("id")));tip[cvjs_active_floorplan_div_nr].html(d);bMouseDown=!1;rid=this.data("id");change_space_fixed_location(rid,cvjs_active_floorplan_div_nr);bPan=!1}).touchstart(function(a){cvjs_debug&&console.log(" 6.3.75 touchstart "+bPan);DoTouchStart(a,a.clientX+document.body.scrollLeft,
a.clientY+document.body.scrollTop)}).touchend(function(a){cvjs_debug&&console.log(" 6.3.75 touchend "+bPan);bPan||locked||(rid=this.data("id"),cvjs_change_space(rid),d=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?this.data("name"):this.data("id"),cvjs_customToolTip&&(d=cvjs_displayCustomToolTip(this.data("id"))),tip[cvjs_active_floorplan_div_nr].html(d));DoTouchEnd(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop);d=!cvjs_supressPopUpModal||cvjs_standardHighLightColors?
this.data("name"):this.data("id");tip[cvjs_active_floorplan_div_nr].html(d);bMouseDown=!1;cvjs_clearDrawing();rid=this.data("id");change_space_fixed_location(rid,cvjs_active_floorplan_div_nr)}).touchmove(function(a){cvjs_debug&&console.log(" 6.4.44 touchmove "+bPan);if(!bPan){var b=jQuery("#"+c).position(),e=jQuery("#"+c).css("position");tip[cvjs_active_floorplan_div_nr].css({position:"fixed"});"absolute"==e?tip[cvjs_active_floorplan_div_nr].css("left",a.clientX+document.documentElement.scrollLeft+
10).css("top",a.clientY+document.documentElement.scrollTop-25):tip[cvjs_active_floorplan_div_nr].css("left",a.clientX-b.left+document.documentElement.scrollLeft+10).css("top",a.clientY-b.top+document.documentElement.scrollTop-25);tip[cvjs_active_floorplan_div_nr].html(d);cvjs_customToolTip&&(d=cvjs_displayCustomToolTip(this.data("id")))}DoTouchMove(a,a.clientX+document.body.scrollLeft,a.clientY+document.body.scrollTop)}).dblclick(function(a){a.preventDefault();a.stopPropagation()})}0==a&&(a=cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("node"),
cvjs_debug&&console.log("room not found "+a),cvjs_SpaceObjectsContent[b][g].data("occupancy","undefined"),cvjs_SpaceObjectsContent[b][g].data("name","undefined"),cvjs_SpaceObjectsContent[b][g].data("type","undefined"),cvjs_SpaceObjectsContent[b][g].data("area",""),cvjs_SpaceObjectsContent[b][g].data("id",a),jQuery(cvjs_SpaceObjectsContent[b][g].node).qtip({title:"Undefined",content:"",placement:"top"}),cvjs_SpaceObjectsContent[b][g].data("layer","undefined"),cvjs_SpaceObjectsContent[b][g].data("group",
"undefined"),cvjs_SpaceObjectsContent[b][g].data("attributes","undefined"),cvjs_SpaceObjectsContent[b][g].data("attributeStatus","undefined"),cvjs_SpaceObjectsContent[b][g].data("linked",!1),cvjs_SpaceObjectsContent[b][g].data("handle",""),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("translate_x","0"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("translate_y","0"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("scale_x","1"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("scale_y",
"1"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("rotate","0"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][g].data("transform",""),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][spc].data("defaultcolor","undefined"),cvjs_SpaceObjectsContent[cvjs_active_floorplan_div_nr][spc].data("displaySpaceObject","on"));layer_cvjs_SpaceObjectsContent[b].add(cvjs_SpaceObjectsContent[b][g])}cvjs_debug&&console.log("  LAYER VQROOMS We have active "+cvjs_active_floorplan_div_nr)}
function cvjs_setRootWidth(a,b){var c=document.querySelector(":root"),d=getComputedStyle(c);window.alert("The value of --tmsMinLineWidth is: "+d.getPropertyValue("--tmsMinLineWidth")+" new "+a);c.style.setProperty("--tmsMinFixedLineWidth",b);window.alert("The value of --tmsMinFixedLineWidth is: "+d.getPropertyValue("--tmsMinFixedLineWidth")+" new "+b);c.style.setProperty("--tmsMinLineWidth",a)};
